---
title: Lista de verificação de escalabilidade
description: Diretrizes de lista de verificação de escalabilidade para questões de design de dimensionamento automático do Azure.
author: dragon119
ms.date: 01/10/2018
ms.custom: checklist
ms.openlocfilehash: c3eaf41a038dbdd963f54d6c7cff8a8a772f8c48
ms.sourcegitcommit: 3d6dba524cc7661740bdbaf43870de7728d60a01
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/11/2018
ms.locfileid: "27766098"
---
# <a name="scalability-checklist"></a><span data-ttu-id="49e61-103">Lista de verificação de escalabilidade</span><span class="sxs-lookup"><span data-stu-id="49e61-103">Scalability checklist</span></span>

<span data-ttu-id="49e61-104">A escalabilidade é a capacidade de um sistema para tratar de aumentos de carga, além de ser um dos [pilares da qualidade de software](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-104">Scalability is the ability of a system to handle increased load, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="49e61-105">Use essa lista de verificação para examinar a arquitetura do aplicativo sob um ponto de vista de escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="49e61-105">Use this checklist to review your application architecture from a scalability standpoint.</span></span> 

## <a name="application-design"></a><span data-ttu-id="49e61-106">Design do aplicativo</span><span class="sxs-lookup"><span data-stu-id="49e61-106">Application design</span></span>

<span data-ttu-id="49e61-107">**Particione a carga de trabalho**.</span><span class="sxs-lookup"><span data-stu-id="49e61-107">**Partition the workload**.</span></span> <span data-ttu-id="49e61-108">Crie partes do processo para serem decompostas e distintas.</span><span class="sxs-lookup"><span data-stu-id="49e61-108">Design parts of the process to be discrete and decomposable.</span></span> <span data-ttu-id="49e61-109">Minimize o tamanho de cada parte seguindo as regras comuns para a separação de preocupações e o princípio da responsabilidade exclusiva.</span><span class="sxs-lookup"><span data-stu-id="49e61-109">Minimize the size of each part, while following the usual rules for separation of concerns and the single responsibility principle.</span></span> <span data-ttu-id="49e61-110">Isso permite que os componentes sejam distribuídos de maneira a maximizar o uso de cada unidade de computação (como um servidor de banco de dados ou uma função).</span><span class="sxs-lookup"><span data-stu-id="49e61-110">This allows the component parts to be distributed in a way that maximizes use of each compute unit (such as a role or database server).</span></span> <span data-ttu-id="49e61-111">Isso também facilita o dimensionamento do aplicativo ao adicionar instâncias de recursos específicos.</span><span class="sxs-lookup"><span data-stu-id="49e61-111">It also makes it easier to scale the application by adding instances of specific resources.</span></span> <span data-ttu-id="49e61-112">Para domínios complexos, considere a possibilidade de adotar uma [arquitetura de microsserviços](..//guide/architecture-styles/microservices.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-112">For complex domains, consider adopting a [microservices architecture](..//guide/architecture-styles/microservices.md).</span></span>

<span data-ttu-id="49e61-113">**Projete o dimensionamento**.</span><span class="sxs-lookup"><span data-stu-id="49e61-113">**Design for scaling**.</span></span> <span data-ttu-id="49e61-114">O dimensionamento permite que os aplicativos reajam a uma carga variável, aumentando e diminuindo o número de instâncias de funções, de filas e de outros serviços usados.</span><span class="sxs-lookup"><span data-stu-id="49e61-114">Scaling allows applications to react to variable load by increasing and decreasing the number of instances of roles, queues, and other services they use.</span></span> <span data-ttu-id="49e61-115">No entanto, o aplicativo deve ser projetado com isso em mente.</span><span class="sxs-lookup"><span data-stu-id="49e61-115">However, the application must be designed with this in mind.</span></span> <span data-ttu-id="49e61-116">Por exemplo, o aplicativo e os serviços usados não devem possuir um estado para permitir que as solicitações sejam roteadas para qualquer instância.</span><span class="sxs-lookup"><span data-stu-id="49e61-116">For example, the application and the services it uses must be stateless, to allow requests to be routed to any instance.</span></span> <span data-ttu-id="49e61-117">Isso também impede que a adição ou a remoção de instâncias específicas afetem negativamente os usuários atuais.</span><span class="sxs-lookup"><span data-stu-id="49e61-117">This also prevents the addition or removal of specific instances from adversely impacting current users.</span></span> <span data-ttu-id="49e61-118">Você também deve implementar a configuração ou a detecção automática de instâncias à medida que elas forem adicionadas e removidas de forma que o código no aplicativo possa executar o roteamento necessário.</span><span class="sxs-lookup"><span data-stu-id="49e61-118">You should also implement configuration or auto-detection of instances as they are added and removed, so that code in the application can perform the necessary routing.</span></span> <span data-ttu-id="49e61-119">Por exemplo, um aplicativo Web pode usar um conjunto de filas em uma abordagem de round-robin para rotear solicitações para serviços em segundo plano em execução nas funções de trabalho.</span><span class="sxs-lookup"><span data-stu-id="49e61-119">For example, a web application might use a set of queues in a round-robin approach to route requests to background services running in worker roles.</span></span> <span data-ttu-id="49e61-120">O aplicativo Web deve ser capaz de detectar alterações no número de filas para rotear solicitações e balancear a carga no aplicativo com êxito.</span><span class="sxs-lookup"><span data-stu-id="49e61-120">The web application must be able to detect changes in the number of queues, to successfully route requests and balance the load on the application.</span></span>

<span data-ttu-id="49e61-121">**Dimensione como uma unidade**.</span><span class="sxs-lookup"><span data-stu-id="49e61-121">**Scale as a unit**.</span></span> <span data-ttu-id="49e61-122">Planeje os recursos adicionais para acomodar o crescimento.</span><span class="sxs-lookup"><span data-stu-id="49e61-122">Plan for additional resources to accommodate growth.</span></span> <span data-ttu-id="49e61-123">Para cada recurso, saiba quais são os limites de dimensionamento superiores e use a fragmentação ou a decomposição para ir além desses limites.</span><span class="sxs-lookup"><span data-stu-id="49e61-123">For each resource, know the upper scaling limits, and use sharding or decomposition to go beyond these limits.</span></span> <span data-ttu-id="49e61-124">Determine as unidades de escala para o sistema em termos de conjuntos bem definidos de recursos.</span><span class="sxs-lookup"><span data-stu-id="49e61-124">Determine the scale units for the system in terms of well-defined sets of resources.</span></span> <span data-ttu-id="49e61-125">Isso torna a aplicação de operações de escalonamento horizontal mais fácil e menos propensa a um impacto negativo no aplicativo pelas limitações impostas por falta de recursos em alguma parte do sistema geral.</span><span class="sxs-lookup"><span data-stu-id="49e61-125">This makes applying scale-out operations easier, and less prone to negative impact on the application through limitations imposed by lack of resources in some part of the overall system.</span></span> <span data-ttu-id="49e61-126">Por exemplo, a adição de um número x de funções Web e de trabalho pode exigir um número y de filas adicionais e um número z de contas de armazenamento para lidar com a carga de trabalho extra gerada pelas funções.</span><span class="sxs-lookup"><span data-stu-id="49e61-126">For example, adding x number of web and worker roles might require y number of additional queues and z number of storage accounts to handle the additional workload generated by the roles.</span></span> <span data-ttu-id="49e61-127">Assim, uma unidade de escala poderia consistir em x funções web e de trabalho, *y* filas e *z* contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="49e61-127">So a scale unit could consist of x web and worker roles, *y* queues, and *z* storage accounts.</span></span> <span data-ttu-id="49e61-128">Crie o aplicativo para que ele seja facilmente dimensionado com a adição de uma ou mais unidades de escala.</span><span class="sxs-lookup"><span data-stu-id="49e61-128">Design the application so that it's easily scaled by adding one or more scale units.</span></span>

<span data-ttu-id="49e61-129">**Evite a afinidade do cliente**.</span><span class="sxs-lookup"><span data-stu-id="49e61-129">**Avoid client affinity**.</span></span> <span data-ttu-id="49e61-130">Sempre que possível, verifique se o aplicativo não requer afinidade.</span><span class="sxs-lookup"><span data-stu-id="49e61-130">Where possible, ensure that the application does not require affinity.</span></span> <span data-ttu-id="49e61-131">As solicitações, portanto, podem ser roteadas para qualquer instância e o número de instâncias é irrelevante.</span><span class="sxs-lookup"><span data-stu-id="49e61-131">Requests can thus be routed to any instance, and the number of instances is irrelevant.</span></span> <span data-ttu-id="49e61-132">Isso também evita a sobrecarga de armazenamento, de recuperação e de manutenção de informações de estado para cada usuário.</span><span class="sxs-lookup"><span data-stu-id="49e61-132">This also avoids the overhead of storing, retrieving, and maintaining state information for each user.</span></span>

<span data-ttu-id="49e61-133">**Aproveite os recursos de dimensionamento automático de plataforma**.</span><span class="sxs-lookup"><span data-stu-id="49e61-133">**Take advantage of platform autoscaling features**.</span></span> <span data-ttu-id="49e61-134">Quando a plataforma de hospedagem der suporte a uma capacidade de dimensionamento automático, como o Dimensionamento Automático do Azure, dê preferência a ele em vez de a mecanismos personalizados ou de terceiros, a menos que o mecanismo interno não atenda aos seus requisitos.</span><span class="sxs-lookup"><span data-stu-id="49e61-134">Where the hosting platform supports an autoscaling capability, such as Azure Autoscale, prefer it to custom or third-party mechanisms unless the built-in mechanism can't fulfill your requirements.</span></span> <span data-ttu-id="49e61-135">Use regras de dimensionamento agendadas quando possível para garantir que os recursos estejam disponíveis sem um atraso de inicialização, mas adicione o dimensionamento automático reativo às regras onde for apropriado para lidar com alterações inesperadas na demanda.</span><span class="sxs-lookup"><span data-stu-id="49e61-135">Use scheduled scaling rules where possible to ensure resources are available without a start-up delay, but add reactive autoscaling to the rules where appropriate to cope with unexpected changes in demand.</span></span> <span data-ttu-id="49e61-136">Você pode usar as operações de dimensionamento automático na API de Gerenciamento de Serviços para ajustar o dimensionamento automático e adicionar contadores personalizados às regras.</span><span class="sxs-lookup"><span data-stu-id="49e61-136">You can use the autoscaling operations in the Service Management API to adjust autoscaling, and to add custom counters to rules.</span></span> <span data-ttu-id="49e61-137">Para saber mais, confira [Diretrizes de dimensionamento automático](../best-practices/auto-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-137">For more information, see [Auto-scaling guidance](../best-practices/auto-scaling.md).</span></span>

<span data-ttu-id="49e61-138">**Descarregue tarefas intensivas de CPU/ES como tarefas de segundo plano**.</span><span class="sxs-lookup"><span data-stu-id="49e61-138">**Offload intensive CPU/IO tasks as background tasks**.</span></span> <span data-ttu-id="49e61-139">Se for esperado que uma solicitação para um serviço demore muito tempo para ser executada ou absorva recursos consideráveis, o descarregamento do processamento dessa solicitação será uma tarefa separada.</span><span class="sxs-lookup"><span data-stu-id="49e61-139">If a request to a service is expected to take a long time to run or absorb considerable resources, offload the processing for this request to a separate task.</span></span> <span data-ttu-id="49e61-140">Use funções de trabalho ou trabalhos em segundo plano (dependendo da plataforma de hospedagem) para executar essas tarefas.</span><span class="sxs-lookup"><span data-stu-id="49e61-140">Use worker roles or background jobs (depending on the hosting platform) to execute these tasks.</span></span> <span data-ttu-id="49e61-141">Essa estratégia permite que o serviço continue a receber outras solicitações e permaneça responsivo.</span><span class="sxs-lookup"><span data-stu-id="49e61-141">This strategy enables the service to continue receiving further requests and remain responsive.</span></span>  <span data-ttu-id="49e61-142">Para saber mais, consulte [Diretrizes de trabalhos em segundo plano](../best-practices/background-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-142">For more information, see [Background jobs guidance](../best-practices/background-jobs.md).</span></span>

<span data-ttu-id="49e61-143">**Distribua a carga de trabalho para tarefas em segundo plano**.</span><span class="sxs-lookup"><span data-stu-id="49e61-143">**Distribute the workload for background tasks**.</span></span> <span data-ttu-id="49e61-144">Quando houver muitas tarefas em segundo plano, ou quando as tarefas exigirem um tempo ou recursos consideráveis, distribua o trabalho em várias unidades de computação (como funções de trabalho ou trabalhos em segundo plano).</span><span class="sxs-lookup"><span data-stu-id="49e61-144">Where there are many background tasks, or the tasks require considerable time or resources, spread the work across multiple compute units (such as worker roles or background jobs).</span></span> <span data-ttu-id="49e61-145">Para ver uma possível solução, confira [Padrão de Clientes Concorrentes](https://msdn.microsoft.com/library/dn568101.aspx).</span><span class="sxs-lookup"><span data-stu-id="49e61-145">For one possible solution, see the [Competing Consumers Pattern](https://msdn.microsoft.com/library/dn568101.aspx).</span></span>

<span data-ttu-id="49e61-146">**Considere mudar para uma arquitetura de *nada* compartilhado**.</span><span class="sxs-lookup"><span data-stu-id="49e61-146">**Consider moving towards a *shared-nothing* architecture**.</span></span> <span data-ttu-id="49e61-147">Uma arquitetura de nada compartilhado usa nós independentes e autossuficientes sem um ponto único de contenção (como serviços compartilhados ou armazenamento).</span><span class="sxs-lookup"><span data-stu-id="49e61-147">A shared-nothing architecture uses independent, self-sufficient nodes that have no single point of contention (such as shared services or storage).</span></span> <span data-ttu-id="49e61-148">Em tese, esse sistema pode ser dimensionado quase indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="49e61-148">In theory, such a system can scale almost indefinitely.</span></span> <span data-ttu-id="49e61-149">Embora uma abordagem completa de nada compartilhado geralmente não seja prática para a maioria dos aplicativos, ela pode fornecer oportunidades de projetar uma escalabilidade melhor.</span><span class="sxs-lookup"><span data-stu-id="49e61-149">While a fully shared-nothing approach is generally not practical for most applications, it may provide opportunities to design for better scalability.</span></span> <span data-ttu-id="49e61-150">Por exemplo, evitar o uso do estado de sessão do servidor, afinidade de cliente e particionamento de dados são bons exemplos de transição para uma arquitetura de nada compartilhado.</span><span class="sxs-lookup"><span data-stu-id="49e61-150">For example, avoiding the use of server-side session state, client affinity, and data partitioning are good examples of moving towards a shared-nothing architecture.</span></span>

## <a name="data-management"></a><span data-ttu-id="49e61-151">Gerenciamento de dados</span><span class="sxs-lookup"><span data-stu-id="49e61-151">Data management</span></span>

<span data-ttu-id="49e61-152">**Use o particionamento de dados**.</span><span class="sxs-lookup"><span data-stu-id="49e61-152">**Use data partitioning**.</span></span> <span data-ttu-id="49e61-153">Divida os dados em vários bancos de dados e servidores de banco de dados ou projete o aplicativo para usar os serviços de armazenamento de dados que podem fornecer esse particionamento de modo transparente (exemplos: Banco de dados Elástico do Banco de Dados SQL do Azure e Armazenamento de Tabelas do Azure).</span><span class="sxs-lookup"><span data-stu-id="49e61-153">Divide the data across multiple databases and database servers, or design the application to use data storage services that can provide this partitioning transparently (examples include Azure SQL Database Elastic Database, and Azure Table storage).</span></span> <span data-ttu-id="49e61-154">Esta abordagem pode ajudar a maximizar o desempenho e permitir o dimensionamento mais fácil.</span><span class="sxs-lookup"><span data-stu-id="49e61-154">This approach can help to maximize performance and allow easier scaling.</span></span> <span data-ttu-id="49e61-155">Há diferentes técnicas de particionamento, como horizontal, vertical e funcional.</span><span class="sxs-lookup"><span data-stu-id="49e61-155">There are different partitioning techniques, such as horizontal, vertical, and functional.</span></span> <span data-ttu-id="49e61-156">Você pode usar uma combinação delas para tirar o máximo proveito dessas técnicas com o aumento do desempenho de consultas, escalabilidade mais simples, gerenciamento mais flexível, melhor disponibilidade e para corresponder o tipo de repositório aos dados que serão armazenados.</span><span class="sxs-lookup"><span data-stu-id="49e61-156">You can use a combination of these to achieve maximum benefit from increased query performance, simpler scalability, more flexible management, better availability, and to match the type of store to the data it will hold.</span></span> <span data-ttu-id="49e61-157">Além disso, considere usar tipos diferentes de repositórios de dados para diferentes tipos de dados, escolhendo os tipos com base em como eles são otimizados para o tipo de dados específico.</span><span class="sxs-lookup"><span data-stu-id="49e61-157">Also, consider using different types of data store for different types of data, choosing the types based on how well they are optimized for the specific type of data.</span></span> <span data-ttu-id="49e61-158">Isso pode incluir usar o armazenamento de tabelas, um banco de dados do documento ou um repositório de dados familiar em coluna, em vez de ou além de um banco de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="49e61-158">This may include using table storage, a document database, or a column-family data store, instead of, or as well as, a relational database.</span></span> <span data-ttu-id="49e61-159">Para saber mais, consulte [Diretrizes de particionamento de dados](../best-practices/data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-159">For more information, see [Data partitioning guidance](../best-practices/data-partitioning.md).</span></span>

<span data-ttu-id="49e61-160">**Projete para consistência eventual**.</span><span class="sxs-lookup"><span data-stu-id="49e61-160">**Design for eventual consistency**.</span></span> <span data-ttu-id="49e61-161">A consistência eventual melhora a escalabilidade ao reduzir ou remover o tempo necessário para sincronizar dados relacionados particionados em vários repositórios.</span><span class="sxs-lookup"><span data-stu-id="49e61-161">Eventual consistency improves scalability by reducing or removing the time needed to synchronize related data partitioned across multiple stores.</span></span> <span data-ttu-id="49e61-162">O custo disso é que os dados nem sempre são consistentes quando lidos e algumas operações de gravação podem causar conflitos.</span><span class="sxs-lookup"><span data-stu-id="49e61-162">The cost is that data is not always consistent when it is read, and some write operations may cause conflicts.</span></span> <span data-ttu-id="49e61-163">A consistência eventual é ideal para situações em que os mesmos dados são lidos com frequência, mas gravados raramente.</span><span class="sxs-lookup"><span data-stu-id="49e61-163">Eventual consistency is ideal for situations where the same data is read frequently but written infrequently.</span></span> <span data-ttu-id="49e61-164">Para saber mais, confira [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx).</span><span class="sxs-lookup"><span data-stu-id="49e61-164">For more information, see the [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx).</span></span>

<span data-ttu-id="49e61-165">**Reduza as interações verborrágicas entre componentes e serviços**.</span><span class="sxs-lookup"><span data-stu-id="49e61-165">**Reduce chatty interactions between components and services**.</span></span> <span data-ttu-id="49e61-166">Evite criar interfaces verborrágicas em que um aplicativo precisa fazer várias chamadas para um serviço (cada uma delas retorna uma pequena quantidade de dados), em vez de uma única chamada que pode retornar todos os dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-166">Avoid designing interactions in which an application is required to make multiple calls to a service (each of which returns a small amount of data), rather than a single call that can return all of the data.</span></span> <span data-ttu-id="49e61-167">Sempre que possível, combine várias operações relacionadas em uma única solicitação quando a chamada é para um serviço ou componente que tem latência perceptível.</span><span class="sxs-lookup"><span data-stu-id="49e61-167">Where possible, combine several related operations into a single request when the call is to a service or component that has noticeable latency.</span></span> <span data-ttu-id="49e61-168">Isso facilita o monitoramento do desempenho e otimiza operações complexas.</span><span class="sxs-lookup"><span data-stu-id="49e61-168">This makes it easier to monitor performance and optimize complex operations.</span></span> <span data-ttu-id="49e61-169">Por exemplo, use procedimentos armazenados em bancos de dados para encapsular a lógica complexa e reduzir o número de viagens de ida e volta e o bloqueio de recursos.</span><span class="sxs-lookup"><span data-stu-id="49e61-169">For example, use stored procedures in databases to encapsulate complex logic, and reduce the number of round trips and resource locking.</span></span>

<span data-ttu-id="49e61-170">**Use filas para nivelar a carga de gravações de dados de alta velocidade**.</span><span class="sxs-lookup"><span data-stu-id="49e61-170">**Use queues to level the load for high velocity data writes**.</span></span> <span data-ttu-id="49e61-171">Aumentos na demanda por um serviço podem sobrecarregar o serviço e causar falhas cada vez maiores.</span><span class="sxs-lookup"><span data-stu-id="49e61-171">Surges in demand for a service can overwhelm that service and cause escalating failures.</span></span> <span data-ttu-id="49e61-172">Para evitar isso, considere implementar o [Padrão de Nivelamento de Carga Baseado em Fila](https://msdn.microsoft.com/library/dn589783.aspx).</span><span class="sxs-lookup"><span data-stu-id="49e61-172">To prevent this, consider implementing the [Queue-Based Load Leveling Pattern](https://msdn.microsoft.com/library/dn589783.aspx).</span></span> <span data-ttu-id="49e61-173">Use uma fila que age como um buffer entre uma tarefa e um serviço chamado.</span><span class="sxs-lookup"><span data-stu-id="49e61-173">Use a queue that acts as a buffer between a task and a service that it invokes.</span></span> <span data-ttu-id="49e61-174">Isso pode atenuar cargas pesadas intermitentes que, de outra forma, poderiam causar falha no serviço ou atingir o tempo limite da tarefa.</span><span class="sxs-lookup"><span data-stu-id="49e61-174">This can smooth intermittent heavy loads that may otherwise cause the service to fail or the task to time out.</span></span>

<span data-ttu-id="49e61-175">**Minimize a carga no repositório de dados**.</span><span class="sxs-lookup"><span data-stu-id="49e61-175">**Minimize the load on the data store**.</span></span> <span data-ttu-id="49e61-176">O repositório de dados é geralmente um gargalo de processamento, um recurso caro e nem sempre é fácil de escalar horizontalmente. Sempre que possível, remova a lógica (como o processamento de documentos XML ou objetos JSON) do repositório de dados e execute o processamento no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-176">The data store is commonly a processing bottleneck, a costly resource, and often not easy to scale out. Where possible, remove logic (such as processing XML documents or JSON objects) from the data store, and perform processing within the application.</span></span> <span data-ttu-id="49e61-177">Por exemplo, em vez de passar XML ao banco de dados (diferente de uma cadeia de caracteres opaca para armazenamento) serialize ou desserialize o XML dentro da camada de aplicativo e passe-o em um formato nativo para o repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-177">For example, instead of passing XML to the database (other than as an opaque string for storage), serialize or deserialize the XML within the application layer and pass it in a form that is native to the data store.</span></span> <span data-ttu-id="49e61-178">Em geral, é mais fácil escalar horizontalmente o aplicativo do que o repositório de dados; portanto, você deve tentar fazer o máximo de processamento intensivo de computação dentro do aplicativo possível.</span><span class="sxs-lookup"><span data-stu-id="49e61-178">It's typically much easier to scale out the application than the data store, so you should attempt to do as much of the compute-intensive processing as possible within the application.</span></span>

<span data-ttu-id="49e61-179">**Minimize o volume de dados recuperados**.</span><span class="sxs-lookup"><span data-stu-id="49e61-179">**Minimize the volume of data retrieved**.</span></span> <span data-ttu-id="49e61-180">Recupere somente os dados de que você precisa especificando colunas e usando critérios para selecionar linhas.</span><span class="sxs-lookup"><span data-stu-id="49e61-180">Retrieve only the data you require by specifying columns and using criteria to select rows.</span></span> <span data-ttu-id="49e61-181">Use parâmetros de valor de tabela e o nível de isolamento apropriado.</span><span class="sxs-lookup"><span data-stu-id="49e61-181">Make use of table value parameters and the appropriate isolation level.</span></span> <span data-ttu-id="49e61-182">Use mecanismos, como marcas da entidade, para evitar a recuperação de dados desnecessariamente.</span><span class="sxs-lookup"><span data-stu-id="49e61-182">Use mechanisms like entity tags to avoid retrieving data unnecessarily.</span></span>

<span data-ttu-id="49e61-183">**Use o caching de forma agressiva**.</span><span class="sxs-lookup"><span data-stu-id="49e61-183">**Aggressively use caching**.</span></span> <span data-ttu-id="49e61-184">Use o caching sempre que possível para reduzir a carga sobre recursos e serviços que geram ou entregam dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-184">Use caching wherever possible to reduce the load on resources and services that generate or deliver data.</span></span> <span data-ttu-id="49e61-185">O caching normalmente é adequado para dados relativamente estáticos ou que requerem processamento considerável para ser obtidos.</span><span class="sxs-lookup"><span data-stu-id="49e61-185">Caching is typically suited to data that is relatively static, or that requires considerable processing to obtain.</span></span> <span data-ttu-id="49e61-186">O caching deve ocorrer em todos os níveis, quando apropriado, em cada camada do aplicativo, incluindo acesso a dados e a geração de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="49e61-186">Caching should occur at all levels where appropriate in each layer of the application, including data access and user interface generation.</span></span> <span data-ttu-id="49e61-187">Para saber mais, consulte [Diretrizes de caching](../best-practices/caching.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-187">For more information, see the [Caching Guidance](../best-practices/caching.md).</span></span>

<span data-ttu-id="49e61-188">**Lide com o crescimento e a retenção de dados**.</span><span class="sxs-lookup"><span data-stu-id="49e61-188">**Handle data growth and retention**.</span></span> <span data-ttu-id="49e61-189">A quantidade de dados armazenados por um aplicativo aumenta ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="49e61-189">The amount of data stored by an application grows over time.</span></span> <span data-ttu-id="49e61-190">Esse crescimento aumenta os custos de armazenamento e a latência ao acessar os dados, o que afeta o desempenho e a produtividade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-190">This growth increases storage costs, and increases latency when accessing the data — which affects application throughput and performance.</span></span> <span data-ttu-id="49e61-191">É possível arquivar periodicamente alguns dos dados antigos que não são mais acessados ou mover dados raramente acessados para o armazenamento de longo prazo, que é mais econômico até mesmo do que a latência de acesso é superior.</span><span class="sxs-lookup"><span data-stu-id="49e61-191">It may be possible to periodically archive some of the old data that is no longer accessed, or move data that is rarely accessed into long-term storage that is more cost efficient, even if the access latency is higher.</span></span>

<span data-ttu-id="49e61-192">**Otimize DTOs (Data Transfer Objects, Objetos de Transferência de Dados) usando um formato binário eficiente**.</span><span class="sxs-lookup"><span data-stu-id="49e61-192">**Optimize Data Transfer Objects (DTOs) using an efficient binary format**.</span></span> <span data-ttu-id="49e61-193">Os DTOs são passados diversas vezes entre as camadas de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-193">DTOs are passed between the layers of an application many times.</span></span> <span data-ttu-id="49e61-194">A minimização do tamanho reduz a carga sobre os recursos e a rede.</span><span class="sxs-lookup"><span data-stu-id="49e61-194">Minimizing the size reduces the load on resources and the network.</span></span> <span data-ttu-id="49e61-195">No entanto, equilibre a economia com a sobrecarga de converter os dados para o formato necessário em cada local onde ele é usado.</span><span class="sxs-lookup"><span data-stu-id="49e61-195">However, balance the savings with the overhead of converting the data to the required format in each location where it is used.</span></span> <span data-ttu-id="49e61-196">Adote um formato que tenha o máximo de interoperabilidade para permitir que um componente seja reutilizado facilmente.</span><span class="sxs-lookup"><span data-stu-id="49e61-196">Adopt a format that has the maximum interoperability to enable easy reuse of a component.</span></span>

<span data-ttu-id="49e61-197">**Defina o controle de cache**.</span><span class="sxs-lookup"><span data-stu-id="49e61-197">**Set cache control**.</span></span> <span data-ttu-id="49e61-198">Crie e configure o aplicativo para usar o caching de saída ou caching de fragmento sempre que possível para minimizar a carga de processamento.</span><span class="sxs-lookup"><span data-stu-id="49e61-198">Design and configure the application to use output caching or fragment caching where possible, to minimize processing load.</span></span>

<span data-ttu-id="49e61-199">**Habilite o caching do cliente**.</span><span class="sxs-lookup"><span data-stu-id="49e61-199">**Enable client side caching**.</span></span> <span data-ttu-id="49e61-200">Os aplicativos Web devem habilitar as configurações de cache no conteúdo que podem ser armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="49e61-200">Web applications should enable cache settings on the content that can be cached.</span></span> <span data-ttu-id="49e61-201">Normalmente, isso está desabilitado por padrão.</span><span class="sxs-lookup"><span data-stu-id="49e61-201">This is commonly disabled by default.</span></span> <span data-ttu-id="49e61-202">Configure o servidor para fornecer os cabeçalhos de controle de cache apropriados para habilitar o caching de conteúdo em clientes e servidores proxy.</span><span class="sxs-lookup"><span data-stu-id="49e61-202">Configure the server to deliver the appropriate cache control headers to enable caching of content on proxy servers and clients.</span></span>

<span data-ttu-id="49e61-203">**Use o Armazenamento de Blobs do Azure e a Rede de Distribuição de Conteúdo do Azure para reduzir a carga no aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="49e61-203">**Use Azure blob storage and the Azure Content Delivery Network to reduce the load on the application**.</span></span> <span data-ttu-id="49e61-204">Considere armazenar conteúdo público estático ou relativamente estático, como imagens, recursos, scripts e folhas de estilo no armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="49e61-204">Consider storing static or relatively static public content, such as images, resources, scripts, and style sheets, in blob storage.</span></span> <span data-ttu-id="49e61-205">Essa abordagem reduz a aplicação da carga causada pela geração dinâmica desse conteúdo para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="49e61-205">This approach relieves the application of the load caused by dynamically generating this content for each request.</span></span> <span data-ttu-id="49e61-206">Além disso, considere o uso da Rede de Distribuição de Conteúdo para armazenar em cache esse conteúdo e entregá-lo aos clientes.</span><span class="sxs-lookup"><span data-stu-id="49e61-206">Additionally, consider using the Content Delivery Network to cache this content and deliver it to clients.</span></span> <span data-ttu-id="49e61-207">O uso da Rede de Distribuição de Conteúdo pode melhorar o desempenho no cliente porque o conteúdo é distribuído do datacenter geograficamente mais próximo que contém um cache de Rede de Distribuição de Conteúdo.</span><span class="sxs-lookup"><span data-stu-id="49e61-207">Using the Content Delivery Network can improve performance at the client because the content is delivered from the geographically closest datacenter that contains a Content Delivery Network cache.</span></span> <span data-ttu-id="49e61-208">Para saber mais, confira a [Diretriz da Rede de Distribuição de Conteúdo](../best-practices/cdn.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-208">For more information, see the [Content Delivery Network Guidance](../best-practices/cdn.md).</span></span>

<span data-ttu-id="49e61-209">**Otimize e ajuste consultas e índices SQL**.</span><span class="sxs-lookup"><span data-stu-id="49e61-209">**Optimize and tune SQL queries and indexes**.</span></span> <span data-ttu-id="49e61-210">Algumas instruções ou construções T-SQL podem ter um impacto no desempenho que pode ser reduzido otimizando-se o código em um procedimento armazenado.</span><span class="sxs-lookup"><span data-stu-id="49e61-210">Some T-SQL statements or constructs may have an impact on performance that can be reduced by optimizing the code in a stored procedure.</span></span> <span data-ttu-id="49e61-211">Por exemplo, evite a conversão de tipos **datetime** em **varchar** antes de comparar com um valor literal **datetime**.</span><span class="sxs-lookup"><span data-stu-id="49e61-211">For example, avoid converting **datetime** types to a **varchar** before comparing with a **datetime** literal value.</span></span> <span data-ttu-id="49e61-212">Em vez disso, use funções de comparação de data/hora.</span><span class="sxs-lookup"><span data-stu-id="49e61-212">Use date/time comparison functions instead.</span></span> <span data-ttu-id="49e61-213">A falta de índices adequados pode tornar a execução da consulta lenta.</span><span class="sxs-lookup"><span data-stu-id="49e61-213">Lack of appropriate indexes can also slow query execution.</span></span> <span data-ttu-id="49e61-214">Se você usar uma estrutura de objeto/mapeamento relacional, entenda como ela funciona e como pode afetar o desempenho da camada de acesso aos dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-214">If you use an object/relational mapping framework, understand how it works and how it may affect performance of the data access layer.</span></span> <span data-ttu-id="49e61-215">Para saber mais, consulte [Ajuste de consulta](https://technet.microsoft.com/library/ms176005.aspx).</span><span class="sxs-lookup"><span data-stu-id="49e61-215">For more information, see [Query Tuning](https://technet.microsoft.com/library/ms176005.aspx).</span></span>

<span data-ttu-id="49e61-216">**Considere cancelar a normalização dos dados**.</span><span class="sxs-lookup"><span data-stu-id="49e61-216">**Consider de-normalizing data**.</span></span> <span data-ttu-id="49e61-217">A normalização dos dados ajuda a evitar a duplicação e inconsistência.</span><span class="sxs-lookup"><span data-stu-id="49e61-217">Data normalization helps to avoid duplication and inconsistency.</span></span> <span data-ttu-id="49e61-218">No entanto, manter vários índices, procurar a integridade referencial, executar vários acessos a pequenos fragmentos de dados e unir tabelas para remontar os dados impõe uma sobrecarga que pode afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="49e61-218">However, maintaining multiple indexes, checking for referential integrity, performing multiple accesses to small chunks of data, and joining tables to reassemble the data imposes an overhead that can affect performance.</span></span> <span data-ttu-id="49e61-219">Considere se alguns volumes de armazenamento adicionais e a duplicação são aceitáveis para reduzir a carga no repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-219">Consider if some additional storage volume and duplication is acceptable in order to reduce the load on the data store.</span></span> <span data-ttu-id="49e61-220">Além disso, considere se o aplicativo em si (que normalmente é mais fácil de dimensionar) pode ser confiável para assumir o controle de tarefas, como gerenciar a integridade referencial para reduzir a carga no armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="49e61-220">Also, consider if the application itself (which is typically easier to scale) can be relied upon to take over tasks such as managing referential integrity in order to reduce the load on the data store.</span></span> <span data-ttu-id="49e61-221">Para saber mais, consulte [Diretrizes de particionamento de dados](../best-practices/data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="49e61-221">For more information, see [Data partitioning guidance](../best-practices/data-partitioning.md).</span></span>

## <a name="implementation"></a><span data-ttu-id="49e61-222">Implementação</span><span class="sxs-lookup"><span data-stu-id="49e61-222">Implementation</span></span>

<span data-ttu-id="49e61-223">**Examinar os antipadrões de desempenho**.</span><span class="sxs-lookup"><span data-stu-id="49e61-223">**Review the performance antipatterns**.</span></span> <span data-ttu-id="49e61-224">Consulte [Antipadrão de desempenho para aplicativos de nuvem](../antipatterns/index.md) para ver práticas comuns que podem causar problemas de escalabilidade quando um aplicativo estiver sob pressão.</span><span class="sxs-lookup"><span data-stu-id="49e61-224">See [Performance antipatterns for cloud applications](../antipatterns/index.md) for common practices that are likely to cause scalability problems when an application is under pressure.</span></span>

<span data-ttu-id="49e61-225">**Use chamadas assíncronas**.</span><span class="sxs-lookup"><span data-stu-id="49e61-225">**Use asynchronous calls**.</span></span> <span data-ttu-id="49e61-226">Sempre que possível, use o código assíncrono ao acessar recursos ou serviços que podem ser limitados por E/S ou largura de banda de rede, ou que tenham uma latência perceptível, para evitar o bloqueio do thread de chamada.</span><span class="sxs-lookup"><span data-stu-id="49e61-226">Use asynchronous code wherever possible when accessing resources or services that may be limited by I/O or network bandwidth, or that have a noticeable latency, in order to avoid locking the calling thread.</span></span> 

<span data-ttu-id="49e61-227">**Evite o bloqueio de recursos e use uma abordagem otimista**.</span><span class="sxs-lookup"><span data-stu-id="49e61-227">**Avoid locking resources, and use an optimistic approach instead**.</span></span> <span data-ttu-id="49e61-228">Nunca bloqueie o acesso a recursos como armazenamento ou outros serviços que tenham latência perceptível, pois essa é a causa principal de mau desempenho.</span><span class="sxs-lookup"><span data-stu-id="49e61-228">Never lock access to resources such as storage or other services that have noticeable latency, because this is a primary cause of poor performance.</span></span> <span data-ttu-id="49e61-229">Sempre use abordagens otimistas para gerenciar operações simultâneas, como gravar no armazenamento</span><span class="sxs-lookup"><span data-stu-id="49e61-229">Always use optimistic approaches to managing concurrent operations, such as writing to storage.</span></span> <span data-ttu-id="49e61-230">Use recursos da camada de armazenamento para gerenciar conflitos.</span><span class="sxs-lookup"><span data-stu-id="49e61-230">Use features of the storage layer to manage conflicts.</span></span> <span data-ttu-id="49e61-231">Em aplicativos distribuídos, os dados só podem ser eventualmente consistentes.</span><span class="sxs-lookup"><span data-stu-id="49e61-231">In distributed applications, data may be only eventually consistent.</span></span>

<span data-ttu-id="49e61-232">**Faça a compactação de dados altamente compactáveis em redes de baixa largura de banda e alta latência**.</span><span class="sxs-lookup"><span data-stu-id="49e61-232">**Compress highly compressible data over high latency, low bandwidth networks**.</span></span> <span data-ttu-id="49e61-233">Na maioria dos casos, em um aplicativo Web, o maior volume de dados gerados pelo aplicativo e passado pela rede é constituído de respostas HTTP para solicitações do cliente.</span><span class="sxs-lookup"><span data-stu-id="49e61-233">In the majority of cases in a web application, the largest volume of data generated by the application and passed over the network is HTTP responses to client requests.</span></span> <span data-ttu-id="49e61-234">A compactação HTTP pode reduzir isso consideravelmente, em especial para conteúdo estático.</span><span class="sxs-lookup"><span data-stu-id="49e61-234">HTTP compression can reduce this considerably, especially for static content.</span></span> <span data-ttu-id="49e61-235">Isso pode reduzir custos e a carga na rede, embora a compactação de conteúdo dinâmico aplique uma carga ligeiramente maior ao servidor.</span><span class="sxs-lookup"><span data-stu-id="49e61-235">This can reduce cost as well as reducing the load on the network, though compressing dynamic content does apply a fractionally higher load on the server.</span></span> <span data-ttu-id="49e61-236">Em outros ambientes mais generalizados, a compactação de dados pode reduzir o volume de dados transmitidos para minimizar o tempo e os custos de transferência, mas adiciona uma sobrecarga aos processos de compactação e descompactação.</span><span class="sxs-lookup"><span data-stu-id="49e61-236">In other, more generalized environments, data compression can reduce the volume of data transmitted and minimize transfer time and costs, but the compression and decompression processes incur overhead.</span></span> <span data-ttu-id="49e61-237">Ela só deverá ser usada quando houver um ganho de desempenho demonstrável.</span><span class="sxs-lookup"><span data-stu-id="49e61-237">As such, compression should only be used when there is a demonstrable gain in performance.</span></span> <span data-ttu-id="49e61-238">Outros métodos de serialização, como JSON ou binário, podem reduzir o tamanho da carga ao mesmo tempo em que têm menos impacto no desempenho, enquanto o XML provavelmente vai aumentá-lo.</span><span class="sxs-lookup"><span data-stu-id="49e61-238">Other serialization methods, such as JSON or binary encodings, may reduce the payload size while having less impact on performance, whereas XML is likely to increase it.</span></span>

<span data-ttu-id="49e61-239">**Minimize o tempo de uso de conexões e recursos**.</span><span class="sxs-lookup"><span data-stu-id="49e61-239">**Minimize the time that connections and resources are in use**.</span></span> <span data-ttu-id="49e61-240">Mantenha conexões e recursos apenas pelo tempo necessário para usá-los.</span><span class="sxs-lookup"><span data-stu-id="49e61-240">Maintain connections and resources only for as long as you need to use them.</span></span> <span data-ttu-id="49e61-241">Por exemplo, abra conexões o mais tarde possível e permita que elas sejam retornadas ao pool de conexões assim que possível.</span><span class="sxs-lookup"><span data-stu-id="49e61-241">For example, open connections as late as possible, and allow them to be returned to the connection pool as soon as possible.</span></span> <span data-ttu-id="49e61-242">Adquira recursos o mais tarde possível e descarte-os assim que possível.</span><span class="sxs-lookup"><span data-stu-id="49e61-242">Acquire resources as late as possible, and dispose of them as soon as possible.</span></span>

<span data-ttu-id="49e61-243">**Minimize o número de conexões necessárias**.</span><span class="sxs-lookup"><span data-stu-id="49e61-243">**Minimize the number of connections required**.</span></span> <span data-ttu-id="49e61-244">As conexões de serviço absorvem recursos.</span><span class="sxs-lookup"><span data-stu-id="49e61-244">Service connections absorb resources.</span></span> <span data-ttu-id="49e61-245">Limite o número necessário e verifique se as conexões existentes são reutilizadas sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="49e61-245">Limit the number that are required and ensure that existing connections are reused whenever possible.</span></span> <span data-ttu-id="49e61-246">Por exemplo, depois de executar a autenticação, use a representação onde for apropriado para executar o código como uma identidade específica.</span><span class="sxs-lookup"><span data-stu-id="49e61-246">For example, after performing authentication, use impersonation where appropriate to run code as a specific identity.</span></span> <span data-ttu-id="49e61-247">Isso pode ajudar a fazer o melhor uso do pool de conexões com sua reutilização.</span><span class="sxs-lookup"><span data-stu-id="49e61-247">This can help to make best use of the connection pool by reusing connections.</span></span>
  
> [!NOTE]
> <span data-ttu-id="49e61-248">APIs de alguns serviços reutilizam automaticamente as conexões, desde que as diretrizes específicas do serviço sejam seguidas.</span><span class="sxs-lookup"><span data-stu-id="49e61-248">APIs for some services automatically reuse connections, provided service-specific guidelines are followed.</span></span> <span data-ttu-id="49e61-249">É importante entender as condições que permitem a reutilização da conexão para cada serviço usado por seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-249">It's important that you understand the conditions that enable connection reuse for each service that your application uses.</span></span>
> 
> 

<span data-ttu-id="49e61-250">**Envie solicitações em lotes para otimizar o uso da rede**.</span><span class="sxs-lookup"><span data-stu-id="49e61-250">**Send requests in batches to optimize network use**.</span></span> <span data-ttu-id="49e61-251">Por exemplo, envie e leia mensagens em lotes ao acessar uma fila e execute várias leituras ou gravações em lote ao acessar um cache ou armazenamento.</span><span class="sxs-lookup"><span data-stu-id="49e61-251">For example, send and read messages in batches when accessing a queue, and perform multiple reads or writes as a batch when accessing storage or a cache.</span></span> <span data-ttu-id="49e61-252">Isso pode ajudar a maximizar a eficiência dos serviços e os armazenamentos de dados, reduzindo o número de chamadas na rede.</span><span class="sxs-lookup"><span data-stu-id="49e61-252">This can help to maximize efficiency of the services and data stores by reducing the number of calls across the network.</span></span>

<span data-ttu-id="49e61-253">**Evite um requisito de armazenar o estado de sessão do servidor** sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="49e61-253">**Avoid a requirement to store server-side session state** where possible.</span></span> <span data-ttu-id="49e61-254">O gerenciamento de estado de sessão do servidor geralmente requer afinidade de cliente (ou seja, o roteamento de cada solicitação para a mesma instância de servidor), o que afeta a capacidade de dimensionamento do sistema.</span><span class="sxs-lookup"><span data-stu-id="49e61-254">Server-side session state management typically requires client affinity (that is, routing each request to the same server instance), which affects the ability of the system to scale.</span></span> <span data-ttu-id="49e61-255">Em tese, você deve criar clientes sem monitoração de estado em relação os servidores que eles usam.</span><span class="sxs-lookup"><span data-stu-id="49e61-255">Ideally, you should design clients to be stateless with respect to the servers that they use.</span></span> <span data-ttu-id="49e61-256">No entanto, se o aplicativo precisar manter o estado de sessão, armazene dados confidenciais ou grandes volumes de dados por cliente em um cache de servidor distribuído que todas as instâncias do aplicativo podem acessar.</span><span class="sxs-lookup"><span data-stu-id="49e61-256">However, if the application must maintain session state, store sensitive data or large volumes of per-client data in a distributed server-side cache that all instances of the application can access.</span></span>

<span data-ttu-id="49e61-257">**Otimize esquemas de armazenamento de tabela**.</span><span class="sxs-lookup"><span data-stu-id="49e61-257">**Optimize table storage schemas**.</span></span> <span data-ttu-id="49e61-258">Ao usar armazenamentos de tabela que exigem que os nomes da tabela e das colunas sejam passados e processados com cada consulta, como o armazenamento de tabelas do Azure, considere usar nomes menores para reduzir essa sobrecarga.</span><span class="sxs-lookup"><span data-stu-id="49e61-258">When using table stores that require the table and column names to be passed and processed with every query, such as Azure table storage, consider using shorter names to reduce this overhead.</span></span> <span data-ttu-id="49e61-259">No entanto, não sacrifique a legibilidade ou a capacidade de gerenciamento usando nomes excessivamente compactos.</span><span class="sxs-lookup"><span data-stu-id="49e61-259">However, do not sacrifice readability or manageability by using overly compact names.</span></span>

<span data-ttu-id="49e61-260">**Crie dependências de recursos durante a implantação ou a inicialização do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="49e61-260">**Create resource dependencies during deployment or at application startup**.</span></span> <span data-ttu-id="49e61-261">Evite chamadas repetidas para métodos que testam a existência de um recurso e crie o recurso se ele não existir.</span><span class="sxs-lookup"><span data-stu-id="49e61-261">Avoid repeated calls to methods that test the existence of a resource and then create the resource if it does not exist.</span></span> <span data-ttu-id="49e61-262">Métodos como *CloudTable.CreateIfNotExists* e *CloudQueue.CreateIfNotExists* na Biblioteca de Cliente do Armazenamento do Azure seguem esse padrão.</span><span class="sxs-lookup"><span data-stu-id="49e61-262">Methods such as *CloudTable.CreateIfNotExists* and *CloudQueue.CreateIfNotExists* in the Azure Storage Client Library follow this pattern.</span></span> <span data-ttu-id="49e61-263">Esses métodos podem impor uma sobrecarga considerável se forem chamados antes de cada acesso a uma tabela de armazenamento ou uma fila de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="49e61-263">These methods can impose considerable overhead if they are invoked before each access to a storage table or storage queue.</span></span> <span data-ttu-id="49e61-264">Em vez disso:</span><span class="sxs-lookup"><span data-stu-id="49e61-264">Instead:</span></span>

* <span data-ttu-id="49e61-265">Crie os recursos necessários quando o aplicativo for implantado ou quando for iniciado pela primeira vez (uma única chamada para *CreateIfNotExists* para cada recurso no código de inicialização para uma função web ou de trabalho é aceitável).</span><span class="sxs-lookup"><span data-stu-id="49e61-265">Create the required resources when the application is deployed, or when it first starts (a single call to *CreateIfNotExists* for each resource in the startup code for a web or worker role is acceptable).</span></span> <span data-ttu-id="49e61-266">No entanto, não se esqueça de manipular as exceções que poderão surgir se o seu código tentar acessar um recurso que não existe.</span><span class="sxs-lookup"><span data-stu-id="49e61-266">However, be sure to handle exceptions that may arise if your code attempts to access a resource that doesn't exist.</span></span> <span data-ttu-id="49e61-267">Nessas situações, você deve registrar a exceção e, possivelmente, alertar um operador sobre a ausência de um recurso.</span><span class="sxs-lookup"><span data-stu-id="49e61-267">In these situations, you should log the exception, and possibly alert an operator that a resource is missing.</span></span>
* <span data-ttu-id="49e61-268">Em alguns casos, pode ser apropriado criar o recurso ausente como parte do código de tratamento de exceções.</span><span class="sxs-lookup"><span data-stu-id="49e61-268">Under some circumstances, it may be appropriate to create the missing resource as part of the exception handling code.</span></span> <span data-ttu-id="49e61-269">Mas você deve adotar essa abordagem com cuidado, já que a ausência do recurso pode ser uma indicação de um erro de programação (um nome de recurso incorreto, por exemplo) ou algum outro problema a nível da infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="49e61-269">But you should adopt this approach with caution as the non-existence of the resource might be indicative of a programming error (a misspelled resource name for example), or some other infrastructure-level issue.</span></span>

<span data-ttu-id="49e61-270">**Use estruturas leves**.</span><span class="sxs-lookup"><span data-stu-id="49e61-270">**Use lightweight frameworks**.</span></span> <span data-ttu-id="49e61-271">Escolha cuidadosamente as APIs e estruturas que você utiliza para minimizar o uso de recursos, o tempo de execução e a carga geral no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-271">Carefully choose the APIs and frameworks you use to minimize resource usage, execution time, and overall load on the application.</span></span> <span data-ttu-id="49e61-272">Por exemplo, o uso da API Web para tratar das solicitações de serviço pode reduzir a superfície do aplicativo e aumentar a velocidade de execução, mas talvez não seja adequado para cenários avançados, onde são necessários recursos adicionais da Windows Communication Foundation.</span><span class="sxs-lookup"><span data-stu-id="49e61-272">For example, using Web API to handle service requests can reduce the application footprint and increase execution speed, but it may not be suitable for advanced scenarios where the additional capabilities of Windows Communication Foundation are required.</span></span>

<span data-ttu-id="49e61-273">**Considere minimizar o número de contas de serviço**.</span><span class="sxs-lookup"><span data-stu-id="49e61-273">**Consider minimizing the number of service accounts**.</span></span> <span data-ttu-id="49e61-274">Por exemplo, usar uma conta específica para acessar recursos ou serviços que impõem um limite de conexões ou têm desempenho melhor quando menos conexões são mantidas.</span><span class="sxs-lookup"><span data-stu-id="49e61-274">For example, use a specific account to access resources or services that impose a limit on connections, or perform better where fewer connections are maintained.</span></span> <span data-ttu-id="49e61-275">Essa abordagem é comum para serviços como bancos de dados, mas ela pode afetar a capacidade de auditar operações com precisão devido à representação do usuário original.</span><span class="sxs-lookup"><span data-stu-id="49e61-275">This approach is common for services such as databases, but it can affect the ability to accurately audit operations due to the impersonation of the original user.</span></span>

<span data-ttu-id="49e61-276">**Execute testes de perfil e carga de desempenho** durante o desenvolvimento, como parte das rotinas de teste, e antes da liberação o final para assegurar o desempenho e o dimensionamento necessários para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="49e61-276">**Carry out performance profiling and load testing** during development, as part of test routines, and before final release to ensure the application performs and scales as required.</span></span> <span data-ttu-id="49e61-277">Esse teste deve ocorrer no mesmo tipo de hardware da plataforma de produção e com os mesmos tipos e quantidades de dados e carga de usuário que serão encontrados em produção.</span><span class="sxs-lookup"><span data-stu-id="49e61-277">This testing should occur on the same type of hardware as the production platform, and with the same types and quantities of data and user load as it will encounter in production.</span></span> <span data-ttu-id="49e61-278">Para saber mais, confira [Testando o desempenho de um serviço de nuvem](/azure/vs-azure-tools-performance-profiling-cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="49e61-278">For more information, see [Testing the performance of a cloud service](/azure/vs-azure-tools-performance-profiling-cloud-services/).</span></span>


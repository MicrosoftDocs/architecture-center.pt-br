---
title: Business intelligence empresarial
titleSuffix: Azure Reference Architectures
description: Use o Azure para obter insights comerciais dos dados relacionais armazenados localmente.
author: MikeWasson
ms.date: 11/06/2018
ms.custom: seodec18
ms.openlocfilehash: 656bf6f1bd342856fd8a2d2aa0b62a9dd4d4f87f
ms.sourcegitcommit: 88a68c7e9b6b772172b7faa4b9fd9c061a9f7e9d
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/08/2018
ms.locfileid: "53120077"
---
# <a name="enterprise-bi-in-azure-with-sql-data-warehouse"></a><span data-ttu-id="525a4-103">Enterprise BI no Azure com o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="525a4-103">Enterprise BI in Azure with SQL Data Warehouse</span></span>

<span data-ttu-id="525a4-104">Essa arquitetura de referência implementa um pipeline [ELT (extrair, carregar e transformar)](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) que move os dados de um banco de dados SQL Server local para o SQL Data Warehouse e os transforma para análise.</span><span class="sxs-lookup"><span data-stu-id="525a4-104">This reference architecture implements an [extract, load, and transform (ELT)](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span>

<span data-ttu-id="525a4-105">Há uma implantação de referência para essa arquitetura de referência disponível no [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="525a4-105">A reference implementation for this architecture is available on [GitHub][github-folder].</span></span>

![Diagrama da arquitetura do BI Empresarial no Azure com o SQL Data Warehouse](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="525a4-107">**Cenário**: Uma organização tem um grande conjunto de dados OLTP armazenado em um banco de dados SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="525a4-107">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="525a4-108">A organização deseja usar o SQL Data Warehouse para fazer análise usando o Power BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-108">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span>

<span data-ttu-id="525a4-109">Essa arquitetura de referência serve para trabalhos avulsos ou sob demanda.</span><span class="sxs-lookup"><span data-stu-id="525a4-109">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="525a4-110">Se você precisa mover os dados de forma contínua (por hora ou diariamente), recomendamos usar o Azure Data Factory para definir um fluxo de trabalho automatizado.</span><span class="sxs-lookup"><span data-stu-id="525a4-110">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span> <span data-ttu-id="525a4-111">Para uma arquitetura de referência que usa o Data Factory, confira [Enterprise BI automatizada com o SQL Data Warehouse e o Azure Data Factory][adf-ra].</span><span class="sxs-lookup"><span data-stu-id="525a4-111">For a reference architecture that uses Data Factory, see [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory][adf-ra].</span></span>

## <a name="architecture"></a><span data-ttu-id="525a4-112">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="525a4-112">Architecture</span></span>

<span data-ttu-id="525a4-113">A arquitetura consiste nos componentes a seguir.</span><span class="sxs-lookup"><span data-stu-id="525a4-113">The architecture consists of the following components.</span></span>

### <a name="data-source"></a><span data-ttu-id="525a4-114">Fonte de dados</span><span class="sxs-lookup"><span data-stu-id="525a4-114">Data source</span></span>

<span data-ttu-id="525a4-115">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="525a4-115">**SQL Server**.</span></span> <span data-ttu-id="525a4-116">A fonte de dados está localizada em um banco de dados SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="525a4-116">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="525a4-117">Para simular o ambiente local, os scripts de implantação dessa arquitetura provisionam uma VM no Azure com o SQL Server instalado.</span><span class="sxs-lookup"><span data-stu-id="525a4-117">To simulate the on-premises environment, the deployment scripts for this architecture provision a VM in Azure with SQL Server installed.</span></span> <span data-ttu-id="525a4-118">O [banco de dados de exemplo de OLTP de World Wide Importers][wwi] é usado como os dados de origem.</span><span class="sxs-lookup"><span data-stu-id="525a4-118">The [Wide World Importers OLTP sample database][wwi] is used as the source data.</span></span>

### <a name="ingestion-and-data-storage"></a><span data-ttu-id="525a4-119">Ingestão e armazenamento de dados</span><span class="sxs-lookup"><span data-stu-id="525a4-119">Ingestion and data storage</span></span>

<span data-ttu-id="525a4-120">**Armazenamento de Blobs**.</span><span class="sxs-lookup"><span data-stu-id="525a4-120">**Blob Storage**.</span></span> <span data-ttu-id="525a4-121">O armazenamento de blobs é usado como uma área de transferência para copiar os dados antes de carregá-los no SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-121">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="525a4-122">**SQL Data Warehouse do Azure**.</span><span class="sxs-lookup"><span data-stu-id="525a4-122">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="525a4-123">O [SQL Data Warehouse](/azure/sql-data-warehouse/) é um sistema distribuído projetado para executar uma análise em grandes quantidades de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-123">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="525a4-124">Ele dá suporte a MPP (processamento altamente paralelo), que o torna adequado para executar análise de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="525a4-124">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span>

### <a name="analysis-and-reporting"></a><span data-ttu-id="525a4-125">Análise e relatórios</span><span class="sxs-lookup"><span data-stu-id="525a4-125">Analysis and reporting</span></span>

<span data-ttu-id="525a4-126">**Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="525a4-126">**Azure Analysis Services**.</span></span> <span data-ttu-id="525a4-127">O [Analysis Services](/azure/analysis-services/) é um serviço totalmente gerenciado que fornece recursos de modelagem de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-127">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="525a4-128">Use o Analysis Services para criar um modelo semântico que os usuários podem consultar.</span><span class="sxs-lookup"><span data-stu-id="525a4-128">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="525a4-129">O Analysis Services é especialmente útil em um cenário de painel de BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-129">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="525a4-130">Nessa arquitetura, o Analysis Services lê dados do data warehouse para processar o modelo semântico e atende a consultas ao painel de maneira eficiente.</span><span class="sxs-lookup"><span data-stu-id="525a4-130">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="525a4-131">Ele também dá suporte à simultaneidade elástica, expandindo réplicas para acelerar o processamento das consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-131">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="525a4-132">Atualmente, o Azure Analysis Services dá suporte a modelos tabulares, mas não a modelos multidimensionais.</span><span class="sxs-lookup"><span data-stu-id="525a4-132">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="525a4-133">Os modelos tabulares usam constructos de modelagem relacional (tabelas e colunas), ao passo que os modelos multidimensionais utilizam constructos de modelagem OLAP (cubos, dimensões e medidas).</span><span class="sxs-lookup"><span data-stu-id="525a4-133">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="525a4-134">Se você precisar de modelos multidimensionais, use o SSAS (SQL Server Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="525a4-134">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="525a4-135">Para saber mais, confira [Comparando soluções tabulares e multidimensionais](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="525a4-135">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="525a4-136">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="525a4-136">**Power BI**.</span></span> <span data-ttu-id="525a4-137">O Power BI é um conjunto de ferramentas de análise de negócios para analisar dados a fim de obter informações comerciais.</span><span class="sxs-lookup"><span data-stu-id="525a4-137">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="525a4-138">Nessa arquitetura, ele consulta o modelo semântico armazenado no Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="525a4-138">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

### <a name="authentication"></a><span data-ttu-id="525a4-139">Autenticação</span><span class="sxs-lookup"><span data-stu-id="525a4-139">Authentication</span></span>

<span data-ttu-id="525a4-140">O **Azure AD (Azure Active Directory)** autentica os usuários que se conectam ao servidor do Analysis Services por meio do Power BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-140">**Azure Active Directory (Azure AD)** authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="525a4-141">Pipeline de dados</span><span class="sxs-lookup"><span data-stu-id="525a4-141">Data pipeline</span></span>

<span data-ttu-id="525a4-142">Essa arquitetura de referência usa o banco de dados [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) de exemplo como fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-142">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as a data source.</span></span> <span data-ttu-id="525a4-143">O pipeline de dados tem os seguintes estágios:</span><span class="sxs-lookup"><span data-stu-id="525a4-143">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="525a4-144">Exporte os dados do SQL Server para arquivos simples (utilitário bcp).</span><span class="sxs-lookup"><span data-stu-id="525a4-144">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="525a4-145">Copie os arquivos simples para o Armazenamento de Blobs do Azure (AzCopy).</span><span class="sxs-lookup"><span data-stu-id="525a4-145">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="525a4-146">Carregue os dados no SQL Data Warehouse (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="525a4-146">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="525a4-147">Transforme os dados em um esquema em estrela (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="525a4-147">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="525a4-148">Carregue um modelo semântico no Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="525a4-148">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![Diagrama do pipeline de BI Empresarial](./images/enterprise-bi-sqldw-pipeline.png)

> [!NOTE]
> <span data-ttu-id="525a4-150">Para obter as etapas 1 &ndash; 3, considere o uso do Data Platform Studio da Redgate.</span><span class="sxs-lookup"><span data-stu-id="525a4-150">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="525a4-151">O Data Platform Studio aplica-se as correções de compatibilidade e otimizações mais apropriada, portanto, é a maneira mais rápida de começar a usar o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-151">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="525a4-152">Para saber mais, confira [Carregar dados com o Data Platform Studio da Redgate](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="525a4-152">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span>
>

<span data-ttu-id="525a4-153">As seções a seguir descrevem esses estágios mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="525a4-153">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="525a4-154">Exportar dados do SQL Server</span><span class="sxs-lookup"><span data-stu-id="525a4-154">Export data from SQL Server</span></span>

<span data-ttu-id="525a4-155">O utilitário [bcp](/sql/tools/bcp-utility) (programa de cópia em massa) é uma maneira rápida de criar arquivos de texto simples de tabelas SQL.</span><span class="sxs-lookup"><span data-stu-id="525a4-155">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="525a4-156">Nesta etapa, você seleciona as colunas que deseja exportar, mas não transforma os dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-156">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="525a4-157">As transformações de dados devem ocorrer no SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-157">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="525a4-158">**Recomendações**</span><span class="sxs-lookup"><span data-stu-id="525a4-158">**Recommendations**</span></span>

<span data-ttu-id="525a4-159">Se possível, agende a extração de dados fora do horário de pico para minimizar a contenção de recursos no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="525a4-159">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span>

<span data-ttu-id="525a4-160">Evite executar bcp no servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-160">Avoid running bcp on the database server.</span></span> <span data-ttu-id="525a4-161">Em vez disso, execute-o em outro computador.</span><span class="sxs-lookup"><span data-stu-id="525a4-161">Instead, run it from another machine.</span></span> <span data-ttu-id="525a4-162">Grave os arquivos em uma unidade local.</span><span class="sxs-lookup"><span data-stu-id="525a4-162">Write the files to a local drive.</span></span> <span data-ttu-id="525a4-163">Verifique se você tem recursos de E/S suficientes para lidar com as gravações simultâneas.</span><span class="sxs-lookup"><span data-stu-id="525a4-163">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="525a4-164">Para um melhor desempenho, exporte os arquivos para unidades de armazenamento rápido dedicadas.</span><span class="sxs-lookup"><span data-stu-id="525a4-164">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="525a4-165">Você pode acelerar a transferência de rede salvando os dados exportados no formato compactado Gzip.</span><span class="sxs-lookup"><span data-stu-id="525a4-165">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="525a4-166">No entanto, o carregamento de arquivos compactados no warehouse é mais lento do que o de arquivos descompactados, o que é compensado pela maior rapidez das transferências na rede.</span><span class="sxs-lookup"><span data-stu-id="525a4-166">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="525a4-167">Se você decidir usar compactação Gzip, não crie um arquivo Gzip único.</span><span class="sxs-lookup"><span data-stu-id="525a4-167">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="525a4-168">Em vez disso, divida os dados em vários arquivos compactados.</span><span class="sxs-lookup"><span data-stu-id="525a4-168">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="525a4-169">Copiar arquivos simples no armazenamento de blobs</span><span class="sxs-lookup"><span data-stu-id="525a4-169">Copy flat files into blob storage</span></span>

<span data-ttu-id="525a4-170">O utilitário [AzCopy](/azure/storage/common/storage-use-azcopy) foi projetado para a cópia de dados de alto desempenho no armazenamento de blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="525a4-170">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="525a4-171">**Recomendações**</span><span class="sxs-lookup"><span data-stu-id="525a4-171">**Recommendations**</span></span>

<span data-ttu-id="525a4-172">Crie a conta de armazenamento em uma região perto do local da fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-172">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="525a4-173">Implante a conta de armazenamento e a instância do SQL Data Warehouse na mesma região.</span><span class="sxs-lookup"><span data-stu-id="525a4-173">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span>

<span data-ttu-id="525a4-174">Não execute o AzCopy no mesmo computador que executa suas cargas de trabalho de produção, pois o consumo de CPU e E/S pode interferir na carga de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="525a4-174">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span>

<span data-ttu-id="525a4-175">Teste o carregamento primeiro para ver como está a velocidade de upload.</span><span class="sxs-lookup"><span data-stu-id="525a4-175">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="525a4-176">Você pode usar a opção /NC no AzCopy para especificar o número de operações de cópia simultâneas.</span><span class="sxs-lookup"><span data-stu-id="525a4-176">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="525a4-177">Comece com o valor padrão e faça experiências com essa configuração para ajustar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="525a4-177">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="525a4-178">Em um ambiente com pouca largura de banda, o grande número de operações simultâneas pode sobrecarregar a conexão de rede, evitando que as operações sejam concluídas.</span><span class="sxs-lookup"><span data-stu-id="525a4-178">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>

<span data-ttu-id="525a4-179">O AzCopy move os dados para o armazenamento pela Internet pública.</span><span class="sxs-lookup"><span data-stu-id="525a4-179">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="525a4-180">Se isso não for rápido o suficiente, considere configurar um circuito [ExpressRoute](/azure/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="525a4-180">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="525a4-181">O ExpressRoute é um serviço que encaminha os dados por uma conexão privada dedicada para o Azure.</span><span class="sxs-lookup"><span data-stu-id="525a4-181">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="525a4-182">Outra opção, se sua conexão de rede estiver lenta, é enviar os dados em disco fisicamente para um datacenter do Azure.</span><span class="sxs-lookup"><span data-stu-id="525a4-182">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="525a4-183">Para saber mais, confira [Transferindo dados bidirecionalmente no Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="525a4-183">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="525a4-184">Durante uma operação de cópia, o AzCopy cria um arquivo de diário temporário, que permite reiniciar a operação, caso ela seja interrompida (por exemplo, devido a um erro de rede).</span><span class="sxs-lookup"><span data-stu-id="525a4-184">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="525a4-185">Verifique se há espaço em disco suficiente para armazenar os arquivos de diário.</span><span class="sxs-lookup"><span data-stu-id="525a4-185">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="525a4-186">Você pode usar a opção /Z para especificar onde os arquivos de diário serão gravados.</span><span class="sxs-lookup"><span data-stu-id="525a4-186">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="525a4-187">Carregar dados no SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="525a4-187">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="525a4-188">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) para carregar os arquivos do armazenamento de blobs no data warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-188">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="525a4-189">O PolyBase foi projetado para aproveitar a arquitetura MPP (processamento altamente paralelo) do SQL Data Warehouse, o que o torna a maneira mais rápida de carregar dados no SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-189">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span>

<span data-ttu-id="525a4-190">O carregamento de dados é um processo de duas etapas:</span><span class="sxs-lookup"><span data-stu-id="525a4-190">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="525a4-191">Crie um conjunto de tabelas externas para os dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-191">Create a set of external tables for the data.</span></span> <span data-ttu-id="525a4-192">Uma tabela externa é uma definição de tabela que aponta para dados armazenados fora do warehouse &mdash;, neste caso, os arquivos simples no armazenamento de blobs.</span><span class="sxs-lookup"><span data-stu-id="525a4-192">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="525a4-193">Essa etapa não move os dados para o warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-193">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="525a4-194">Crie tabelas de preparo e carregue os dados nas tabelas de preparo.</span><span class="sxs-lookup"><span data-stu-id="525a4-194">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="525a4-195">Essa etapa copia os dados para o warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-195">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="525a4-196">**Recomendações**</span><span class="sxs-lookup"><span data-stu-id="525a4-196">**Recommendations**</span></span>

<span data-ttu-id="525a4-197">Quando você tiver grandes quantidades de dados (mais de 1 TB) e estiver executando uma carga de trabalho de análise que será beneficiada pelo paralelismo, considere o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-197">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="525a4-198">O SQL Data Warehouse não é uma boa opção para cargas de trabalho OLTP ou conjuntos de dados menores (< 250GB).</span><span class="sxs-lookup"><span data-stu-id="525a4-198">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="525a4-199">Para conjuntos de dados menores que 250GB, considere o Banco de Dados SQL ou o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="525a4-199">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="525a4-200">Para saber mais, confira [Armazenagem de Dados](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="525a4-200">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="525a4-201">Crie as tabelas de preparo como tabelas de heap, que não são indexadas.</span><span class="sxs-lookup"><span data-stu-id="525a4-201">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="525a4-202">As consultas que criam as tabelas de produção resultarão em uma verificação completa e, portanto, não há motivo para indexar as tabelas de preparo.</span><span class="sxs-lookup"><span data-stu-id="525a4-202">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="525a4-203">O PolyBase aproveita automaticamente as vantagens do paralelismo no warehouse. </span><span class="sxs-lookup"><span data-stu-id="525a4-203">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="525a4-204">O desempenho de carga é dimensionado conforme você aumenta as DWUs.</span><span class="sxs-lookup"><span data-stu-id="525a4-204">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="525a4-205">Para um melhor desempenho, use uma única operação de carregamento.</span><span class="sxs-lookup"><span data-stu-id="525a4-205">For best performance, use a single load operation.</span></span> <span data-ttu-id="525a4-206">Não há nenhum benefício de desempenho em dividir os dados de entrada em partes e executar vários carregamentos simultâneos.</span><span class="sxs-lookup"><span data-stu-id="525a4-206">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="525a4-207">O PolyBase pode ler arquivos compactados em Gzip.</span><span class="sxs-lookup"><span data-stu-id="525a4-207">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="525a4-208">No entanto, somente um único leitor é usado por arquivo compactado, já que a descompactação do arquivo é uma operação de thread único.</span><span class="sxs-lookup"><span data-stu-id="525a4-208">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="525a4-209">Portanto, evite o carregamento de um único arquivo compactado grande.</span><span class="sxs-lookup"><span data-stu-id="525a4-209">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="525a4-210">Em vez disso, divida os dados em vários arquivos compactados, para se beneficiar do paralelismo.</span><span class="sxs-lookup"><span data-stu-id="525a4-210">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span> 

<span data-ttu-id="525a4-211">Esteja ciente das seguintes limitações:</span><span class="sxs-lookup"><span data-stu-id="525a4-211">Be aware of the following limitations:</span></span>

- <span data-ttu-id="525a4-212">O tamanho máximo de colunas com suporte no PolyBase é `varchar(8000)`, `nvarchar(4000)` ou `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="525a4-212">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="525a4-213">Se seus dados excederem esses limites, uma opção é dividir os dados em partes quando exportá-los e remontá-los após a importação.</span><span class="sxs-lookup"><span data-stu-id="525a4-213">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span>

- <span data-ttu-id="525a4-214">O PolyBase usa um terminador de linha fixo de \n ou newline.</span><span class="sxs-lookup"><span data-stu-id="525a4-214">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="525a4-215">Isso poderá causar problemas se houver caracteres de newline na fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="525a4-215">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="525a4-216">O esquema da fonte de dados pode conter tipos de dados que não têm suporte no SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-216">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="525a4-217">Para contornar essas limitações, você pode criar um procedimento armazenado que realiza as conversões necessárias.</span><span class="sxs-lookup"><span data-stu-id="525a4-217">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="525a4-218">Faça referência a esse procedimento armazenado ao executar o bcp.</span><span class="sxs-lookup"><span data-stu-id="525a4-218">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="525a4-219">Como alternativa, o [Data Platform Studio da Redgate](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) converte automaticamente os tipos de dados que não têm suporte no SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-219">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="525a4-220">Para obter mais informações, consulte os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="525a4-220">For more information, see the following articles:</span></span>

- <span data-ttu-id="525a4-221">[Melhores práticas para carregar dados no SQL Data Warehouse do Azure](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="525a4-221">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="525a4-222">Migrar seus esquemas para o SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="525a4-222">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="525a4-223">Diretrizes para definir tipos de dados para tabelas no SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="525a4-223">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="525a4-224">Transformar os dados</span><span class="sxs-lookup"><span data-stu-id="525a4-224">Transform the data</span></span>

<span data-ttu-id="525a4-225">Transforme os dados e mova-os para tabelas de produção.</span><span class="sxs-lookup"><span data-stu-id="525a4-225">Transform the data and move it into production tables.</span></span> <span data-ttu-id="525a4-226">Nesta etapa, os dados são transformados em um esquema em estrela com tabelas de dimensões e tabelas de fatos, adequadas para modelagem semântica.</span><span class="sxs-lookup"><span data-stu-id="525a4-226">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="525a4-227">Crie as tabelas de produção com índices columnstore clusterizados, que oferecem o melhor desempenho geral de consulta.</span><span class="sxs-lookup"><span data-stu-id="525a4-227">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="525a4-228">Os índices ColumnStore são otimizados para consultas que examinam muitos registros.</span><span class="sxs-lookup"><span data-stu-id="525a4-228">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="525a4-229">Os índices ColumnStore não tem o mesmo desempenho em pesquisas singleton (isto é, pesquisa de uma única linha).</span><span class="sxs-lookup"><span data-stu-id="525a4-229">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="525a4-230">Se você precisar realizar pesquisas singleton frequentes, adicione um índice não clusterizado a uma tabela.</span><span class="sxs-lookup"><span data-stu-id="525a4-230">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="525a4-231">As pesquisas singleton podem ficar significativamente mais rápidas usando um índice não clusterizado.</span><span class="sxs-lookup"><span data-stu-id="525a4-231">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="525a4-232">No entanto, as pesquisas singleton são geralmente menos comuns em cenários de data warehouse do que as cargas de trabalho OLTP.</span><span class="sxs-lookup"><span data-stu-id="525a4-232">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="525a4-233">Para saber mais, confira [Indexando tabelas no SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="525a4-233">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="525a4-234">As tabelas columnstore clusterizadas não dão suporte aos tipos de dados `varchar(max)`, `nvarchar(max)` ou `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="525a4-234">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="525a4-235">Nesse caso, considere a possibilidade de usar um heap ou índice clusterizado.</span><span class="sxs-lookup"><span data-stu-id="525a4-235">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="525a4-236">Você pode colocar essas colunas em uma tabela separada.</span><span class="sxs-lookup"><span data-stu-id="525a4-236">You might put those columns into a separate table.</span></span>

<span data-ttu-id="525a4-237">Como o banco de dados de exemplo não é muito grande, criamos tabelas replicadas sem partições.</span><span class="sxs-lookup"><span data-stu-id="525a4-237">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="525a4-238">Para cargas de trabalho de produção, o uso de tabelas distribuídas provavelmente melhorará o desempenho da consulta.</span><span class="sxs-lookup"><span data-stu-id="525a4-238">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="525a4-239">Confira [Diretrizes para criar tabelas distribuídas no SQL Data Warehouse do Azure](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="525a4-239">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="525a4-240">Os scripts de exemplo executam as consultas usando uma [classe de recurso](/azure/sql-data-warehouse/resource-classes-for-workload-management) estática.</span><span class="sxs-lookup"><span data-stu-id="525a4-240">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="525a4-241">Carregar o modelo semântico</span><span class="sxs-lookup"><span data-stu-id="525a4-241">Load the semantic model</span></span>

<span data-ttu-id="525a4-242">Carregue os dados em um modelo tabular no Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="525a4-242">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="525a4-243">Nesta etapa, você pode criar um modelo de dados semântico usando o SSDT (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="525a4-243">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="525a4-244">Você também pode criar um modelo importando-o de um arquivo do Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="525a4-244">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="525a4-245">Como o SQL Data Warehouse não dá suporte a chaves estrangeiras, você deve adicionar as relações ao modelo semântico para poder unir entre tabelas.</span><span class="sxs-lookup"><span data-stu-id="525a4-245">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="525a4-246">Usar o Power BI para visualizar os dados</span><span class="sxs-lookup"><span data-stu-id="525a4-246">Use Power BI to visualize the data</span></span>

<span data-ttu-id="525a4-247">O Power BI dá suporte a duas opções de conexão com o Azure Analysis Services:</span><span class="sxs-lookup"><span data-stu-id="525a4-247">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="525a4-248">Importação.</span><span class="sxs-lookup"><span data-stu-id="525a4-248">Import.</span></span> <span data-ttu-id="525a4-249">Os dados são importados para o modelo do Power BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-249">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="525a4-250">Conexão dinâmica.</span><span class="sxs-lookup"><span data-stu-id="525a4-250">Live Connection.</span></span> <span data-ttu-id="525a4-251">Os dados são recuperados diretamente do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="525a4-251">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="525a4-252">Recomendamos a Conexão dinâmica porque ela não requer a cópia de dados no modelo do Power BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-252">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="525a4-253">Além disso, o uso do DirectQuery garante que os resultados sejam sempre consistentes com os dados de origem mais recentes.</span><span class="sxs-lookup"><span data-stu-id="525a4-253">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="525a4-254">Para saber mais, confira [Conectar com o Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="525a4-254">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="525a4-255">**Recomendações**</span><span class="sxs-lookup"><span data-stu-id="525a4-255">**Recommendations**</span></span>

<span data-ttu-id="525a4-256">Evite executar consultas ao painel de BI diretamente no data warehouse.</span><span class="sxs-lookup"><span data-stu-id="525a4-256">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="525a4-257">Os painéis de BI exigem tempos de resposta muito baixos, que as consultas diretas ao warehouse poderão não conseguir atender.</span><span class="sxs-lookup"><span data-stu-id="525a4-257">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="525a4-258">Além disso, a atualização do painel afetará o número de consultas simultâneas, o que pode afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="525a4-258">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span>

<span data-ttu-id="525a4-259">O Azure Analysis Services foi projetado para lidar com os requisitos de consulta de um painel de BI e, portanto, a prática recomendada é consultar o Analysis Services do Power BI.</span><span class="sxs-lookup"><span data-stu-id="525a4-259">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="525a4-260">Considerações sobre escalabilidade</span><span class="sxs-lookup"><span data-stu-id="525a4-260">Scalability considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="525a4-261">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="525a4-261">SQL Data Warehouse</span></span>

<span data-ttu-id="525a4-262">Com o SQL Data warehouse, você pode expandir seus recursos de computação sob demanda.</span><span class="sxs-lookup"><span data-stu-id="525a4-262">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="525a4-263">O mecanismo de consulta otimiza as consultas para processamento paralelo com base no número de nós de computação e move dados entre os nós conforme a necessidade.</span><span class="sxs-lookup"><span data-stu-id="525a4-263">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="525a4-264">Para saber mais, confira [Gerenciar computação no SQL Data Warehouse do Azure](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="525a4-264">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="525a4-265">Serviços de análise</span><span class="sxs-lookup"><span data-stu-id="525a4-265">Analysis Services</span></span>

<span data-ttu-id="525a4-266">Para cargas de trabalho de produção, recomendamos a camada Standard do Azure Analysis Services, pois ele dá suporte a particionamento e DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="525a4-266">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="525a4-267">Dentro de uma camada, o tamanho da instância determina a memória e a potência de processamento.</span><span class="sxs-lookup"><span data-stu-id="525a4-267">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="525a4-268">A capacidade de processamento é medida em QPUs (unidades de processamento de consulta).</span><span class="sxs-lookup"><span data-stu-id="525a4-268">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="525a4-269">Monitore o uso de QPUs para selecionar o tamanho apropriado.</span><span class="sxs-lookup"><span data-stu-id="525a4-269">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="525a4-270">Para saber mais, confira [Monitorar métricas do servidor](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="525a4-270">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="525a4-271">Com uma alta carga, o desempenho de consulta pode se degradar devido à simultaneidade de consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-271">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="525a4-272">Você pode expandir o Analysis Services criando um conjunto de réplicas para processar consultas, para que mais consultas possam ser executadas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="525a4-272">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="525a4-273">O trabalho de processamento do modelo de dados sempre ocorre no servidor primário.</span><span class="sxs-lookup"><span data-stu-id="525a4-273">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="525a4-274">Por padrão, o servidor primário também lida com consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-274">By default, the primary server also handles queries.</span></span> <span data-ttu-id="525a4-275">Opcionalmente, você pode designar o servidor primário para executar o processamento de modo exclusivo, para que o pool de consultas lide com todas as consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-275">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="525a4-276">Se você tiver altos requisitos de processamento, separe o processamento do pool de consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-276">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="525a4-277">Se você tiver cargas de consulta pesadas e processamento relativamente leve, poderá incluir o servidor primário no pool de consultas.</span><span class="sxs-lookup"><span data-stu-id="525a4-277">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="525a4-278">Para saber mais, confira [Expansão do Azure Analysis Services](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="525a4-278">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span>

<span data-ttu-id="525a4-279">Para reduzir a quantidade de processamento desnecessária, considere usar partições para dividir o modelo tabular em partes lógicas.</span><span class="sxs-lookup"><span data-stu-id="525a4-279">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="525a4-280">Cada partição pode ser processada separadamente.</span><span class="sxs-lookup"><span data-stu-id="525a4-280">Each partition can be processed separately.</span></span> <span data-ttu-id="525a4-281">Para saber mais, confira [Partições](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="525a4-281">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="525a4-282">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="525a4-282">Security considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="525a4-283">Lista de permissões de IPs de clientes do Analysis Services</span><span class="sxs-lookup"><span data-stu-id="525a4-283">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="525a4-284">Considere usar o recurso de firewall do Analysis Services para colocar endereços IP do cliente na lista de permissões.</span><span class="sxs-lookup"><span data-stu-id="525a4-284">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="525a4-285">Se habilitado, o firewall bloqueará todas as conexões de cliente que não sejam as especificadas nas regras de firewall.</span><span class="sxs-lookup"><span data-stu-id="525a4-285">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="525a4-286">As regras padrão colocam o serviço Power BI na lista de permissões, mas você poderá desabilitar essa regra se desejar.</span><span class="sxs-lookup"><span data-stu-id="525a4-286">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="525a4-287">Para saber mais, confira [Aumentar a proteção do Azure Analysis Services com o novo recurso de firewall](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span><span class="sxs-lookup"><span data-stu-id="525a4-287">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="525a4-288">Autorização</span><span class="sxs-lookup"><span data-stu-id="525a4-288">Authorization</span></span>

<span data-ttu-id="525a4-289">O Azure Analysis Services usa o Azure AD (Azure Active Directory) para autenticar usuários que se conectam a um servidor do Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="525a4-289">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="525a4-290">Você pode restringir quais dados um usuário específico é capaz de exibir criando funções e atribuindo os usuários ou grupos do Azure AD a essas funções.</span><span class="sxs-lookup"><span data-stu-id="525a4-290">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="525a4-291">Para cada função, você pode:</span><span class="sxs-lookup"><span data-stu-id="525a4-291">For each role, you can:</span></span> 

- <span data-ttu-id="525a4-292">Proteger tabelas ou colunas individualmente.</span><span class="sxs-lookup"><span data-stu-id="525a4-292">Protect tables or individual columns.</span></span> 
- <span data-ttu-id="525a4-293">Proteger linhas individualmente com base em expressões de filtro.</span><span class="sxs-lookup"><span data-stu-id="525a4-293">Protect individual rows based on filter expressions.</span></span> 

<span data-ttu-id="525a4-294">Para saber mais, confira [Gerenciar usuários e funções de banco de dados](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="525a4-294">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="525a4-295">Implantar a solução</span><span class="sxs-lookup"><span data-stu-id="525a4-295">Deploy the solution</span></span>

<span data-ttu-id="525a4-296">Para a implantação e execução da implementação de referência, siga as etapas em [Leia-me do GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="525a4-296">To the deploy and run the reference implementation, follow the steps in the [GitHub readme][github-folder].</span></span> <span data-ttu-id="525a4-297">Ela implanta o seguinte:</span><span class="sxs-lookup"><span data-stu-id="525a4-297">It deploys the following:</span></span>

- <span data-ttu-id="525a4-298">Uma VM Windows para simular um servidor de banco de dados local.</span><span class="sxs-lookup"><span data-stu-id="525a4-298">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="525a4-299">Ela inclui o SQL Server 2017 e ferramentas relacionadas, juntamente com o Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="525a4-299">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
- <span data-ttu-id="525a4-300">Uma conta de armazenamento do Azure que fornece armazenamento de blobs para armazenar os dados exportados do banco de dados SQL Server.</span><span class="sxs-lookup"><span data-stu-id="525a4-300">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
- <span data-ttu-id="525a4-301">Uma instância do SQL Data Warehouse do Azure.</span><span class="sxs-lookup"><span data-stu-id="525a4-301">An Azure SQL Data Warehouse instance.</span></span>
- <span data-ttu-id="525a4-302">Uma instância do Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="525a4-302">An Azure Analysis Services instance.</span></span>

## <a name="next-steps"></a><span data-ttu-id="525a4-303">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="525a4-303">Next steps</span></span>

- <span data-ttu-id="525a4-304">Use o Azure Data Factory para automatizar o pipeline ELT.</span><span class="sxs-lookup"><span data-stu-id="525a4-304">Use Azure Data Factory to automate the ELT pipeline.</span></span> <span data-ttu-id="525a4-305">Confira [Enterprise BI automatizada com o SQL Data Warehouse e Azure Data Factory][adf-ra].</span><span class="sxs-lookup"><span data-stu-id="525a4-305">See [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory][adf-ra].</span></span>

<!-- links -->

[adf-ra]: ./enterprise-bi-adf.md
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[wwi]: /sql/sample/world-wide-importers/wide-world-importers-oltp-database

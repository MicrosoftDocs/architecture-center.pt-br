---
title: Executar VMs do Windows para uma arquitetura de N camadas
description: "Como implementar uma arquitetura multicamadas no Azure, atentando-se em especial para a disponibilidade, segurança, escalabilidade e capacidade de gerenciamento da segurança."
author: MikeWasson
ms.date: 11/22/2016
pnp.series.title: Windows VM workloads
pnp.series.next: multi-region-application
pnp.series.prev: multi-vm
ms.openlocfilehash: f3c375f8fccc633d9525a8afbd11c13037265f4a
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
---
# <a name="run-windows-vms-for-an-n-tier-application"></a><span data-ttu-id="89e27-103">Executar VMs do Windows para um aplicativo de N camadas</span><span class="sxs-lookup"><span data-stu-id="89e27-103">Run Windows VMs for an N-tier application</span></span>

<span data-ttu-id="89e27-104">Essa arquitetura de referência mostra um conjunto de práticas comprovadas para executar VMs (máquinas virtuais) do Windows para um aplicativo de N camadas.</span><span class="sxs-lookup"><span data-stu-id="89e27-104">This reference architecture shows a set of proven practices for running Windows virtual machines (VMs) for an N-tier application.</span></span> [<span data-ttu-id="89e27-105">**Implantar esta solução**.</span><span class="sxs-lookup"><span data-stu-id="89e27-105">**Deploy this solution**.</span></span>](#deploy-the-solution) 

<span data-ttu-id="89e27-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="89e27-106">![[0]][0]</span></span>

<span data-ttu-id="89e27-107">*Baixe um [arquivo Visio][visio-download] dessa arquitetura.*</span><span class="sxs-lookup"><span data-stu-id="89e27-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="89e27-108">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="89e27-108">Architecture</span></span> 

<span data-ttu-id="89e27-109">Há muitas maneiras de implementar uma arquitetura de N camadas.</span><span class="sxs-lookup"><span data-stu-id="89e27-109">There are many ways to implement an N-tier architecture.</span></span> <span data-ttu-id="89e27-110">O diagrama mostra um aplicativo Web de três camadas típico.</span><span class="sxs-lookup"><span data-stu-id="89e27-110">The diagram shows a typical 3-tier web application.</span></span> <span data-ttu-id="89e27-111">Essa arquitetura se baseia em [Executar VMs com balanceamento de carga para escalabilidade e disponibilidade][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="89e27-111">This architecture builds on [Run load-balanced VMs for scalability and availability][multi-vm].</span></span> <span data-ttu-id="89e27-112">As camadas comerciais e da Web usam VMs com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="89e27-112">The web and business tiers use load-balanced VMs.</span></span>

* <span data-ttu-id="89e27-113">**Conjuntos de disponibilidade.**</span><span class="sxs-lookup"><span data-stu-id="89e27-113">**Availability sets.**</span></span> <span data-ttu-id="89e27-114">Crie um [conjunto de disponibilidade][azure-availability-sets] para cada camada e provisione pelo menos duas VMs em cada camada.</span><span class="sxs-lookup"><span data-stu-id="89e27-114">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier.</span></span> <span data-ttu-id="89e27-115">Isso torna as VMs qualificadas para um [SLA (Contrato de Nível de Serviço)][vm-sla] mais elevado.</span><span class="sxs-lookup"><span data-stu-id="89e27-115">This makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla] for VMs.</span></span>
* <span data-ttu-id="89e27-116">**Sub-redes.**</span><span class="sxs-lookup"><span data-stu-id="89e27-116">**Subnets.**</span></span> <span data-ttu-id="89e27-117">Sempre crie uma sub-rede separada para cada camada.</span><span class="sxs-lookup"><span data-stu-id="89e27-117">Create a separate subnet for each tier.</span></span> <span data-ttu-id="89e27-118">Especifique o intervalo de endereços e a máscara de sub-rede usando a notação [CIDR].</span><span class="sxs-lookup"><span data-stu-id="89e27-118">Specify the address range and subnet mask using [CIDR] notation.</span></span> 
* <span data-ttu-id="89e27-119">**Balanceadores de carga.**</span><span class="sxs-lookup"><span data-stu-id="89e27-119">**Load balancers.**</span></span> <span data-ttu-id="89e27-120">Use um [Balanceador de carga para a Internet][load-balancer-external] para distribuir o tráfego de entrada da Internet para a camada da Web e um [balanceador de carga interno][load-balancer-internal] para distribuir o tráfego de rede da camada da Web para a camada comercial.</span><span class="sxs-lookup"><span data-stu-id="89e27-120">Use an [Internet-facing load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>
* <span data-ttu-id="89e27-121">**Jumpbox.**</span><span class="sxs-lookup"><span data-stu-id="89e27-121">**Jumpbox.**</span></span> <span data-ttu-id="89e27-122">Também chamada de um [host bastião].</span><span class="sxs-lookup"><span data-stu-id="89e27-122">Also called a [bastion host].</span></span> <span data-ttu-id="89e27-123">Uma VM protegida na rede que os administradores usam para se conectar às outras VMs.</span><span class="sxs-lookup"><span data-stu-id="89e27-123">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="89e27-124">O jumpbox tem um NSG que permite o tráfego remoto apenas de endereços IP públicos em uma lista segura.</span><span class="sxs-lookup"><span data-stu-id="89e27-124">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="89e27-125">O NSG deve permitir o tráfego de RDP (área de trabalho remota).</span><span class="sxs-lookup"><span data-stu-id="89e27-125">The NSG should permit remote desktop (RDP) traffic.</span></span>
* <span data-ttu-id="89e27-126">**Monitoramento.**</span><span class="sxs-lookup"><span data-stu-id="89e27-126">**Monitoring.**</span></span> <span data-ttu-id="89e27-127">Softwares de monitoramento, como [Nagios], [Zabbix] ou [Icinga] podem fornecer informações sobre o tempo de resposta, tempo de atividade da VM e a integridade geral do sistema.</span><span class="sxs-lookup"><span data-stu-id="89e27-127">Monitoring software such as [Nagios], [Zabbix], or [Icinga] can give you insight into response time, VM uptime, and the overall health of your system.</span></span> <span data-ttu-id="89e27-128">Instale o software de monitoramento em uma VM que se encontra em uma sub-rede separada de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="89e27-128">Install the monitoring software on a VM that's placed in a separate management subnet.</span></span>
* <span data-ttu-id="89e27-129">**NSGs.**</span><span class="sxs-lookup"><span data-stu-id="89e27-129">**NSGs.**</span></span> <span data-ttu-id="89e27-130">Use os NSGs [grupos de segurança de rede][nsg] para restringir o tráfego de rede na VNet.</span><span class="sxs-lookup"><span data-stu-id="89e27-130">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="89e27-131">Por exemplo, na arquitetura de três camadas mostrada aqui, a camada de banco de dados não aceita o tráfego de front-end da Web, somente da camada comercial e da sub-rede de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="89e27-131">For example, in the 3-tier architecture shown here, the database tier does not accept traffic from the web front end, only from the business tier and the management subnet.</span></span>
* <span data-ttu-id="89e27-132">**Grupo de Disponibilidade Always On do SQL Server.**</span><span class="sxs-lookup"><span data-stu-id="89e27-132">**SQL Server Always On Availability Group.**</span></span> <span data-ttu-id="89e27-133">Fornece alta disponibilidade na camada de dados, habilitando replicação e failover.</span><span class="sxs-lookup"><span data-stu-id="89e27-133">Provides high availability at the data tier, by enabling replication and failover.</span></span>
* <span data-ttu-id="89e27-134">**Servidores AD DS (Active Directory Domain Services)**.</span><span class="sxs-lookup"><span data-stu-id="89e27-134">**Active Directory Domain Services (AD DS) Servers**.</span></span> <span data-ttu-id="89e27-135">Antes do Windows Server 2016, os Grupos de Disponibilidade Always On do SQL Server precisavam ser ingressados em um domínio.</span><span class="sxs-lookup"><span data-stu-id="89e27-135">Prior to Windows Server 2016, SQL Server Always On Availability Groups must be joined to a domain.</span></span> <span data-ttu-id="89e27-136">Isso ocorria porque os Grupos de Disponibilidade dependem da tecnologia do WSFC (Cluster de Failover do Windows Server).</span><span class="sxs-lookup"><span data-stu-id="89e27-136">This is because Availability Groups depend on Windows Server Failover Cluster (WSFC) technology.</span></span> <span data-ttu-id="89e27-137">O Windows Server 2016 introduziu a capacidade de criar um Cluster de Failover sem o Active Directory e nesse caso os servidores do AD DS não são necessários para essa arquitetura.</span><span class="sxs-lookup"><span data-stu-id="89e27-137">Windows Server 2016 introduces the ability to create a Failover Cluster without Active Directory, in which case the AD DS servers are not required for this architecture.</span></span> <span data-ttu-id="89e27-138">Para obter mais informações, consulte [Novidades no Clustering de Failover do Windows Server 2016][wsfc-whats-new].</span><span class="sxs-lookup"><span data-stu-id="89e27-138">For more information, see [What's new in Failover Clustering in Windows Server 2016][wsfc-whats-new].</span></span>

## <a name="recommendations"></a><span data-ttu-id="89e27-139">Recomendações</span><span class="sxs-lookup"><span data-stu-id="89e27-139">Recommendations</span></span>

<span data-ttu-id="89e27-140">Seus requisitos podem ser diferentes dos requisitos da arquitetura descrita aqui.</span><span class="sxs-lookup"><span data-stu-id="89e27-140">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="89e27-141">Use essas recomendações como ponto de partida.</span><span class="sxs-lookup"><span data-stu-id="89e27-141">Use these recommendations as a starting point.</span></span> 

### <a name="vnet--subnets"></a><span data-ttu-id="89e27-142">VNet / Sub-redes</span><span class="sxs-lookup"><span data-stu-id="89e27-142">VNet / Subnets</span></span>

<span data-ttu-id="89e27-143">Quando você cria a VNet, determine quantos endereços IP seus recursos em cada sub-rede exigem.</span><span class="sxs-lookup"><span data-stu-id="89e27-143">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="89e27-144">Especifique uma máscara de sub-rede e um intervalo de endereços de VNet grande o suficiente para os endereços IP necessários, usando a notação [CIDR].</span><span class="sxs-lookup"><span data-stu-id="89e27-144">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="89e27-145">Use um espaço de endereço que esteja dentro dos [blocos de endereço IP privados][private-ip-space] padrão, que são 10.0.0.0/8, 172.16.0.0/12 e 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="89e27-145">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="89e27-146">Escolha um intervalo de endereços que não se sobreponha ao da rede local para caso seja necessário configurar um gateway entre a VNet e a rede local mais tarde.</span><span class="sxs-lookup"><span data-stu-id="89e27-146">Choose an address range that does not overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="89e27-147">Depois de criar a VNet, não será possível alterar o intervalo de endereços.</span><span class="sxs-lookup"><span data-stu-id="89e27-147">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="89e27-148">Crie as sub-redes levando em conta os requisitos de funcionalidade e de segurança.</span><span class="sxs-lookup"><span data-stu-id="89e27-148">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="89e27-149">Todas as VMs na mesma camada ou função devem ir para a mesma sub-rede, que pode ser um limite de segurança.</span><span class="sxs-lookup"><span data-stu-id="89e27-149">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="89e27-150">Para obter mais informações sobre como criar VNets e sub-redes, consulte [Planejar e criar redes virtuais do Azure][plan-network].</span><span class="sxs-lookup"><span data-stu-id="89e27-150">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

<span data-ttu-id="89e27-151">Especifique o espaço de endereço para cada sub-rede em notação CIDR.</span><span class="sxs-lookup"><span data-stu-id="89e27-151">For each subnet, specify the address space for the subnet in CIDR notation.</span></span> <span data-ttu-id="89e27-152">Por exemplo, “10.0.0.0/24” cria um intervalo de 256 endereços IP.</span><span class="sxs-lookup"><span data-stu-id="89e27-152">For example, '10.0.0.0/24' creates a range of 256 IP addresses.</span></span> <span data-ttu-id="89e27-153">VMs podem usar 251 deles; cinco são reservados.</span><span class="sxs-lookup"><span data-stu-id="89e27-153">VMs can use 251 of these; five are reserved.</span></span> <span data-ttu-id="89e27-154">Verifique se que os intervalos de endereços não se sobrepõem a outras sub-redes.</span><span class="sxs-lookup"><span data-stu-id="89e27-154">Make sure the address ranges don't overlap across subnets.</span></span> <span data-ttu-id="89e27-155">Consulte as [Perguntas Frequentes sobre rede virtual][vnet faq].</span><span class="sxs-lookup"><span data-stu-id="89e27-155">See the [Virtual Network FAQ][vnet faq].</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="89e27-156">Grupos de segurança de rede</span><span class="sxs-lookup"><span data-stu-id="89e27-156">Network security groups</span></span>

<span data-ttu-id="89e27-157">Use as regras de NSG para restringir o tráfego entre as camadas.</span><span class="sxs-lookup"><span data-stu-id="89e27-157">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="89e27-158">Por exemplo, a arquitetura de três camadas mostrada acima, a camada da Web não se comunica diretamente com a camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-158">For example, in the 3-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="89e27-159">Para impor isso, a camada de banco de dados deve bloquear o tráfego de entrada da sub-rede da camada da Web.</span><span class="sxs-lookup"><span data-stu-id="89e27-159">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>  

1. <span data-ttu-id="89e27-160">Crie um NSG e associe-o à sub-rede da camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-160">Create an NSG and associate it to the database tier subnet.</span></span>
2. <span data-ttu-id="89e27-161">Adicione uma regra que nega todo o tráfego de entrada da VNet.</span><span class="sxs-lookup"><span data-stu-id="89e27-161">Add a rule that denies all inbound traffic from the VNet.</span></span> <span data-ttu-id="89e27-162">(Use a marca `VIRTUAL_NETWORK` na regra.)</span><span class="sxs-lookup"><span data-stu-id="89e27-162">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span> 
3. <span data-ttu-id="89e27-163">Adicione uma regra com uma prioridade mais alta que permite tráfego de entrada da sub-rede da camada comercial.</span><span class="sxs-lookup"><span data-stu-id="89e27-163">Add a rule with a higher priority that allows inbound traffic from the business tier subnet.</span></span> <span data-ttu-id="89e27-164">Essa regra substitui a regra anterior e permite que a camada comercial se comunique com a camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-164">This rule overrides the previous rule, and allows the business tier to talk to the database tier.</span></span>
4. <span data-ttu-id="89e27-165">Adicione uma regra para permitir o tráfego de entrada de dentro da própria sub-rede da camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-165">Add a rule that allows inbound traffic from within the database tier subnet itself.</span></span> <span data-ttu-id="89e27-166">Essa regra permite a comunicação entre as VMs na camada de banco de dados, que é necessária para failover e replicação de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-166">This rule allows communication between VMs in the database tier, which is needed for database replication and failover.</span></span>
5. <span data-ttu-id="89e27-167">Adicione uma regra para permitir o tráfego RDP da sub-rede de jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-167">Add a rule that allows RDP traffic from the jumpbox subnet.</span></span> <span data-ttu-id="89e27-168">Essa regra permite que os administradores se conectem à camada de banco de dados do jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-168">This rule lets administrators connect to the database tier from the jumpbox.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="89e27-169">Um NSG tem regras padrão que permitem qualquer tráfego de entrada de dentro da VNet.</span><span class="sxs-lookup"><span data-stu-id="89e27-169">An NSG has default rules that allow any inbound traffic from within the VNet.</span></span> <span data-ttu-id="89e27-170">Essas regras não podem ser excluídas, mas você pode substituí-las criando regras de prioridade mais alta.</span><span class="sxs-lookup"><span data-stu-id="89e27-170">These rules can't be deleted, but you can override them by creating higher priority rules.</span></span>
   > 
   > 

### <a name="load-balancers"></a><span data-ttu-id="89e27-171">Balanceadores de carga</span><span class="sxs-lookup"><span data-stu-id="89e27-171">Load balancers</span></span>

<span data-ttu-id="89e27-172">Um balanceador externo de carga que distribui o tráfego da Internet para a camada da Web.</span><span class="sxs-lookup"><span data-stu-id="89e27-172">The external load balancer distributes Internet traffic to the web tier.</span></span> <span data-ttu-id="89e27-173">Crie um endereço IP público para esse balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="89e27-173">Create a public IP address for this load balancer.</span></span> <span data-ttu-id="89e27-174">Consulte [Criação de um balanceador de carga para a Internet][lb-external-create].</span><span class="sxs-lookup"><span data-stu-id="89e27-174">See [Creating an Internet-facing load balancer][lb-external-create].</span></span>

<span data-ttu-id="89e27-175">O balanceador de carga interno distribui o tráfego de rede da camada da Web para a camada comercial.</span><span class="sxs-lookup"><span data-stu-id="89e27-175">The internal load balancer distributes network traffic from the web tier to the business tier.</span></span> <span data-ttu-id="89e27-176">Para conceder a este balanceador de carga de um endereço IP privado, crie uma configuração de IP de front-end e associe-o à sub-rede para a camada comercial.</span><span class="sxs-lookup"><span data-stu-id="89e27-176">To give this load balancer a private IP address, create a frontend IP configuration and associate it with the subnet for the business tier.</span></span> <span data-ttu-id="89e27-177">Consulte [Introdução à criação de um balanceador de carga interno][lb-internal-create].</span><span class="sxs-lookup"><span data-stu-id="89e27-177">See [Get started creating an Internal load balancer][lb-internal-create].</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="89e27-178">Grupos de Disponibilidade Always On do SQL Server</span><span class="sxs-lookup"><span data-stu-id="89e27-178">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="89e27-179">Recomendamos usar os [Grupos de Disponibilidade Always On][sql-alwayson] para alta disponibilidade no SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89e27-179">We recommend [Always On Availability Groups][sql-alwayson] for SQL Server high availability.</span></span> <span data-ttu-id="89e27-180">Antes do Windows Server 2016, os Grupos de Disponibilidade Always On exigiam um controlador de domínio e todos os nós no grupo de disponibilidade precisavam estar no mesmo domínio do AD.</span><span class="sxs-lookup"><span data-stu-id="89e27-180">Prior to Windows Server 2016, Always On Availability Groups require a domain controller, and all nodes in the availability group must be in the same AD domain.</span></span>

<span data-ttu-id="89e27-181">Outras camadas se conectam ao banco de dados por meio de um [ouvinte do grupo de disponibilidade][sql-alwayson-listeners].</span><span class="sxs-lookup"><span data-stu-id="89e27-181">Other tiers connect to the database through an [availability group listener][sql-alwayson-listeners].</span></span> <span data-ttu-id="89e27-182">O ouvinte permite que um cliente SQL se conecte sem saber o nome da instância física do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89e27-182">The listener enables a SQL client to connect without knowing the name of the physical instance of SQL Server.</span></span> <span data-ttu-id="89e27-183">VMs que acessam o banco de dados precisam ser ingressadas no domínio.</span><span class="sxs-lookup"><span data-stu-id="89e27-183">VMs that access the database must be joined to the domain.</span></span> <span data-ttu-id="89e27-184">O cliente (neste caso, outra camada) usa o DNS para resolver o nome da rede virtual do ouvinte em endereços IP.</span><span class="sxs-lookup"><span data-stu-id="89e27-184">The client (in this case, another tier) uses DNS to resolve the listener's virtual network name into IP addresses.</span></span>

<span data-ttu-id="89e27-185">Configure um grupo de disponibilidade Always On do SQL Server da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="89e27-185">Configure the SQL Server Always On Availability Group as follows:</span></span>

1. <span data-ttu-id="89e27-186">Crie um cluster WSFC (Clustering de Failover do Windows Server), um Grupo de Disponibilidade Always On do SQL Server e uma réplica primária.</span><span class="sxs-lookup"><span data-stu-id="89e27-186">Create a Windows Server Failover Clustering (WSFC) cluster, a SQL Server Always On Availability Group, and a primary replica.</span></span> <span data-ttu-id="89e27-187">Para obter mais informações, consulte [Introdução aos Grupos de disponibilidade Always On][sql-alwayson-getting-started].</span><span class="sxs-lookup"><span data-stu-id="89e27-187">For more information, see [Getting Started with Always On Availability Groups][sql-alwayson-getting-started].</span></span> 
2. <span data-ttu-id="89e27-188">Crie um balanceador de carga interno com um endereço IP privado estático.</span><span class="sxs-lookup"><span data-stu-id="89e27-188">Create an internal load balancer with a static private IP address.</span></span>
3. <span data-ttu-id="89e27-189">Crie um ouvinte do grupo de disponibilidade e mapeie o nome DNS do ouvinte para o endereço IP de um balanceador de carga interno.</span><span class="sxs-lookup"><span data-stu-id="89e27-189">Create an availability group listener, and map the listener's DNS name to the IP address of an internal load balancer.</span></span> 
4. <span data-ttu-id="89e27-190">Crie uma regra do balanceador de carga para a porta de escuta do SQL Server (porta TCP 1433 por padrão).</span><span class="sxs-lookup"><span data-stu-id="89e27-190">Create a load balancer rule for the SQL Server listening port (TCP port 1433 by default).</span></span> <span data-ttu-id="89e27-191">A regra do balanceador de carga deve habilitar *IP flutuante*, também chamado de Retorno de Servidor Direto.</span><span class="sxs-lookup"><span data-stu-id="89e27-191">The load balancer rule must enable *floating IP*, also called Direct Server Return.</span></span> <span data-ttu-id="89e27-192">Isso faz com que a VM responda diretamente para o cliente, o que permite uma conexão direta com a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="89e27-192">This causes the VM to reply directly to the client, which enables a direct connection to the primary replica.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="89e27-193">Quando o IP flutuante está habilitado, o número da porta de front-end deve ser igual ao número da porta de back-end na regra do balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="89e27-193">When floating IP is enabled, the front-end port number must be the same as the back-end port number in the load balancer rule.</span></span>
  > 
  > 

<span data-ttu-id="89e27-194">Quando um cliente SQL tenta se conectar, o balanceador de carga roteia a solicitação de conexão para a réplica primária.</span><span class="sxs-lookup"><span data-stu-id="89e27-194">When a SQL client tries to connect, the load balancer routes the connection request to the primary replica.</span></span> <span data-ttu-id="89e27-195">Se houver um failover para outra réplica, o balanceador de carga encaminhará automaticamente as solicitações subsequentes para uma nova réplica primária.</span><span class="sxs-lookup"><span data-stu-id="89e27-195">If there is a failover to another replica, the load balancer automatically routes subsequent requests to a new primary replica.</span></span> <span data-ttu-id="89e27-196">Para obter mais informações, consulte [Configurar um ouvinte de ILB para Grupos de Disponibilidade Always On do SQL Server][sql-alwayson-ilb].</span><span class="sxs-lookup"><span data-stu-id="89e27-196">For more information, see [Configure an ILB listener for SQL Server Always On Availability Groups][sql-alwayson-ilb].</span></span>

<span data-ttu-id="89e27-197">Durante um failover, as conexões de cliente existentes são fechadas.</span><span class="sxs-lookup"><span data-stu-id="89e27-197">During a failover, existing client connections are closed.</span></span> <span data-ttu-id="89e27-198">Após a conclusão do failover, novas conexões serão roteadas para a nova réplica primária.</span><span class="sxs-lookup"><span data-stu-id="89e27-198">After the failover completes, new connections will be routed to the new primary replica.</span></span>

<span data-ttu-id="89e27-199">Se seu aplicativo realiza muito mais leituras do que gravações, você pode descarregar algumas das consultas somente leitura para uma réplica secundária.</span><span class="sxs-lookup"><span data-stu-id="89e27-199">If your application makes significantly more reads than writes, you can offload some of the read-only queries to a secondary replica.</span></span> <span data-ttu-id="89e27-200">Consulte [Usar um ouvinte para se conectar a uma réplica secundária somente leitura (roteamento somente leitura)][sql-alwayson-read-only-routing].</span><span class="sxs-lookup"><span data-stu-id="89e27-200">See [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)][sql-alwayson-read-only-routing].</span></span>

<span data-ttu-id="89e27-201">Teste a implantação por [forçando um failover manual][sql-alwayson-force-failover] do grupo de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="89e27-201">Test your deployment by [forcing a manual failover][sql-alwayson-force-failover] of the availability group.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="89e27-202">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="89e27-202">Jumpbox</span></span>

<span data-ttu-id="89e27-203">O jumpbox terá requisitos mínimos de desempenho, portanto, selecione um tamanho de VM pequeno para o jumpbox como A1 Standard.</span><span class="sxs-lookup"><span data-stu-id="89e27-203">The jumpbox will have minimal performance requirements, so select a small VM size for the jumpbox such as Standard A1.</span></span> 

<span data-ttu-id="89e27-204">Crie um [endereço IP público] para o jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-204">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="89e27-205">Coloque o jumpbox na mesma VNet que as outras VMs, mas em uma sub-rede de gerenciamento separada.</span><span class="sxs-lookup"><span data-stu-id="89e27-205">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="89e27-206">Não permita o acesso RDP da Internet pública para as VMs que executam a carga de trabalho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="89e27-206">Do not allow RDP access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="89e27-207">Em vez disso, todo o acesso RDP a essas VMs deve ocorrer por meio do jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-207">Instead, all RDP access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="89e27-208">Um administrador faz logon no jumpbox e, em seguida, faz logon na VM por meio do jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-208">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="89e27-209">O jumpbox permite que tráfego RDP da Internet, mas apenas de endereços IP conhecidos e seguros.</span><span class="sxs-lookup"><span data-stu-id="89e27-209">The jumpbox allows RDP traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="89e27-210">Para proteger o jumpbox, crie um NSG e aplique-o à sub-rede do jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-210">To secure the jumpbox, create an NSG and apply it to the jumpbox subnet.</span></span> <span data-ttu-id="89e27-211">Adicione uma regra NSG para permitir conexões RDP somente de um conjunto seguro de endereços IP públicos.</span><span class="sxs-lookup"><span data-stu-id="89e27-211">Add an NSG rule that allows RDP connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="89e27-212">O NSG pode ser conectado à sub-rede ou à NIC de jumpbox.</span><span class="sxs-lookup"><span data-stu-id="89e27-212">The NSG can be attached either to the subnet or to the jumpbox NIC.</span></span> <span data-ttu-id="89e27-213">Nesse caso, recomendamos anexá-lo à NIC para que o tráfego RDP seja permitido somente para o jumpbox, mesmo se você adicionar outras VMs à mesma sub-rede.</span><span class="sxs-lookup"><span data-stu-id="89e27-213">In this case, we recommend attaching it to the NIC, so RDP traffic is permitted only to the jumpbox, even if you add other VMs to the same subnet.</span></span>

<span data-ttu-id="89e27-214">Configure os NSGs para outras sub-redes para permitir o tráfego RDP da sub-rede de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="89e27-214">Configure the NSGs for the other subnets to allow RDP traffic from the management subnet.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="89e27-215">Considerações sobre disponibilidade</span><span class="sxs-lookup"><span data-stu-id="89e27-215">Availability considerations</span></span>

<span data-ttu-id="89e27-216">Na camada de banco de dados, ter várias VMs não automaticamente significa ter um banco de dados altamente disponível.</span><span class="sxs-lookup"><span data-stu-id="89e27-216">At the database tier, having multiple VMs does not automatically translate into a highly available database.</span></span> <span data-ttu-id="89e27-217">Para um banco de dados relacional, você normalmente precisa usar a replicação e failover para obter alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="89e27-217">For a relational database, you will typically need to use replication and failover to achieve high availability.</span></span> <span data-ttu-id="89e27-218">Para o SQL Server, recomendamos usar os [Grupos de Disponibilidade Always On][sql-alwayson].</span><span class="sxs-lookup"><span data-stu-id="89e27-218">For SQL Server, we recommend using [Always On Availability Groups][sql-alwayson].</span></span> 

<span data-ttu-id="89e27-219">Se você precisar de disponibilidade mais alta do que a fornecida pelo [SLA do Azure para VMs][vm-sla], replique o aplicativo em duas regiões e use o Gerenciador de Tráfego do Azure para failover.</span><span class="sxs-lookup"><span data-stu-id="89e27-219">If you need higher availability than the [Azure SLA for VMs][vm-sla] provides, replicate the application across two regions and use Azure Traffic Manager for failover.</span></span> <span data-ttu-id="89e27-220">Para obter mais informações, consulte [Executar VMs do Windows em várias regiões para ter alta disponibilidade][multi-dc].</span><span class="sxs-lookup"><span data-stu-id="89e27-220">For more information, see [Run Windows VMs in multiple regions for high availability][multi-dc].</span></span>   

## <a name="security-considerations"></a><span data-ttu-id="89e27-221">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="89e27-221">Security considerations</span></span>

<span data-ttu-id="89e27-222">Criptografe dados confidenciais em repouso e use o [Azure Key Vault][azure-key-vault] para gerenciar as chaves de criptografia de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="89e27-222">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="89e27-223">O Key Vault pode armazenar chaves de criptografia em HSMs (módulos de segurança de hardware).</span><span class="sxs-lookup"><span data-stu-id="89e27-223">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="89e27-224">Para obter mais informações, consulte [Configurar a integração do Azure Key Vault para o SQL Server em VMs do Azure][sql-keyvault] Também é recomendado armazenar segredos do aplicativo, como cadeias de caracteres de conexão de banco de dados, no Key Vault.</span><span class="sxs-lookup"><span data-stu-id="89e27-224">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs][sql-keyvault] It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="89e27-225">Considere adicionar uma NVA (solução de virtualização de rede) para criar uma DMZ entre a Internet e a rede virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="89e27-225">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="89e27-226">NVA é um termo genérico para uma solução de virtualização que pode executar tarefas relacionadas à rede, como firewall, inspeção de pacotes, auditoria e roteamento personalizado.</span><span class="sxs-lookup"><span data-stu-id="89e27-226">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="89e27-227">Para obter mais informações, consulte [Implementação de uma DMZ entre o Azure e a Internet][dmz].</span><span class="sxs-lookup"><span data-stu-id="89e27-227">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="89e27-228">Considerações sobre escalabilidade</span><span class="sxs-lookup"><span data-stu-id="89e27-228">Scalability considerations</span></span>

<span data-ttu-id="89e27-229">Os balanceadores de carga distribuem o tráfego de rede para as camadas comercial e da Web.</span><span class="sxs-lookup"><span data-stu-id="89e27-229">The load balancers distribute network traffic to the web and business tiers.</span></span> <span data-ttu-id="89e27-230">Dimensione horizontalmente adicionando novas instâncias de VM.</span><span class="sxs-lookup"><span data-stu-id="89e27-230">Scale horizontally by adding new VM instances.</span></span> <span data-ttu-id="89e27-231">Observe que é possível dimensionar as camadas comercial e da Web independentemente, dependendo da carga.</span><span class="sxs-lookup"><span data-stu-id="89e27-231">Note that you can scale the web and business tiers independently, based on load.</span></span> <span data-ttu-id="89e27-232">Para reduzir possíveis complicações causadas pela necessidade de manter a afinidade do cliente, as VMs na camada da Web devem ser sem estado.</span><span class="sxs-lookup"><span data-stu-id="89e27-232">To reduce possible complications caused by the need to maintain client affinity, the VMs in the web tier should be stateless.</span></span> <span data-ttu-id="89e27-233">As VMs que hospedam a lógica de negócios também devem ser sem estado.</span><span class="sxs-lookup"><span data-stu-id="89e27-233">The VMs hosting the business logic should also be stateless.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="89e27-234">Considerações sobre capacidade de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="89e27-234">Manageability considerations</span></span>

<span data-ttu-id="89e27-235">Simplifique o gerenciamento de todo o sistema usando ferramentas de administração centralizada, como [Automação do Azure][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef] ou [Puppet][puppet].</span><span class="sxs-lookup"><span data-stu-id="89e27-235">Simplify management of the entire system by using centralized administration tools such as [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef], or [Puppet][puppet].</span></span> <span data-ttu-id="89e27-236">Essas ferramentas podem consolidar informações de diagnóstico e de integridade capturadas de várias VMs para fornecer uma visão geral do sistema.</span><span class="sxs-lookup"><span data-stu-id="89e27-236">These tools can consolidate diagnostic and health information captured from multiple VMs to provide an overall view of the system.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="89e27-237">Implantar a solução</span><span class="sxs-lookup"><span data-stu-id="89e27-237">Deploy the solution</span></span>

<span data-ttu-id="89e27-238">Uma implantação para essa arquitetura está disponível no [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="89e27-238">A deployment for this architecture is available on [GitHub][github-folder].</span></span> <span data-ttu-id="89e27-239">A arquitetura é implantada em três estágios.</span><span class="sxs-lookup"><span data-stu-id="89e27-239">The architecture is deployed in three stages.</span></span> <span data-ttu-id="89e27-240">Para implantar a arquitetura, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="89e27-240">To deploy the architecture, follow these steps:</span></span> 

1. <span data-ttu-id="89e27-241">Clique no botão abaixo para iniciar o primeiro estágio de implantação:</span><span class="sxs-lookup"><span data-stu-id="89e27-241">Click the button below to begin the first stage of deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2FvirtualNetwork.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="89e27-242">Depois que o link for aberto no portal do Azure, insira os valores a seguir:</span><span class="sxs-lookup"><span data-stu-id="89e27-242">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="89e27-243">O nome do **Grupo de recursos** já está definido no arquivo de parâmetros, portanto, selecione **Criar novo** e digite `ra-ntier-sql-network-rg` na caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="89e27-243">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="89e27-244">Selecione a região na caixa suspensa **Local**.</span><span class="sxs-lookup"><span data-stu-id="89e27-244">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="89e27-245">Não edite as caixas de texto **URI da raiz do modelo** ou **URI da raiz do parâmetro**.</span><span class="sxs-lookup"><span data-stu-id="89e27-245">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="89e27-246">Analise os termos e condições e clique na caixa de seleção **Concordo com os termos e condições declarados acima**.</span><span class="sxs-lookup"><span data-stu-id="89e27-246">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="89e27-247">Clique no botão **Comprar**.</span><span class="sxs-lookup"><span data-stu-id="89e27-247">Click on the **Purchase** button.</span></span>
3. <span data-ttu-id="89e27-248">Verifique a notificação no Portal do Azure para ver uma mensagem indicando que o primeiro estágio da implantação for concluído.</span><span class="sxs-lookup"><span data-stu-id="89e27-248">Check Azure portal notification for a message that the first stage of the deployment is complete.</span></span>
4. <span data-ttu-id="89e27-249">Clique no botão abaixo para iniciar o segundo estágio da implantação:</span><span class="sxs-lookup"><span data-stu-id="89e27-249">Click the button below to begin the second stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fworkload.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
5. <span data-ttu-id="89e27-250">Depois que o link for aberto no portal do Azure, insira os valores a seguir:</span><span class="sxs-lookup"><span data-stu-id="89e27-250">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="89e27-251">O nome do **Grupo de recursos** já está definido no arquivo de parâmetros, portanto, selecione **Criar novo** e digite `ra-ntier-sql-workload-rg` na caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="89e27-251">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-ntier-sql-workload-rg` in the text box.</span></span>
   * <span data-ttu-id="89e27-252">Selecione a região na caixa suspensa **Local**.</span><span class="sxs-lookup"><span data-stu-id="89e27-252">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="89e27-253">Não edite as caixas de texto **URI da raiz do modelo** ou **URI da raiz do parâmetro**.</span><span class="sxs-lookup"><span data-stu-id="89e27-253">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="89e27-254">Analise os termos e condições e clique na caixa de seleção **Concordo com os termos e condições declarados acima**.</span><span class="sxs-lookup"><span data-stu-id="89e27-254">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="89e27-255">Clique no botão **Comprar**.</span><span class="sxs-lookup"><span data-stu-id="89e27-255">Click on the **Purchase** button.</span></span>
6. <span data-ttu-id="89e27-256">Verifique a notificação no Portal do Azure para ver uma mensagem indicando que o segundo estágio de implantação for concluído.</span><span class="sxs-lookup"><span data-stu-id="89e27-256">Check Azure portal notification for a message that the second stage of deployment is complete.</span></span>
7. <span data-ttu-id="89e27-257">Clique no botão abaixo para iniciar o terceiro estágio da implantação:</span><span class="sxs-lookup"><span data-stu-id="89e27-257">Click the button below to begin the third stage of the deployment:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fvirtual-machines%2Fn-tier-windows%2Fsecurity.azuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
8. <span data-ttu-id="89e27-258">Depois que o link for aberto no portal do Azure, insira os valores a seguir:</span><span class="sxs-lookup"><span data-stu-id="89e27-258">Once the link has opened in the Azure portal, enter the follow values:</span></span> 
   * <span data-ttu-id="89e27-259">O nome do **Grupo de recursos** já está definido no arquivo de parâmetros, portanto, selecione **Usar Existente** e digite `ra-ntier-sql-network-rg` na caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="89e27-259">The **Resource group** name is already defined in the parameter file, so select **Use Existing** and enter `ra-ntier-sql-network-rg` in the text box.</span></span>
   * <span data-ttu-id="89e27-260">Selecione a região na caixa suspensa **Local**.</span><span class="sxs-lookup"><span data-stu-id="89e27-260">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="89e27-261">Não edite as caixas de texto **URI da raiz do modelo** ou **URI da raiz do parâmetro**.</span><span class="sxs-lookup"><span data-stu-id="89e27-261">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="89e27-262">Analise os termos e condições e clique na caixa de seleção **Concordo com os termos e condições declarados acima**.</span><span class="sxs-lookup"><span data-stu-id="89e27-262">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="89e27-263">Clique no botão **Comprar**.</span><span class="sxs-lookup"><span data-stu-id="89e27-263">Click on the **Purchase** button.</span></span>
9. <span data-ttu-id="89e27-264">Verifique a notificação no Portal do Azure para ver uma mensagem indicando que o terceiro estágio da implantação for concluído.</span><span class="sxs-lookup"><span data-stu-id="89e27-264">Check Azure portal notification for a message that the third stage of the deployment is complete.</span></span>
10. <span data-ttu-id="89e27-265">Os arquivos de parâmetro incluem nomes de usuário e senha de administrador embutidos em código e é altamente recomendável que você altere imediatamente ambos em todas as VMs.</span><span class="sxs-lookup"><span data-stu-id="89e27-265">The parameter files include a hard-coded administrator user names and passwords, and it is strongly recommended that you immediately change both on all the VMs.</span></span> <span data-ttu-id="89e27-266">Clique em cada VM no Portal do Azure e, em seguida, clique em **Redefinir senha** na folha **Suporte + solução de problemas**.</span><span class="sxs-lookup"><span data-stu-id="89e27-266">Click on each VM in the Azure portal then click on **Reset password** in the **Support + troubleshooting** blade.</span></span> <span data-ttu-id="89e27-267">Selecione **Redefinir senha** na caixa suspensa **Modo**, selecione um novo **Nome de usuário** e **Senha**.</span><span class="sxs-lookup"><span data-stu-id="89e27-267">Select **Reset password** in the **Mode** dropdown box, then select a new **User name** and **Password**.</span></span> <span data-ttu-id="89e27-268">Clique no botão **Atualizar** para salvar o novo nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="89e27-268">Click the **Update** button to save the new user name and password.</span></span> 


<!-- links -->
[dmz]: ../dmz/secure-vnet-dmz.md
[multi-dc]: multi-region-application.md
[multi-vm]: multi-vm.md
[n-tier]: n-tier.md

[azure-administration]: /azure/automation/automation-intro
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-windows-manage-availability#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: /azure/virtual-machines-command-line-tools
[azure-key-vault]: https://azure.microsoft.com/services/key-vault
[host bastião]: https://en.wikipedia.org/wiki/Bastion_host
[cidr]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-windows
[lb-external-create]: /azure/load-balancer/load-balancer-get-started-internet-portal
[lb-internal-create]: /azure/load-balancer/load-balancer-get-started-ilb-arm-portal
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[operations-management-suite]: https://www.microsoft.com/server-cloud/operations-management-suite/overview.aspx
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[endereço IP público]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[sql-alwayson]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/library/gg509118.aspx
[sql-alwayson-ilb]: /azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-alwayson-int-listener
[sql-alwayson-listeners]: https://msdn.microsoft.com/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: /azure/virtual-machines/virtual-machines-windows-ps-sql-keyvault
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[vnet faq]: /azure/virtual-network/virtual-networks-faq
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[0]: ./images/n-tier-diagram.png "Arquitetura de N camadas usando o Microsoft Azure"
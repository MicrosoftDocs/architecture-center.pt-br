---
title: "Aplicativo Web básico"
description: "Arquitetura recomendada para um aplicativo Web básico executado no Microsoft Azure."
author: MikeWasson
ms.date: 11/23/2016
cardTitle: Basic web application
ms.openlocfilehash: b7475c4087a184bb7608d0c45ffecee912c920d7
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
---
# <a name="basic-web-application"></a><span data-ttu-id="24721-103">Aplicativo Web básico</span><span class="sxs-lookup"><span data-stu-id="24721-103">Basic web application</span></span>
[!INCLUDE [header](../../_includes/header.md)]

<span data-ttu-id="24721-104">Essa arquitetura de referência mostra um conjunto de práticas comprovadas para um aplicativo Web que usa o [Serviço de Aplicativo do Azure][app-service] e o [Banco de Dados SQL do Azure][sql-db].</span><span class="sxs-lookup"><span data-stu-id="24721-104">This reference architecture shows a set of proven practices for a web application that uses [Azure App Service][app-service] and [Azure SQL Database][sql-db].</span></span> [<span data-ttu-id="24721-105">**Implante essa solução.**</span><span class="sxs-lookup"><span data-stu-id="24721-105">**Deploy this solution.**</span></span>](#deploy-the-solution)

<span data-ttu-id="24721-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="24721-106">![[0]][0]</span></span>

<span data-ttu-id="24721-107">*Baixe um [Arquivo Visio][visio-download] dessa arquitetura.*</span><span class="sxs-lookup"><span data-stu-id="24721-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="24721-108">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="24721-108">Architecture</span></span> 

> [!NOTE]
> <span data-ttu-id="24721-109">Essa arquitetura não se concentra no desenvolvimento de aplicativos e não assume nenhuma estrutura de aplicativo específica.</span><span class="sxs-lookup"><span data-stu-id="24721-109">This architecture does not focus on application development, and does not assume any particular application framework.</span></span> <span data-ttu-id="24721-110">A meta é entender como vários serviços do Azure se combinam.</span><span class="sxs-lookup"><span data-stu-id="24721-110">The goal is to understand how various Azure services fit together.</span></span>
>
>

<span data-ttu-id="24721-111">A arquitetura tem os seguintes componentes:</span><span class="sxs-lookup"><span data-stu-id="24721-111">The architecture has the following components:</span></span>

* <span data-ttu-id="24721-112">**Grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="24721-112">**Resource group**.</span></span> <span data-ttu-id="24721-113">Um [grupo de recursos](/azure/azure-resource-manager/resource-group-overview) é um contêiner lógico para recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="24721-113">A [resource group](/azure/azure-resource-manager/resource-group-overview) is a logical container for Azure resources.</span></span>
* <span data-ttu-id="24721-114">**Aplicativo do Serviço de Aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="24721-114">**App Service app**.</span></span> <span data-ttu-id="24721-115">O [Serviço de Aplicativo do Azure][app-service] é uma plataforma totalmente gerenciada para criar e implantar aplicativos de nuvem.</span><span class="sxs-lookup"><span data-stu-id="24721-115">[Azure App Service][app-service] is a fully managed platform for creating and deploying cloud applications.</span></span>     
* <span data-ttu-id="24721-116">**Plano do Serviço de Aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="24721-116">**App Service plan**.</span></span> <span data-ttu-id="24721-117">Um [Plano do Serviço de Aplicativo][app-service-plans] fornece as VMs (máquinas virtuais) gerenciadas que hospedam o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-117">An [App Service plan][app-service-plans] provides the managed virtual machines (VMs) that host your app.</span></span> <span data-ttu-id="24721-118">Todos os aplicativos associados a um plano são executados nas mesmas instâncias de VM.</span><span class="sxs-lookup"><span data-stu-id="24721-118">All apps associated with a plan run on the same VM instances.</span></span>

* <span data-ttu-id="24721-119">**Slots de implantação**.</span><span class="sxs-lookup"><span data-stu-id="24721-119">**Deployment slots**.</span></span>  <span data-ttu-id="24721-120">Um [slot de implantação][deployment-slots] permite preparar uma implantação e, em seguida, alterná-la para a implantação de produção.</span><span class="sxs-lookup"><span data-stu-id="24721-120">A [deployment slot][deployment-slots] lets you stage a deployment and then swap it with the production deployment.</span></span> <span data-ttu-id="24721-121">Dessa forma, evita-se implantar diretamente na produção.</span><span class="sxs-lookup"><span data-stu-id="24721-121">That way, you avoid deploying directly into production.</span></span> <span data-ttu-id="24721-122">Consulte a seção [Capacidade de gerenciamento](#manageability-considerations) para obter recomendações específicas.</span><span class="sxs-lookup"><span data-stu-id="24721-122">See the [Manageability](#manageability-considerations) section for specific recommendations.</span></span>

* <span data-ttu-id="24721-123">**Endereço IP**.</span><span class="sxs-lookup"><span data-stu-id="24721-123">**IP address**.</span></span> <span data-ttu-id="24721-124">O aplicativo Serviço de Aplicativo tem um endereço IP público e um nome de domínio.</span><span class="sxs-lookup"><span data-stu-id="24721-124">The App Service app has a public IP address and a domain name.</span></span> <span data-ttu-id="24721-125">O nome de domínio é um subdomínio de `azurewebsites.net`, como `contoso.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="24721-125">The domain name is a subdomain of `azurewebsites.net`, such as `contoso.azurewebsites.net`.</span></span> <span data-ttu-id="24721-126">Para usar um nome de domínio personalizado, como `contoso.com`, crie registros DNS (Serviço de Nomes de Domínio) que mapeiam o nome de domínio personalizado para o endereço IP.</span><span class="sxs-lookup"><span data-stu-id="24721-126">To use a custom domain name, such as `contoso.com`, create domain name service (DNS) records that map the custom domain name to the IP address.</span></span> <span data-ttu-id="24721-127">Para obter mais informações, consulte [Configurar um nome de domínio personalizado no Serviço de Aplicativo do Azure][custom-domain-name].</span><span class="sxs-lookup"><span data-stu-id="24721-127">For more information, see [Configure a custom domain name in Azure App Service][custom-domain-name].</span></span>
* <span data-ttu-id="24721-128">**Banco de dados SQL do Azure**.</span><span class="sxs-lookup"><span data-stu-id="24721-128">**Azure SQL Database**.</span></span> <span data-ttu-id="24721-129">O [Banco de Dados SQL][sql-db] é um banco de dados relacional como um serviço na nuvem.</span><span class="sxs-lookup"><span data-stu-id="24721-129">[SQL Database][sql-db] is a relational database-as-a-service in the cloud.</span></span>
* <span data-ttu-id="24721-130">**Servidor lógico**.</span><span class="sxs-lookup"><span data-stu-id="24721-130">**Logical server**.</span></span> <span data-ttu-id="24721-131">No Banco de Dados SQL do Azure, um servidor lógico hospeda os seus bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="24721-131">In Azure SQL Database, a logical server hosts your databases.</span></span> <span data-ttu-id="24721-132">Você pode criar vários bancos de dados por servidor lógico.</span><span class="sxs-lookup"><span data-stu-id="24721-132">You can create multiple databases per logical server.</span></span>
* <span data-ttu-id="24721-133">**Armazenamento do Azure**.</span><span class="sxs-lookup"><span data-stu-id="24721-133">**Azure Storage**.</span></span> <span data-ttu-id="24721-134">Crie uma conta de armazenamento do Azure com um contêiner de blob para armazenar logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="24721-134">Create an Azure storage account with a blob container to store diagnostic logs.</span></span>
* <span data-ttu-id="24721-135">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="24721-135">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="24721-136">Use o Azure AD ou outro provedor de identidade para autenticação.</span><span class="sxs-lookup"><span data-stu-id="24721-136">Use Azure AD or another identity provider for authentication.</span></span>

## <a name="recommendations"></a><span data-ttu-id="24721-137">Recomendações</span><span class="sxs-lookup"><span data-stu-id="24721-137">Recommendations</span></span>

<span data-ttu-id="24721-138">Seus requisitos podem ser diferentes dos requisitos da arquitetura descrita aqui.</span><span class="sxs-lookup"><span data-stu-id="24721-138">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="24721-139">Use as recomendações nesta seção como um ponto inicial.</span><span class="sxs-lookup"><span data-stu-id="24721-139">Use the recommendations in this section as a starting point.</span></span>

### <a name="app-service-plan"></a><span data-ttu-id="24721-140">Plano do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="24721-140">App Service plan</span></span>
<span data-ttu-id="24721-141">Use as camadas Standard ou Premium porque elas dão suporte para expansão, dimensionamento automático e protocolo SSL.</span><span class="sxs-lookup"><span data-stu-id="24721-141">Use the Standard or Premium tiers, because they support scale out, autoscale, and secure sockets layer (SSL).</span></span> <span data-ttu-id="24721-142">Cada camada dá suporte a vários *tamanhos de instância* que diferem por número de núcleos e memória.</span><span class="sxs-lookup"><span data-stu-id="24721-142">Each tier supports several *instance sizes* that differ by number of cores and memory.</span></span> <span data-ttu-id="24721-143">Depois de criar um plano, você pode alterar a camada ou o tamanho da instância.</span><span class="sxs-lookup"><span data-stu-id="24721-143">You can change the tier or instance size after you create a plan.</span></span> <span data-ttu-id="24721-144">Para obter mais informações sobre os Planos do Serviço de Aplicativo, consulte [Preços do Serviço de Aplicativo][app-service-plans-tiers].</span><span class="sxs-lookup"><span data-stu-id="24721-144">For more information about App Service plans, see [App Service Pricing][app-service-plans-tiers].</span></span>

<span data-ttu-id="24721-145">Você será cobrado pelas instâncias no Plano do Serviço de Aplicativo, mesmo se o aplicativo estiver parado.</span><span class="sxs-lookup"><span data-stu-id="24721-145">You are charged for the instances in the App Service plan, even if the app is stopped.</span></span> <span data-ttu-id="24721-146">Lembre-se de excluir os planos que você não estiver usando (por exemplo, implantações de teste).</span><span class="sxs-lookup"><span data-stu-id="24721-146">Make sure to delete plans that you aren't using (for example, test deployments).</span></span>

### <a name="sql-database"></a><span data-ttu-id="24721-147">Banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="24721-147">SQL Database</span></span>
<span data-ttu-id="24721-148">Use a [versão V12][sql-db-v12] do Banco de Dados SQL.</span><span class="sxs-lookup"><span data-stu-id="24721-148">Use the [V12 version][sql-db-v12] of SQL Database.</span></span> <span data-ttu-id="24721-149">O Banco de Dados SQL dá suporte às [camadas de serviço][sql-db-service-tiers] Básico, Standard e Premium, com vários níveis de desempenho em cada camada que são medidos em [DTUs (Unidades de Transmissão de Dados)][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="24721-149">SQL Database supports Basic, Standard, and Premium [service tiers][sql-db-service-tiers], with multiple performance levels within each tier measured in [Database Transaction Units (DTUs)][sql-dtu].</span></span> <span data-ttu-id="24721-150">Execute o planejamento de capacidade e escolha uma camada e um nível de desempenho que atendam às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="24721-150">Perform capacity planning and choose a tier and performance level that meets your requirements.</span></span>

### <a name="region"></a><span data-ttu-id="24721-151">Região</span><span class="sxs-lookup"><span data-stu-id="24721-151">Region</span></span>
<span data-ttu-id="24721-152">Provisione o Plano do Serviço de Aplicativo e o Banco de Dados SQL na mesma região para minimizar a latência de rede.</span><span class="sxs-lookup"><span data-stu-id="24721-152">Provision the App Service plan and the SQL Database in the same region to minimize network latency.</span></span> <span data-ttu-id="24721-153">Em geral, escolha a região mais próxima aos usuários.</span><span class="sxs-lookup"><span data-stu-id="24721-153">Generally, choose the region closest to your users.</span></span>

<span data-ttu-id="24721-154">O grupo de recursos também tem uma região, que especifica onde armazenar os metadados de implantação.</span><span class="sxs-lookup"><span data-stu-id="24721-154">The resource group also has a region, which specifies where deployment metadata is stored.</span></span> <span data-ttu-id="24721-155">Coloque o grupo de recursos e seus recursos na mesma região.</span><span class="sxs-lookup"><span data-stu-id="24721-155">Put the resource group and its resources in the same region.</span></span> <span data-ttu-id="24721-156">Isso pode melhorar a disponibilidade durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="24721-156">This can improve availability during deployment.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="24721-157">Considerações sobre escalabilidade</span><span class="sxs-lookup"><span data-stu-id="24721-157">Scalability considerations</span></span>

<span data-ttu-id="24721-158">Um grande benefício do Serviço de Aplicativo do Azure é a capacidade de dimensionar o aplicativo com base na carga.</span><span class="sxs-lookup"><span data-stu-id="24721-158">A major benefit of Azure App Service is the ability to scale your application based on load.</span></span> <span data-ttu-id="24721-159">Aqui estão algumas considerações para ter em mente ao planejar dimensionar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-159">Here are some considerations to keep in mind when planning to scale your application.</span></span>

### <a name="scaling-the-app-service-app"></a><span data-ttu-id="24721-160">Dimensionando o aplicativo do Serviço de Aplicativo</span><span class="sxs-lookup"><span data-stu-id="24721-160">Scaling the App Service app</span></span>

<span data-ttu-id="24721-161">Há dois modos de dimensionar um aplicativo do Serviço de Aplicativo:</span><span class="sxs-lookup"><span data-stu-id="24721-161">There are two ways to scale an App Service app:</span></span>

* <span data-ttu-id="24721-162">*Aumentar*, que significa alterar o tamanho da instância.</span><span class="sxs-lookup"><span data-stu-id="24721-162">*Scale up*, which means changing the instance size.</span></span> <span data-ttu-id="24721-163">O tamanho da instância determina a memória, o número de núcleos e o armazenamento em cada instância VM.</span><span class="sxs-lookup"><span data-stu-id="24721-163">The instance size determines the memory, number of cores, and storage on each VM instance.</span></span> <span data-ttu-id="24721-164">Você pode aumentar manualmente, alterando o tamanho da instância ou a camada do plano.</span><span class="sxs-lookup"><span data-stu-id="24721-164">You can scale up manually by changing the instance size or the plan tier.</span></span>  

* <span data-ttu-id="24721-165">*Expandir*, que significa adicionar instâncias para lidar com o aumento da carga.</span><span class="sxs-lookup"><span data-stu-id="24721-165">*Scale out*, which means adding instances to handle increased load.</span></span> <span data-ttu-id="24721-166">Cada tipo de preço tem um número máximo de instâncias.</span><span class="sxs-lookup"><span data-stu-id="24721-166">Each pricing tier has a maximum number of instances.</span></span> 

  <span data-ttu-id="24721-167">Você pode expandir manualmente alterando a contagem de instâncias ou usar o [dimensionamento automático][web-app-autoscale] para que o Azure adicione ou remova instâncias automaticamente com base nas métricas de agendamento e/ou de desempenho.</span><span class="sxs-lookup"><span data-stu-id="24721-167">You can scale out manually by changing the instance count, or use [autoscaling][web-app-autoscale] to have Azure automatically add or remove instances based on a schedule and/or performance metrics.</span></span> <span data-ttu-id="24721-168">Cada operação de escala ocorre rapidamente, normalmente em questão de segundos.</span><span class="sxs-lookup"><span data-stu-id="24721-168">Each scale operation happens quickly&mdash;typically within seconds.</span></span> 

  <span data-ttu-id="24721-169">Para habilitar o dimensionamento automático, crie um *perfil* de dimensionamento automático que defina o número mínimo e máximo de instâncias.</span><span class="sxs-lookup"><span data-stu-id="24721-169">To enable autoscaling, create an autoscale *profile* that defines the minimum and maximum number of instances.</span></span> <span data-ttu-id="24721-170">Os perfis podem ser agendados.</span><span class="sxs-lookup"><span data-stu-id="24721-170">Profiles can be scheduled.</span></span> <span data-ttu-id="24721-171">Por exemplo, você pode criar perfis separados para dias da semana e finais de semana.</span><span class="sxs-lookup"><span data-stu-id="24721-171">For example, you might create separate profiles for weekdays and weekends.</span></span> <span data-ttu-id="24721-172">Opcionalmente, um perfil pode conter regras de quando adicionar ou remover instâncias.</span><span class="sxs-lookup"><span data-stu-id="24721-172">Optionally, a profile contains rules for when to add or remove instances.</span></span> <span data-ttu-id="24721-173">(Exemplo: adicionar duas instâncias se o uso da CPU ficar acima de 70% durante 5 minutos.)</span><span class="sxs-lookup"><span data-stu-id="24721-173">(Example: Add two instances if CPU usage is above 70% for 5 minutes.)</span></span>
  
<span data-ttu-id="24721-174">Recomendações para dimensionar um aplicativo Web:</span><span class="sxs-lookup"><span data-stu-id="24721-174">Recommendations for scaling a web app:</span></span>

* <span data-ttu-id="24721-175">Evite ao máximo escalar e reduzir verticalmente, pois isso pode disparar um reinício do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-175">As much as possible, avoid scaling up and down, because it may trigger an application restart.</span></span> <span data-ttu-id="24721-176">Nesse caso, selecione uma camada e um tamanho que atendam aos seus requisitos de desempenho para uma carga típica e, em seguida, aumente as instâncias para lidar com as alterações no volume de tráfego.</span><span class="sxs-lookup"><span data-stu-id="24721-176">Instead, select a tier and size that meet your performance requirements under typical load and then scale out the instances to handle changes in traffic volume.</span></span>    
* <span data-ttu-id="24721-177">Habilite o dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="24721-177">Enable autoscaling.</span></span> <span data-ttu-id="24721-178">Se seu aplicativo tiver uma carga de trabalho previsível e regular, crie perfis para agendar as contagens de instância antecipadamente.</span><span class="sxs-lookup"><span data-stu-id="24721-178">If your application has a predictable, regular workload, create profiles to schedule the instance counts ahead of time.</span></span> <span data-ttu-id="24721-179">Se a carga de trabalho não for previsível, use o dimensionamento automático baseado em regras para reagir às alterações na carga conforme elas ocorrem.</span><span class="sxs-lookup"><span data-stu-id="24721-179">If the workload is not predictable, use rule-based autoscaling to react to changes in load as they occur.</span></span> <span data-ttu-id="24721-180">Você pode combinar as duas abordagens.</span><span class="sxs-lookup"><span data-stu-id="24721-180">You can combine both approaches.</span></span>
* <span data-ttu-id="24721-181">Geralmente, o uso da CPU é uma boa métrica para as regras de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="24721-181">CPU usage is generally a good metric for autoscale rules.</span></span> <span data-ttu-id="24721-182">No entanto, você deve fazer um teste de carga do seu aplicativo, identificar gargalos potenciais e basear as regras de dimensionamento automático nesses dados.</span><span class="sxs-lookup"><span data-stu-id="24721-182">However, you should load test your application, identify potential bottlenecks, and base your autoscale rules on that data.</span></span>  
* <span data-ttu-id="24721-183">As regras de dimensionamento automático incluem um tempo de *resfriamento*, que é o intervalo de espera após a conclusão de uma ação de escala antes do início de uma nova ação de escala.</span><span class="sxs-lookup"><span data-stu-id="24721-183">Autoscale rules include a *cool-down* period, which is the interval to wait after a scale action has completed before starting a new scale action.</span></span> <span data-ttu-id="24721-184">O período de resfriamento permite que o sistema se estabilize antes de ser escalado novamente.</span><span class="sxs-lookup"><span data-stu-id="24721-184">The cool-down period lets the system stabilize before scaling again.</span></span> <span data-ttu-id="24721-185">Defina um período de resfriamento menor para adicionar instâncias e um período de resfriamento maior para remover instâncias.</span><span class="sxs-lookup"><span data-stu-id="24721-185">Set a shorter cool-down period for adding instances, and a longer cool-down period for removing instances.</span></span> <span data-ttu-id="24721-186">Por exemplo, defina 5 minutos para adicionar uma instância, mas 60 minutos para remover uma instância.</span><span class="sxs-lookup"><span data-stu-id="24721-186">For example, set 5 minutes to add an instance, but 60 minutes to remove an instance.</span></span> <span data-ttu-id="24721-187">É melhor adicionar novas instâncias rapidamente quando a carga está pesada para lidar com o tráfego adicional e, quando necessário, reduzir novamente gradualmente.</span><span class="sxs-lookup"><span data-stu-id="24721-187">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

### <a name="scaling-sql-database"></a><span data-ttu-id="24721-188">Dimensionando o Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="24721-188">Scaling SQL Database</span></span>
<span data-ttu-id="24721-189">Caso seja necessário elevar uma camada de serviço ou um nível de desempenho do Banco de Dados SQL, você poderá aumentar os bancos de dados individuais, sem tempo de inatividade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-189">If you need a higher service tier or performance level for SQL Database, you can scale up individual databases with no application downtime.</span></span> <span data-ttu-id="24721-190">Para obter mais informações, consulte [Opções e desempenho do Banco de Dados SQL: entenda o que está disponível em cada camada de serviço][sql-db-scale].</span><span class="sxs-lookup"><span data-stu-id="24721-190">For more information, see [SQL Database options and performance: Understand what's available in each service tier][sql-db-scale].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="24721-191">Considerações sobre disponibilidade</span><span class="sxs-lookup"><span data-stu-id="24721-191">Availability considerations</span></span>
<span data-ttu-id="24721-192">No momento da gravação, o SLA (Contrato de Nível de Serviço) do Serviço de Aplicativo é de 99,95% e o SLA do Banco de Dados SQL é de 99,99% para as camadas Básica, Standard e Premium.</span><span class="sxs-lookup"><span data-stu-id="24721-192">At the time of writing, the service level agreement (SLA) for App Service is 99.95% and the SLA for SQL Database is 99.99% for Basic, Standard, and Premium tiers.</span></span> 

> [!NOTE]
> <span data-ttu-id="24721-193">O SLA do Serviço de Aplicativo aplica-se a instâncias únicas e múltiplas.</span><span class="sxs-lookup"><span data-stu-id="24721-193">The App Service SLA applies to both single and multiple instances.</span></span>  
>
>

### <a name="backups"></a><span data-ttu-id="24721-194">Backups</span><span class="sxs-lookup"><span data-stu-id="24721-194">Backups</span></span>
<span data-ttu-id="24721-195">No caso de perda de dados, o Banco de Dados SQL fornece uma Recuperação Pontual e uma restauração geográfica.</span><span class="sxs-lookup"><span data-stu-id="24721-195">In the event of data loss, SQL Database provides point-in-time restore and geo-restore.</span></span> <span data-ttu-id="24721-196">Esses recursos estão disponíveis em todas as camadas e são habilitados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="24721-196">These features are available in all tiers and are automatically enabled.</span></span> <span data-ttu-id="24721-197">Você não precisa agendar ou gerenciar os backups.</span><span class="sxs-lookup"><span data-stu-id="24721-197">You don't need to schedule or manage the backups.</span></span> 

- <span data-ttu-id="24721-198">Use a Recuperação Pontual para [recuperar após um erro humano][sql-human-error], retornando o banco de dados para um ponto anterior.</span><span class="sxs-lookup"><span data-stu-id="24721-198">Use point-in-time restore to [recover from human error][sql-human-error] by returning the database to an earlier point in time.</span></span> 
- <span data-ttu-id="24721-199">Use a restauração geográfica para [recuperar após uma interrupção de serviço][sql-outage-recovery] restaurando um banco de dados de um backup com redundância geográfica.</span><span class="sxs-lookup"><span data-stu-id="24721-199">Use geo-restore to [recover from a service outage][sql-outage-recovery] by restoring a database from a geo-redundant backup.</span></span> 

<span data-ttu-id="24721-200">Para obter mais informações, consulte [Continuidade dos negócios e recuperação de desastre de banco de dados em nuvem com o Banco de Dados SQL][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="24721-200">For more information, see [Cloud business continuity and database disaster recovery with SQL Database][sql-backup].</span></span>

<span data-ttu-id="24721-201">O Serviço de Aplicativo fornece um recurso de [backup e restauração][web-app-backup] para os arquivos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-201">App Service provides a [backup and restore][web-app-backup] feature for your application files.</span></span> <span data-ttu-id="24721-202">No entanto, lembre-se que os arquivos de backup incluem configurações de aplicativo em texto sem formatação e podem incluir segredos, como cadeias de conexão.</span><span class="sxs-lookup"><span data-stu-id="24721-202">However, be aware that the backed-up files include app settings in plain text and these may include secrets, such as connection strings.</span></span> <span data-ttu-id="24721-203">Evite usar o recurso de backup do Serviço de Aplicativo para fazer backup dos bancos de dados SQL, porque ele exporta o banco de dados para um arquivo .bacpac do SQL, consumindo [DTUs][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="24721-203">Avoid using the App Service backup feature to back up your SQL databases because it exports the database to a SQL .bacpac file, consuming [DTUs][sql-dtu].</span></span> <span data-ttu-id="24721-204">Nesse caso, use a Recuperação Pontual do banco de dados SQL descrita acima.</span><span class="sxs-lookup"><span data-stu-id="24721-204">Instead, use SQL Database point-in-time restore described above.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="24721-205">Considerações sobre capacidade de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="24721-205">Manageability considerations</span></span>
<span data-ttu-id="24721-206">Crie grupos de recursos separados para ambientes de produção, desenvolvimento e teste.</span><span class="sxs-lookup"><span data-stu-id="24721-206">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="24721-207">Isso facilita o gerenciamento de implantações, a exclusão de implantações de teste e a atribuição de direitos de acesso.</span><span class="sxs-lookup"><span data-stu-id="24721-207">This makes it easier to manage deployments, delete test deployments, and assign access rights.</span></span>

<span data-ttu-id="24721-208">Ao atribuir recursos para grupos de recursos, considere o seguinte:</span><span class="sxs-lookup"><span data-stu-id="24721-208">When assigning resources to resource groups, consider the following:</span></span>

* <span data-ttu-id="24721-209">Ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="24721-209">Lifecycle.</span></span> <span data-ttu-id="24721-210">Em geral, coloque recursos com o mesmo ciclo de vida no mesmo grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="24721-210">In general, put resources with the same lifecycle into the same resource group.</span></span>
* <span data-ttu-id="24721-211">Acesso.</span><span class="sxs-lookup"><span data-stu-id="24721-211">Access.</span></span> <span data-ttu-id="24721-212">Você pode usar o [RBAC][rbac] (controle de acesso baseado em função) para aplicar políticas de acesso aos recursos em um grupo.</span><span class="sxs-lookup"><span data-stu-id="24721-212">You can use [role-based access control][rbac] (RBAC) to apply access policies to the resources in a group.</span></span>
* <span data-ttu-id="24721-213">Cobrança.</span><span class="sxs-lookup"><span data-stu-id="24721-213">Billing.</span></span> <span data-ttu-id="24721-214">Você pode exibir os custos acumulados para o grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="24721-214">You can view the rolled-up costs for the resource group.</span></span>  

<span data-ttu-id="24721-215">Para saber mais, consulte [Visão geral do Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview).</span><span class="sxs-lookup"><span data-stu-id="24721-215">For more information, see [Azure Resource Manager overview](/azure/azure-resource-manager/resource-group-overview).</span></span>

### <a name="deployment"></a><span data-ttu-id="24721-216">Implantação</span><span class="sxs-lookup"><span data-stu-id="24721-216">Deployment</span></span>
<span data-ttu-id="24721-217">A implantação envolve duas etapas:</span><span class="sxs-lookup"><span data-stu-id="24721-217">Deployment involves two steps:</span></span>

1. <span data-ttu-id="24721-218">Provisionamento de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="24721-218">Provisioning the Azure resources.</span></span> <span data-ttu-id="24721-219">Recomendamos que você use [Modelos do Azure Resource Manager][arm-template] para esta etapa.</span><span class="sxs-lookup"><span data-stu-id="24721-219">We recommend that you use [Azure Resoure Manager templates][arm-template] for this step.</span></span> <span data-ttu-id="24721-220">Os modelos facilitam a automatização das implantações por meio do PowerShell ou da CLI (interface de linha de comando) do Azure.</span><span class="sxs-lookup"><span data-stu-id="24721-220">Templates make it easier to automate deployments via PowerShell or the Azure command line interface (CLI).</span></span>
2. <span data-ttu-id="24721-221">Implantando o aplicativo (código, binários e arquivos de conteúdo).</span><span class="sxs-lookup"><span data-stu-id="24721-221">Deploying the application (code, binaries, and content files).</span></span> <span data-ttu-id="24721-222">Existem várias opções, incluindo a implantação de um repositório Git local, usando o Visual Studio ou a implantação contínua usando o controle do código-fonte baseado em nuvem.</span><span class="sxs-lookup"><span data-stu-id="24721-222">You have several options, including deploying from a local Git repository, using Visual Studio, or continuous deployment from cloud-based source control.</span></span> <span data-ttu-id="24721-223">Consulte [Implantar o aplicativo no Serviço de Aplicativo do Azure][deploy].</span><span class="sxs-lookup"><span data-stu-id="24721-223">See [Deploy your app to Azure App Service][deploy].</span></span>  

<span data-ttu-id="24721-224">Um aplicativo do Serviço de Aplicativo sempre tem um slot de implantação denominado `production`, que representa o site de produção.</span><span class="sxs-lookup"><span data-stu-id="24721-224">An App Service app always has one deployment slot named `production`, which represents the live production site.</span></span> <span data-ttu-id="24721-225">É recomendável criar um slot de preparo para implantar atualizações.</span><span class="sxs-lookup"><span data-stu-id="24721-225">We recommend creating a staging slot for deploying updates.</span></span> <span data-ttu-id="24721-226">Os benefícios do uso de um slot de preparo incluem:</span><span class="sxs-lookup"><span data-stu-id="24721-226">The benefits of using a staging slot include:</span></span>

* <span data-ttu-id="24721-227">Você pode verificar se a implantação foi bem-sucedida, antes de alterná-la para produção.</span><span class="sxs-lookup"><span data-stu-id="24721-227">You can verify the deployment succeeded, before swapping it into production.</span></span>
* <span data-ttu-id="24721-228">Implantar em um slot de preparo garante que todas as instâncias sejam aquecidas antes de serem alternadas para produção.</span><span class="sxs-lookup"><span data-stu-id="24721-228">Deploying to a staging slot ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="24721-229">Muitos aplicativos têm um tempo significativo de aquecimento e de resfriamento.</span><span class="sxs-lookup"><span data-stu-id="24721-229">Many applications have a significant warmup and cold-start time.</span></span>

<span data-ttu-id="24721-230">Também é recomendável criar um terceiro slot para manter a última implantação válida.</span><span class="sxs-lookup"><span data-stu-id="24721-230">We also recommend creating a third slot to hold the last-known-good deployment.</span></span> <span data-ttu-id="24721-231">Depois de alternar o preparo e a produção, mova a implantação de produção anterior (que agora está no processo de preparo) para o último slot válido.</span><span class="sxs-lookup"><span data-stu-id="24721-231">After you swap staging and production, move the previous production deployment (which is now in staging) into the last-known-good slot.</span></span> <span data-ttu-id="24721-232">Dessa forma, se você descobrir um problema mais tarde, será possível reverter rapidamente para a última versão válida.</span><span class="sxs-lookup"><span data-stu-id="24721-232">That way, if you discover a problem later, you can quickly revert to the last-known-good version.</span></span>

<span data-ttu-id="24721-233">![[1]][1]</span><span class="sxs-lookup"><span data-stu-id="24721-233">![[1]][1]</span></span>

<span data-ttu-id="24721-234">Ao reverter para uma versão anterior, verifique se todas as alterações de esquema do banco de dados são compatíveis com as versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="24721-234">If you revert to a previous version, make sure any database schema changes are backward compatible.</span></span>

<span data-ttu-id="24721-235">Não use os slots da implantação de produção para teste, porque todos os aplicativos no mesmo Plano do Serviço de Aplicativo compartilham as mesmas instâncias de VM.</span><span class="sxs-lookup"><span data-stu-id="24721-235">Don't use slots on your production deployment for testing because all apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="24721-236">Por exemplo, testes de carga podem prejudicar o site de produção dinâmica.</span><span class="sxs-lookup"><span data-stu-id="24721-236">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="24721-237">Nesse caso, crie Planos do Serviço de Aplicativo separados para teste e produção.</span><span class="sxs-lookup"><span data-stu-id="24721-237">Instead, create separate App Service plans for production and test.</span></span> <span data-ttu-id="24721-238">Colocando as implantações de teste em um plano separado, você as isola da versão de produção.</span><span class="sxs-lookup"><span data-stu-id="24721-238">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>

### <a name="configuration"></a><span data-ttu-id="24721-239">Configuração</span><span class="sxs-lookup"><span data-stu-id="24721-239">Configuration</span></span>
<span data-ttu-id="24721-240">Armazene definições de configuração como [configurações do aplicativo][app-settings].</span><span class="sxs-lookup"><span data-stu-id="24721-240">Store configuration settings as [app settings][app-settings].</span></span> <span data-ttu-id="24721-241">Defina as configurações do aplicativo em seus modelos do Resource Manager ou usando o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="24721-241">Define the app settings in your Resource Manager templates, or using PowerShell.</span></span> <span data-ttu-id="24721-242">No tempo de execução, as configurações de aplicativo ficam disponíveis para o aplicativo como variáveis de ambiente.</span><span class="sxs-lookup"><span data-stu-id="24721-242">At runtime, app settings are available to the application as environment variables.</span></span>

<span data-ttu-id="24721-243">Nunca verifique senhas, chaves de acesso ou cadeias de conexão no controle do código-fonte.</span><span class="sxs-lookup"><span data-stu-id="24721-243">Never check passwords, access keys, or connection strings into source control.</span></span> <span data-ttu-id="24721-244">Nesse caso, passe esses parâmetros para um script de implantação que armazena esses valores como configurações do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-244">Instead, pass these as parameters to a deployment script that stores these values as app settings.</span></span>

<span data-ttu-id="24721-245">Quando você alterna um slot de implantação, as configurações do aplicativo são alternadas por padrão.</span><span class="sxs-lookup"><span data-stu-id="24721-245">When you swap a deployment slot, the app settings are swapped by default.</span></span> <span data-ttu-id="24721-246">Se você precisar de configurações diferentes para produção e preparo, será possível criar configurações de aplicativo que permanecem em um slot e não são alternadas.</span><span class="sxs-lookup"><span data-stu-id="24721-246">If you need different settings for production and staging, you can create app settings that stick to a slot and don't get swapped.</span></span>

### <a name="diagnostics-and-monitoring"></a><span data-ttu-id="24721-247">Diagnóstico e monitoramento</span><span class="sxs-lookup"><span data-stu-id="24721-247">Diagnostics and monitoring</span></span>
<span data-ttu-id="24721-248">Habilite o [log de diagnósticos][diagnostic-logs], incluindo o log de aplicativo e o log do servidor Web.</span><span class="sxs-lookup"><span data-stu-id="24721-248">Enable [diagnostics logging][diagnostic-logs], including application logging and web server logging.</span></span> <span data-ttu-id="24721-249">Configure o log para usar o Armazenamento de Blobs.</span><span class="sxs-lookup"><span data-stu-id="24721-249">Configure logging to use Blob storage.</span></span> <span data-ttu-id="24721-250">Por motivos de desempenho, crie uma conta de armazenamento separada para logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="24721-250">For performance reasons, create a separate storage account for diagnostic logs.</span></span> <span data-ttu-id="24721-251">Não use a mesma conta de armazenamento para logs e dados de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-251">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="24721-252">Para obter uma orientação mais detalhada sobre log, consulte [Orientação para monitoramento e diagnóstico][monitoring-guidance].</span><span class="sxs-lookup"><span data-stu-id="24721-252">For more detailed guidance on logging, see [Monitoring and diagnostics guidance][monitoring-guidance].</span></span>

<span data-ttu-id="24721-253">Use um serviço, como [New Relic][new-relic] ou [Application Insights][app-insights] para monitorar o desempenho do aplicativo e comportamento em relação à carga.</span><span class="sxs-lookup"><span data-stu-id="24721-253">Use a service such as [New Relic][new-relic] or [Application Insights][app-insights] to monitor application performance and behavior under load.</span></span> <span data-ttu-id="24721-254">Observe os [limites de taxa de dados][app-insights-data-rate] do Application Insights.</span><span class="sxs-lookup"><span data-stu-id="24721-254">Be aware of the [data rate limits][app-insights-data-rate] for Application Insights.</span></span>

<span data-ttu-id="24721-255">Execute testes de carga, usando uma ferramenta como o [Visual Studio Team Services][vsts].</span><span class="sxs-lookup"><span data-stu-id="24721-255">Perform load testing, using a tool such as [Visual Studio Team Services][vsts].</span></span> <span data-ttu-id="24721-256">Para obter uma visão geral da análise de desempenho em aplicativos de nuvem, consulte [Performance Analysis Primer][perf-analysis] (Primer de análise de desempenho).</span><span class="sxs-lookup"><span data-stu-id="24721-256">For a general overview of performance analysis in cloud applications, see [Performance Analysis Primer][perf-analysis].</span></span>

<span data-ttu-id="24721-257">Dicas para solucionar problemas do aplicativo:</span><span class="sxs-lookup"><span data-stu-id="24721-257">Tips for troubleshooting your application:</span></span>

* <span data-ttu-id="24721-258">Use a [folha Solucionar problemas][troubleshoot-blade] no portal do Azure para encontrar soluções para problemas comuns.</span><span class="sxs-lookup"><span data-stu-id="24721-258">Use the [troubleshoot blade][troubleshoot-blade] in the Azure portal to find solutions to common problems.</span></span>
* <span data-ttu-id="24721-259">Habilite o [streaming de log][web-app-log-stream] para ver as informações de log quase em tempo real.</span><span class="sxs-lookup"><span data-stu-id="24721-259">Enable [log streaming][web-app-log-stream] to see logging information in near-real time.</span></span>
* <span data-ttu-id="24721-260">O [painel Kudu][kudu] tem várias ferramentas para monitorar e depurar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="24721-260">The [Kudu dashboard][kudu] has several tools for monitoring and debugging your application.</span></span> <span data-ttu-id="24721-261">Para obter mais informações, consulte [Azure Websites online tools you should know about][kudu] (Ferramentas online dos sites do Azure que você precisa conhecer) (postagem no blog).</span><span class="sxs-lookup"><span data-stu-id="24721-261">For more information, see [Azure Websites online tools you should know about][kudu] (blog post).</span></span> <span data-ttu-id="24721-262">Você pode acessar o painel Kudu no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="24721-262">You can reach the Kudu dashboard from the Azure portal.</span></span> <span data-ttu-id="24721-263">Abra a folha do aplicativo, clique em **Ferramentas** e, em seguida, clique em **Kudu**.</span><span class="sxs-lookup"><span data-stu-id="24721-263">Open the blade for your app and click **Tools**, then click **Kudu**.</span></span>
* <span data-ttu-id="24721-264">Se você usa o Visual Studio, consulte o artigo [Solucionar problemas de um aplicativo Web no Serviço de Aplicativo do Azure usando o Visual Studio][troubleshoot-web-app] para obter dicas de depuração e solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="24721-264">If you use Visual Studio, see the article [Troubleshoot a web app in Azure App Service using Visual Studio][troubleshoot-web-app] for debugging and troubleshooting tips.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="24721-265">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="24721-265">Security considerations</span></span>
<span data-ttu-id="24721-266">Esta seção lista as considerações sobre segurança específicas dos serviços do Azure descritos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="24721-266">This section lists security considerations that are specific to the Azure services described in this article.</span></span> <span data-ttu-id="24721-267">Esta não é uma lista completa de práticas recomendadas de segurança.</span><span class="sxs-lookup"><span data-stu-id="24721-267">It's not a complete list of security best practices.</span></span> <span data-ttu-id="24721-268">Para obter algumas considerações de segurança adicionais, consulte [Proteger um aplicativo no Serviço de Aplicativo do Azure][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="24721-268">For some additional security considerations, see [Secure an app in Azure App Service][app-service-security].</span></span>

### <a name="sql-database-auditing"></a><span data-ttu-id="24721-269">Auditoria do Banco de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="24721-269">SQL Database auditing</span></span>
<span data-ttu-id="24721-270">A auditoria pode ajudar a manter a conformidade regulamentar e obter informações sobre discrepâncias e irregularidades que podem indicar preocupações comerciais ou suspeitas de violações de segurança.</span><span class="sxs-lookup"><span data-stu-id="24721-270">Auditing can help you maintain regulatory compliance and get insight into discrepancies and irregularities that could indicate business concerns or suspected security violations.</span></span> <span data-ttu-id="24721-271">Consulte [Introdução à auditoria do banco de dados SQL][sql-audit].</span><span class="sxs-lookup"><span data-stu-id="24721-271">See [Get started with SQL database auditing][sql-audit].</span></span>

### <a name="deployment-slots"></a><span data-ttu-id="24721-272">Slots de implantação</span><span class="sxs-lookup"><span data-stu-id="24721-272">Deployment slots</span></span>
<span data-ttu-id="24721-273">Cada slot de implantação tem um endereço IP público.</span><span class="sxs-lookup"><span data-stu-id="24721-273">Each deployment slot has a public IP address.</span></span> <span data-ttu-id="24721-274">Proteja os slots que não são de produção usando o [logon do Azure Active Directory][aad-auth] para que somente os membros das equipes de desenvolvimento e de DevOps possam acessar esses pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="24721-274">Secure the nonproduction slots using [Azure Active Directory login][aad-auth] so that only members of your development and DevOps teams can reach those endpoints.</span></span>

### <a name="logging"></a><span data-ttu-id="24721-275">Registro em log</span><span class="sxs-lookup"><span data-stu-id="24721-275">Logging</span></span>
<span data-ttu-id="24721-276">Os logs nunca devem registrar senhas de usuários ou outras informações que possam ser usadas para confirmação de fraude de identidade.</span><span class="sxs-lookup"><span data-stu-id="24721-276">Logs should never record users' passwords or other information that might be used to commit identity fraud.</span></span> <span data-ttu-id="24721-277">Remova esses detalhes dos dados antes de armazená-los.</span><span class="sxs-lookup"><span data-stu-id="24721-277">Scrub those details from the data before storing it.</span></span>   

### <a name="ssl"></a><span data-ttu-id="24721-278">SSL</span><span class="sxs-lookup"><span data-stu-id="24721-278">SSL</span></span>
<span data-ttu-id="24721-279">Um aplicativo do Serviço de Aplicativo inclui um ponto de extremidade SSL em um subdomínio do `azurewebsites.net` sem custo adicional.</span><span class="sxs-lookup"><span data-stu-id="24721-279">An App Service app includes an SSL endpoint on a subdomain of `azurewebsites.net` at no additional cost.</span></span> <span data-ttu-id="24721-280">O ponto de extremidade SSL inclui um certificado curinga para o domínio `*.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="24721-280">The SSL endpoint includes a wildcard certificate for the `*.azurewebsites.net` domain.</span></span> <span data-ttu-id="24721-281">Ao usar um nome de domínio personalizado, você deverá fornecer um certificado que corresponda ao domínio personalizado.</span><span class="sxs-lookup"><span data-stu-id="24721-281">If you use a custom domain name, you must provide a certificate that matches the custom domain.</span></span> <span data-ttu-id="24721-282">A abordagem mais simples é comprar um certificado diretamente no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="24721-282">The simplest approach is to buy a certificate directly through the Azure portal.</span></span> <span data-ttu-id="24721-283">Você também pode importar certificados de outras autoridades de certificação.</span><span class="sxs-lookup"><span data-stu-id="24721-283">You can also import certificates from other certificate authorities.</span></span> <span data-ttu-id="24721-284">Para obter mais informações, consulte [Comprar e configurar um certificado SSL para seu Serviço de Aplicativo do Azure][ssl-cert].</span><span class="sxs-lookup"><span data-stu-id="24721-284">For more information, see [Buy and Configure an SSL Certificate for your Azure App Service][ssl-cert].</span></span>

<span data-ttu-id="24721-285">Como prática recomendada de segurança, o aplicativo deve impor HTTPS redirecionando as solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="24721-285">As a security best practice, your app should enforce HTTPS by redirecting HTTP requests.</span></span> <span data-ttu-id="24721-286">Você pode implementar isso dentro do aplicativo ou usar uma regra de reescrita de URL, conforme a descrição em [Habilitar HTTPS para um aplicativo no Serviço de Aplicativo do Azure][ssl-redirect].</span><span class="sxs-lookup"><span data-stu-id="24721-286">You can implement this inside your application or use a URL rewrite rule as described in [Enable HTTPS for an app in Azure App Service][ssl-redirect].</span></span>

### <a name="authentication"></a><span data-ttu-id="24721-287">Autenticação</span><span class="sxs-lookup"><span data-stu-id="24721-287">Authentication</span></span>
<span data-ttu-id="24721-288">Recomendamos a autenticação por meio de um IDP (provedor de identidade), como Azure AD, Facebook, Google ou Twitter.</span><span class="sxs-lookup"><span data-stu-id="24721-288">We recommend authenticating through an identity provider (IDP), such as Azure AD, Facebook, Google, or Twitter.</span></span> <span data-ttu-id="24721-289">Use o OAuth 2 ou o OIDC (OpenID Connect) para o fluxo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="24721-289">Use OAuth 2 or OpenID Connect (OIDC) for the authentication flow.</span></span> <span data-ttu-id="24721-290">O Azure AD fornece a funcionalidade de gerenciar usuários e grupos, criar funções de aplicativo, integrar as identidades locais e consumir serviços de back-end, como o Office 365 e o Skype for Business.</span><span class="sxs-lookup"><span data-stu-id="24721-290">Azure AD provides functionality to manage users and groups, create application roles, integrate your on-premises identities, and consume backend services such as Office 365 and Skype for Business.</span></span>

<span data-ttu-id="24721-291">Evite fazer com que o aplicativo gerencie as credenciais e os logons de usuário diretamente, pois isso cria uma possível superfície de ataque.</span><span class="sxs-lookup"><span data-stu-id="24721-291">Avoid having the application manage user logins and credentials directly, as it creates a potential attack surface.</span></span>  <span data-ttu-id="24721-292">No mínimo, seria necessário ter um email de confirmação, uma recuperação de senha e uma autenticação multifator, validar a força da senha e armazenar hashes de senha com segurança.</span><span class="sxs-lookup"><span data-stu-id="24721-292">At a minimum, you would need to have email confirmation, password recovery, and multi-factor authentication; validate password strength; and store password hashes securely.</span></span> <span data-ttu-id="24721-293">Os grandes provedores de identidade cuidam de tudo isso para você e estão sempre monitoramento e melhorando as práticas de segurança.</span><span class="sxs-lookup"><span data-stu-id="24721-293">The large identity providers handle all of those things for you, and are constantly monitoring and improving their security practices.</span></span>

<span data-ttu-id="24721-294">Considere o uso da [Autenticação do Serviço de Aplicativo][app-service-auth] para implementar o fluxo de autenticação OAuth/OIDC.</span><span class="sxs-lookup"><span data-stu-id="24721-294">Consider using [App Service authentication][app-service-auth] to implement the OAuth/OIDC authentication flow.</span></span> <span data-ttu-id="24721-295">Os benefícios de autenticação do Serviço de Aplicativo incluem:</span><span class="sxs-lookup"><span data-stu-id="24721-295">The benefits of App Service authentication include:</span></span>

* <span data-ttu-id="24721-296">Fácil de configurar.</span><span class="sxs-lookup"><span data-stu-id="24721-296">Easy to configure.</span></span>
* <span data-ttu-id="24721-297">Nenhum código é necessário para cenários de autenticação simples.</span><span class="sxs-lookup"><span data-stu-id="24721-297">No code is required for simple authentication scenarios.</span></span>
* <span data-ttu-id="24721-298">Dá suporte para autorização delegada usando tokens de acesso OAuth para consumir recursos em nome do usuário.</span><span class="sxs-lookup"><span data-stu-id="24721-298">Supports delegated authorization using OAuth access tokens to consume resources on behalf of the user.</span></span>
* <span data-ttu-id="24721-299">Fornece um cache de token interno.</span><span class="sxs-lookup"><span data-stu-id="24721-299">Provides a built-in token cache.</span></span>

<span data-ttu-id="24721-300">Algumas limitações da autenticação do Serviço de Aplicativo:</span><span class="sxs-lookup"><span data-stu-id="24721-300">Some limitations of App Service authentication:</span></span>  

* <span data-ttu-id="24721-301">Opções de personalização limitadas.</span><span class="sxs-lookup"><span data-stu-id="24721-301">Limited customization options.</span></span>
* <span data-ttu-id="24721-302">A autorização delegada é restrita a um recurso de back-end por sessão de logon.</span><span class="sxs-lookup"><span data-stu-id="24721-302">Delegated authorization is restricted to one backend resource per login session.</span></span>
* <span data-ttu-id="24721-303">Se você usar mais de um IDP, não haverá nenhum mecanismo interno para descoberta de realm inicial.</span><span class="sxs-lookup"><span data-stu-id="24721-303">If you use more than one IDP, there is no built-in mechanism for home realm discovery.</span></span>
* <span data-ttu-id="24721-304">Para cenários multilocatários, o aplicativo deve implementar a lógica para validar o emissor do token.</span><span class="sxs-lookup"><span data-stu-id="24721-304">For multi-tenant scenarios, the application must implement the logic to validate the token issuer.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="24721-305">Implantar a solução</span><span class="sxs-lookup"><span data-stu-id="24721-305">Deploy the solution</span></span>
<span data-ttu-id="24721-306">Um modelo do Resource Manager de exemplo dessa arquitetura está [disponível no GitHub][paas-basic-arm-template].</span><span class="sxs-lookup"><span data-stu-id="24721-306">An example Resoure Manager template for this architecture is [available on GitHub][paas-basic-arm-template].</span></span>

<span data-ttu-id="24721-307">Para implantar o modelo usando o PowerShell, execute os seguintes comandos:</span><span class="sxs-lookup"><span data-stu-id="24721-307">To deploy the template using PowerShell, run the following commands:</span></span>

```
New-AzureRmResourceGroup -Name <resource-group-name> -Location "West US"

$parameters = @{"appName"="<app-name>";"environment"="dev";"locationShort"="uw";"databaseName"="app-db";"administratorLogin"="<admin>";"administratorLoginPassword"="<password>"}

New-AzureRmResourceGroupDeployment -Name <deployment-name> -ResourceGroupName <resource-group-name> -TemplateFile .\PaaS-Basic.json -TemplateParameterObject  $parameters
```

<span data-ttu-id="24721-308">Para obter mais informações, consulte [Implantar recursos com modelos do Azure Resource Manager][deploy-arm-template].</span><span class="sxs-lookup"><span data-stu-id="24721-308">For more information, see [Deploy resources with Azure Resource Manager templates][deploy-arm-template].</span></span>

<!-- links -->

[aad-auth]: /azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication
[app-insights]: /azure/application-insights/app-insights-overview
[app-insights-data-rate]: /azure/application-insights/app-insights-pricing
[app-service]: https://azure.microsoft.com/documentation/services/app-service/
[app-service-auth]: /azure/app-service-api/app-service-api-authentication
[app-service-plans]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[app-service-plans-tiers]: https://azure.microsoft.com/pricing/details/app-service/
[app-service-security]: /azure/app-service-web/web-sites-security
[app-settings]: /azure/app-service-web/web-sites-configure
[arm-template]: /azure/azure-resource-manager/resource-group-overview#resource-groups
[custom-domain-name]: /azure/app-service-web/web-sites-custom-domain-name
[deploy]: /azure/app-service-web/web-sites-deploy
[deploy-arm-template]: /azure/resource-group-template-deploy
[deployment-slots]: /azure/app-service-web/web-sites-staged-publishing
[diagnostic-logs]: /azure/app-service-web/web-sites-enable-diagnostic-log
[kudu]: https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/
[monitoring-guidance]: ../../best-practices/monitoring.md
[new-relic]: http://newrelic.com/
[paas-basic-arm-template]: https://github.com/mspnp/reference-architectures/tree/master/app-service-web-app/basic-web-app/Paas-Basic/Templates
[perf-analysis]: https://github.com/mspnp/performance-optimization/blob/master/Performance-Analysis-Primer.md
[rbac]: /azure/active-directory/role-based-access-control-what-is
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[sla]: https://azure.microsoft.com/support/legal/sla/
[sql-audit]: /azure/sql-database/sql-database-auditing-get-started
[sql-backup]: /azure/sql-database/sql-database-business-continuity
[sql-db]: https://azure.microsoft.com/documentation/services/sql-database/
[sql-db-overview]: /azure/sql-database/sql-database-technical-overview
[sql-db-scale]: /azure/sql-database/sql-database-service-tiers#scaling-up-or-scaling-down-a-single-database
[sql-db-service-tiers]: /azure/sql-database/sql-database-service-tiers
[sql-db-v12]: /azure/sql-database/sql-database-features
[sql-dtu]: /azure/sql-database/sql-database-service-tiers
[sql-human-error]: /azure/sql-database/sql-database-business-continuity#recover-a-database-after-a-user-or-application-error
[sql-outage-recovery]: /azure/sql-database/sql-database-business-continuity#recover-a-database-to-another-region-from-an-azure-regional-data-center-outage
[ssl-redirect]: /azure/app-service-web/web-sites-configure-ssl-certificate#bkmk_enforce
[sql-resource-limits]: /azure/sql-database/sql-database-resource-limits
[ssl-cert]: /azure/app-service-web/web-sites-purchase-ssl-web-site
[troubleshoot-blade]: https://azure.microsoft.com/updates/self-service-troubleshooting-for-app-service-web-apps-customers/
[troubleshoot-web-app]: /azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio
[visio-download]: https://archcenter.azureedge.net/cdn/app-service-reference-architectures.vsdx
[vsts]: https://www.visualstudio.com/features/vso-cloud-load-testing-vs.aspx
[web-app-autoscale]: /azure/app-service-web/web-sites-scale
[web-app-backup]: /azure/app-service-web/web-sites-backup
[web-app-log-stream]: /azure/app-service-web/web-sites-enable-diagnostic-log#streamlogs
[0]: ./images/basic-web-app.png "Arquitetura de um aplicativo Web do Azure básico"
[1]: ./images/paas-basic-web-app-staging-slots.png "Alternando slots para implantações de produção e preparo"

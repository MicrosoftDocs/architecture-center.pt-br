---
title: Executar uma VM do Linux no Azure
description: "Como executar uma VM Linux no Azure, prestando atenção na escalabilidade, na resiliência, na capacidade de gerenciamento e na segurança."
author: telmosampaio
ms.date: 09/06/2017
pnp.series.title: Linux VM workloads
pnp.series.next: multi-vm
pnp.series.prev: ./index
ms.openlocfilehash: f38c53db5df1681a1abc926df9f0b7f929ceb76b
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
---
# <a name="run-a-linux-vm-on-azure"></a><span data-ttu-id="a69a3-103">Executar uma VM do Linux no Azure</span><span class="sxs-lookup"><span data-stu-id="a69a3-103">Run a Linux VM on Azure</span></span>

<span data-ttu-id="a69a3-104">Essa arquitetura de referência mostra um conjunto de práticas comprovadas para executar uma VM (máquinas virtuais) do Linux no Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-104">This reference architecture shows a set of proven practices for running a Linux virtual machine (VM) on Azure.</span></span> <span data-ttu-id="a69a3-105">Ela inclui recomendações para provisionar a VM juntamente com os componentes de rede e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a69a3-105">It includes recommendations for provisioning the VM along with networking and storage components.</span></span> <span data-ttu-id="a69a3-106">Essa arquitetura pode ser usada para executar uma única instância e é a base para arquiteturas mais complexas, como aplicativos de n camadas.</span><span class="sxs-lookup"><span data-stu-id="a69a3-106">This architecture can be used to run a single instance, and is the basis for more complex architectures such as n-tier applications.</span></span> [<span data-ttu-id="a69a3-107">**Implantar esta solução**.</span><span class="sxs-lookup"><span data-stu-id="a69a3-107">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="a69a3-108">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="a69a3-108">![[0]][0]</span></span>

<span data-ttu-id="a69a3-109">*Baixe um [arquivo Visio][visio-download] dessa arquitetura.*</span><span class="sxs-lookup"><span data-stu-id="a69a3-109">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="a69a3-110">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="a69a3-110">Architecture</span></span>

<span data-ttu-id="a69a3-111">O provisionamento de uma VM no Azure envolve mais partes móveis do que apenas a própria VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-111">Provisioning a VM in Azure involves more moving parts than just the VM itself.</span></span> <span data-ttu-id="a69a3-112">Há elementos de computação, rede e armazenamento que você precisa considerar.</span><span class="sxs-lookup"><span data-stu-id="a69a3-112">There are compute, networking, and storage elements that you need to consider.</span></span>

* <span data-ttu-id="a69a3-113">**Grupo de recursos.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-113">**Resource group.**</span></span> <span data-ttu-id="a69a3-114">Um [*grupo de recursos*][resource-manager-overview] é um contêiner que armazena os recursos relacionados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-114">A [*resource group*][resource-manager-overview] is a container that holds related resources.</span></span> <span data-ttu-id="a69a3-115">Você normalmente cria grupos de recursos para recursos diferentes em uma solução com base em seu tempo de vida e em quem gerenciará os recursos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-115">You usually create resource groups for different resources in a solution based on their lifetime, and who will manage the resources.</span></span> <span data-ttu-id="a69a3-116">Para uma única carga de trabalho de VM, é possível criar um único grupo de recursos para todos os recursos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-116">For a single VM workload, you may create a single resource group for all resources.</span></span>
* <span data-ttu-id="a69a3-117">**VM**.</span><span class="sxs-lookup"><span data-stu-id="a69a3-117">**VM**.</span></span> <span data-ttu-id="a69a3-118">O Azure dá suporte à execução de várias distribuições Linux populares, incluindo CentOS, Debian, Red Hat Enterprise, Ubuntu e FreeBSD.</span><span class="sxs-lookup"><span data-stu-id="a69a3-118">Azure supports running various popular Linux distributions, including CentOS, Debian, Red Hat Enterprise, Ubuntu, and FreeBSD.</span></span> <span data-ttu-id="a69a3-119">Para obter mais informações, veja [Azure e Linux][azure-linux].</span><span class="sxs-lookup"><span data-stu-id="a69a3-119">For more information, see [Azure and Linux][azure-linux].</span></span> <span data-ttu-id="a69a3-120">Você pode provisionar uma VM de uma lista de imagens publicadas ou de um arquivo VHD (disco rígido virtual) que carrega no Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-120">You can provision a VM from a list of published images or from a virtual hard disk (VHD) file that you upload to Azure Blob storage.</span></span>
* <span data-ttu-id="a69a3-121">**Disco do sistema operacional.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-121">**OS disk.**</span></span> <span data-ttu-id="a69a3-122">O disco do sistema operacional é um VHD armazenado no [Armazenamento do Azure][azure-storage].</span><span class="sxs-lookup"><span data-stu-id="a69a3-122">The OS disk is a VHD stored in [Azure Storage][azure-storage].</span></span> <span data-ttu-id="a69a3-123">Isso significa que ele persistirá mesmo se a máquina host falhar.</span><span class="sxs-lookup"><span data-stu-id="a69a3-123">That means it persists even if the host machine goes down.</span></span> <span data-ttu-id="a69a3-124">O disco do sistema operacional é `/dev/sda1`.</span><span class="sxs-lookup"><span data-stu-id="a69a3-124">The OS disk is `/dev/sda1`.</span></span>
* <span data-ttu-id="a69a3-125">**Disco temporário.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-125">**Temporary disk.**</span></span> <span data-ttu-id="a69a3-126">A VM é criada com um disco temporário.</span><span class="sxs-lookup"><span data-stu-id="a69a3-126">The VM is created with a temporary disk.</span></span> <span data-ttu-id="a69a3-127">Esse disco é armazenado em uma unidade física no computador host.</span><span class="sxs-lookup"><span data-stu-id="a69a3-127">This disk is stored on a physical drive on the host machine.</span></span> <span data-ttu-id="a69a3-128">Ele *não* é salvo no Armazenamento do Azure e pode ser excluído durante a reinicialização e outros eventos de ciclo de vida da VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-128">It is *not* saved in Azure Storage and might be deleted during reboots and other VM lifecycle events.</span></span> <span data-ttu-id="a69a3-129">Use esse disco somente para dados temporários, como arquivos de paginação ou de permuta.</span><span class="sxs-lookup"><span data-stu-id="a69a3-129">Use this disk only for temporary data, such as page or swap files.</span></span> <span data-ttu-id="a69a3-130">O disco temporário é `/dev/sdb1` e é montado em `/mnt/resource` ou `/mnt`.</span><span class="sxs-lookup"><span data-stu-id="a69a3-130">The temporary disk is `/dev/sdb1` and is mounted at `/mnt/resource` or `/mnt`.</span></span>
* <span data-ttu-id="a69a3-131">**Discos de dados.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-131">**Data disks.**</span></span> <span data-ttu-id="a69a3-132">Um [disco de dados][data-disk] é um VHD persistente usado para dados de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a69a3-132">A [data disk][data-disk] is a persistent VHD used for application data.</span></span> <span data-ttu-id="a69a3-133">Os discos de dados são armazenados no Armazenamento do Azure, como o disco do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="a69a3-133">Data disks are stored in Azure Storage, like the OS disk.</span></span>
* <span data-ttu-id="a69a3-134">**Rede Virtual e sub-rede.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-134">**Virtual network (VNet) and subnet.**</span></span> <span data-ttu-id="a69a3-135">Cada VM no Azure é implantada em uma Rede Virtual, que é dividida em sub-redes.</span><span class="sxs-lookup"><span data-stu-id="a69a3-135">Every VM in Azure is deployed into a VNet that is further divided into subnets.</span></span>
* <span data-ttu-id="a69a3-136">**Endereço IP público.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-136">**Public IP address.**</span></span> <span data-ttu-id="a69a3-137">Um endereço IP público é necessário para se comunicar com a VM &mdash;, por exemplo, via SSH.</span><span class="sxs-lookup"><span data-stu-id="a69a3-137">A public IP address is needed to communicate with the VM &mdash; for example, via SSH.</span></span>
* <span data-ttu-id="a69a3-138">**NIC (adaptador de rede)**.</span><span class="sxs-lookup"><span data-stu-id="a69a3-138">**Network interface (NIC)**.</span></span> <span data-ttu-id="a69a3-139">A NIC permite que a VM se comunique com a rede virtual.</span><span class="sxs-lookup"><span data-stu-id="a69a3-139">The NIC enables the VM to communicate with the virtual network.</span></span>
* <span data-ttu-id="a69a3-140">**NSG (grupo de segurança de rede)**.</span><span class="sxs-lookup"><span data-stu-id="a69a3-140">**Network security group (NSG)**.</span></span> <span data-ttu-id="a69a3-141">O [NSG][nsg] é usado para permitir/negar o tráfego de rede para a sub-rede.</span><span class="sxs-lookup"><span data-stu-id="a69a3-141">The [NSG][nsg] is used to allow/deny network traffic to the subnet.</span></span> <span data-ttu-id="a69a3-142">É possível associar um NSG a uma NIC individual ou a uma sub-rede.</span><span class="sxs-lookup"><span data-stu-id="a69a3-142">You can associate an NSG with an individual NIC or with a subnet.</span></span> <span data-ttu-id="a69a3-143">Se você associá-lo a uma sub-rede, as regras do NSG se aplicarão a todas as VMs na sub-rede.</span><span class="sxs-lookup"><span data-stu-id="a69a3-143">If you associate it with a subnet, the NSG rules apply to all VMs in that subnet.</span></span>
* <span data-ttu-id="a69a3-144">**Diagnósticos.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-144">**Diagnostics.**</span></span> <span data-ttu-id="a69a3-145">O registro de diagnóstico é crucial para o gerenciamento e solução de problemas da VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-145">Diagnostic logging is crucial for managing and troubleshooting the VM.</span></span>

## <a name="recommendations"></a><span data-ttu-id="a69a3-146">Recomendações</span><span class="sxs-lookup"><span data-stu-id="a69a3-146">Recommendations</span></span>

<span data-ttu-id="a69a3-147">Essa arquitetura mostra as recomendações de linha de base para executar uma VM do Linux no Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-147">This architecture shows the baseline recommendations for running a Linux VM in Azure.</span></span> <span data-ttu-id="a69a3-148">Contudo, não recomendamos usar uma única VM para cargas de trabalho críticas, pois elas criam um ponto único de falha.</span><span class="sxs-lookup"><span data-stu-id="a69a3-148">However, we don't recommend using a single VM for mission critical workloads because it creates a single point of failure.</span></span> <span data-ttu-id="a69a3-149">Para obter maior disponibilidade, é necessário implantar várias VMs em um [conjunto de disponibilidade][availability-set].</span><span class="sxs-lookup"><span data-stu-id="a69a3-149">For higher availability, deploy multiple VMs in an [availability set][availability-set].</span></span> <span data-ttu-id="a69a3-150">Para saber mais, confira [Executando várias VMs no Azure][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="a69a3-150">For more information, see [Running multiple VMs on Azure][multi-vm].</span></span> 

### <a name="vm-recommendations"></a><span data-ttu-id="a69a3-151">Recomendações de VM</span><span class="sxs-lookup"><span data-stu-id="a69a3-151">VM recommendations</span></span>

<span data-ttu-id="a69a3-152">O Azure oferece vários tamanhos de máquina virtual diferente, mas são recomendáveis as séries DS e GS, pois esses tamanhos de máquina dão suporte ao [Armazenamento Premium][premium-storage].</span><span class="sxs-lookup"><span data-stu-id="a69a3-152">Azure offers many different virtual machine sizes, but we recommend the DS- and GS-series because these machine sizes support [Premium Storage][premium-storage].</span></span> <span data-ttu-id="a69a3-153">Selecione um desses tamanhos de máquina, a menos que você tenha uma carga de trabalho especializada, como a computação de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="a69a3-153">Select one of these machine sizes unless you have a specialized workload such as high-performance computing.</span></span> <span data-ttu-id="a69a3-154">Para obter detalhes, confira [tamanhos das máquinas virtuais][virtual-machine-sizes].</span><span class="sxs-lookup"><span data-stu-id="a69a3-154">For details, see [virtual machine sizes][virtual-machine-sizes].</span></span>

<span data-ttu-id="a69a3-155">Se você estiver movendo uma carga de trabalho existente para o Azure, deverá começar com o tamanho da VM que mais se aproxima de seus servidores locais.</span><span class="sxs-lookup"><span data-stu-id="a69a3-155">If you are moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="a69a3-156">Em seguida, meça o desempenho da carga de trabalho real com relação à CPU, memória e operações de entrada/saída de disco e ajuste o tamanho, se necessário.</span><span class="sxs-lookup"><span data-stu-id="a69a3-156">Then measure the performance of your actual workload with respect to CPU, memory, and disk input/output operations per second (IOPS), and adjust the size if needed.</span></span> <span data-ttu-id="a69a3-157">Se precisar de várias NICs para sua VM, lembre-se de que o número máximo de NICs é uma função do [tamanho da VM][vm-size-tables].</span><span class="sxs-lookup"><span data-stu-id="a69a3-157">If you require multiple NICs for your VM, be aware that the maximum number of NICs is a function of the [VM size][vm-size-tables].</span></span>

<span data-ttu-id="a69a3-158">Quando você provisiona a VM e outros recursos, é necessário especificar uma região.</span><span class="sxs-lookup"><span data-stu-id="a69a3-158">When you provision the VM and other resources, you must specify a region.</span></span> <span data-ttu-id="a69a3-159">Em geral, escolha uma região mais próxima de seus usuários internos ou de seus clientes.</span><span class="sxs-lookup"><span data-stu-id="a69a3-159">Generally, choose a region closest to your internal users or customers.</span></span> <span data-ttu-id="a69a3-160">No entanto, nem todos os tamanhos de VM estão disponíveis em todas as regiões.</span><span class="sxs-lookup"><span data-stu-id="a69a3-160">However, not all VM sizes may be available in all region.</span></span> <span data-ttu-id="a69a3-161">Para obter detalhes, confira [Serviços por região][services-by-region].</span><span class="sxs-lookup"><span data-stu-id="a69a3-161">For details, see [Services by region][services-by-region].</span></span> <span data-ttu-id="a69a3-162">Para listar os tamanhos de VM disponíveis em uma região específica, execute o seguinte comando da CLI (interface de linha de comando) do Azure:</span><span class="sxs-lookup"><span data-stu-id="a69a3-162">To list the VM sizes available in a specific region, run the following Azure command-line interface (CLI) command:</span></span>

```
az vm list-sizes --location <location>
```

<span data-ttu-id="a69a3-163">Para obter informações sobre como escolher uma imagem da VM publicada, confira [Selecionar imagens de VM do Linux com a CLI do Azure][select-vm-image].</span><span class="sxs-lookup"><span data-stu-id="a69a3-163">For information about choosing a published VM image, see [Select Linux VM images with the Azure CLI][select-vm-image].</span></span>

<span data-ttu-id="a69a3-164">Habilite o monitoramento e diagnóstico, incluindo métricas de integridade básicas, logs de infraestrutura de diagnóstico e [diagnóstico de inicialização][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="a69a3-164">Enable monitoring and diagnostics, including basic health metrics, diagnostics infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="a69a3-165">O diagnóstico de inicialização poderá ajudar a diagnosticar uma falha de inicialização se sua VM entrar em um estado não inicializável.</span><span class="sxs-lookup"><span data-stu-id="a69a3-165">Boot diagnostics can help you diagnose boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="a69a3-166">Para saber mais, confira [Habilitar monitoramento e diagnóstico][enable-monitoring].</span><span class="sxs-lookup"><span data-stu-id="a69a3-166">For more information, see [Enable monitoring and diagnostics][enable-monitoring].</span></span>  

### <a name="disk-and-storage-recommendations"></a><span data-ttu-id="a69a3-167">Recomendações de disco e de armazenamento</span><span class="sxs-lookup"><span data-stu-id="a69a3-167">Disk and storage recommendations</span></span>

<span data-ttu-id="a69a3-168">Para um melhor desempenho de E/S de disco, recomendamos o [Armazenamento Premium][premium-storage], que armazena dados em SSDs (unidades de estado sólido).</span><span class="sxs-lookup"><span data-stu-id="a69a3-168">For best disk I/O performance, we recommend [Premium Storage][premium-storage], which stores data on solid-state drives (SSDs).</span></span> <span data-ttu-id="a69a3-169">O custo se baseia no tamanho do disco provisionado.</span><span class="sxs-lookup"><span data-stu-id="a69a3-169">Cost is based on the size of the provisioned disk.</span></span> <span data-ttu-id="a69a3-170">O IOPS e a taxa de transferência (ou seja, a taxa de transferência de dados) também dependem do tamanho do disco. Portanto, ao provisionar um disco, considere todos os três fatores (capacidade, IOPS e taxa de transferência).</span><span class="sxs-lookup"><span data-stu-id="a69a3-170">IOPS and throughput (that is, data transfer rate) also depend on disk size, so when you provision a disk, consider all three factors (capacity, IOPS, and throughput).</span></span> 

<span data-ttu-id="a69a3-171">Também é recomendável usar [discos gerenciado](/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="a69a3-171">We also recommend the use of [managed disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="a69a3-172">Discos gerenciados não exigem uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a69a3-172">Managed disks do not require a storage account.</span></span> <span data-ttu-id="a69a3-173">Você simplesmente especifica o tamanho e tipo de disco e ele é implantado de modo altamente disponível.</span><span class="sxs-lookup"><span data-stu-id="a69a3-173">You simply specify the size and type of disk and it is deployed in a highly available way.</span></span>

<span data-ttu-id="a69a3-174">Se você não estiver usando discos gerenciados, crie contas de Armazenamento do Azure separadas para cada VM conter os VHDs (discos rígidos virtuais), de modo a evitar atingir os limites de IOPS para contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a69a3-174">If you are not using managed disks, create separate Azure storage accounts for each VM to hold the virtual hard disks (VHDs) in order to avoid hitting the IOPS limits for storage accounts.</span></span>

<span data-ttu-id="a69a3-175">Adicione um ou mais discos de dados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-175">Add one or more data disks.</span></span> <span data-ttu-id="a69a3-176">Quando você cria um VHD, ele não está formatado.</span><span class="sxs-lookup"><span data-stu-id="a69a3-176">When you create a VHD, it is unformatted.</span></span> <span data-ttu-id="a69a3-177">Faça logon na VM para formatar o disco.</span><span class="sxs-lookup"><span data-stu-id="a69a3-177">Log in to the VM to format the disk.</span></span> <span data-ttu-id="a69a3-178">No shell do Linux, os discos de dados são exibidos como `/dev/sdc`, `/dev/sdd` e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a69a3-178">In the Linux shell, data disks are displayed as `/dev/sdc`, `/dev/sdd`, and so on.</span></span> <span data-ttu-id="a69a3-179">Você pode executar `lsblk` para listar os dispositivos de bloco, incluindo os discos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-179">You can run `lsblk` to list the block devices, including the disks.</span></span> <span data-ttu-id="a69a3-180">Para usar um disco de dados, crie uma partição e o sistema de arquivos e monte o disco.</span><span class="sxs-lookup"><span data-stu-id="a69a3-180">To use a data disk, create a partition and file system, and mount the disk.</span></span> <span data-ttu-id="a69a3-181">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="a69a3-181">For example:</span></span>

```bat
# Create a partition.
sudo fdisk /dev/sdc     # Enter 'n' to partition, 'w' to write the change.

# Create a file system.
sudo mkfs -t ext3 /dev/sdc1

# Mount the drive.
sudo mkdir /data1
sudo mount /dev/sdc1 /data1
```

<span data-ttu-id="a69a3-182">Se você não estiver usando [discos gerenciados](/azure/storage/storage-managed-disks-overview) e tiver uma grande quantidade de discos de dados, esteja ciente dos limites totais de E/S da conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a69a3-182">If you are not using [managed disks](/azure/storage/storage-managed-disks-overview) and have a large number of data disks, be aware of the total I/O limits of the storage account.</span></span> <span data-ttu-id="a69a3-183">Para saber mais, confira [limites de disco da máquina virtual][vm-disk-limits].</span><span class="sxs-lookup"><span data-stu-id="a69a3-183">For more information, see [virtual machine disk limits][vm-disk-limits].</span></span>

<span data-ttu-id="a69a3-184">Quando você adiciona um disco de dados, uma ID de LUN (número de unidade lógica) é atribuída ao disco.</span><span class="sxs-lookup"><span data-stu-id="a69a3-184">When you add a data disk, a logical unit number (LUN) ID is assigned to the disk.</span></span> <span data-ttu-id="a69a3-185">Opcionalmente, você poderá especificar a ID do LUN &mdash; por exemplo, se estiver substituindo um disco e quiser manter a mesma ID de LUN ou tiver um aplicativo que está procurando uma ID de LUN específica.</span><span class="sxs-lookup"><span data-stu-id="a69a3-185">Optionally, you can specify the LUN ID &mdash; for example, if you're replacing a disk and want to retain the same LUN ID, or you have an application that looks for a specific LUN ID.</span></span> <span data-ttu-id="a69a3-186">No entanto, lembre-se de que as IDs de LUN devem ser exclusivas para cada disco.</span><span class="sxs-lookup"><span data-stu-id="a69a3-186">However, remember that LUN IDs must be unique for each disk.</span></span>

<span data-ttu-id="a69a3-187">Convém alterar o agendador de E/S para otimizar o desempenho em SSDs, pois os discos para VMs com contas de armazenamento premium são SSDs.</span><span class="sxs-lookup"><span data-stu-id="a69a3-187">You may want to change the I/O scheduler to optimize for performance on SSDs because the disks for VMs with premium storage accounts are SSDs.</span></span> <span data-ttu-id="a69a3-188">Uma recomendação comum é usar o agendador NOOP para SSDs, mas é necessário usar uma ferramenta como [iostat] para monitorar o desempenho de E/S de disco para sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a69a3-188">A common recommendation is to use the NOOP scheduler for SSDs, but you should use a tool such as [iostat] to monitor disk I/O performance for your workload.</span></span>

<span data-ttu-id="a69a3-189">Para obter o melhor desempenho, crie uma conta de armazenamento separada para armazenar logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="a69a3-189">For best performance, create a separate storage account to hold diagnostic logs.</span></span> <span data-ttu-id="a69a3-190">Uma conta LRS (armazenamento com redundância local) padrão é suficiente para os logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="a69a3-190">A standard locally redundant storage (LRS) account is sufficient for diagnostic logs.</span></span>

### <a name="network-recommendations"></a><span data-ttu-id="a69a3-191">Recomendações de rede</span><span class="sxs-lookup"><span data-stu-id="a69a3-191">Network recommendations</span></span>

<span data-ttu-id="a69a3-192">Esse endereço IP público pode ser dinâmico ou estático.</span><span class="sxs-lookup"><span data-stu-id="a69a3-192">The public IP address can be dynamic or static.</span></span> <span data-ttu-id="a69a3-193">O padrão é dinâmico.</span><span class="sxs-lookup"><span data-stu-id="a69a3-193">The default is dynamic.</span></span>

* <span data-ttu-id="a69a3-194">Reserve um [endereço IP estático][static-ip] se precisar de um endereço IP fixo que não mudará &mdash; por exemplo, se precisar criar um registro A no DNS ou se precisar adicionar o endereço IP a uma lista segura.</span><span class="sxs-lookup"><span data-stu-id="a69a3-194">Reserve a [static IP address][static-ip] if you need a fixed IP address that won't change &mdash; for example, if you need to create an A record in DNS, or need the IP address to be added to a safe list.</span></span>
* <span data-ttu-id="a69a3-195">Você também pode criar um FQDN (nome de domínio totalmente qualificado) para o endereço IP.</span><span class="sxs-lookup"><span data-stu-id="a69a3-195">You can also create a fully qualified domain name (FQDN) for the IP address.</span></span> <span data-ttu-id="a69a3-196">Em seguida, é possível registrar um [registro CNAME][cname-record] no DNS que aponta para o FQDN.</span><span class="sxs-lookup"><span data-stu-id="a69a3-196">You can then register a [CNAME record][cname-record] in DNS that points to the FQDN.</span></span> <span data-ttu-id="a69a3-197">Para saber mais, confira [criar um nome de domínio totalmente qualificado no portal do Azure][fqdn].</span><span class="sxs-lookup"><span data-stu-id="a69a3-197">For more information, see [create a fully qualified domain name in the Azure portal][fqdn].</span></span>

<span data-ttu-id="a69a3-198">Todos os NSGs contêm um conjunto de [regras padrão][nsg-default-rules], incluindo uma regra que bloqueia todo o tráfego de Internet de entrada.</span><span class="sxs-lookup"><span data-stu-id="a69a3-198">All NSGs contain a set of [default rules][nsg-default-rules], including a rule that blocks all inbound Internet traffic.</span></span> <span data-ttu-id="a69a3-199">As regras padrão não podem ser excluídas, mas outras regras podem substituí-las.</span><span class="sxs-lookup"><span data-stu-id="a69a3-199">The default rules cannot be deleted, but other rules can override them.</span></span> <span data-ttu-id="a69a3-200">Para habilitar o tráfego de Internet, crie regras que permitam o tráfego de entrada em portas específicas &mdash; por exemplo, a porta 80 para HTTP.</span><span class="sxs-lookup"><span data-stu-id="a69a3-200">To enable Internet traffic, create rules that allow inbound traffic to specific ports &mdash; for example, port 80 for HTTP.</span></span>

<span data-ttu-id="a69a3-201">Para habilitar o SSH, adicione uma regra ao NSG que permita o tráfego de entrada na porta TCP 22.</span><span class="sxs-lookup"><span data-stu-id="a69a3-201">To enable SSH, add a rule to the NSG that allows inbound traffic to TCP port 22.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="a69a3-202">Considerações sobre escalabilidade</span><span class="sxs-lookup"><span data-stu-id="a69a3-202">Scalability considerations</span></span>

<span data-ttu-id="a69a3-203">Você pode escalar uma VM vertical ou horizontalmente [alterando o tamanho da VM][vm-resize].</span><span class="sxs-lookup"><span data-stu-id="a69a3-203">You can scale a VM up or down by [changing the VM size][vm-resize].</span></span> <span data-ttu-id="a69a3-204">Para aumentar horizontalmente, coloque duas ou mais VMs atrás de um balanceador de carga.</span><span class="sxs-lookup"><span data-stu-id="a69a3-204">To scale out horizontally, put two or more VMs behind a load balancer.</span></span> <span data-ttu-id="a69a3-205">Para obter detalhes, confira [Várias VMs em execução no Azure para escalabilidade e disponibilidade][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="a69a3-205">For details, see [Running multiple VMs on Azure for scalability and availability][multi-vm].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="a69a3-206">Considerações sobre disponibilidade</span><span class="sxs-lookup"><span data-stu-id="a69a3-206">Availability considerations</span></span>

<span data-ttu-id="a69a3-207">Para obter maior disponibilidade, implante várias VMs em um conjunto de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="a69a3-207">For higher availability, deploy multiple VMs in an availability set.</span></span> <span data-ttu-id="a69a3-208">Isso também fornece um maior [contrato de nível de serviço][vm-sla] (SLA).</span><span class="sxs-lookup"><span data-stu-id="a69a3-208">This also provides a higher [service level agreement][vm-sla]  (SLA).</span></span>

<span data-ttu-id="a69a3-209">Sua VM pode ser afetada por uma [manutenção planejada][planned-maintenance] ou [manutenção não planejada][manage-vm-availability].</span><span class="sxs-lookup"><span data-stu-id="a69a3-209">Your VM may be affected by [planned maintenance][planned-maintenance] or [unplanned maintenance][manage-vm-availability].</span></span> <span data-ttu-id="a69a3-210">Você pode usar os[ logs de reinicialização da VM][reboot-logs] para determinar se uma reinicialização da VM foi causada por manutenção planejada.</span><span class="sxs-lookup"><span data-stu-id="a69a3-210">You can use [VM reboot logs][reboot-logs] to determine whether a VM reboot was caused by planned maintenance.</span></span>

<span data-ttu-id="a69a3-211">VHDs são armazenados no [armazenamento do Azure][azure-storage] e o armazenamento do Azure é replicado para durabilidade e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="a69a3-211">VHDs are stored in [Azure storage][azure-storage], and Azure storage is replicated for durability and availability.</span></span>

<span data-ttu-id="a69a3-212">Para se proteger contra perda acidental de dados durante operações normais (por exemplo, devido ao erro do usuário), você também deve implementar backups pontuais usando [instantâneos de blob][blob-snapshot] ou outra ferramenta.</span><span class="sxs-lookup"><span data-stu-id="a69a3-212">To protect against accidental data loss during normal operations (for example, because of user error), you should also implement point-in-time backups, using [blob snapshots][blob-snapshot] or another tool.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="a69a3-213">Considerações sobre capacidade de gerenciamento</span><span class="sxs-lookup"><span data-stu-id="a69a3-213">Manageability considerations</span></span>

<span data-ttu-id="a69a3-214">**Grupos de recursos.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-214">**Resource groups.**</span></span> <span data-ttu-id="a69a3-215">Coloque recursos acoplados rigidamente que compartilhem o mesmo ciclo de vida no mesmo [grupo de recursos][resource-manager-overview].</span><span class="sxs-lookup"><span data-stu-id="a69a3-215">Put tightly coupled resources that share the same life cycle into the same [resource group][resource-manager-overview].</span></span> <span data-ttu-id="a69a3-216">Os grupos de recursos permitem implantar e monitorar recursos como um grupo, além de acumular custos de cobrança por grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-216">Resource groups allow you to deploy and monitor resources as a group, and roll up billing costs by resource group.</span></span> <span data-ttu-id="a69a3-217">Também é possível excluir recursos como um conjunto, o que é muito útil para implantações de teste.</span><span class="sxs-lookup"><span data-stu-id="a69a3-217">You can also delete resources as a set, which is very useful for test deployments.</span></span> <span data-ttu-id="a69a3-218">Dê nomes significativos aos recursos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-218">Give resources meaningful names.</span></span> <span data-ttu-id="a69a3-219">Isso facilita a localização de um recurso específico e o entendimento de sua função.</span><span class="sxs-lookup"><span data-stu-id="a69a3-219">That makes it easier to locate a specific resource and understand its role.</span></span> <span data-ttu-id="a69a3-220">Confira [Convenções de nomenclatura recomendadas para recursos do Azure][naming conventions].</span><span class="sxs-lookup"><span data-stu-id="a69a3-220">See [Recommended Naming Conventions for Azure Resources][naming conventions].</span></span>

<span data-ttu-id="a69a3-221">**SSH**.</span><span class="sxs-lookup"><span data-stu-id="a69a3-221">**SSH**.</span></span> <span data-ttu-id="a69a3-222">Antes de criar uma VM do Linux, gere um par de chaves pública-privada do RSA de 2048 bits.</span><span class="sxs-lookup"><span data-stu-id="a69a3-222">Before you create a Linux VM, generate a 2048-bit RSA public-private key pair.</span></span> <span data-ttu-id="a69a3-223">Use o arquivo de chave pública ao criar a VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-223">Use the public key file when you create the VM.</span></span> <span data-ttu-id="a69a3-224">Para saber mais, veja [Como usar SSH com Linux e Mac no Azure][ssh-linux].</span><span class="sxs-lookup"><span data-stu-id="a69a3-224">For more information, see [How to Use SSH with Linux and Mac on Azure][ssh-linux].</span></span>

<span data-ttu-id="a69a3-225">**Interrompendo uma VM.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-225">**Stopping a VM.**</span></span> <span data-ttu-id="a69a3-226">O Azure faz uma distinção entre os estados "parado" e "desalocado".</span><span class="sxs-lookup"><span data-stu-id="a69a3-226">Azure makes a distinction between "stopped" and "deallocated" states.</span></span> <span data-ttu-id="a69a3-227">Você será cobrado quando o status da VM for interrompido, mas não quando a VM for desalocada.</span><span class="sxs-lookup"><span data-stu-id="a69a3-227">You are charged when the VM status is stopped, but not when the VM is deallocated.</span></span> 

<span data-ttu-id="a69a3-228">No Portal do Azure, o botão **Parar** desaloca a VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-228">In the Azure portal, the **Stop** button deallocates the VM.</span></span> <span data-ttu-id="a69a3-229">No entanto, se você desligar por meio do sistema operacional enquanto estiver conectado, a VM será interrompida, mas *não* desalocada e, portanto, você ainda será cobrado.</span><span class="sxs-lookup"><span data-stu-id="a69a3-229">If you shut down through the OS while logged in, the VM is stopped but *not* deallocated, so you will still be charged.</span></span> 

<span data-ttu-id="a69a3-230">**Excluindo uma VM.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-230">**Deleting a VM.**</span></span> <span data-ttu-id="a69a3-231">Se você excluir uma VM, os VHDs não serão excluídos.</span><span class="sxs-lookup"><span data-stu-id="a69a3-231">If you delete a VM, the VHDs are not deleted.</span></span> <span data-ttu-id="a69a3-232">Isso significa que você poderá excluir com segurança a VM sem perda de dados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-232">That means you can safely delete the VM without losing data.</span></span> <span data-ttu-id="a69a3-233">No entanto, você ainda será cobrado pelo armazenamento.</span><span class="sxs-lookup"><span data-stu-id="a69a3-233">However, you will still be charged for storage.</span></span> <span data-ttu-id="a69a3-234">Para excluir o VHD, exclua o arquivo do [Armazenamento de blobs][blob-storage].</span><span class="sxs-lookup"><span data-stu-id="a69a3-234">To delete the VHD, delete the file from [Blob storage][blob-storage].</span></span>

<span data-ttu-id="a69a3-235">Para evitar a exclusão acidental, use um [bloqueio de recurso][resource-lock] para bloquear o grupo de recursos inteiro ou bloquear recursos individuais, como a VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-235">To prevent accidental deletion, use a [resource lock][resource-lock] to lock the entire resource group or lock individual resources, such as the VM.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="a69a3-236">Considerações de segurança</span><span class="sxs-lookup"><span data-stu-id="a69a3-236">Security considerations</span></span>

<span data-ttu-id="a69a3-237">Use a [Central de Segurança do Azure][security-center] para obter uma exibição central do estado da segurança de seus recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-237">Use [Azure Security Center][security-center] to get a central view of the security state of your Azure resources.</span></span> <span data-ttu-id="a69a3-238">A Central de Segurança monitora problemas de segurança potenciais e fornece uma visão abrangente da integridade de segurança de sua implantação.</span><span class="sxs-lookup"><span data-stu-id="a69a3-238">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment.</span></span> <span data-ttu-id="a69a3-239">A Central de Segurança é configurada por assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-239">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="a69a3-240">Habilite a coleta de dados de segurança, conforme descrito em [Guia de início rápido da Central de Segurança do Azure][security-center-get-started].</span><span class="sxs-lookup"><span data-stu-id="a69a3-240">Enable security data collection as described in [Azure Security Center quick start guide][security-center-get-started].</span></span> <span data-ttu-id="a69a3-241">Depois que a coleta de dados for habilitada, a Central de Segurança examinará automaticamente todas as VMs criadas nessa assinatura.</span><span class="sxs-lookup"><span data-stu-id="a69a3-241">When data collection is enabled, Security Center automatically scans any VMs created under that subscription.</span></span>

<span data-ttu-id="a69a3-242">**Gerenciamento de patch.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-242">**Patch management.**</span></span> <span data-ttu-id="a69a3-243">Se for habilitada, a Central de Segurança verificará se atualizações críticas e de segurança estão ausentes.</span><span class="sxs-lookup"><span data-stu-id="a69a3-243">If enabled, Security Center checks whether security and critical updates are missing.</span></span> 

<span data-ttu-id="a69a3-244">**Antimalware.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-244">**Antimalware.**</span></span> <span data-ttu-id="a69a3-245">Se for habilitada, a Central de Segurança verificará se o software antimalware está instalado.</span><span class="sxs-lookup"><span data-stu-id="a69a3-245">If enabled, Security Center checks whether antimalware software is installed.</span></span> <span data-ttu-id="a69a3-246">Você também pode usar a Central de Segurança para instalar o software antimalware por meio do Portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-246">You can also use Security Center to install antimalware software from inside the Azure portal.</span></span>

<span data-ttu-id="a69a3-247">**Operações.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-247">**Operations.**</span></span> <span data-ttu-id="a69a3-248">Use o [RBAC (controle de acesso baseado em função)][rbac] para controlar o acesso aos recursos do Azure implantados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-248">Use [role-based access control][rbac] (RBAC) to control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="a69a3-249">O RBAC permite atribuir funções de autorização aos membros de sua equipe de DevOps.</span><span class="sxs-lookup"><span data-stu-id="a69a3-249">RBAC lets you assign authorization roles to members of your DevOps team.</span></span> <span data-ttu-id="a69a3-250">Por exemplo, a função Leitor pode exibir os recursos do Azure, mas não criar, gerenciar nem excluí-los.</span><span class="sxs-lookup"><span data-stu-id="a69a3-250">For example, the Reader role can view Azure resources but not create, manage, or delete them.</span></span> <span data-ttu-id="a69a3-251">Algumas funções são específicas a determinados tipos de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-251">Some roles are specific to particular Azure resource types.</span></span> <span data-ttu-id="a69a3-252">Por exemplo, a função Colaborador da Máquina Virtual pode reiniciar ou desalocar uma VM, redefinir a senha de administrador, criar uma nova VM e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a69a3-252">For example, the Virtual Machine Contributor role can restart or deallocate a VM, reset the administrator password, create a new VM, and so forth.</span></span> <span data-ttu-id="a69a3-253">Outras [funções RBAC internas][rbac-roles] que podem ser úteis para esta arquitetura incluem [Usuário de DevTest Labs][rbac-devtest] e [Colaborador de Rede][rbac-network].</span><span class="sxs-lookup"><span data-stu-id="a69a3-253">Other [built-in RBAC roles][rbac-roles] that might be useful for this architecture include [DevTest Labs User][rbac-devtest] and [Network Contributor][rbac-network].</span></span> <span data-ttu-id="a69a3-254">Um usuário pode ser atribuído a várias funções, e você pode criar funções personalizadas para permissões ainda mais refinadas.</span><span class="sxs-lookup"><span data-stu-id="a69a3-254">A user can be assigned to multiple roles, and you can create custom roles for even more fine-grained permissions.</span></span>

> [!NOTE]
> <span data-ttu-id="a69a3-255">O RBAC não limita as ações que podem ser executadas por um usuário conectado a uma VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-255">RBAC does not limit the actions that a user logged into a VM can perform.</span></span> <span data-ttu-id="a69a3-256">Essas permissões são determinadas pelo tipo de conta no SO convidado.</span><span class="sxs-lookup"><span data-stu-id="a69a3-256">Those permissions are determined by the account type on the guest OS.</span></span>   

<span data-ttu-id="a69a3-257">Use os [logs de auditoria][audit-logs] para ver as ações de provisionamento e outros eventos da VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-257">Use [audit logs][audit-logs] to see provisioning actions and other VM events.</span></span>

<span data-ttu-id="a69a3-258">**Criptografia de dados.**</span><span class="sxs-lookup"><span data-stu-id="a69a3-258">**Data encryption.**</span></span> <span data-ttu-id="a69a3-259">Considere o uso do [Azure Disk Encryption][disk-encryption] se você precisar criptografar os discos do sistema operacional e de dados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-259">Consider [Azure Disk Encryption][disk-encryption] if you need to encrypt the OS and data disks.</span></span> 

## <a name="deploy-the-solution"></a><span data-ttu-id="a69a3-260">Implantar a solução</span><span class="sxs-lookup"><span data-stu-id="a69a3-260">Deploy the solution</span></span>

<span data-ttu-id="a69a3-261">Uma implantação para essa arquitetura está disponível no [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="a69a3-261">A deployment for this architecture is available on [GitHub][github-folder].</span></span> <span data-ttu-id="a69a3-262">Ela implanta o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a69a3-262">It deploys the following:</span></span>

  * <span data-ttu-id="a69a3-263">Uma rede virtual com uma única sub-rede denominada **Web** usada para hospedar a VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-263">A virtual network with a single subnet named **web** used to host the VM.</span></span>
  * <span data-ttu-id="a69a3-264">Um NSG com duas regras de entrada para permitir tráfego HTTP e SSH para a VM.</span><span class="sxs-lookup"><span data-stu-id="a69a3-264">An NSG with two incoming rules to allow SSH and HTTP traffic to the VM.</span></span>
  * <span data-ttu-id="a69a3-265">Uma VM que executa a versão mais recente do Ubuntu 16.04.3 LTS.</span><span class="sxs-lookup"><span data-stu-id="a69a3-265">A VM running the latest version of Ubuntu 16.04.3 LTS.</span></span>
  * <span data-ttu-id="a69a3-266">Uma extensão de script personalizado de exemplo que implanta o Apache HTTP Server para a VM Ubuntu e formata os dois discos de dados.</span><span class="sxs-lookup"><span data-stu-id="a69a3-266">A sample custom script extension that deploys Apache HTTP Server to the Ubuntu VM, and formats the two data disks.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="a69a3-267">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="a69a3-267">Prerequisites</span></span>

<span data-ttu-id="a69a3-268">Antes de implantar a arquitetura de referência para sua própria assinatura, você deve executar as etapas a seguir.</span><span class="sxs-lookup"><span data-stu-id="a69a3-268">Before you can deploy the reference architecture to your own subscription, you must perform the following steps.</span></span>

1. <span data-ttu-id="a69a3-269">Clone, crie fork ou baixe o arquivo zip para as [arquiteturas de referência AzureCAT][ref-arch-repo] no repositório GitHub.</span><span class="sxs-lookup"><span data-stu-id="a69a3-269">Clone, fork, or download the zip file for the [AzureCAT reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="a69a3-270">Verifique se a CLI do Azure 2.0 está instalada no computador.</span><span class="sxs-lookup"><span data-stu-id="a69a3-270">Make sure you have the Azure CLI 2.0 installed on your computer.</span></span> <span data-ttu-id="a69a3-271">Para instalar a CLI, siga as instruções em [Instalar a CLI do Azure 2.0][azure-cli-2].</span><span class="sxs-lookup"><span data-stu-id="a69a3-271">To install the CLI, follow the instructions in [Install Azure CLI 2.0][azure-cli-2].</span></span>

3. <span data-ttu-id="a69a3-272">Instale os pacote npm dos [Blocos de construção do Azure][azbb].</span><span class="sxs-lookup"><span data-stu-id="a69a3-272">Install the [Azure building blocks][azbb] npm package.</span></span>

4. <span data-ttu-id="a69a3-273">Em um prompt de comando, bash prompt ou prompt do PowerShell, faça logon na sua conta do Azure usando um dos comandos abaixo e siga os prompts.</span><span class="sxs-lookup"><span data-stu-id="a69a3-273">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using one of the commands below, and follow the prompts.</span></span>

  ```bash
  az login
  ```

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="a69a3-274">Implantar a solução usando azbb</span><span class="sxs-lookup"><span data-stu-id="a69a3-274">Deploy the solution using azbb</span></span>

<span data-ttu-id="a69a3-275">Para implantar a carga de trabalho de VM única de exemplo, siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="a69a3-275">To deploy the sample single VM workload, follow these steps:</span></span>

1. <span data-ttu-id="a69a3-276">Navegue até a pasta `virtual-machines\single-vm\parameters\linux` do repositório que você baixou na etapa de pré-requisitos acima.</span><span class="sxs-lookup"><span data-stu-id="a69a3-276">Navigate to the `virtual-machines\single-vm\parameters\linux` folder for the repository you downloaded in the pre-requisites step above.</span></span>

2. <span data-ttu-id="a69a3-277">Abra o arquivo `single-vm-v2.json` e insira um nome de usuário e a chave SSH entre aspas, conforme mostrado abaixo e salve o arquivo.</span><span class="sxs-lookup"><span data-stu-id="a69a3-277">Open the `single-vm-v2.json` file and enter a username and SSH key between the quotes, as shown below, then save the file.</span></span>

  ```bash
  "adminUsername": "",
  "adminsshPublicKey": "",
  ```

3. <span data-ttu-id="a69a3-278">Execute `azbb` para implantar a VM de exemplo conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="a69a3-278">Run `azbb` to deploy the sample VM as shown below.</span></span>

  ```bash
  azbb -s <subscription_id> -g <resource_group_name> -l <location> -p single-vm-v2.json --deploy
  ```

<span data-ttu-id="a69a3-279">Para obter mais informações sobre como implantar essa arquitetura de referência de exemplo, visite nosso [Repositório GitHub][git].</span><span class="sxs-lookup"><span data-stu-id="a69a3-279">For more information on deploying this sample reference architecture, visit our [GitHub repository][git].</span></span>

## <a name="next-steps"></a><span data-ttu-id="a69a3-280">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="a69a3-280">Next steps</span></span>

- <span data-ttu-id="a69a3-281">Saiba mais sobre nossos [Blocos de construção do Azure][azbbv2].</span><span class="sxs-lookup"><span data-stu-id="a69a3-281">Learn about our [Azure building Blocks][azbbv2].</span></span>
- <span data-ttu-id="a69a3-282">Implante [várias VMs][multi-vm] no Azure.</span><span class="sxs-lookup"><span data-stu-id="a69a3-282">Deploy [multiple VMs][multi-vm] in Azure.</span></span>

<!-- links -->
[git]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/single-vm
[multi-vm]: ../virtual-machines-linux/multi-vm.md
[naming conventions]: ../../best-practices/naming-conventions.md
[audit-logs]: https://azure.microsoft.com/blog/analyze-azure-audit-logs-in-powerbi-more/
[availability-set]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[azbb]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[azbbv2]: https://github.com/mspnp/template-building-blocks
[azure-cli-2]: /cli/azure/install-azure-cli?view=azure-cli-latest
[azure-linux]: /azure/virtual-machines/virtual-machines-linux-azure-overview
[azure-storage]: /azure/storage/storage-introduction
[blob-snapshot]: /azure/storage/storage-blob-snapshots
[blob-storage]: /azure/storage/storage-introduction
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[cname-record]: https://en.wikipedia.org/wiki/CNAME_record
[data-disk]: /azure/virtual-machines/virtual-machines-linux-about-disks-vhds
[disk-encryption]: /azure/security/azure-security-disk-encryption
[enable-monitoring]: /azure/monitoring-and-diagnostics/insights-how-to-use-diagnostics
[fqdn]: /azure/virtual-machines/virtual-machines-linux-portal-create-fqdn
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/single-vm
[iostat]: https://en.wikipedia.org/wiki/Iostat
[manage-vm-availability]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[nsg]: /azure/virtual-network/virtual-networks-nsg
[nsg-default-rules]: /azure/virtual-network/virtual-networks-nsg#default-rules
[OSPatching]: https://github.com/Azure/azure-linux-extensions/tree/master/OSPatching
[planned-maintenance]: /azure/virtual-machines/virtual-machines-linux-planned-maintenance
[premium-storage]: /azure/storage/storage-premium-storage
[rbac]: /azure/active-directory/role-based-access-control-what-is
[rbac-roles]: /azure/active-directory/role-based-access-built-in-roles
[rbac-devtest]: /azure/active-directory/role-based-access-built-in-roles#devtest-labs-user
[rbac-network]: /azure/active-directory/role-based-access-built-in-roles#network-contributor
[reboot-logs]: https://azure.microsoft.com/blog/viewing-vm-reboot-logs/
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[resource-lock]: /azure/resource-group-lock-resources
[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[security-center]: /azure/security-center/
[security-center-get-started]: /azure/security-center/security-center-get-started
[select-vm-image]: /azure/virtual-machines/virtual-machines-linux-cli-ps-findimage
[services-by-region]: https://azure.microsoft.com/regions/#services
[ssh-linux]: /azure/virtual-machines/virtual-machines-linux-mac-create-ssh-keys
[static-ip]: /azure/virtual-network/virtual-networks-reserved-public-ip
[virtual-machine-sizes]: /azure/virtual-machines/virtual-machines-linux-sizes
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[vm-disk-limits]: /azure/azure-subscription-service-limits#virtual-machine-disk-limits
[vm-resize]: /azure/virtual-machines/virtual-machines-linux-change-vm-size
[vm-size-tables]: /azure/virtual-machines/virtual-machines-linux-sizes
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[readme]: https://github.com/mspnp/reference-architectures/blob/master/virtual-machines/single-vm/README.md
[0]: ./images/single-vm-diagram.png "Única arquitetura de VM do Linux no Azure"


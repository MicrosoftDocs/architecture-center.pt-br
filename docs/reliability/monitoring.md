---
title: Monitorando a integridade do aplicativo para a confiabilidade do Azure
description: Como usar o monitoramento para melhorar a confiabilidade do aplicativo no Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: 46f9f3fb623a2facf4b9f9c6ec57376ae59e41dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646483"
---
# <a name="monitoring-application-health-for-reliability-in-azure"></a><span data-ttu-id="df476-103">Monitorando a integridade do aplicativo para a confiabilidade do Azure</span><span class="sxs-lookup"><span data-stu-id="df476-103">Monitoring application health for reliability in Azure</span></span>

<span data-ttu-id="df476-104">O monitoramento e o diagnóstico são cruciais para garantir a resiliência.</span><span class="sxs-lookup"><span data-stu-id="df476-104">Monitoring and diagnostics are crucial for resiliency.</span></span> <span data-ttu-id="df476-105">Se algo falhar, você precisa saber *que* ele falha, *quando* ele falha &mdash; e *por que*.</span><span class="sxs-lookup"><span data-stu-id="df476-105">If something fails, you need to know *that* it failed, *when* it failed &mdash; and *why*.</span></span>

<span data-ttu-id="df476-106">*Monitorando* não é igual a *detecção de falha*.</span><span class="sxs-lookup"><span data-stu-id="df476-106">*Monitoring* is not the same as *failure detection*.</span></span> <span data-ttu-id="df476-107">Por exemplo, seu aplicativo pode detectar transitório erro e tente novamente, evitando o tempo de inatividade.</span><span class="sxs-lookup"><span data-stu-id="df476-107">For example, your application might detect a transient error and retry, avoiding downtime.</span></span> <span data-ttu-id="df476-108">Mas ele também deve registrar a operação de repetição para que você possa monitorar a taxa de erros para obter uma visão geral da integridade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-108">But it should also log the retry operation so that you can monitor the error rate to get an overall picture of application health.</span></span>

<span data-ttu-id="df476-109">Imagine o processo de monitoramento e diagnóstico como um pipeline com a quatro estágios distintos: Instrumentação, coleta e armazenamento, análise e diagnóstico, visualização e alertas.</span><span class="sxs-lookup"><span data-stu-id="df476-109">Think of the monitoring and diagnostics process as a pipeline with four distinct stages: Instrumentation, collection and storage, analysis and diagnosis, and visualization and alerts.</span></span>

## <a name="instrumentation"></a><span data-ttu-id="df476-110">Instrumentação</span><span class="sxs-lookup"><span data-stu-id="df476-110">Instrumentation</span></span>

<span data-ttu-id="df476-111">Não é prático monitorar seu aplicativo diretamente, portanto, a instrumentação é a chave.</span><span class="sxs-lookup"><span data-stu-id="df476-111">It's not practical to monitor your application directly, so instrumentation is key.</span></span> <span data-ttu-id="df476-112">Um sistema distribuído em larga escala pode ser executada em dezenas de máquinas virtuais (VMs), que são adicionadas e removidas ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="df476-112">A large-scale distributed system might run on dozens of virtual machines (VMs), which are added and removed over time.</span></span> <span data-ttu-id="df476-113">Da mesma forma, um aplicativo de nuvem pode usar um número de armazenamentos de dados e uma ação de usuário único pode abranger vários subsistemas.</span><span class="sxs-lookup"><span data-stu-id="df476-113">Likewise, a cloud application might use a number of data stores and a single user action might span multiple subsystems.</span></span>

<span data-ttu-id="df476-114">Forneça instrumentação avançada:</span><span class="sxs-lookup"><span data-stu-id="df476-114">Provide rich instrumentation:</span></span>

- <span data-ttu-id="df476-115">Para falhas que provavelmente mas ainda não tenham ocorrido, fornecer dados suficientes para determinar a causa, atenue a situação e certifique-se de que o sistema permaneça disponível.</span><span class="sxs-lookup"><span data-stu-id="df476-115">For failures that are likely but have not yet occurred, provide enough data to determine the cause, mitigate the situation, and ensure that the system remains available.</span></span>
- <span data-ttu-id="df476-116">Para falhas que já tenham ocorrido, o aplicativo deve retornar uma mensagem de erro apropriado para o usuário, mas deve tentar continuar em execução, embora com funcionalidade reduzida.</span><span class="sxs-lookup"><span data-stu-id="df476-116">For failures that have already occurred, the application should return an appropriate error message to the user but should attempt to continue running, albeit with reduced functionality.</span></span>

<span data-ttu-id="df476-117">Sistemas de monitoramento devem capturar detalhes abrangentes para que os aplicativos podem ser restaurados com eficiência e, se necessário, designers e desenvolvedores podem modificar o sistema para evitar a situação ocorra novamente.</span><span class="sxs-lookup"><span data-stu-id="df476-117">Monitoring systems should capture comprehensive details so that applications can be restored efficiently and, if necessary, designers and developers can modify the system to prevent the situation from recurring.</span></span>

<span data-ttu-id="df476-118">Os dados brutos para monitoramento podem vir de uma variedade de fontes, incluindo:</span><span class="sxs-lookup"><span data-stu-id="df476-118">The raw data for monitoring can come from a variety of sources, including:</span></span>

- <span data-ttu-id="df476-119">Logs de aplicativo, como aqueles gerados pela [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) service.</span><span class="sxs-lookup"><span data-stu-id="df476-119">Application logs, such as those produced by the [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) service.</span></span>
- <span data-ttu-id="df476-120">As métricas de desempenho do sistema operacional são coletados pelo [do Azure de agentes de monitoramento](/azure/azure-monitor/platform/agents-overview).</span><span class="sxs-lookup"><span data-stu-id="df476-120">Operating system performance metrics collected by [Azure monitoring agents](/azure/azure-monitor/platform/agents-overview).</span></span>
- <span data-ttu-id="df476-121">[Recursos do Azure](/azure/azure-monitor/platform/metrics-supported), incluindo métricas coletadas pelo Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="df476-121">[Azure resources](/azure/azure-monitor/platform/metrics-supported), including metrics collected by Azure Monitor.</span></span>
- <span data-ttu-id="df476-122">[A integridade do serviço do Azure](/azure/service-health/service-health-overview), que oferece um painel para ajudá-lo a controlar os eventos ativos.</span><span class="sxs-lookup"><span data-stu-id="df476-122">[Azure Service Health](/azure/service-health/service-health-overview), which offers a dashboard to help you track active events.</span></span>
- <span data-ttu-id="df476-123">[Os logs do Azure AD](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) incorporados à plataforma do Azure.</span><span class="sxs-lookup"><span data-stu-id="df476-123">[Azure AD logs](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) built into the Azure platform.</span></span>

<span data-ttu-id="df476-124">Os serviços do Azure mais tem métricas e diagnósticos que você pode configurar para analisar e determinar a causa dos problemas.</span><span class="sxs-lookup"><span data-stu-id="df476-124">Most Azure services have metrics and diagnostics that you can configure to analyze and determine the cause of problems.</span></span> <span data-ttu-id="df476-125">Para obter mais informações, consulte [dados de monitoramento coletados pelo Azure Monitor](/azure/azure-monitor/platform/data-collection).</span><span class="sxs-lookup"><span data-stu-id="df476-125">To learn more, see [Monitoring data collected by Azure Monitor](/azure/azure-monitor/platform/data-collection).</span></span>

## <a name="collection-and-storage"></a><span data-ttu-id="df476-126">Coleta e armazenamento</span><span class="sxs-lookup"><span data-stu-id="df476-126">Collection and storage</span></span>

<span data-ttu-id="df476-127">Dados brutos de instrumentação podem ser mantidos em diversos locais e formatos, incluindo:</span><span class="sxs-lookup"><span data-stu-id="df476-127">Raw instrumentation data can be held in various locations and formats, including:</span></span>

- <span data-ttu-id="df476-128">Logs de rastreamento do aplicativo</span><span class="sxs-lookup"><span data-stu-id="df476-128">Application trace logs</span></span>
- <span data-ttu-id="df476-129">Logs IIS</span><span class="sxs-lookup"><span data-stu-id="df476-129">IIS logs</span></span>
- <span data-ttu-id="df476-130">contadores de desempenho</span><span class="sxs-lookup"><span data-stu-id="df476-130">Performance counters</span></span>

<span data-ttu-id="df476-131">Essas fontes diferentes são coletadas, consolidadas e colocadas em repositórios de dados confiável no Azure, como o Application Insights, as métricas do Azure Monitor, a integridade do serviço, contas de armazenamento e Azure Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="df476-131">These disparate sources are collected, consolidated, and placed in reliable data stores in Azure, such as Application Insights, Azure Monitor metrics, Service Health, storage accounts, and Azure Log Analytics.</span></span>

## <a name="analysis-and-diagnosis"></a><span data-ttu-id="df476-132">Análise e diagnóstico</span><span class="sxs-lookup"><span data-stu-id="df476-132">Analysis and diagnosis</span></span>

<span data-ttu-id="df476-133">Analise dados consolidados nesses armazenamentos de dados para solucionar problemas e obter uma visão geral da integridade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-133">Analyze data consolidated in these data stores to troubleshoot issues and gain an overall view of application health.</span></span> <span data-ttu-id="df476-134">Em geral, você pode [pesquise e analise](/azure/azure-monitor/log-query/log-query-overview) os dados no Application Insights e Log Analytics usando consultas Kusto ou grafos de exibição pré-configurada usando [soluções de gerenciamento](/azure/azure-monitor/insights/solutions-inventory).</span><span class="sxs-lookup"><span data-stu-id="df476-134">Generally, you can [search for and analyze](/azure/azure-monitor/log-query/log-query-overview) the data in Application Insights and Log Analytics using Kusto queries or view preconfigured graphs using [management solutions](/azure/azure-monitor/insights/solutions-inventory).</span></span> <span data-ttu-id="df476-135">Ou use o Azure Advisor para exibir as recomendações com foco na [resiliência](/azure/advisor/advisor-high-availability-recommendations) e [desempenho](/azure/advisor/advisor-performance-recommendations).</span><span class="sxs-lookup"><span data-stu-id="df476-135">Or use Azure Advisor to view recommendations with a focus on [resiliency](/azure/advisor/advisor-high-availability-recommendations) and [performance](/azure/advisor/advisor-performance-recommendations).</span></span>

## <a name="visualization-and-alerts"></a><span data-ttu-id="df476-136">Visualização e alertas</span><span class="sxs-lookup"><span data-stu-id="df476-136">Visualization and alerts</span></span>

<span data-ttu-id="df476-137">Apresentar dados de telemetria em um formato que torna mais fácil para um operador a ser observado problemas ou tendências rapidamente, como um alerta de email ou painel.</span><span class="sxs-lookup"><span data-stu-id="df476-137">Present telemetry data in a format that makes it easy for an operator to notice problems or trends quickly, such as a dashboard or email alert.</span></span>

<span data-ttu-id="df476-138">Obter uma exibição de pilha completa do estado do aplicativo por meio [painéis do Azure](/azure/azure-portal/azure-portal-dashboards) para criar uma exibição consolidada de gráficos do Application Insights, análise de Log, métricas do Azure Monitor e a integridade do serviço de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="df476-138">Get a full-stack view of application state by using [Azure dashboards](/azure/azure-portal/azure-portal-dashboards) to create a consolidated view of monitoring graphs from Application Insights, Log Analytics, Azure Monitor metrics, and Service Health.</span></span> <span data-ttu-id="df476-139">E usar [alertas do Azure Monitor](/azure/azure-monitor/platform/alerts-overview) criar notificações de integridade do serviço, o resource health, métricas do Azure Monitor, registra em log no Log Analytics e Application Insights.</span><span class="sxs-lookup"><span data-stu-id="df476-139">And use [Azure Monitor alerts](/azure/azure-monitor/platform/alerts-overview) to create notifications on Service Health, resource health, Azure Monitor metrics, logs in Log Analytics, and Application Insights.</span></span>

<span data-ttu-id="df476-140">Para obter mais informações sobre monitoramento e diagnóstico, consulte [monitoramento e diagnóstico](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="df476-140">For more information about monitoring and diagnostics, see [Monitoring and diagnostics](../best-practices/monitoring.md).</span></span>

## <a name="health-probes-and-check-functions"></a><span data-ttu-id="df476-141">Funções de verificação e investigações de integridade</span><span class="sxs-lookup"><span data-stu-id="df476-141">Health probes and check functions</span></span>

<span data-ttu-id="df476-142">A integridade e o desempenho de um aplicativo podem diminuir ao longo do tempo e degradação pode não ser notada até que o aplicativo falhe.</span><span class="sxs-lookup"><span data-stu-id="df476-142">The health and performance of an application can degrade over time, and degradation might not be noticeable until the application fails.</span></span>

<span data-ttu-id="df476-143">Implemente investigações ou verifique funções e executá-los regularmente de fora do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-143">Implement probes or check functions, and run them regularly from outside the application.</span></span> <span data-ttu-id="df476-144">Essas verificações podem ser tão simples quanto medir o tempo de resposta para o aplicativo como um todo, as partes individuais do aplicativo, serviços específicos que o aplicativo usa ou componentes separados.</span><span class="sxs-lookup"><span data-stu-id="df476-144">These checks can be as simple as measuring response time for the application as a whole, for individual parts of the application, for specific services that the application uses, or for separate components.</span></span>

<span data-ttu-id="df476-145">Funções de verificação podem executar processos para garantir que eles produzem resultados válidos, medem a latência e verificar a disponibilidade e extraem informações do sistema.</span><span class="sxs-lookup"><span data-stu-id="df476-145">Check functions can run processes to ensure that they produce valid results, measure latency and check availability, and extract information from the system.</span></span>

## <a name="long-running-workflow-failures"></a><span data-ttu-id="df476-146">Falhas de fluxo de trabalho de longa execução</span><span class="sxs-lookup"><span data-stu-id="df476-146">Long-running workflow failures</span></span>

<span data-ttu-id="df476-147">Fluxos de trabalho de longa execução geralmente incluem várias etapas, cada um deles deve ser independente.</span><span class="sxs-lookup"><span data-stu-id="df476-147">Long-running workflows often include multiple steps, each of which should be independent.</span></span>

<span data-ttu-id="df476-148">Acompanhe o progresso dos processos de longa execução para minimizar a probabilidade de que todo o fluxo de trabalho precisará ser revertida ou que várias transações de compensação precisará ser executado.</span><span class="sxs-lookup"><span data-stu-id="df476-148">Track the progress of long-running processes to minimize the likelihood that the entire workflow will need to be rolled back or that multiple compensating transactions will need to be executed.</span></span>

>[!TIP]
> <span data-ttu-id="df476-149">Monitore e gerencie o progresso de fluxos de trabalho de longa duração implementando um padrão como [Supervisor de agente do Agendador](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="df476-149">Monitor and manage the progress of long-running workflows by implementing a pattern such as [Scheduler Agent Supervisor](../patterns/scheduler-agent-supervisor.md).</span></span>

## <a name="application-logs"></a><span data-ttu-id="df476-150">Logs de aplicativo</span><span class="sxs-lookup"><span data-stu-id="df476-150">Application logs</span></span>

<span data-ttu-id="df476-151">Os logs de aplicativo são uma fonte importante de dados de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="df476-151">Application logs are an important source of diagnostics data.</span></span> <span data-ttu-id="df476-152">Para obter informações quando precisar da maioria, siga as práticas recomendadas para o log de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-152">To gain insight when you need it most, follow best practices for application logging.</span></span>

### <a name="log-data-in-the-production-environment"></a><span data-ttu-id="df476-153">Dados de log no ambiente de produção</span><span class="sxs-lookup"><span data-stu-id="df476-153">Log data in the production environment</span></span>

<span data-ttu-id="df476-154">Capture dados de telemetria robustas enquanto o aplicativo está em execução no ambiente de produção, para que você tenha informações suficientes para diagnosticar a causa dos problemas no estado de produção.</span><span class="sxs-lookup"><span data-stu-id="df476-154">Capture robust telemetry data while the application is running in the production environment, so you have sufficient information to diagnose the cause of issues in the production state.</span></span>

### <a name="log-events-at-service-boundaries"></a><span data-ttu-id="df476-155">Eventos de log em limites de serviço</span><span class="sxs-lookup"><span data-stu-id="df476-155">Log events at service boundaries</span></span>

<span data-ttu-id="df476-156">Inclua uma ID de correlação que flua nos limites dos serviços.</span><span class="sxs-lookup"><span data-stu-id="df476-156">Include a correlation ID that flows across service boundaries.</span></span> <span data-ttu-id="df476-157">Se uma transação fluir em vários serviços e um deles falhar, a correlação ID ajuda a acompanhar as solicitações em seu aplicativo e indica por que a transação falhou.</span><span class="sxs-lookup"><span data-stu-id="df476-157">If a transaction flows through multiple services and one of them fails, the correlation ID helps you track requests across your application and pinpoints why the transaction failed.</span></span>

### <a name="use-semantic-structured-logging"></a><span data-ttu-id="df476-158">Usar o registro em log semântico (estruturado)</span><span class="sxs-lookup"><span data-stu-id="df476-158">Use semantic (structured) logging</span></span>

<span data-ttu-id="df476-159">Com os logs estruturados, é mais fácil automatizar o consumo e a análise dos dados do log, que é especialmente importantes em escala de nuvem.</span><span class="sxs-lookup"><span data-stu-id="df476-159">With structured logs, it's easier to automate the consumption and analysis of the log data, which is especially important at cloud scale.</span></span> <span data-ttu-id="df476-160">Em geral, é recomendável armazenar dados de diagnóstico e métricas de recursos do Azure em um espaço de trabalho do Log Analytics em vez de em uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="df476-160">Generally, we recommend storing Azure resources metrics and diagnostics data in a Log Analytics workspace rather than in a storage account.</span></span> <span data-ttu-id="df476-161">Dessa forma, você pode usar consultas Kusto para obter os dados desejados rapidamente e em um formato estruturado.</span><span class="sxs-lookup"><span data-stu-id="df476-161">This way, you can use Kusto queries to obtain the data you want quickly and in a structured format.</span></span> <span data-ttu-id="df476-162">Você também pode usar APIs do Azure Monitor e APIs de análise de Log do Azure.</span><span class="sxs-lookup"><span data-stu-id="df476-162">You can also use Azure Monitor APIs and Azure Log Analytics APIs.</span></span>

### <a name="use-asynchronous-logging"></a><span data-ttu-id="df476-163">Use logs assíncronos</span><span class="sxs-lookup"><span data-stu-id="df476-163">Use asynchronous logging</span></span>

<span data-ttu-id="df476-164">Operações de registro em log síncrono, às vezes, bloqueiam o código do aplicativo, fazendo com que as solicitações para fazer backup de que os logs são gravados.</span><span class="sxs-lookup"><span data-stu-id="df476-164">Synchronous logging operations sometimes block your application code, causing requests to back up as logs are written.</span></span> <span data-ttu-id="df476-165">Use logs assíncronos para preservar a disponibilidade durante o registro em log do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-165">Use asynchronous logging to preserve availability during application logging.</span></span>

### <a name="separate-application-logging-from-auditing"></a><span data-ttu-id="df476-166">Log de aplicativo separada da auditoria</span><span class="sxs-lookup"><span data-stu-id="df476-166">Separate application logging from auditing</span></span>

<span data-ttu-id="df476-167">Registros de auditoria geralmente são mantidos para requisitos regulamentares ou de conformidade e devem ser concluídos.</span><span class="sxs-lookup"><span data-stu-id="df476-167">Audit records are commonly maintained for compliance or regulatory requirements and must be complete.</span></span> <span data-ttu-id="df476-168">Para evitar transações descartadas, manter os logs de auditoria separadamente dos logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="df476-168">To avoid dropped transactions, maintain audit logs separately from diagnostic logs.</span></span>

## <a name="remote-call-statistics"></a><span data-ttu-id="df476-169">Estatísticas de chamada remota</span><span class="sxs-lookup"><span data-stu-id="df476-169">Remote call statistics</span></span>

<span data-ttu-id="df476-170">Acompanhamento e relatório remoto chamar estatísticas em tempo real e fornecem uma maneira fácil de examinar essas informações, portanto, a equipe de operações tem uma exibição instantânea da integridade do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-170">Track and report remote call statistics in real time and provide an easy way to review this information, so the operations team has an instantaneous view into the health of your application.</span></span> <span data-ttu-id="df476-171">Resuma métricas de chamada remota, como latência, taxa de transferência e erros nos percentuais de 99 e 95.</span><span class="sxs-lookup"><span data-stu-id="df476-171">Summarize remote call metrics, such as latency, throughput, and errors in the 99 and 95 percentiles.</span></span>

## <a name="transient-exceptions-and-retries"></a><span data-ttu-id="df476-172">Exceções transitórias e novas tentativas</span><span class="sxs-lookup"><span data-stu-id="df476-172">Transient exceptions and retries</span></span>

<span data-ttu-id="df476-173">Controle o número de exceções transitórias e novas tentativas ao longo do tempo para descobrir problemas ou falhas na lógica de repetição do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-173">Track the number of transient exceptions and retries over time to uncover issues or failures in your application's retry logic.</span></span> <span data-ttu-id="df476-174">Uma tendência de aumento de exceções ao longo do tempo pode indicar que o serviço está apresentando um problema e pode falhar.</span><span class="sxs-lookup"><span data-stu-id="df476-174">A trend of increasing exceptions over time may indicate that the service is having an issue and may fail.</span></span> <span data-ttu-id="df476-175">Para saber mais, confira [Diretriz específica do serviço de repetição](../best-practices/retry-service-specific.md).</span><span class="sxs-lookup"><span data-stu-id="df476-175">For more information, see [Retry service specific guidance](../best-practices/retry-service-specific.md).</span></span>

## <a name="early-warning-system"></a><span data-ttu-id="df476-176">Sistema de avisos antecipados</span><span class="sxs-lookup"><span data-stu-id="df476-176">Early warning system</span></span>

<span data-ttu-id="df476-177">Monitore seu aplicativo em busca de sinais de aviso que podem exigir intervenção proativa.</span><span class="sxs-lookup"><span data-stu-id="df476-177">Monitor your application for warning signs that might require proactive intervention.</span></span> <span data-ttu-id="df476-178">Ferramentas que avaliam a integridade geral do aplicativo e suas dependências ajudarão-lo a reconhecer rapidamente quando um sistema ou seus componentes se tornam indisponíveis repentinamente.</span><span class="sxs-lookup"><span data-stu-id="df476-178">Tools that assess the overall health of the application and its dependencies help you to recognize quickly when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="df476-179">Usá-los para implementar um sistema de avisos antecipados.</span><span class="sxs-lookup"><span data-stu-id="df476-179">Use them to implement an early warning system.</span></span>

1. <span data-ttu-id="df476-180">Identifique os indicadores chave de desempenho de integridade do seu aplicativo, como exceções transitórias e latência de chamada remota.</span><span class="sxs-lookup"><span data-stu-id="df476-180">Identify the key performance indicators of your application's health, such as transient exceptions and remote call latency.</span></span>
1. <span data-ttu-id="df476-181">Definir limites em níveis que identifiquem problemas antes que eles se tornem críticos e exigem uma resposta de recuperação.</span><span class="sxs-lookup"><span data-stu-id="df476-181">Set thresholds at levels that identify issues before they become critical and require a recovery response.</span></span>
1. <span data-ttu-id="df476-182">Envie um alerta para operações quando o valor limite é atingido.</span><span class="sxs-lookup"><span data-stu-id="df476-182">Send an alert to operations when the threshold value is reached.</span></span>

<span data-ttu-id="df476-183">Considere [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) ou ferramentas de terceiros para fornecer recursos de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="df476-183">Consider [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) or third-party tools to provide monitoring capabilities.</span></span> <span data-ttu-id="df476-184">A maioria das soluções de monitoramento monitora os principais contadores de desempenho e a disponibilidade do serviço.</span><span class="sxs-lookup"><span data-stu-id="df476-184">Most monitoring solutions track key performance counters and service availability.</span></span> <span data-ttu-id="df476-185">[O Azure resource health](/azure/service-health/resource-health-checks-resource-types) fornece alguns integridade interna verificações de status, que podem ajudar a diagnosticar a limitação de serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="df476-185">[Azure resource health](/azure/service-health/resource-health-checks-resource-types) provides some built-in health status checks, which can help diagnose throttling of Azure services.</span></span>

## <a name="subscription-and-service-limitations"></a><span data-ttu-id="df476-186">Limitações de serviço e assinatura</span><span class="sxs-lookup"><span data-stu-id="df476-186">Subscription and service limitations</span></span>

<span data-ttu-id="df476-187">As assinaturas do Azure têm limites em determinados tipos de recurso, como o número de grupos de recursos, núcleos e contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="df476-187">Azure subscriptions have limits on certain resource types, such as number of resource groups, cores, and storage accounts.</span></span> <span data-ttu-id="df476-188">Para garantir que seu aplicativo não é executado em relação a limites de assinatura do Azure, crie alertas que fazem votação para serviços perto de seus limites e cotas.</span><span class="sxs-lookup"><span data-stu-id="df476-188">To ensure that your application doesn't run up against Azure subscription limits, create alerts that poll for services nearing their limits and quotas.</span></span>

<span data-ttu-id="df476-189">Os seguintes limites de assinatura com alertas de endereço.</span><span class="sxs-lookup"><span data-stu-id="df476-189">Address the following subscription limits with alerts.</span></span>

### <a name="individual-services"></a><span data-ttu-id="df476-190">Serviços individuais</span><span class="sxs-lookup"><span data-stu-id="df476-190">Individual services</span></span>

<span data-ttu-id="df476-191">Serviços do Azure individuais têm limites de consumo de armazenamento, taxa de transferência, número de conexões, solicitações por segundo e outras métricas.</span><span class="sxs-lookup"><span data-stu-id="df476-191">Individual Azure services have consumption limits on storage, throughput, number of connections, requests per second, and other metrics.</span></span> <span data-ttu-id="df476-192">O aplicativo falhará se ele tentar usar recursos além desses limites, resultando em tempo de inatividade possíveis e limitação do serviço.</span><span class="sxs-lookup"><span data-stu-id="df476-192">Your application will fail if it attempts to use resources beyond these limits, resulting in service throttling and possible downtime.</span></span>

<span data-ttu-id="df476-193">Dependendo do serviço específico e seus requisitos de aplicativo, você geralmente pode permanecer abaixo desses limites, escalar verticalmente (escolhendo outro tipo de preço, por exemplo) ou expandindo (adicionando novas instâncias).</span><span class="sxs-lookup"><span data-stu-id="df476-193">Depending on the specific service and your application requirements, you can often stay under these limits by scaling up (choosing another pricing tier, for example) or scaling out (adding new instances).</span></span>

### <a name="azure-storage-scalability-and-performance-targets"></a><span data-ttu-id="df476-194">Metas de desempenho e escalabilidade do armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="df476-194">Azure storage scalability and performance targets</span></span>

<span data-ttu-id="df476-195">Azure permite que um número máximo de contas de armazenamento por assinatura.</span><span class="sxs-lookup"><span data-stu-id="df476-195">Azure allows a maximum number of storage accounts per subscription.</span></span> <span data-ttu-id="df476-196">Se seu aplicativo exigir mais contas de armazenamento que estão atualmente disponíveis na sua assinatura, crie uma nova assinatura com contas de armazenamento adicionais.</span><span class="sxs-lookup"><span data-stu-id="df476-196">If your application requires more storage accounts than are currently available in your subscription, create a new subscription with additional storage accounts.</span></span> <span data-ttu-id="df476-197">Para saber mais, confira [Assinatura e limites de serviço, cotas e restrições do Azure](/azure/azure-subscription-service-limits/#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="df476-197">For more information, see [Azure subscription and service limits, quotas, and constraints](/azure/azure-subscription-service-limits/#storage-limits).</span></span>

<span data-ttu-id="df476-198">Se você exceder as metas de desempenho e escalabilidade do armazenamento do Azure, seu aplicativo sofrerá uma limitação de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="df476-198">If you exceed Azure storage scalability and performance targets, your application will experience storage throttling.</span></span> <span data-ttu-id="df476-199">Para saber mais, confira [Metas de desempenho e escalabilidade do Armazenamento do Azure](/azure/storage/storage-scalability-targets/).</span><span class="sxs-lookup"><span data-stu-id="df476-199">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/).</span></span>

### <a name="scalability-targets-for-virtual-machine-disks"></a><span data-ttu-id="df476-200">Metas de escalabilidade para discos de máquina virtual</span><span class="sxs-lookup"><span data-stu-id="df476-200">Scalability targets for virtual machine disks</span></span>

<span data-ttu-id="df476-201">Uma infraestrutura como serviço (IaaS) VM do Azure dá suporte à anexação de um número de discos de dados, dependendo de vários fatores, incluindo o tamanho da VM e o tipo de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="df476-201">An Azure infrastructure as a service (IaaS) VM supports attaching a number of data disks, depending on several factors, including the VM size and the type of storage account.</span></span> <span data-ttu-id="df476-202">Se o aplicativo exceder as metas de escalabilidade para discos de máquina virtual, provisione contas de armazenamento adicionais e crie os discos da máquina virtual nelas.</span><span class="sxs-lookup"><span data-stu-id="df476-202">If your application exceeds the scalability targets for virtual machine disks, provision additional storage accounts and create the virtual machine disks there.</span></span> <span data-ttu-id="df476-203">Para saber mais, confira [Metas de desempenho e escalabilidade do Armazenamento do Azure](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span><span class="sxs-lookup"><span data-stu-id="df476-203">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span></span>

### <a name="vm-size"></a><span data-ttu-id="df476-204">Tamanho da VM</span><span class="sxs-lookup"><span data-stu-id="df476-204">VM size</span></span>

<span data-ttu-id="df476-205">Se a CPU, memória, disco e e/s de suas VMs real aproximam dos limites de tamanho da VM, seu aplicativo pode apresentar problemas de capacidade.</span><span class="sxs-lookup"><span data-stu-id="df476-205">If the actual CPU, memory, disk, and I/O of your VMs approach the limits of the VM size, your application may experience capacity issues.</span></span> <span data-ttu-id="df476-206">Para corrigir os problemas, aumente o tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="df476-206">To correct the issues, increase the VM size.</span></span> <span data-ttu-id="df476-207">Tamanhos de VM são descritos em [tamanhos para máquinas virtuais no Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="df476-207">VM sizes are described in [Sizes for virtual machines in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="df476-208">Se sua carga de trabalho varia ao longo do tempo, considere usar o dimensionamento de máquinas virtuais define como para dimensionar automaticamente o número de instâncias de VM.</span><span class="sxs-lookup"><span data-stu-id="df476-208">If your workload fluctuates over time, consider using virtual machine scale sets to automatically scale the number of VM instances.</span></span> <span data-ttu-id="df476-209">Caso contrário, você precisará aumentar ou diminuir o número de VMs manualmente.</span><span class="sxs-lookup"><span data-stu-id="df476-209">Otherwise, you need to manually increase or decrease the number of VMs.</span></span> <span data-ttu-id="df476-210">Para obter mais informações, consulte o [visão geral dos conjuntos de dimensionamento de máquinas virtuais](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="df476-210">For more information, see the [virtual machine scale sets overview](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

### <a name="azure-sql-database"></a><span data-ttu-id="df476-211">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="df476-211">Azure SQL Database</span></span>

<span data-ttu-id="df476-212">Se sua camada de banco de dados SQL não é adequada para lidar com requisitos de unidade de transação de banco de dados (DTU) do seu aplicativo, o uso de dados será limitado.</span><span class="sxs-lookup"><span data-stu-id="df476-212">If your Azure SQL Database tier isn't adequate to handle your application's Database Transaction Unit (DTU) requirements, your data use will be throttled.</span></span> <span data-ttu-id="df476-213">Para obter mais informações sobre como selecionar o plano de serviço correto, consulte [modelos de compra do Azure SQL Database](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="df476-213">For more information on selecting the correct service plan, see [Azure SQL Database purchasing models](/azure/sql-database/sql-database-service-tiers/).</span></span>

## <a name="third-party-services"></a><span data-ttu-id="df476-214">Serviços de terceiros</span><span class="sxs-lookup"><span data-stu-id="df476-214">Third-party services</span></span>

<span data-ttu-id="df476-215">Se seu aplicativo tiver dependências de serviços de terceiros, identifique como esses serviços podem falhar e o que terá falhas em vigor no seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-215">If your application has dependencies on third-party services, identify how these services can fail and what effect failures will have on your application.</span></span>

<span data-ttu-id="df476-216">Um serviço de terceiros pode não incluir monitoramento e diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="df476-216">A third-party service might not include monitoring and diagnostics.</span></span> <span data-ttu-id="df476-217">Faça chamadas para esses serviços e correlacioná-los com a integridade e o log de diagnóstico usando um identificador exclusivo do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df476-217">Log calls to these services and correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="df476-218">Para obter mais informações sobre práticas comprovadas de monitoramento e diagnóstico, consulte [diretrizes de monitoramento e diagnóstico](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="df476-218">For more information on proven practices for monitoring and diagnostics, see [Monitoring and diagnostics guidance](../best-practices/monitoring.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="df476-219">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="df476-219">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="df476-220">Plano de recuperação de desastres</span><span class="sxs-lookup"><span data-stu-id="df476-220">Plan for disaster recovery</span></span>](./disaster-recovery.md)

---
title: Falha e recuperação de desastres para aplicativos do Azure
description: Abordagens de visão geral da recuperação de desastres no Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: f00341b06b8092c798d6260317226190cbace66b
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646480"
---
# <a name="failure-and-disaster-recovery-for-azure-applications"></a><span data-ttu-id="893e0-103">Falha e recuperação de desastres para aplicativos do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-103">Failure and disaster recovery for Azure applications</span></span>

<span data-ttu-id="893e0-104">*Recuperação de desastres* é o processo de restauração em andamento de uma perda catastrófica de funcionalidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-104">*Disaster recovery* is the process of restoring application functionality in the wake of a catastrophic loss.</span></span>

<span data-ttu-id="893e0-105">Sua tolerância para funcionalidade reduzida durante um desastre é uma decisão de negócios que varia de um aplicativo para o próximo.</span><span class="sxs-lookup"><span data-stu-id="893e0-105">Your tolerance for reduced functionality during a disaster is a business decision that varies from one application to the next.</span></span> <span data-ttu-id="893e0-106">Ele pode ser aceitável para alguns aplicativos para ficar completamente indisponível ou ser parcialmente disponível com funcionalidade reduzida ou processamento por um período de tempo com atraso.</span><span class="sxs-lookup"><span data-stu-id="893e0-106">It might be acceptable for some applications to be completely unavailable or to be partially available with reduced functionality or delayed processing for a period of time.</span></span> <span data-ttu-id="893e0-107">Para outros aplicativos, qualquer funcionalidade reduzida é inaceitável.</span><span class="sxs-lookup"><span data-stu-id="893e0-107">For other applications, any reduced functionality is unacceptable.</span></span>

## <a name="disaster-recovery-plan"></a><span data-ttu-id="893e0-108">Plano de recuperação de desastre</span><span class="sxs-lookup"><span data-stu-id="893e0-108">Disaster recovery plan</span></span>

<span data-ttu-id="893e0-109">Comece criando um plano de recuperação.</span><span class="sxs-lookup"><span data-stu-id="893e0-109">Start by creating a recovery plan.</span></span> <span data-ttu-id="893e0-110">O plano será considerado concluído depois que ele foi totalmente testado.</span><span class="sxs-lookup"><span data-stu-id="893e0-110">The plan is considered complete after it has been fully tested.</span></span> <span data-ttu-id="893e0-111">Inclua a pessoas, processos e aplicativos necessários para restaurar a funcionalidade dentro do contrato de nível de serviço (SLA) que você definiu para seus clientes.</span><span class="sxs-lookup"><span data-stu-id="893e0-111">Include the people, processes, and applications needed to restore functionality within the service-level agreement (SLA) you've defined for your customers.</span></span>

<span data-ttu-id="893e0-112">Considere as sugestões a seguir ao criar e testar seu plano de recuperação de desastres:</span><span class="sxs-lookup"><span data-stu-id="893e0-112">Consider the following suggestions when creating and testing your disaster recovery plan:</span></span>

- <span data-ttu-id="893e0-113">No seu plano, inclua o processo para contatar o suporte e escalar problemas.</span><span class="sxs-lookup"><span data-stu-id="893e0-113">In your plan, include the process for contacting support and for escalating issues.</span></span> <span data-ttu-id="893e0-114">Essas informações ajudarão a evitar o tempo de inatividade prolongado conforme você trabalha o processo de recuperação pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="893e0-114">This information will help to avoid prolonged downtime as you work out the recovery process for the first time.</span></span>
- <span data-ttu-id="893e0-115">Avalie o impacto das falhas de aplicativos sobre os negócios.</span><span class="sxs-lookup"><span data-stu-id="893e0-115">Evaluate the business impact of application failures.</span></span>
- <span data-ttu-id="893e0-116">Escolha uma arquitetura de recuperação entre regiões para aplicativos de missão crítica.</span><span class="sxs-lookup"><span data-stu-id="893e0-116">Choose a cross-region recovery architecture for mission-critical applications.</span></span>
- <span data-ttu-id="893e0-117">Identifique um proprietário específico do plano de recuperação de desastres, incluindo automação e testes.</span><span class="sxs-lookup"><span data-stu-id="893e0-117">Identify a specific owner of the disaster recovery plan, including automation and testing.</span></span>
- <span data-ttu-id="893e0-118">Documente o processo, especialmente em alguma etapa manual.</span><span class="sxs-lookup"><span data-stu-id="893e0-118">Document the process, especially any manual steps.</span></span>
- <span data-ttu-id="893e0-119">Automatize o processo tanto quanto possível.</span><span class="sxs-lookup"><span data-stu-id="893e0-119">Automate the process as much as possible.</span></span>
- <span data-ttu-id="893e0-120">Estabelecer uma estratégia de backup para todos os referência dados transacionais e de teste de restauração de backup regularmente.</span><span class="sxs-lookup"><span data-stu-id="893e0-120">Establish a backup strategy for all reference and transactional data, and test backup restoration regularly.</span></span>
- <span data-ttu-id="893e0-121">Configure alertas para a pilha de serviços do Azure consumidos pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-121">Set up alerts for the stack of the Azure services consumed by your application.</span></span>
- <span data-ttu-id="893e0-122">Treinar a equipe de operações para executar o plano.</span><span class="sxs-lookup"><span data-stu-id="893e0-122">Train operations staff to execute the plan.</span></span>
- <span data-ttu-id="893e0-123">Execute regularmente simulações de desastres para validar e aprimorar o plano.</span><span class="sxs-lookup"><span data-stu-id="893e0-123">Perform regular disaster simulations to validate and improve the plan.</span></span>

<span data-ttu-id="893e0-124">Se você estiver usando [Azure Site Recovery](/azure/site-recovery/) para replicar máquinas virtuais (VMs), crie um plano totalmente automatizado de recuperação para fazer failover de todo o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-124">If you're using [Azure Site Recovery](/azure/site-recovery/) to replicate virtual machines (VMs), create a fully automated recovery plan to fail over the entire application.</span></span>

## <a name="manual-responses"></a><span data-ttu-id="893e0-125">Respostas manuais</span><span class="sxs-lookup"><span data-stu-id="893e0-125">Manual responses</span></span>

<span data-ttu-id="893e0-126">Embora a automação é ideal, algumas estratégias para recuperação de desastres exigem respostas manuais.</span><span class="sxs-lookup"><span data-stu-id="893e0-126">Although automation is ideal, some strategies for disaster recovery require manual responses.</span></span>

### <a name="alerts"></a><span data-ttu-id="893e0-127">Alertas</span><span class="sxs-lookup"><span data-stu-id="893e0-127">Alerts</span></span>

<span data-ttu-id="893e0-128">Monitore seu aplicativo, observando sinais de aviso que podem exigir intervenção proativa.</span><span class="sxs-lookup"><span data-stu-id="893e0-128">Monitor your application for warning signs that may require proactive intervention.</span></span> <span data-ttu-id="893e0-129">Por exemplo, se o banco de dados SQL ou o Azure Cosmos DB limita repetidamente o seu aplicativo, talvez precise aumentar a capacidade do seu banco de dados ou otimizar suas consultas.</span><span class="sxs-lookup"><span data-stu-id="893e0-129">For example, if Azure SQL Database or Azure Cosmos DB consistently throttles your application, you might need to increase your database capacity or optimize your queries.</span></span> <span data-ttu-id="893e0-130">Mesmo que o aplicativo consiga manipular erros de limitação de forma transparente, sua telemetria deve gerar um alerta para que você possa acompanhar.</span><span class="sxs-lookup"><span data-stu-id="893e0-130">Even though the application might handle the throttling errors transparently, your telemetry should still raise an alert so that you can follow up.</span></span>

<span data-ttu-id="893e0-131">Para limites de serviço e limites de cota, é recomendável configurar alertas em logs de diagnóstico e métricas de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-131">For service limits and quota thresholds, we recommend configuring alerts on Azure resources metrics and diagnostics logs.</span></span> <span data-ttu-id="893e0-132">Quando possível, configure alertas em métricas, que são a menor latência que os logs de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="893e0-132">When possible, set up alerts on metrics, which are lower latency than diagnostics logs.</span></span>

<span data-ttu-id="893e0-133">Por meio [Resource Health](/azure/service-health/resource-health-checks-resource-types), o Azure fornece alguns integridade interna verificações de status que podem ajudá-lo a diagnosticar problemas de limitação de serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-133">Through [Resource Health](/azure/service-health/resource-health-checks-resource-types), Azure provides some built-in health status checks that can help you diagnose Azure service throttling issues.</span></span>

### <a name="failover"></a><span data-ttu-id="893e0-134">Failover</span><span class="sxs-lookup"><span data-stu-id="893e0-134">Failover</span></span>

<span data-ttu-id="893e0-135">Configure uma estratégia de recuperação de desastre para cada aplicativo do Azure e seus serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-135">Configure a disaster recovery strategy for each Azure application and its Azure services.</span></span> <span data-ttu-id="893e0-136">Estratégias de implantação aceitável para dar suporte à recuperação de desastre podem variar com base nos SLAs necessários para todos os componentes de cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-136">Acceptable deployment strategies to support disaster recovery may vary based on the SLAs required for all components of each application.</span></span>  

<span data-ttu-id="893e0-137">O Azure fornece recursos diferentes em muitos serviços do Azure para permitir o failover manual, tais como [redis cache réplicas geográficas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), ou para o failover automatizado, tais como [grupos de failover automático do SQL](/azure/sql-database/sql-database-auto-failover-group).</span><span class="sxs-lookup"><span data-stu-id="893e0-137">Azure provides different features within many Azure services to allow for manual failover, such as [redis cache geo-replicas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), or for automated failover, such as [SQL auto-failover groups](/azure/sql-database/sql-database-auto-failover-group).</span></span> <span data-ttu-id="893e0-138">Por exemplo: </span><span class="sxs-lookup"><span data-stu-id="893e0-138">For example:</span></span>

- <span data-ttu-id="893e0-139">Para um aplicativo que usa principalmente máquinas virtuais, você pode usar o Azure Site Recovery para as camadas web e lógica.</span><span class="sxs-lookup"><span data-stu-id="893e0-139">For an application that mainly uses virtual machines, you can use Azure Site Recovery for the web and logic tiers.</span></span> <span data-ttu-id="893e0-140">Para obter mais informações, consulte [arquitetura de recuperação de desastre do Azure para](/azure/site-recovery/azure-to-azure-architecture).</span><span class="sxs-lookup"><span data-stu-id="893e0-140">For more information, see [Azure to Azure disaster recovery architecture](/azure/site-recovery/azure-to-azure-architecture).</span></span> <span data-ttu-id="893e0-141">Para o SQL Server em máquinas virtuais, use [grupos de disponibilidade do SQL Server Always On](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span><span class="sxs-lookup"><span data-stu-id="893e0-141">For SQL Server on VMs, use [SQL Server Always On availability groups](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span></span>
- <span data-ttu-id="893e0-142">Para um aplicativo que usa o serviço de aplicativo e o banco de dados SQL, você pode usar um plano de serviço de aplicativo de camada menor configurado na região secundária, que é dimensionado automaticamente quando ocorrer um failover.</span><span class="sxs-lookup"><span data-stu-id="893e0-142">For an application that uses App Service and Azure SQL Database, you can use a smaller tier App Service plan configured in the secondary region, which autoscales when a failover occurs.</span></span> <span data-ttu-id="893e0-143">Use grupos de failover para a camada de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-143">Use failover groups for the database tier.</span></span>

<span data-ttu-id="893e0-144">Em qualquer cenário, uma [Gerenciador de tráfego do Azure](/azure/traffic-manager/traffic-manager-overview) perfil fornece o failover automático entre regiões.</span><span class="sxs-lookup"><span data-stu-id="893e0-144">In either scenario, an [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profile provides for the automated failover across regions.</span></span> <span data-ttu-id="893e0-145">[Balanceadores de carga](/azure/load-balancer/load-balancer-overview) ou [gateways de aplicativo](/azure/application-gateway/overview) deve ser configurado na região secundária para dar suporte à disponibilidade mais rápida após o failover.</span><span class="sxs-lookup"><span data-stu-id="893e0-145">[Load balancers](/azure/load-balancer/load-balancer-overview) or [application gateways](/azure/application-gateway/overview) should be set up in the secondary region to support faster availability upon failover.</span></span>

### <a name="operational-readiness-testing"></a><span data-ttu-id="893e0-146">Testes de preparação operacional</span><span class="sxs-lookup"><span data-stu-id="893e0-146">Operational readiness testing</span></span>

<span data-ttu-id="893e0-147">Execute um teste de preparação operacional para o failover para a região secundária e para o failback para a região primária.</span><span class="sxs-lookup"><span data-stu-id="893e0-147">Perform an operational readiness test for failover to the secondary region and for failback to the primary region.</span></span> <span data-ttu-id="893e0-148">Muitos serviços do Azure são compatíveis com failover manual ou failover de teste para exercícios de recuperação de desastre.</span><span class="sxs-lookup"><span data-stu-id="893e0-148">Many Azure services support manual failover or test failover for disaster recovery drills.</span></span> <span data-ttu-id="893e0-149">Como alternativa, você pode simular uma interrupção desligar ou remover os serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-149">Alternatively, you can simulate an outage by shutting down or removing Azure services.</span></span>

## <a name="application-failure"></a><span data-ttu-id="893e0-150">Falha do aplicativo</span><span class="sxs-lookup"><span data-stu-id="893e0-150">Application failure</span></span>

<span data-ttu-id="893e0-151">Falhas de aplicativo são recuperáveis ou não recuperável.</span><span class="sxs-lookup"><span data-stu-id="893e0-151">Application failures are either recoverable or nonrecoverable.</span></span> <span data-ttu-id="893e0-152">Você pode atenuar erros recuperáveis, mas erros irrecuperáveis desligarão o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-152">You can mitigate a recoverable error, but nonrecoverable errors will bring down the application.</span></span>

- <span data-ttu-id="893e0-153">Algumas falhas podem ser tratadas de forma transparente pelo tratamento automaticamente de falhas e adotando ações alternativas.</span><span class="sxs-lookup"><span data-stu-id="893e0-153">Some failures can be addressed transparently by handling faults automatically and taking alternate actions.</span></span> <span data-ttu-id="893e0-154">Por exemplo, o Gerenciador de tráfego controla as falhas que resultam do software subjacente do hardware ou sistema operacional na máquina virtual do host.</span><span class="sxs-lookup"><span data-stu-id="893e0-154">For example, Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span>
- <span data-ttu-id="893e0-155">Com alguns erros, o aplicativo pode continuar a tratar as solicitações do usuário com funcionalidade reduzida.</span><span class="sxs-lookup"><span data-stu-id="893e0-155">With some errors, the application can continue handling user requests with reduced functionality.</span></span>
- <span data-ttu-id="893e0-156">Mais graves interrupções de serviço processem o aplicativo não está disponível.</span><span class="sxs-lookup"><span data-stu-id="893e0-156">More severe service disruptions might render the application unavailable.</span></span>

<span data-ttu-id="893e0-157">Um sistema bem projetado separa as responsabilidades no nível de serviço &mdash; em tempo de design e em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="893e0-157">A well-designed system separates responsibilities at the service level &mdash; at design time and at runtime.</span></span> <span data-ttu-id="893e0-158">Essa separação impede que uma interrupção do serviço dependente interrompa o aplicativo inteiro.</span><span class="sxs-lookup"><span data-stu-id="893e0-158">This separation prevents a dependent service disruption from bringing down the entire application.</span></span> <span data-ttu-id="893e0-159">Por exemplo, considere um aplicativo de comércio da web com os seguintes módulos:</span><span class="sxs-lookup"><span data-stu-id="893e0-159">For example, consider a web commerce application with the following modules:</span></span>

![ADICIONAR LINK PARA A ARTE](./_images/disaster-recovery.png)

<span data-ttu-id="893e0-161">Se o banco de dados hospeda pedidos ficar inativo, o serviço de processamento de pedidos não pode processar transações de vendas.</span><span class="sxs-lookup"><span data-stu-id="893e0-161">If the database for hosting orders goes down, the Order Processing service can't process sales transactions.</span></span> <span data-ttu-id="893e0-162">Dependendo da arquitetura, ele pode ser impossível para os serviços de submissão de pedido e processamento de pedidos continuar.</span><span class="sxs-lookup"><span data-stu-id="893e0-162">Depending on the architecture, it might be impossible for the Order Submission and Order Processing services to continue.</span></span> <span data-ttu-id="893e0-163">No entanto, se os dados de produto são armazenados em um local diferente, o catálogo de produtos ainda estará disponível, mesmo que outras partes do aplicativo podem não estar disponíveis.</span><span class="sxs-lookup"><span data-stu-id="893e0-163">However, if product data is stored in a different location, the Product Catalog is still available, even though other parts of the application might be unavailable.</span></span>

<span data-ttu-id="893e0-164">Cabe a você para determinar como o aplicativo vai informar os usuários sobre problemas temporários e criar notificações apropriadas para o sistema.</span><span class="sxs-lookup"><span data-stu-id="893e0-164">It's up to you to determine how the application will inform users of any temporary problems and to build appropriate notifications into the system.</span></span> <span data-ttu-id="893e0-165">No exemplo anterior, o aplicativo poderia permitir para exibir produtos e adicioná-los a um carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="893e0-165">In the previous example, the application might allow for viewing products and for adding them to a shopping cart.</span></span> <span data-ttu-id="893e0-166">No entanto, quando o cliente tenta fazer uma compra, o aplicativo deve notificam que a funcionalidade de ordenação está temporariamente indisponível.</span><span class="sxs-lookup"><span data-stu-id="893e0-166">However, when the customer attempts to make a purchase, the application should notify them that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="893e0-167">Embora não seja ideal para o cliente, essa abordagem impede que uma interrupção de serviço de todo o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-167">Although not ideal for the customer, this approach prevents an application-wide service disruption.</span></span>

## <a name="data-corruption-and-restoration"></a><span data-ttu-id="893e0-168">Restauração e corrupção de dados</span><span class="sxs-lookup"><span data-stu-id="893e0-168">Data corruption and restoration</span></span>

<span data-ttu-id="893e0-169">Se um repositório de dados falhar, pode haver inconsistências de dados quando ele estiver disponível novamente, especialmente se os dados foram replicados.</span><span class="sxs-lookup"><span data-stu-id="893e0-169">If a data store fails, there might be data inconsistencies when it becomes available again, especially if the data was replicated.</span></span> <span data-ttu-id="893e0-170">Noções básicas sobre o objetivo de tempo de recuperação (RTO) e o ponto de recuperação objetivo (RPO) de armazenamentos de dados replicados pode ajudá-lo a prever a quantidade de perda de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-170">Understanding the recovery time objective (RTO) and recovery point objective (RPO) of replicated data stores can help you predict the amount of data loss.</span></span>

<span data-ttu-id="893e0-171">Para entender se o failover entre regiões é iniciado manualmente ou pela Microsoft, examine os SLAs de serviço do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-171">To understand whether the cross-regional failover is started manually or by Microsoft, review the Azure service SLAs.</span></span> <span data-ttu-id="893e0-172">Para serviços com nenhum SLA para failover entre regiões, a Microsoft normalmente decide quando executar failover e geralmente prioriza a recuperação de dados na região primária.</span><span class="sxs-lookup"><span data-stu-id="893e0-172">For services with no SLAs for cross-regional failover, Microsoft typically decides when to fail over and usually prioritizes recovery of data in the primary region.</span></span> <span data-ttu-id="893e0-173">Se os dados na região primária são considerados irrecuperáveis, Microsoft fará failover para a região secundária.</span><span class="sxs-lookup"><span data-stu-id="893e0-173">If data in the primary region is deemed unrecoverable, Microsoft fails over to the secondary region.</span></span>

### <a name="restoring-data-from-backups"></a><span data-ttu-id="893e0-174">Restaurar dados de backups</span><span class="sxs-lookup"><span data-stu-id="893e0-174">Restoring data from backups</span></span>

<span data-ttu-id="893e0-175">Os backups protegem você contra a perda de um componente do aplicativo devido a exclusão acidental ou corrupção de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-175">Backups protect you from losing a component of the application because of accidental deletion or data corruption.</span></span> <span data-ttu-id="893e0-176">Preservar a uma versão funcional do componente de um momento anterior, o que você pode usar para restaurá-lo.</span><span class="sxs-lookup"><span data-stu-id="893e0-176">They preserve a functional version of the component from an earlier time, which you can use to restore it.</span></span>

<span data-ttu-id="893e0-177">Estratégias de recuperação de desastre não são uma substituição para backups, mas alguns cenários de recuperação de desastres de suporte de backups regulares de dados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="893e0-177">Disaster recovery strategies are not a replacement for backups, but regular backups of application data support some disaster recovery scenarios.</span></span> <span data-ttu-id="893e0-178">Suas opções de armazenamento de backup devem se basear sua estratégia de recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="893e0-178">Your backup storage choices should be based on your disaster recovery strategy.</span></span>

<span data-ttu-id="893e0-179">A frequência de execução do processo de backup determina o RPO.</span><span class="sxs-lookup"><span data-stu-id="893e0-179">The frequency of running the backup process determines your RPO.</span></span> <span data-ttu-id="893e0-180">Por exemplo, se você executar backups a cada hora e um desastre ocorre dois minutos antes do backup, você perderá 58 minutos de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-180">For example, if you perform hourly backups and a disaster occurs two minutes before the backup, you will lose 58 minutes of data.</span></span> <span data-ttu-id="893e0-181">Seu plano de recuperação de desastres deve incluir a como você abordará a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-181">Your disaster recovery plan should include how you will address lost data.</span></span>

<span data-ttu-id="893e0-182">É comum para os dados em um repositório de dados para dados de referência em outro repositório.</span><span class="sxs-lookup"><span data-stu-id="893e0-182">It's common for data in one data store to reference data in another store.</span></span> <span data-ttu-id="893e0-183">Por exemplo, considere um banco de dados SQL com uma coluna que se vincula a um blob no armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-183">For example, consider a SQL Database with a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="893e0-184">Se backups não acontecerem simultaneamente, o banco de dados pode ter um ponteiro para um blob que não foi feito backup antes da falha.</span><span class="sxs-lookup"><span data-stu-id="893e0-184">If backups don't happen simultaneously, the database might have a pointer to a blob that wasn't backed up before the failure.</span></span> <span data-ttu-id="893e0-185">O aplicativo ou o plano de recuperação de desastres deve implementar processos para tratar dessa inconsistência após uma recuperação.</span><span class="sxs-lookup"><span data-stu-id="893e0-185">The application or the disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

> [!NOTE]
> <span data-ttu-id="893e0-186">Em alguns cenários, como a de VMs por backup usando o [Backup do Azure](/azure/backup/backup-azure-vms-first-look-arm), você pode restaurar apenas a partir de um backup na mesma região.</span><span class="sxs-lookup"><span data-stu-id="893e0-186">In some scenarios, such as that of VMs backed up using [Azure Backup](/azure/backup/backup-azure-vms-first-look-arm), you can restore only from a backup in the same region.</span></span> <span data-ttu-id="893e0-187">Serviços de outros do Azure, como [Cache do Azure para Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), fornecer backups replicados geograficamente, o que você pode usar para restaurar os serviços em regiões.</span><span class="sxs-lookup"><span data-stu-id="893e0-187">Other Azure services, such as [Azure Cache for Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), provide geo-replicated backups, which you can use to restore services across regions.</span></span>

### <a name="azure-storage-and-azure-sql-database"></a><span data-ttu-id="893e0-188">Banco de dados SQL do Azure e armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-188">Azure Storage and Azure SQL Database</span></span>

<span data-ttu-id="893e0-189">Azure armazena automaticamente os dados de armazenamento do Azure e banco de dados SQL três vezes em diferentes domínios de falha na mesma região.</span><span class="sxs-lookup"><span data-stu-id="893e0-189">Azure automatically stores Azure Storage and SQL Database data three times within different fault domains in the same region.</span></span> <span data-ttu-id="893e0-190">Se você usar a replicação geográfica, os dados serão armazenados mais três vezes em uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="893e0-190">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="893e0-191">No entanto, se os dados for corrompidos ou excluídos na cópia primária (por exemplo, devido ao erro de usuário), a replicação das alterações nas outras cópias.</span><span class="sxs-lookup"><span data-stu-id="893e0-191">However, if the data is corrupted or deleted in the primary copy (for example, because of user error), the changes replicate to the other copies.</span></span>

<span data-ttu-id="893e0-192">Você tem duas opções para gerenciar possíveis dados corrompidos ou exclusão:</span><span class="sxs-lookup"><span data-stu-id="893e0-192">You have two options for managing potential data corruption or deletion:</span></span>

- <span data-ttu-id="893e0-193">**Crie uma estratégia de backup personalizada.**</span><span class="sxs-lookup"><span data-stu-id="893e0-193">**Create a custom backup strategy.**</span></span> <span data-ttu-id="893e0-194">Você pode armazenar seus backups no Azure ou no local, dependendo de suas necessidades de negócios e das normas governamentais.</span><span class="sxs-lookup"><span data-stu-id="893e0-194">You can store your backups in Azure or on-premises, depending on your business requirements and governance regulations.</span></span>
- <span data-ttu-id="893e0-195">**Use a opção de restauração point-in-time** para recuperar um banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="893e0-195">**Use the point-in-time restore option** to recover a SQL Database.</span></span>

#### <a name="azure-storage-recovery"></a><span data-ttu-id="893e0-196">Recuperação de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-196">Azure Storage recovery</span></span>

<span data-ttu-id="893e0-197">Você pode desenvolver um processo de backup personalizado para o armazenamento do Azure ou usar uma das diversas ferramentas de backup de terceiros.</span><span class="sxs-lookup"><span data-stu-id="893e0-197">You can develop a custom backup process for Azure Storage or use one of many third-party backup tools.</span></span>

<span data-ttu-id="893e0-198">O armazenamento do Azure fornece resiliência de dados por meio de réplicas automáticas, mas ele não impede que os usuários ou código do aplicativo devido à corrupção de dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-198">Azure Storage provides data resiliency through automated replicas, but it doesn't prevent application code or users from corrupting data.</span></span> <span data-ttu-id="893e0-199">Manter dados de fidelidade após erro do usuário ou aplicativo requer técnicas mais avançadas, como copiar os dados para um local de armazenamento secundário com um log de auditoria.</span><span class="sxs-lookup"><span data-stu-id="893e0-199">Maintaining data fidelity after application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="893e0-200">Você tem várias opções:</span><span class="sxs-lookup"><span data-stu-id="893e0-200">You have several options:</span></span>

- [<span data-ttu-id="893e0-201">**Blobs de blocos.**</span><span class="sxs-lookup"><span data-stu-id="893e0-201">**Block blobs.**</span></span>](/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs) <span data-ttu-id="893e0-202">Crie um instantâneo pontual de cada blob de blocos.</span><span class="sxs-lookup"><span data-stu-id="893e0-202">Create a point-in-time snapshot of each block blob.</span></span> <span data-ttu-id="893e0-203">Para cada instantâneo, você é cobrado somente para o armazenamento necessário para armazenar as diferenças no blob desde o estado do instantâneo anterior.</span><span class="sxs-lookup"><span data-stu-id="893e0-203">For each snapshot, you are charged only for the storage required to store the differences within the blob since the previous snapshot state.</span></span> <span data-ttu-id="893e0-204">Os instantâneos são dependentes no blob original, portanto, é recomendável copiar para outro blob ou até mesmo outra conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="893e0-204">The snapshots are dependent on the original blob, so we recommend copying to another blob or even to another storage account.</span></span> <span data-ttu-id="893e0-205">Essa abordagem garante que os dados de backup são protegidos contra exclusão acidental.</span><span class="sxs-lookup"><span data-stu-id="893e0-205">This approach ensures that backup data is protected against accidental deletion.</span></span> <span data-ttu-id="893e0-206">Use [AzCopy](/azure/storage/common/storage-use-azcopy) ou [do Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) para copiar os blobs para outra conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="893e0-206">Use [AzCopy](/azure/storage/common/storage-use-azcopy) or [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) to copy the blobs to another storage account.</span></span>

    <span data-ttu-id="893e0-207">Para obter mais informações, consulte [Criar um instantâneo de um blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span><span class="sxs-lookup"><span data-stu-id="893e0-207">For more information, see [Creating a Snapshot of a Blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span></span>

- [<span data-ttu-id="893e0-208">**Arquivos do Azure.**</span><span class="sxs-lookup"><span data-stu-id="893e0-208">**Azure Files.**</span></span>](/azure/storage/files/storage-files-introduction) <span data-ttu-id="893e0-209">Use [instantâneos de compartilhamento](/azure/storage/files/storage-snapshots-files), o AzCopy ou o PowerShell para copiar os arquivos para outra conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="893e0-209">Use [share snapshots](/azure/storage/files/storage-snapshots-files), AzCopy, or PowerShell to copy your files to another storage account.</span></span>
- [<span data-ttu-id="893e0-210">**Armazenamento de tabela do Azure.**</span><span class="sxs-lookup"><span data-stu-id="893e0-210">**Azure Table storage.**</span></span>](/azure/storage/tables/table-storage-overview) <span data-ttu-id="893e0-211">Use AzCopy para exportar os dados da tabela para outra conta de armazenamento em outra região.</span><span class="sxs-lookup"><span data-stu-id="893e0-211">Use AzCopy to export the table data into another storage account in another region.</span></span>

#### <a name="sql-database-recovery"></a><span data-ttu-id="893e0-212">Recuperação de banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="893e0-212">SQL Database recovery</span></span>

<span data-ttu-id="893e0-213">Para proteger sua empresa contra perda de dados, banco de dados SQL automaticamente executa uma combinação de backups de banco de dados completos semanais, backups de banco de dados diferenciais por hora, log de transações e backups cada 5 a 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="893e0-213">To protect your business from data loss, SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every 5 to 10 minutes.</span></span> <span data-ttu-id="893e0-214">Para as camadas Basic, Standard e Premium banco de dados SQL, use point-in-time restore para restaurar um banco de dados para um momento anterior.</span><span class="sxs-lookup"><span data-stu-id="893e0-214">For the Basic, Standard, and Premium SQL Database tiers, use point-in-time restore to restore a database to an earlier time.</span></span> <span data-ttu-id="893e0-215">Consulte os seguintes artigos para obter mais informações:</span><span class="sxs-lookup"><span data-stu-id="893e0-215">See the following articles for more information:</span></span>

- [<span data-ttu-id="893e0-216">Recuperar um banco de dados SQL do Azure usando backups de banco de dados automatizados</span><span class="sxs-lookup"><span data-stu-id="893e0-216">Recover an Azure SQL database using automated database backups</span></span>](/azure/sql-database/sql-database-recovery-using-backups)
- [<span data-ttu-id="893e0-217">Visão geral da continuidade dos negócios com o Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-217">Overview of business continuity with Azure SQL Database</span></span>](/azure/sql-database/sql-database-business-continuity)

<span data-ttu-id="893e0-218">Outra opção é usar a replicação geográfica ativa para banco de dados SQL, que replica automaticamente alterações de banco de dados para bancos de dados secundários na região do Azure iguais ou diferente.</span><span class="sxs-lookup"><span data-stu-id="893e0-218">Another option is to use active geo-replication for SQL Database, which automatically replicates database changes to secondary databases in the same or different Azure region.</span></span> <span data-ttu-id="893e0-219">Para obter mais informações, consulte [criando e usando a replicação geográfica ativa](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="893e0-219">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="893e0-220">Você também pode usar uma abordagem mais manual para backup e restauração:</span><span class="sxs-lookup"><span data-stu-id="893e0-220">You can also use a more manual approach for backup and restore:</span></span>

- <span data-ttu-id="893e0-221">Use o **cópia de banco de dados** comando para criar uma cópia de backup do banco de dados com consistência transacional.</span><span class="sxs-lookup"><span data-stu-id="893e0-221">Use the **DATABASE COPY** command to create a backup copy of the database with transactional consistency.</span></span>
- <span data-ttu-id="893e0-222">Use o serviço de importação/exportação do Azure SQL banco de dados, que dá suporte à exportação de bancos de dados para arquivos BACPAC (arquivos compactados contendo o esquema de banco de dados e dados associados) que são armazenados no armazenamento de BLOBs do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-222">Use the Azure SQL Database Import/Export Service, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span> <span data-ttu-id="893e0-223">Para proteger contra uma interrupção do serviço de toda a região, copie os arquivos BACPAC para uma região alternativa.</span><span class="sxs-lookup"><span data-stu-id="893e0-223">To protect against a region-wide service disruption, copy the BACPAC files to an alternate region.</span></span>

### <a name="sql-server-on-vms"></a><span data-ttu-id="893e0-224">SQL Server em VMs</span><span class="sxs-lookup"><span data-stu-id="893e0-224">SQL Server on VMs</span></span>

<span data-ttu-id="893e0-225">Para o SQL Server em execução em VMs, você tem duas opções: backups tradicionais e envio de logs.</span><span class="sxs-lookup"><span data-stu-id="893e0-225">For SQL Server running on VMs, you have two options: traditional backups and log shipping.</span></span>

- <span data-ttu-id="893e0-226">Com backups tradicionais, você pode restaurar para um ponto específico no tempo, mas o processo de recuperação é lento.</span><span class="sxs-lookup"><span data-stu-id="893e0-226">With traditional backups, you can restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="893e0-227">Restauração de backups tradicionais exige que você comece com um backup completo inicial e, em seguida, aplique quaisquer backups incrementais.</span><span class="sxs-lookup"><span data-stu-id="893e0-227">Restoring traditional backups requires that you start with an initial full backup and then apply any incremental backups.</span></span>
- <span data-ttu-id="893e0-228">Você pode configurar uma sessão de envio de logs para atrasar a restauração de backups de log.</span><span class="sxs-lookup"><span data-stu-id="893e0-228">You can configure a log shipping session to delay the restore of log backups.</span></span> <span data-ttu-id="893e0-229">Isso fornece uma janela para recuperação de erros feitos na réplica primária.</span><span class="sxs-lookup"><span data-stu-id="893e0-229">This provides a window to recover from errors made on the primary replica.</span></span>

### <a name="azure-database-for-mysql-and-azure-database-for-postgresql"></a><span data-ttu-id="893e0-230">Banco de dados do Azure para MySQL e banco de dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="893e0-230">Azure Database for MySQL and Azure Database for PostgreSQL</span></span>

<span data-ttu-id="893e0-231">No banco de dados do Azure para MySQL e banco de dados do Azure para PostgreSQL, o serviço de banco de dados faz automaticamente um backup a cada cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="893e0-231">In Azure Database for MySQL and Azure Database for PostgreSQL, the database service automatically makes a backup every five minutes.</span></span> <span data-ttu-id="893e0-232">Você pode usar esses backups automatizados para restaurar o servidor e seus bancos de dados de um ponto anterior no tempo para um novo servidor.</span><span class="sxs-lookup"><span data-stu-id="893e0-232">You can use these automated backups to restore the server and its databases from an earlier point in time to a new server.</span></span> <span data-ttu-id="893e0-233">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="893e0-233">For more information, see:</span></span>

- [<span data-ttu-id="893e0-234">Como fazer backup e restaurar um servidor no Banco de Dados do Azure para MySQL usando o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-234">How to back up and restore a server in Azure Database for MySQL by using the Azure portal</span></span>](/azure/mysql/howto-restore-server-portal)
- [<span data-ttu-id="893e0-235">Como fazer backup e restaurar um servidor no banco de dados do Azure para PostgreSQL usando o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-235">How to back up and restore a server in Azure Database for PostgreSQL using the Azure portal</span></span>](/azure/postgresql/howto-restore-server-portal)

### <a name="azure-cosmos-db"></a><span data-ttu-id="893e0-236">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="893e0-236">Azure Cosmos DB</span></span>

<span data-ttu-id="893e0-237">O cosmos DB faz automaticamente um backup em intervalos regulares.</span><span class="sxs-lookup"><span data-stu-id="893e0-237">Cosmos DB automatically makes a backup at regular intervals.</span></span> <span data-ttu-id="893e0-238">Backups são armazenados separadamente em outro serviço de armazenamento e são replicados globalmente para se proteger contra desastres regionais.</span><span class="sxs-lookup"><span data-stu-id="893e0-238">Backups are stored separately in another storage service and are replicated globally to protect against regional disasters.</span></span> <span data-ttu-id="893e0-239">Caso exclua seu banco de dados ou coleção acidentalmente, é possível criar um tíquete de suporte ou ligar para o suporte do Azure a fim de restaurar os dados usando o último backup automático.</span><span class="sxs-lookup"><span data-stu-id="893e0-239">If you accidentally delete your database or collection, you can file a support ticket or call Azure support to restore the data from the last automatic backup.</span></span> <span data-ttu-id="893e0-240">Para obter mais informações, consulte [backup e restauração sob demanda no Azure Cosmos DB Online](/azure/cosmos-db/online-backup-and-restore).</span><span class="sxs-lookup"><span data-stu-id="893e0-240">For more information, see [Online backup and on-demand restore in Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span></span>

### <a name="azure-virtual-machines"></a><span data-ttu-id="893e0-241">Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-241">Azure Virtual Machines</span></span>

<span data-ttu-id="893e0-242">Para proteger máquinas virtuais do Azure de erros de aplicativo ou exclusão acidental, use [Backup do Azure](/azure/backup/).</span><span class="sxs-lookup"><span data-stu-id="893e0-242">To protect Azure Virtual Machines from application errors or accidental deletion, use [Azure Backup](/azure/backup/).</span></span> <span data-ttu-id="893e0-243">Os backups criados são consistentes em vários discos de VM.</span><span class="sxs-lookup"><span data-stu-id="893e0-243">The created backups are consistent across multiple VM disks.</span></span> <span data-ttu-id="893e0-244">Além disso, o Cofre de Backup do Azure pode ser replicado entre regiões para dar suporte à recuperação de uma perda regional.</span><span class="sxs-lookup"><span data-stu-id="893e0-244">In addition, the Azure Backup vault can be replicated across regions to support recovery from a regional loss.</span></span>

## <a name="network-outage"></a><span data-ttu-id="893e0-245">Interrupção de rede</span><span class="sxs-lookup"><span data-stu-id="893e0-245">Network outage</span></span>

<span data-ttu-id="893e0-246">Quando partes da rede do Azure estiverem inacessíveis, você não poderá acessar seu aplicativo ou dados.</span><span class="sxs-lookup"><span data-stu-id="893e0-246">When parts of the Azure network are inaccessible, you might not be able to access your application or data.</span></span> <span data-ttu-id="893e0-247">Nessa situação, é recomendável criar a estratégia de recuperação de desastres para executar a maioria dos aplicativos com funcionalidade reduzida.</span><span class="sxs-lookup"><span data-stu-id="893e0-247">In this situation, we recommend designing the disaster recovery strategy to run most applications with reduced functionality.</span></span>

<span data-ttu-id="893e0-248">Se a redução da funcionalidade não é uma opção, as opções restantes são o tempo de inatividade do aplicativo ou o failover para uma região alternativa.</span><span class="sxs-lookup"><span data-stu-id="893e0-248">If reducing functionality isn't an option, the remaining options are application downtime or failover to an alternate region.</span></span>

<span data-ttu-id="893e0-249">Em um cenário de funcionalidade reduzida:</span><span class="sxs-lookup"><span data-stu-id="893e0-249">In a reduced functionality scenario:</span></span>

- <span data-ttu-id="893e0-250">Se seu aplicativo não pode acessar os dados devido a uma interrupção de rede do Azure, você poderá executar localmente com funcionalidade reduzida do aplicativo usando dados armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="893e0-250">If your application can't access its data because of an Azure network outage, you might be able to run locally with reduced application functionality by using cached data.</span></span>
- <span data-ttu-id="893e0-251">Você poderá armazenar dados em um local alternativo até que a conectividade for restaurada.</span><span class="sxs-lookup"><span data-stu-id="893e0-251">You might be able to store data in an alternate location until connectivity is restored.</span></span>

## <a name="dependent-service-failure"></a><span data-ttu-id="893e0-252">Falha do serviço dependente</span><span class="sxs-lookup"><span data-stu-id="893e0-252">Dependent service failure</span></span>

<span data-ttu-id="893e0-253">Para cada serviço dependente, você deve compreender as implicações de uma interrupção do serviço e a maneira que o aplicativo responderá.</span><span class="sxs-lookup"><span data-stu-id="893e0-253">For each dependent service, you should understand the implications of a service disruption and the way that the application will respond.</span></span> <span data-ttu-id="893e0-254">Muitos serviços incluem recursos que dão suporte a resiliência e a disponibilidade, para que avaliar cada serviço de forma independente é provavelmente melhorará o seu plano de recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="893e0-254">Many services include features that support resiliency and availability, so evaluating each service independently is likely to improve your disaster recovery plan.</span></span> <span data-ttu-id="893e0-255">Por exemplo, os Hubs de eventos do Azure suporta [failover](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) para o namespace secundário.</span><span class="sxs-lookup"><span data-stu-id="893e0-255">For example, Azure Event Hubs supports [failing over](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) to the secondary namespace.</span></span>

## <a name="region-wide-service-disruptions"></a><span data-ttu-id="893e0-256">Interrupções de serviço em toda a região</span><span class="sxs-lookup"><span data-stu-id="893e0-256">Region-wide service disruptions</span></span>

<span data-ttu-id="893e0-257">Número de falhas é gerenciável dentro da mesma região do Azure.</span><span class="sxs-lookup"><span data-stu-id="893e0-257">Many failures are manageable within the same Azure region.</span></span> <span data-ttu-id="893e0-258">No entanto, no caso improvável de uma interrupção do serviço de toda a região, as cópias localmente redundantes dos seus dados não estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="893e0-258">However, in the unlikely event of a region-wide service disruption, the locally redundant copies of your data aren't available.</span></span> <span data-ttu-id="893e0-259">Se você tiver habilitado a replicação geográfica, há três cópias adicionais dos seus blobs e tabelas em uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="893e0-259">If you've enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="893e0-260">Se a Microsoft declara a região como perdida, o Azure remapeia todas as entradas DNS para a região secundária.</span><span class="sxs-lookup"><span data-stu-id="893e0-260">If Microsoft declares the region lost, Azure remaps all the DNS entries to the secondary region.</span></span>

> [!NOTE]
> <span data-ttu-id="893e0-261">Esse processo ocorre somente para interrupções de serviço em toda a região e não está dentro do seu controle.</span><span class="sxs-lookup"><span data-stu-id="893e0-261">This process occurs only for region-wide service disruptions and is not within your control.</span></span> <span data-ttu-id="893e0-262">Considere o uso do [Azure Site Recovery](/azure/site-recovery/) para alcançar melhor RPO e RTO.</span><span class="sxs-lookup"><span data-stu-id="893e0-262">Consider using [Azure Site Recovery](/azure/site-recovery/) to achieve better RPO and RTO.</span></span> <span data-ttu-id="893e0-263">Usando o Site Recovery, você decide o que é uma interrupção aceitável e quando executar failover para as VMs replicadas.</span><span class="sxs-lookup"><span data-stu-id="893e0-263">Using Site Recovery, you decide what is an acceptable outage and when to fail over to the replicated VMs.</span></span>

<span data-ttu-id="893e0-264">Sua resposta a uma interrupção do serviço de toda a região depende de sua implantação e seu plano de recuperação de desastres.</span><span class="sxs-lookup"><span data-stu-id="893e0-264">Your response to a region-wide service disruption depends on your deployment and your disaster recovery plan.</span></span>

- <span data-ttu-id="893e0-265">Como uma estratégia de controle de custos, para aplicativos não críticos que não exigem um tempo de recuperação garantido, ele pode fazer sentido para reimplantar uma região diferente.</span><span class="sxs-lookup"><span data-stu-id="893e0-265">As a cost-control strategy, for non-critical applications that don't require a guaranteed recovery time, it might make sense to redeploy to a different region.</span></span>
- <span data-ttu-id="893e0-266">Para aplicativos que são hospedados em outra região com funções implantadas, mas não distribuir o tráfego entre regiões (*implantação ativo/passivo*), alterne para o serviço hospedado secundário na região alternativa.</span><span class="sxs-lookup"><span data-stu-id="893e0-266">For applications that are hosted in another region with deployed roles but don't distribute traffic across regions (*active/passive deployment*), switch to the secondary hosted service in the alternate region.</span></span>
- <span data-ttu-id="893e0-267">Para aplicativos que têm uma implantação secundária completa em outra região (*implantação ativo/ativo*), rotear o tráfego para essa região.</span><span class="sxs-lookup"><span data-stu-id="893e0-267">For applications that have a full-scale secondary deployment in another region (*active/active deployment*), route traffic to that region.</span></span>

<span data-ttu-id="893e0-268">Para saber mais sobre como recuperar de uma interrupção de serviço em toda a região, consulte [recuperar de uma interrupção do serviço de toda a região](../resiliency/recovery-loss-azure-region.md).</span><span class="sxs-lookup"><span data-stu-id="893e0-268">To learn more about recovering from a region-wide service disruption, see [Recover from a region-wide service disruption](../resiliency/recovery-loss-azure-region.md).</span></span>

### <a name="vm-recovery"></a><span data-ttu-id="893e0-269">Recuperação de VM</span><span class="sxs-lookup"><span data-stu-id="893e0-269">VM recovery</span></span>

<span data-ttu-id="893e0-270">Para aplicativos críticos, planeje a recuperação de VMs em caso de uma interrupção do serviço de toda a região.</span><span class="sxs-lookup"><span data-stu-id="893e0-270">For critical apps, plan for recovering VMs in the event of a region-wide service disruption.</span></span>

- <span data-ttu-id="893e0-271">Use o Backup do Azure ou outro método de backup para criar backups entre regiões consistentes com aplicativos.</span><span class="sxs-lookup"><span data-stu-id="893e0-271">Use Azure Backup or another backup method to create cross-region backups that are application consistent.</span></span> <span data-ttu-id="893e0-272">(Replicação do Cofre de Backup deve ser configurada no momento da criação).</span><span class="sxs-lookup"><span data-stu-id="893e0-272">(Replication of the Backup vault must be configured at the time of creation.)</span></span>
- <span data-ttu-id="893e0-273">Use o Site Recovery para replicar entre regiões para failover de aplicativo em um único clique e teste de failover.</span><span class="sxs-lookup"><span data-stu-id="893e0-273">Use Site Recovery to replicate across regions for one-click application failover and failover testing.</span></span>
- <span data-ttu-id="893e0-274">Use o Gerenciador de tráfego para automatizar o failover de tráfego do usuário para outra região.</span><span class="sxs-lookup"><span data-stu-id="893e0-274">Use Traffic Manager to automate user traffic failover to another region.</span></span>

<span data-ttu-id="893e0-275">Para obter mais informações, consulte [recuperar de uma interrupção do serviço de toda a região, as máquinas virtuais](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="893e0-275">To learn more, see [Recover from a region-wide service disruption, Virtual machines](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span></span>

### <a name="storage-recovery"></a><span data-ttu-id="893e0-276">Recuperação de armazenamento</span><span class="sxs-lookup"><span data-stu-id="893e0-276">Storage recovery</span></span>

<span data-ttu-id="893e0-277">Para proteger seu armazenamento em caso de uma interrupção do serviço de toda a região:</span><span class="sxs-lookup"><span data-stu-id="893e0-277">To protect your storage in the event of a region-wide service disruption:</span></span>

- <span data-ttu-id="893e0-278">Use o armazenamento com redundância geográfica.</span><span class="sxs-lookup"><span data-stu-id="893e0-278">Use geo-redundant storage.</span></span>
- <span data-ttu-id="893e0-279">Sabe onde o armazenamento é replicado geograficamente.</span><span class="sxs-lookup"><span data-stu-id="893e0-279">Know where your storage is geo-replicated.</span></span> <span data-ttu-id="893e0-280">Isso afeta onde você implanta outras instâncias de dados que exigem afinidade regional com seu armazenamento.</span><span class="sxs-lookup"><span data-stu-id="893e0-280">This affects where you deploy other instances of your data that require regional affinity with your storage.</span></span>
- <span data-ttu-id="893e0-281">Verificar dados para fins de consistência após o failover e, se necessário, restaurar de um backup.</span><span class="sxs-lookup"><span data-stu-id="893e0-281">Check data for consistency after failover and, if necessary, restore from a backup.</span></span>

<span data-ttu-id="893e0-282">Para obter mais informações, consulte [criando aplicativos altamente disponíveis usando RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span><span class="sxs-lookup"><span data-stu-id="893e0-282">To learn more, see [Designing highly available applications using RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span></span>

### <a name="sql-database-and-sql-server"></a><span data-ttu-id="893e0-283">Banco de dados SQL e SQL Server</span><span class="sxs-lookup"><span data-stu-id="893e0-283">SQL Database and SQL Server</span></span>

<span data-ttu-id="893e0-284">O Banco de dados SQL do Azure fornece dois tipos de recuperação:</span><span class="sxs-lookup"><span data-stu-id="893e0-284">Azure SQL Database provides two types of recovery:</span></span>

- <span data-ttu-id="893e0-285">Use a restauração geográfica para restaurar um banco de dados de uma cópia de backup em outra região.</span><span class="sxs-lookup"><span data-stu-id="893e0-285">Use geo-restore to restore a database from a backup copy in another region.</span></span> <span data-ttu-id="893e0-286">Para obter mais informações, consulte [recuperar um banco de dados SQL do Azure usando backups automatizados do banco de dados](/azure/sql-database/sql-database-recovery-using-backups).</span><span class="sxs-lookup"><span data-stu-id="893e0-286">For more information, see [Recover an Azure SQL database using automated database backups](/azure/sql-database/sql-database-recovery-using-backups).</span></span>
- <span data-ttu-id="893e0-287">Use a replicação geográfica ativa para fazer failover para um banco de dados secundário.</span><span class="sxs-lookup"><span data-stu-id="893e0-287">Use active geo-replication to fail over to a secondary database.</span></span> <span data-ttu-id="893e0-288">Para obter mais informações, consulte [criando e usando a replicação geográfica ativa](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="893e0-288">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="893e0-289">Para o SQL Server em execução em VMs, consulte [alta disponibilidade e recuperação de desastres para SQL Server em máquinas virtuais Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="893e0-289">For SQL Server running on VMs, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="893e0-290">Diretriz específica do serviço</span><span class="sxs-lookup"><span data-stu-id="893e0-290">Service-specific guidance</span></span>

<span data-ttu-id="893e0-291">Os artigos a seguir descrevem a recuperação de desastres para serviços específicos do Azure:</span><span class="sxs-lookup"><span data-stu-id="893e0-291">The following articles describe disaster recovery for specific Azure services:</span></span>

| <span data-ttu-id="893e0-292">Serviço</span><span class="sxs-lookup"><span data-stu-id="893e0-292">Service</span></span>                       | <span data-ttu-id="893e0-293">Artigo</span><span class="sxs-lookup"><span data-stu-id="893e0-293">Article</span></span>                                                                                                                                                                                       |
|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="893e0-294">Banco de Dados do Azure para MySQL</span><span class="sxs-lookup"><span data-stu-id="893e0-294">Azure Database for MySQL</span></span>      | [<span data-ttu-id="893e0-295">Visão geral da continuidade dos negócios com o Banco de Dados do Azure para MySQL</span><span class="sxs-lookup"><span data-stu-id="893e0-295">Overview of business continuity with Azure Database for MySQL</span></span>](/azure/mysql/concepts-business-continuity)                                                  |
| <span data-ttu-id="893e0-296">Banco de Dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="893e0-296">Azure Database for PostgreSQL</span></span> | [<span data-ttu-id="893e0-297">Visão geral da continuidade dos negócios com o Banco de Dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="893e0-297">Overview of business continuity with Azure Database for PostgreSQL</span></span>](/azure/postgresql/concepts-business-continuity)                                        |
| <span data-ttu-id="893e0-298">Serviços de nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-298">Azure Cloud Services</span></span>          | [<span data-ttu-id="893e0-299">O que fazer no caso de uma interrupção de serviço do Azure que afete os Serviços de Nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-299">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="893e0-300">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="893e0-300">Cosmos DB</span></span>                     | [<span data-ttu-id="893e0-301">Alta disponibilidade com o Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="893e0-301">High availability with Azure Cosmos DB</span></span>](/azure/cosmos-db/high-availability)                                                                                |
| <span data-ttu-id="893e0-302">Cofre da Chave do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-302">Azure Key Vault</span></span>               | [<span data-ttu-id="893e0-303">Redundância e disponibilidade de Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="893e0-303">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance)                                                        |
| <span data-ttu-id="893e0-304">Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-304">Azure Storage</span></span>                 | [<span data-ttu-id="893e0-305">Recuperação de desastre e failover de conta de armazenamento (versão prévia) no Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-305">Disaster recovery and storage account failover (preview) in Azure Storage</span></span>](/azure/storage/common/storage-disaster-recovery-guidance)                       |
| <span data-ttu-id="893e0-306">Banco de dados SQL</span><span class="sxs-lookup"><span data-stu-id="893e0-306">SQL Database</span></span>                  | [<span data-ttu-id="893e0-307">Restaurar um banco de dados SQL ou fazer failover para uma região secundária</span><span class="sxs-lookup"><span data-stu-id="893e0-307">Restore an Azure SQL Database or failover to a secondary region</span></span>](/azure/sql-database/sql-database-disaster-recovery)                                       |
| <span data-ttu-id="893e0-308">Máquinas Virtuais</span><span class="sxs-lookup"><span data-stu-id="893e0-308">Virtual Machines</span></span>              | [<span data-ttu-id="893e0-309">No caso de um Azure interrupção de serviço o que afeta a nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-309">What to do in the event of an Azure service disruption impacts Azure Cloud</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance)               |
| <span data-ttu-id="893e0-310">Rede Virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="893e0-310">Azure Virtual Network</span></span>         | [<span data-ttu-id="893e0-311">Rede Virtual – Continuidade de Negócios</span><span class="sxs-lookup"><span data-stu-id="893e0-311">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance)                                                  |

## <a name="next-steps"></a><span data-ttu-id="893e0-312">Próximos passos</span><span class="sxs-lookup"><span data-stu-id="893e0-312">Next steps</span></span>

- [<span data-ttu-id="893e0-313">Recuperar dados corrompidos ou exclusão acidental</span><span class="sxs-lookup"><span data-stu-id="893e0-313">Recover from data corruption or accidental deletion</span></span>](../resiliency/recovery-data-corruption.md)
- [<span data-ttu-id="893e0-314">Recuperar de uma interrupção do serviço de toda a região</span><span class="sxs-lookup"><span data-stu-id="893e0-314">Recover from a region-wide service disruption</span></span>](../resiliency/recovery-loss-azure-region.md)
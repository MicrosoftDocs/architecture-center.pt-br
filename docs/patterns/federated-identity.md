---
title: Identidade federada
description: Autenticação de delegado a um provedor de identidade externo.
keywords: padrão de design
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- security
ms.openlocfilehash: a1edbdd080309383201d33e73602e2f18928c080
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
---
# <a name="federated-identity-pattern"></a><span data-ttu-id="df071-104">Padrão de identidade federada</span><span class="sxs-lookup"><span data-stu-id="df071-104">Federated Identity pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="df071-105">Autenticação de delegado a um provedor de identidade externo.</span><span class="sxs-lookup"><span data-stu-id="df071-105">Delegate authentication to an external identity provider.</span></span> <span data-ttu-id="df071-106">Isso pode simplificar o desenvolvimento, minimizar a necessidade de administração de usuário e melhorar a experiência do usuário do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-106">This can simplify development, minimize the requirement for user administration, and improve the user experience of the application.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="df071-107">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="df071-107">Context and problem</span></span>

<span data-ttu-id="df071-108">Normalmente, os usuários precisam trabalhar com vários aplicativos fornecidos e hospedados por diferentes organizações com as quais eles mantém uma relação comercial.</span><span class="sxs-lookup"><span data-stu-id="df071-108">Users typically need to work with multiple applications provided and hosted by different organizations they have a business relationship with.</span></span> <span data-ttu-id="df071-109">Esses usuários podem precisar usar credenciais específicas (e diferentes) para cada um.</span><span class="sxs-lookup"><span data-stu-id="df071-109">These users might be required to use specific (and different) credentials for each one.</span></span> <span data-ttu-id="df071-110">Isso pode:</span><span class="sxs-lookup"><span data-stu-id="df071-110">This can:</span></span>

- <span data-ttu-id="df071-111">**Causar uma experiência de usuário não contígua**.</span><span class="sxs-lookup"><span data-stu-id="df071-111">**Cause a disjointed user experience**.</span></span> <span data-ttu-id="df071-112">Os usuários muitas vezes esquecem as credenciais de logon quando usam várias delas.</span><span class="sxs-lookup"><span data-stu-id="df071-112">Users often forget sign-in credentials when they have many different ones.</span></span>

- <span data-ttu-id="df071-113">**Expor vulnerabilidades de segurança**.</span><span class="sxs-lookup"><span data-stu-id="df071-113">**Expose security vulnerabilities**.</span></span> <span data-ttu-id="df071-114">Quando um usuário sai da empresa, a conta deve ser desprovisionada imediatamente.</span><span class="sxs-lookup"><span data-stu-id="df071-114">When a user leaves the company the account must immediately be deprovisioned.</span></span> <span data-ttu-id="df071-115">É fácil ignorar isso em grandes organizações.</span><span class="sxs-lookup"><span data-stu-id="df071-115">It's easy to overlook this in large organizations.</span></span>

- <span data-ttu-id="df071-116">**Complicações no gerenciamento de usuários**.</span><span class="sxs-lookup"><span data-stu-id="df071-116">**Complicate user management**.</span></span> <span data-ttu-id="df071-117">Os administradores devem gerenciar as credenciais para todos os usuários e realizar tarefas adicionais, como fornecer lembretes de senha.</span><span class="sxs-lookup"><span data-stu-id="df071-117">Administrators must manage credentials for all of the users, and perform additional tasks such as providing password reminders.</span></span>

<span data-ttu-id="df071-118">Os usuários normalmente preferem usar as mesmas credenciais para todos esses aplicativos.</span><span class="sxs-lookup"><span data-stu-id="df071-118">Users typically prefer to use the same credentials for all these applications.</span></span>

## <a name="solution"></a><span data-ttu-id="df071-119">Solução</span><span class="sxs-lookup"><span data-stu-id="df071-119">Solution</span></span>

<span data-ttu-id="df071-120">Implemente um mecanismo de autenticação que pode usar identidade federada.</span><span class="sxs-lookup"><span data-stu-id="df071-120">Implement an authentication mechanism that can use federated identity.</span></span> <span data-ttu-id="df071-121">Separe a autenticação do usuário do código de aplicativo e delegue a autenticação a um provedor de identidade confiável.</span><span class="sxs-lookup"><span data-stu-id="df071-121">Separate user authentication from the application code, and delegate authentication to a trusted identity provider.</span></span> <span data-ttu-id="df071-122">Isso pode simplificar o desenvolvimento e permitir que os usuários se autentiquem usando uma variedade maior de IdP (provedores de identidade), minimizando a sobrecarga administrativa.</span><span class="sxs-lookup"><span data-stu-id="df071-122">This can simplify development and allow users to authenticate using a wider range of identity providers (IdP) while minimizing the administrative overhead.</span></span> <span data-ttu-id="df071-123">Ele também permite separar claramente a autenticação da autorização.</span><span class="sxs-lookup"><span data-stu-id="df071-123">It also allows you to clearly decouple authentication from authorization.</span></span>

<span data-ttu-id="df071-124">Os provedores de identidade confiável incluem diretórios corporativos, serviços de federação local, outros STS (serviços de token de segurança) fornecidos por parceiros de negócios ou provedores de identidade sociais que podem autenticar os usuários que têm, por exemplo, uma conta da Microsoft, Google, Yahoo! ou Facebook.</span><span class="sxs-lookup"><span data-stu-id="df071-124">The trusted identity providers include corporate directories, on-premises federation services, other security token services (STS) provided by business partners, or social identity providers that can authenticate users who have, for example, a Microsoft, Google, Yahoo!, or Facebook account.</span></span>

<span data-ttu-id="df071-125">A figura ilustra o Padrão de identidade federada quando um aplicativo cliente precisa acessar um serviço que requer autenticação.</span><span class="sxs-lookup"><span data-stu-id="df071-125">The figure illustrates the Federated Identity pattern when a client application needs to access a service that requires authentication.</span></span> <span data-ttu-id="df071-126">A autenticação é realizada por um IdP que funciona junto com um STS.</span><span class="sxs-lookup"><span data-stu-id="df071-126">The authentication is performed by an IdP that works in concert with an STS.</span></span> <span data-ttu-id="df071-127">O IdP emite tokens de segurança que fornecem informações sobre o usuário autenticado.</span><span class="sxs-lookup"><span data-stu-id="df071-127">The IdP issues security tokens that provide information about the authenticated user.</span></span> <span data-ttu-id="df071-128">Essas informações, chamadas de declarações, incluem a identidade do usuário e também podem incluir outras informações, como associação de função e os direitos de acesso mais granulares.</span><span class="sxs-lookup"><span data-stu-id="df071-128">This information, referred to as claims, includes the user’s identity, and might also include other information such as role membership and more granular access rights.</span></span>

![Uma visão geral da autenticação federada](./_images/federated-identity-overview.png)


<span data-ttu-id="df071-130">Esse modelo geralmente é chamado de controle de acesso baseado em declarações.</span><span class="sxs-lookup"><span data-stu-id="df071-130">This model is often called claims-based access control.</span></span> <span data-ttu-id="df071-131">Os aplicativos e serviços autorizam o acesso aos recursos e funcionalidades com base nas declarações contidas no token.</span><span class="sxs-lookup"><span data-stu-id="df071-131">Applications and services authorize access to features and functionality based on the claims contained in the token.</span></span> <span data-ttu-id="df071-132">O serviço que exige autenticação deve confiar no IdP.</span><span class="sxs-lookup"><span data-stu-id="df071-132">The service that requires authentication must trust the IdP.</span></span> <span data-ttu-id="df071-133">O aplicativo cliente contata o IdP que executa a autenticação.</span><span class="sxs-lookup"><span data-stu-id="df071-133">The client application contacts the IdP that performs the authentication.</span></span> <span data-ttu-id="df071-134">Se a autenticação for bem-sucedida, o IdP retornará um token que contém as declarações que identificam o usuário para o STS (observe que o IdP e o STS podem ser o mesmo serviço).</span><span class="sxs-lookup"><span data-stu-id="df071-134">If the authentication is successful, the IdP returns a token containing the claims that identify the user to the STS (note that the IdP and STS can be the same service).</span></span> <span data-ttu-id="df071-135">O STS pode transformar e aumentar as declarações no token com base nas regras predefinidas, antes de retorná-lo para o cliente.</span><span class="sxs-lookup"><span data-stu-id="df071-135">The STS can transform and augment the claims in the token based on predefined rules, before returning it to the client.</span></span> <span data-ttu-id="df071-136">O aplicativo cliente pode, então, transmitir esse token para o serviço como uma prova de sua identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-136">The client application can then pass this token to the service as proof of its identity.</span></span>

> <span data-ttu-id="df071-137">Podem existir STSs adicionais na cadeia de confiança.</span><span class="sxs-lookup"><span data-stu-id="df071-137">There might be additional STSs in the chain of trust.</span></span> <span data-ttu-id="df071-138">Por exemplo, no cenário descrito posteriormente, um STS local confia em outro STS que é responsável por acessar um provedor de identidade para autenticar o usuário.</span><span class="sxs-lookup"><span data-stu-id="df071-138">For example, in the scenario described later, an on-premises STS trusts another STS that is responsible for accessing an identity provider to authenticate the user.</span></span> <span data-ttu-id="df071-139">Essa abordagem é comum em cenários empresariais em que há um local STS e um diretório.</span><span class="sxs-lookup"><span data-stu-id="df071-139">This approach is common in enterprise scenarios where there's an on-premises STS and directory.</span></span>

<span data-ttu-id="df071-140">A autenticação federada fornece uma solução baseada em padrões para o problema de confiar em identidades entre diferentes domínios e pode dar suporte a logon único.</span><span class="sxs-lookup"><span data-stu-id="df071-140">Federated authentication provides a standards-based solution to the issue of trusting identities across diverse domains, and can support single sign-on.</span></span> <span data-ttu-id="df071-141">Ela está se tornando mais comum em todos os tipos de aplicativos, especialmente aplicativos hospedados em nuvem, pois ele dá suporte a logon único sem a necessidade de uma conexão de rede direta com provedores de identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-141">It's becoming more common across all types of applications, especially cloud-hosted applications, because it supports single sign-on without requiring a direct network connection to identity providers.</span></span> <span data-ttu-id="df071-142">O usuário não precisa digitar as credenciais para cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-142">The user doesn't have to enter credentials for every application.</span></span> <span data-ttu-id="df071-143">Isso aumenta a segurança, pois impede a criação de credenciais necessárias para acessar vários aplicativos diferentes e também oculta as credenciais do usuário de todos, exceto do provedor de identidade original.</span><span class="sxs-lookup"><span data-stu-id="df071-143">This increases security because it prevents the creation of credentials required to access many different applications, and it also hides the user’s credentials from all but the original identity provider.</span></span> <span data-ttu-id="df071-144">Os aplicativos veem apenas as informações de identidade autenticada contidas no token.</span><span class="sxs-lookup"><span data-stu-id="df071-144">Applications see just the authenticated identity information contained within the token.</span></span>

<span data-ttu-id="df071-145">A identidade federada também traz a grande vantagem de que o gerenciamento da identidade e das credenciais é responsabilidade do provedor de identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-145">Federated identity also has the major advantage that management of the identity and credentials is the responsibility of the identity provider.</span></span> <span data-ttu-id="df071-146">O aplicativo ou serviço não precisa fornecer recursos de gerenciamento de identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-146">The application or service doesn't need to provide identity management features.</span></span> <span data-ttu-id="df071-147">Além disso, em cenários corporativos, o diretório corporativo não precisa conhecer o usuário se confiar no provedor de identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-147">In addition, in corporate scenarios, the corporate directory doesn't need to know about the user if it trusts the identity provider.</span></span> <span data-ttu-id="df071-148">Isso remove toda a sobrecarga administrativa de gerenciar a identidade do usuário dentro do diretório.</span><span class="sxs-lookup"><span data-stu-id="df071-148">This removes all the administrative overhead of managing the user identity within the directory.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="df071-149">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="df071-149">Issues and considerations</span></span>

<span data-ttu-id="df071-150">Considere os seguintes pontos ao projetar aplicativos que implementam a autenticação federada:</span><span class="sxs-lookup"><span data-stu-id="df071-150">Consider the following when designing applications that implement federated authentication:</span></span>

- <span data-ttu-id="df071-151">A autenticação pode ser um ponto único de falha.</span><span class="sxs-lookup"><span data-stu-id="df071-151">Authentication can be a single point of failure.</span></span> <span data-ttu-id="df071-152">Se você implantar seu aplicativo em vários datacenters, considere implantar seu mecanismo de gerenciamento de identidade para os mesmos datacenters para manter a disponibilidade e a confiabilidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-152">If you deploy your application to multiple datacenters, consider deploying your identity management mechanism to the same datacenters to maintain application reliability and availability.</span></span>

- <span data-ttu-id="df071-153">As ferramentas de autenticação permitem configurar o controle de acesso baseado em declarações de função contidas no token de autenticação.</span><span class="sxs-lookup"><span data-stu-id="df071-153">Authentication tools make it possible to configure access control based on role claims contained in the authentication token.</span></span> <span data-ttu-id="df071-154">Isso geralmente é conhecido como RBAC (controle de acesso baseado em função) e pode proporcionar um nível mais granular de controle de acesso aos recursos e funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="df071-154">This is often referred to as role-based access control (RBAC), and it can allow a more granular level of control over access to features and resources.</span></span>

- <span data-ttu-id="df071-155">Ao contrário de um diretório corporativo, a autenticação baseada em declarações usando provedores de identidade social geralmente não fornecem informações sobre o usuário autenticado além de um endereço de email e, talvez, um nome.</span><span class="sxs-lookup"><span data-stu-id="df071-155">Unlike a corporate directory, claims-based authentication using social identity providers doesn't usually provide information about the authenticated user other than an email address, and perhaps a name.</span></span> <span data-ttu-id="df071-156">Alguns provedores de identidade social, como uma conta da Microsoft, fornecem apenas um identificador exclusivo.</span><span class="sxs-lookup"><span data-stu-id="df071-156">Some social identity providers, such as a Microsoft account, provide only a unique identifier.</span></span> <span data-ttu-id="df071-157">O aplicativo geralmente precisa manter algumas informações sobre os usuários registrados e corresponder tais informações com o identificador contido nas declarações no token.</span><span class="sxs-lookup"><span data-stu-id="df071-157">The application usually needs to maintain some information on registered users, and be able to match this information to the identifier contained in the claims in the token.</span></span> <span data-ttu-id="df071-158">Normalmente isso é feito por meio do registro quando o usuário acessa o aplicativo pela primeira vez e as informações são injetadas no token como declarações adicionais depois de cada autenticação.</span><span class="sxs-lookup"><span data-stu-id="df071-158">Typically this is done through registration when the user first accesses the application, and information is then injected into the token as additional claims after each authentication.</span></span>

- <span data-ttu-id="df071-159">Se houver mais de um provedor de identidade configurado para o STS, ele deverá detectar para qual provedor de identidade o usuário deve ser redirecionado para autenticação.</span><span class="sxs-lookup"><span data-stu-id="df071-159">If there's more than one identity provider configured for the STS, it must detect which identity provider the user should be redirected to for authentication.</span></span> <span data-ttu-id="df071-160">Esse processo é chamado de descoberta de realm inicial.</span><span class="sxs-lookup"><span data-stu-id="df071-160">This process is called home realm discovery.</span></span> <span data-ttu-id="df071-161">O STS pode fazer isso automaticamente com base em um endereço de email ou nome de usuário fornecidos pelo usuário, um subdomínio do aplicativo que o usuário está acessando, o escopo do endereço IP do usuário ou no conteúdo de um cookie armazenado no navegador do usuário.</span><span class="sxs-lookup"><span data-stu-id="df071-161">The STS might be able to do this automatically based on an email address or user name that the user provides, a subdomain of the application that the user is accessing, the user’s IP address scope, or on the contents of a cookie stored in the user’s browser.</span></span> <span data-ttu-id="df071-162">Por exemplo, se o usuário inseriu um endereço de email no domínio da Microsoft, como user@live.com, o STS redirecionará o usuário para a página de entrada da conta da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="df071-162">For example, if the user entered an email address in the Microsoft domain, such as user@live.com, the STS will redirect the user to the Microsoft account sign-in page.</span></span> <span data-ttu-id="df071-163">Em visitas posteriores, o STS poderia usar um cookie para indicar que a última entrada ocorreu com uma conta da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="df071-163">On later visits, the STS could use a cookie to indicate that the last sign in was with a Microsoft account.</span></span> <span data-ttu-id="df071-164">Se a descoberta automática não puder determinar o realm inicial, o STS exibirá uma página de descoberta de realm inicial que lista os provedores de identidade confiável e o usuário precisará selecionar aquela que ele deseja usar.</span><span class="sxs-lookup"><span data-stu-id="df071-164">If automatic discovery can't determine the home realm, the STS will display a home realm discovery page that lists the trusted identity providers, and the user must select the one they want to use.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="df071-165">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="df071-165">When to use this pattern</span></span>

<span data-ttu-id="df071-166">Esse padrão é útil em cenários como:</span><span class="sxs-lookup"><span data-stu-id="df071-166">This pattern is useful for scenarios such as:</span></span>

- <span data-ttu-id="df071-167">**Logon único na empresa**.</span><span class="sxs-lookup"><span data-stu-id="df071-167">**Single sign-on in the enterprise**.</span></span> <span data-ttu-id="df071-168">Nesse cenário, você precisa autenticar os funcionários em aplicativos corporativos que são hospedados na nuvem fora do limite de segurança corporativo, sem exigir que eles entrem toda vez que visitarem um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-168">In this scenario you need to authenticate employees for corporate applications that are hosted in the cloud outside the corporate security boundary, without requiring them to sign in every time they visit an application.</span></span> <span data-ttu-id="df071-169">A experiência do usuário é igual a usar aplicativos locais em que estão autenticados ao entrar em uma rede corporativa e nela eles têm acesso a todos os aplicativos relevantes sem precisar entrar novamente.</span><span class="sxs-lookup"><span data-stu-id="df071-169">The user experience is the same as when using on-premises applications where they're authenticated when signing in to a corporate network, and from then on have access to all relevant applications without needing to sign in again.</span></span>

- <span data-ttu-id="df071-170">**Identidade federada com vários parceiros**.</span><span class="sxs-lookup"><span data-stu-id="df071-170">**Federated identity with multiple partners**.</span></span> <span data-ttu-id="df071-171">Nesse cenário, você precisa autenticar os funcionários corporativos e parceiros de negócios que não têm contas no diretório corporativo.</span><span class="sxs-lookup"><span data-stu-id="df071-171">In this scenario you need to authenticate both corporate employees and business partners who don't have accounts in the corporate directory.</span></span> <span data-ttu-id="df071-172">Isso é comum em aplicativos entre empresas, aplicativos que se integram com serviços de terceiros e pontos em que empresas com diferentes sistemas de TI mesclam ou compartilham recursos.</span><span class="sxs-lookup"><span data-stu-id="df071-172">This is common in business-to-business applications, applications that integrate with third-party services, and where companies with different IT systems have merged or shared resources.</span></span>

- <span data-ttu-id="df071-173">**Identidade federada em aplicativos SaaS**.</span><span class="sxs-lookup"><span data-stu-id="df071-173">**Federated identity in SaaS applications**.</span></span> <span data-ttu-id="df071-174">Neste cenário, os fornecedores independentes oferecem um serviço pronto para usar para vários clientes ou locatários.</span><span class="sxs-lookup"><span data-stu-id="df071-174">In this scenario independent software vendors provide a ready-to-use service for multiple clients or tenants.</span></span> <span data-ttu-id="df071-175">Cada locatário é autenticado usando um provedor de identidade adequado.</span><span class="sxs-lookup"><span data-stu-id="df071-175">Each tenant authenticates using a suitable identity provider.</span></span> <span data-ttu-id="df071-176">Por exemplo, os usuários empresariais usarão suas credenciais corporativas, enquanto os consumidores e clientes do locatário usarão as credenciais de identidade social.</span><span class="sxs-lookup"><span data-stu-id="df071-176">For example, business users will use their corporate credentials, while consumers and clients of the tenant will use their social identity credentials.</span></span>

<span data-ttu-id="df071-177">Esse padrão pode não ser útil nas seguintes situações:</span><span class="sxs-lookup"><span data-stu-id="df071-177">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="df071-178">Todos os usuários do aplicativo podem ser autenticados por um provedor de identidade e não há nenhum requisito para autenticar-se usando outro provedor de identidade.</span><span class="sxs-lookup"><span data-stu-id="df071-178">All users of the application can be authenticated by one identity provider, and there's no requirement to authenticate using any other identity provider.</span></span> <span data-ttu-id="df071-179">Isso é comum em aplicativos de negócios que usam um diretório corporativo (acessível de dentro do aplicativo) para autenticação, usando uma VPN ou (em um cenário hospedado em nuvem) por meio de uma conexão de rede virtual entre o diretório local e o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-179">This is typical in business applications that use a corporate directory (accessible within the application) for authentication, by using a VPN, or (in a cloud-hosted scenario) through a virtual network connection between the on-premises directory and the application.</span></span>

- <span data-ttu-id="df071-180">O aplicativo foi criado originalmente usando um mecanismo de autenticação diferente, talvez com repositórios de usuário personalizados ou não tem a capacidade de lidar com os padrões de negociação usados pelas tecnologias baseadas em declarações.</span><span class="sxs-lookup"><span data-stu-id="df071-180">The application was originally built using a different authentication mechanism, perhaps with custom user stores, or doesn't have the capability to handle the negotiation standards used by claims-based technologies.</span></span> <span data-ttu-id="df071-181">Adaptar a autenticação e o controle de acesso baseados em declarações para aplicativos existentes pode ser muito complexo e provavelmente não econômico.</span><span class="sxs-lookup"><span data-stu-id="df071-181">Retrofitting claims-based authentication and access control into existing applications can be complex, and probably not cost effective.</span></span>

## <a name="example"></a><span data-ttu-id="df071-182">Exemplo</span><span class="sxs-lookup"><span data-stu-id="df071-182">Example</span></span>

<span data-ttu-id="df071-183">Uma organização hospeda um aplicativo SaaS (software como serviço) de vários locatários no Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="df071-183">An organization hosts a multi-tenant software as a service (SaaS) application in Microsoft Azure.</span></span> <span data-ttu-id="df071-184">O aplicativo inclui um site que os locatários podem usar para gerenciar o aplicativo para seus próprios usuários.</span><span class="sxs-lookup"><span data-stu-id="df071-184">The application includes a website that tenants can use to manage the application for their own users.</span></span> <span data-ttu-id="df071-185">O aplicativo permite que os locatários acessem o site usando uma identidade federada que é gerada pelo Serviços de Federação do Active Directory (AD FS) quando um usuário é autenticado pelo Active Directory da própria organização.</span><span class="sxs-lookup"><span data-stu-id="df071-185">The application allows tenants to access the website by using a federated identity that is generated by Active Directory Federation Services (ADFS) when a user is authenticated by that organization’s own Active Directory.</span></span>

![Como os usuários em um assinante de grandes empresas acessam o aplicativo](./_images/federated-identity-multitenat.png)


<span data-ttu-id="df071-187">A figura mostra como os locatários são autenticados com seu próprio provedor de identidade (etapa 1), nesse caso o ADFS.</span><span class="sxs-lookup"><span data-stu-id="df071-187">The figure shows how tenants authenticate with their own identity provider (step 1), in this case ADFS.</span></span> <span data-ttu-id="df071-188">Depois de autenticar com êxito um locatário, o ADFS emite um token.</span><span class="sxs-lookup"><span data-stu-id="df071-188">After successfully authenticating a tenant, ADFS issues a token.</span></span> <span data-ttu-id="df071-189">O navegador do cliente encaminha esse token para o provedor de federação do aplicativo SaaS, que confia nos tokens emitidos pelo AD FS do locatário, a fim de retornar um token válido para o provedor de federação de SaaS (etapa 2).</span><span class="sxs-lookup"><span data-stu-id="df071-189">The client browser forwards this token to the SaaS application’s federation provider, which trusts tokens issued by the tenant’s ADFS, in order to get back a token that is valid for the SaaS federation provider (step 2).</span></span> <span data-ttu-id="df071-190">Se necessário, o provedor de federação de SaaS executa uma transformação sobre as declarações no token para declarações que o aplicativo reconhece (etapa 3) antes de retornar o novo token para o navegador do cliente.</span><span class="sxs-lookup"><span data-stu-id="df071-190">If necessary, the SaaS federation provider performs a transformation on the claims in the token into claims that the application recognizes (step 3) before returning the new token to the client browser.</span></span> <span data-ttu-id="df071-191">O aplicativo confia nos tokens emitidos pelo provedor de federação de SaaS e usa as declarações no token para aplicar as regras de autorização (etapa 4).</span><span class="sxs-lookup"><span data-stu-id="df071-191">The application trusts tokens issued by the SaaS federation provider and uses the claims in the token to apply authorization rules (step 4).</span></span>

<span data-ttu-id="df071-192">Os locatários não precisam se lembrar das credenciais separadas para acessar o aplicativo e um administrador de empresa do locatário pode configurar seu no próprio ADFS a lista de usuários que podem acessar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="df071-192">Tenants won't need to remember separate credentials to access the application, and an administrator at the tenant’s company can configure in its own ADFS the list of users that can access the application.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="df071-193">Diretrizes relacionadas</span><span class="sxs-lookup"><span data-stu-id="df071-193">Related guidance</span></span>

- [<span data-ttu-id="df071-194">Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="df071-194">Microsoft Azure Active Directory</span></span>](https://azure.microsoft.com/services/active-directory/)
- [<span data-ttu-id="df071-195">Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="df071-195">Active Directory Domain Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="df071-196">Serviços de Federação do Active Directory (AD FS)</span><span class="sxs-lookup"><span data-stu-id="df071-196">Active Directory Federation Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="df071-197">Gerenciamento de identidades para aplicativos multilocatários no Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="df071-197">Identity management for multitenant applications in Microsoft Azure</span></span>](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity/)
- [<span data-ttu-id="df071-198">Aplicativos multilocatários no Azure</span><span class="sxs-lookup"><span data-stu-id="df071-198">Multitenant Applications in Azure</span></span>](https://azure.microsoft.com/documentation/articles/dotnet-develop-multitenant-applications/)

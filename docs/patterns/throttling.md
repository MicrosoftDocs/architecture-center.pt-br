---
title: Limitação
description: Controle o consumo de recursos usados por uma instância de um aplicativo, um locatário individual ou todo o serviço.
keywords: padrão de design
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- availability
- performance-scalability
ms.openlocfilehash: 29156fc72f40a952dd53adcb20ffa7c3d0af79b4
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
ms.locfileid: "24541250"
---
# <a name="throttling-pattern"></a><span data-ttu-id="4ba18-104">Padrão de limitação</span><span class="sxs-lookup"><span data-stu-id="4ba18-104">Throttling pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="4ba18-105">Controle o consumo de recursos usados por uma instância de um aplicativo, um locatário individual ou todo o serviço.</span><span class="sxs-lookup"><span data-stu-id="4ba18-105">Control the consumption of resources used by an instance of an application, an individual tenant, or an entire service.</span></span> <span data-ttu-id="4ba18-106">Isso pode permitir que o sistema continue a funcionar e atender aos contratos de nível de serviço mesmo quando um aumento na demanda coloca uma carga extrema nos recursos.</span><span class="sxs-lookup"><span data-stu-id="4ba18-106">This can allow the system to continue to function and meet service level agreements, even when an increase in demand places an extreme load on resources.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="4ba18-107">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="4ba18-107">Context and problem</span></span>

<span data-ttu-id="4ba18-108">A carga em um aplicativo de nuvem normalmente varia ao longo do tempo com base no número de usuários ativos ou nos tipos de atividades em execução.</span><span class="sxs-lookup"><span data-stu-id="4ba18-108">The load on a cloud application typically varies over time based on the number of active users or the types of activities they are performing.</span></span> <span data-ttu-id="4ba18-109">Por exemplo, provavelmente haverá mais usuários ativos durante o horário comercial ou o sistema poderá precisar executar uma análise computacionalmente dispendiosa no final de cada mês.</span><span class="sxs-lookup"><span data-stu-id="4ba18-109">For example, more users are likely to be active during business hours, or the system might be required to perform computationally expensive analytics at the end of each month.</span></span> <span data-ttu-id="4ba18-110">Também pode haver picos repentinos e inesperados na atividade.</span><span class="sxs-lookup"><span data-stu-id="4ba18-110">There might also be sudden and unanticipated bursts in activity.</span></span> <span data-ttu-id="4ba18-111">Se os requisitos de processamento do sistema excederem a capacidade dos recursos disponíveis, ele sofrerá de desempenho ruim e poderá, inclusive, falhar.</span><span class="sxs-lookup"><span data-stu-id="4ba18-111">If the processing requirements of the system exceed the capacity of the resources that are available, it'll suffer from poor performance and can even fail.</span></span> <span data-ttu-id="4ba18-112">Se o sistema precisar atender a um nível combinado de serviço, essa falha poderá ser inaceitável.</span><span class="sxs-lookup"><span data-stu-id="4ba18-112">If the system has to meet an agreed level of service, such failure could be unacceptable.</span></span>

<span data-ttu-id="4ba18-113">Há muitas estratégias disponíveis para tratar a carga variável na nuvem, dependendo dos objetivos comerciais para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-113">There're many strategies available for handling varying load in the cloud, depending on the business goals for the application.</span></span> <span data-ttu-id="4ba18-114">Uma estratégia é usar o dimensionamento automático para combinar os recursos provisionados com as necessidades do usuário em qualquer dado momento.</span><span class="sxs-lookup"><span data-stu-id="4ba18-114">One strategy is to use autoscaling to match the provisioned resources to the user needs at any given time.</span></span> <span data-ttu-id="4ba18-115">Isso tem o potencial de atender consistentemente à demanda do usuário, ao mesmo tempo otimizando os custos em execução.</span><span class="sxs-lookup"><span data-stu-id="4ba18-115">This has the potential to consistently meet user demand, while optimizing running costs.</span></span> <span data-ttu-id="4ba18-116">No entanto, embora o dimensionamento automático possa disparar o provisionamento de recursos adicionais, essa configuração não é imediata.</span><span class="sxs-lookup"><span data-stu-id="4ba18-116">However, while autoscaling can trigger the provisioning of additional resources, this provisioning isn't immediate.</span></span> <span data-ttu-id="4ba18-117">Se a demanda crescer rapidamente, poderá haver um período com déficit de recurso.</span><span class="sxs-lookup"><span data-stu-id="4ba18-117">If demand grows quickly, there can be a window of time where there's a resource deficit.</span></span>

## <a name="solution"></a><span data-ttu-id="4ba18-118">Solução</span><span class="sxs-lookup"><span data-stu-id="4ba18-118">Solution</span></span>

<span data-ttu-id="4ba18-119">Uma estratégia alternativa para dimensionamento automático é permitir que os aplicativos usem recursos até um limite e então limitá-los quando esse limite for atingido.</span><span class="sxs-lookup"><span data-stu-id="4ba18-119">An alternative strategy to autoscaling is to allow applications to use resources only up to a limit, and then throttle them when this limit is reached.</span></span> <span data-ttu-id="4ba18-120">O sistema deve monitorar como ele está usando recursos de modo que, quando o uso exceder o limite, ele possa acelerar as solicitações de um ou mais usuários.</span><span class="sxs-lookup"><span data-stu-id="4ba18-120">The system should monitor how it's using resources so that, when usage exceeds the threshold, it can throttle requests from one or more users.</span></span> <span data-ttu-id="4ba18-121">Isso permitirá que o sistema continue a funcionar e atenda a quaisquer SLAs (contratos de nível de serviço) em vigor.</span><span class="sxs-lookup"><span data-stu-id="4ba18-121">This will enable the system to continue functioning and meet any service level agreements (SLAs) that are in place.</span></span> <span data-ttu-id="4ba18-122">Para obter mais informações sobre como monitorar o uso de recursos, consulte [Orientação sobre instrumentação e telemetria](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ba18-122">For more information on monitoring resource usage, see the [Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span>

<span data-ttu-id="4ba18-123">O sistema pode implementar várias estratégias de limitação, incluindo:</span><span class="sxs-lookup"><span data-stu-id="4ba18-123">The system could implement several throttling strategies, including:</span></span>

- <span data-ttu-id="4ba18-124">Rejeitar solicitações de um usuário individual que já tenha acessado APIs do sistema mais de n vezes por segundo durante um determinado período.</span><span class="sxs-lookup"><span data-stu-id="4ba18-124">Rejecting requests from an individual user who's already accessed system APIs more than n times per second over a given period of time.</span></span> <span data-ttu-id="4ba18-125">Isso requer que o sistema meça o uso de recursos para cada locatário ou usuário que esteja executando um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-125">This requires the system to meter the use of resources for each tenant or user running an application.</span></span> <span data-ttu-id="4ba18-126">Para obter mais informações, consulte [Orientação de medição de serviço](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ba18-126">For more information, see the [Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span>

- <span data-ttu-id="4ba18-127">Desabilitar ou comprometer a funcionalidade de serviços não essenciais selecionados de modo que os serviços essenciais possam ser executados sem impedimentos com recursos suficientes.</span><span class="sxs-lookup"><span data-stu-id="4ba18-127">Disabling or degrading the functionality of selected nonessential services so that essential services can run unimpeded with sufficient resources.</span></span> <span data-ttu-id="4ba18-128">Por exemplo, se o aplicativo estiver transmitindo por streaming saída de vídeo, ele poderá mudar para uma resolução mais baixa.</span><span class="sxs-lookup"><span data-stu-id="4ba18-128">For example, if the application is streaming video output, it could switch to a lower resolution.</span></span>

- <span data-ttu-id="4ba18-129">Usando nivelamento para suavizar o volume de atividade (essa abordagem é abordada em mais detalhes por [Padrão de nivelamento de carga baseado em fila](queue-based-load-leveling.md)).</span><span class="sxs-lookup"><span data-stu-id="4ba18-129">Using load leveling to smooth the volume of activity (this approach is covered in more detail by the [Queue-based Load Leveling pattern](queue-based-load-leveling.md)).</span></span> <span data-ttu-id="4ba18-130">Em um ambiente multilocatário, essa abordagem reduzirá o desempenho de cada locatário.</span><span class="sxs-lookup"><span data-stu-id="4ba18-130">In a multi-tenant environment, this approach will reduce the performance for every tenant.</span></span> <span data-ttu-id="4ba18-131">Se o sistema precisar dar suporte a uma combinação de locatários com diferentes SLAs, o trabalho para locatários de alto valor poderá ser executado imediatamente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-131">If the system must support a mix of tenants with different SLAs, the work for high-value tenants might be performed immediately.</span></span> <span data-ttu-id="4ba18-132">Solicitações para outros locatários poderão ser retidas e manipuladas quando a lista de pendências diminuir.</span><span class="sxs-lookup"><span data-stu-id="4ba18-132">Requests for other tenants can be held back, and handled when the backlog has eased.</span></span> <span data-ttu-id="4ba18-133">O [padrão de Fila de Prioridade][] pode ser usado para implementar essa abordagem.</span><span class="sxs-lookup"><span data-stu-id="4ba18-133">The [Priority Queue pattern][] could be used to help implement this approach.</span></span>

- <span data-ttu-id="4ba18-134">Adiar de operações sendo executadas em nome de locatários ou de aplicativos de menor prioridade.</span><span class="sxs-lookup"><span data-stu-id="4ba18-134">Deferring operations being performed on behalf of lower priority applications or tenants.</span></span> <span data-ttu-id="4ba18-135">Essas operações podem ser suspensas ou limitadas, sendo gerada uma exceção para informar o locatário de que o sistema está ocupado e a operação deverá ser repetida mais tarde.</span><span class="sxs-lookup"><span data-stu-id="4ba18-135">These operations can be suspended or limited, with an exception generated to inform the tenant that the system is busy and that the operation should be retried later.</span></span>

<span data-ttu-id="4ba18-136">A figura mostra um gráfico de área para o uso de recursos (uma combinação de memória, CPU, largura de banda e outros fatores) em relação ao tempo para aplicativos que estão usando três recursos.</span><span class="sxs-lookup"><span data-stu-id="4ba18-136">The figure shows an area graph for resource use (a combination of memory, CPU, bandwidth, and other factors) against time for applications that are making use of three features.</span></span> <span data-ttu-id="4ba18-137">Um recurso é uma área de funcionalidade, como um componente que executa um conjunto específico de tarefas, um trecho de código que executa um cálculo complexo ou um elemento que fornece um serviço como um cache na memória.</span><span class="sxs-lookup"><span data-stu-id="4ba18-137">A feature is an area of functionality, such as a component that performs a specific set of tasks, a piece of code that performs a complex calculation, or an element that provides a service such as an in-memory cache.</span></span> <span data-ttu-id="4ba18-138">Esses recursos são rotulados como A, B e C.</span><span class="sxs-lookup"><span data-stu-id="4ba18-138">These features are labeled A, B, and C.</span></span>

![Figura 1 – Gráfico mostrando o uso de recursos em relação ao tempo para aplicativos executados em nome de três usuários](./_images/throttling-resource-utilization.png)


> <span data-ttu-id="4ba18-140">A área imediatamente abaixo da linha para um recurso indica os recursos usados por aplicativos quando eles invocam esse recurso.</span><span class="sxs-lookup"><span data-stu-id="4ba18-140">The area immediately below the line for a feature indicates the resources that are used by applications when they invoke this feature.</span></span> <span data-ttu-id="4ba18-141">Por exemplo, a área abaixo da linha para o Recurso A mostra os recursos usados por aplicativos que estão usando o Recurso A e a área entre as linhas para o Recurso A e o Recurso B indica os recursos usados por aplicativos que estão invocando o Recurso B. Agregar as áreas para cada recurso mostra o uso total de recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="4ba18-141">For example, the area below the line for Feature A shows the resources used by applications that are making use of Feature A, and the area between the lines for Feature A and Feature B indicates the resources used by applications invoking Feature B. Aggregating the areas for each feature shows the total resource use of the system.</span></span>

<span data-ttu-id="4ba18-142">A figura anterior mostra os efeitos de adiar as operações.</span><span class="sxs-lookup"><span data-stu-id="4ba18-142">The previous figure illustrates the effects of deferring operations.</span></span> <span data-ttu-id="4ba18-143">Logo antes do horário T1, o total de recursos alocados para todos os aplicativos que usam esses recursos atinge um limite (o limite de uso de recurso).</span><span class="sxs-lookup"><span data-stu-id="4ba18-143">Just prior to time T1, the total resources allocated to all applications using these features reach a threshold (the limit of resource use).</span></span> <span data-ttu-id="4ba18-144">Neste ponto, os aplicativos estão em risco de esgotar os recursos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="4ba18-144">At this point, the applications are in danger of exhausting the resources available.</span></span> <span data-ttu-id="4ba18-145">Nesse sistema, o Recurso B é menos crítico que o Recurso A ou o Recurso C, assim, ele é temporariamente desabilitado e os recursos que ele estava usando são liberados.</span><span class="sxs-lookup"><span data-stu-id="4ba18-145">In this system, Feature B is less critical than Feature A or Feature C, so it's temporarily disabled and the resources that it was using are released.</span></span> <span data-ttu-id="4ba18-146">Entre os tempos T1 e T2, os aplicativos que usam o Recurso A e o Recurso C continuam em execução como normal.</span><span class="sxs-lookup"><span data-stu-id="4ba18-146">Between times T1 and T2, the applications using Feature A and Feature C continue running as normal.</span></span> <span data-ttu-id="4ba18-147">Por fim, o uso de recursos desses dois recursos diminui até um ponto em que, no tempo T2, há capacidade suficiente para habilitar o Recurso B novamente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-147">Eventually, the resource use of these two features diminishes to the point when, at time T2, there is sufficient capacity to enable Feature B again.</span></span>

<span data-ttu-id="4ba18-148">As abordagens de dimensionamento automático e a limitação também podem ser combinadas para ajudar a manter os aplicativos responsivo e nos SLAs.</span><span class="sxs-lookup"><span data-stu-id="4ba18-148">The autoscaling and throttling approaches can also be combined to help keep the applications responsive and within SLAs.</span></span> <span data-ttu-id="4ba18-149">Se a expectativa for que a demanda permanecerá alta, a limitação fornecerá uma solução temporária enquanto o sistema é escalado horizontalmente. Neste ponto, a funcionalidade integral do sistema pode ser restaurada.</span><span class="sxs-lookup"><span data-stu-id="4ba18-149">If the demand is expected to remain high, throttling provides a temporary solution while the system scales out. At this point, the full functionality of the system can be restored.</span></span>

<span data-ttu-id="4ba18-150">A figura a seguir mostra um gráfico de área do uso geral de recursos por todos os aplicativos que estão em execução em um sistema em relação ao tempo e ilustra como a limitação pode ser combinada com o dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="4ba18-150">The next figure shows an area graph of the overall resource use by all applications running in a system against time, and illustrates how throttling can be combined with autoscaling.</span></span>

![Figura 2 – Gráfico mostrando os efeitos de combinar limitação com dimensionamento automático](./_images/throttling-autoscaling.png)


<span data-ttu-id="4ba18-152">No tempo T1, o limite especificando um limite flexível de utilização de recursos é atingido.</span><span class="sxs-lookup"><span data-stu-id="4ba18-152">At time T1, the threshold specifying the soft limit of resource use is reached.</span></span> <span data-ttu-id="4ba18-153">Neste ponto, o sistema pode começar a aumentar. No entanto, se os recursos novos não ficarem disponíveis rápido o suficiente, os recursos existentes poderão ser esgotados e o sistema poderá falhar.</span><span class="sxs-lookup"><span data-stu-id="4ba18-153">At this point, the system can start to scale out. However, if the new resources don't become available quickly enough, then the existing resources might be exhausted and the system could fail.</span></span> <span data-ttu-id="4ba18-154">Para evitar que isso ocorra, o sistema será temporariamente limitado, conforme descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-154">To prevent this from occurring, the system is temporarily throttled, as described earlier.</span></span> <span data-ttu-id="4ba18-155">Quando o dimensionamento automático for concluído e recursos adicionais estiverem disponíveis, a limitação poderá ser reduzida.</span><span class="sxs-lookup"><span data-stu-id="4ba18-155">When autoscaling has completed and the additional resources are available, throttling can be relaxed.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="4ba18-156">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="4ba18-156">Issues and considerations</span></span>

<span data-ttu-id="4ba18-157">Você deve considerar os seguintes pontos ao decidir como implementar esse padrão:</span><span class="sxs-lookup"><span data-stu-id="4ba18-157">You should consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="4ba18-158">A limitação de um aplicativo e a estratégia a ser usada, é uma decisão de arquitetura que afeta todo o projeto de um sistema.</span><span class="sxs-lookup"><span data-stu-id="4ba18-158">Throttling an application, and the strategy to use, is an architectural decision that impacts the entire design of a system.</span></span> <span data-ttu-id="4ba18-159">A limitação deve ser considerada no início do processo de design do aplicativo, porque não é fácil adicioná-la depois que um sistema tiver sido implementado.</span><span class="sxs-lookup"><span data-stu-id="4ba18-159">Throttling should be considered early in the application design process because it isn't easy to add once a system has been implemented.</span></span>

- <span data-ttu-id="4ba18-160">A limitação deve ser executada rapidamente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-160">Throttling must be performed quickly.</span></span> <span data-ttu-id="4ba18-161">O sistema deve ser capaz de detectar um aumento na atividade e reagir de acordo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-161">The system must be capable of detecting an increase in activity and react accordingly.</span></span> <span data-ttu-id="4ba18-162">O sistema também deve ser capaz de reverter para o estado original rapidamente depois que a carga diminuir.</span><span class="sxs-lookup"><span data-stu-id="4ba18-162">The system must also be able to revert to its original state quickly after the load has eased.</span></span> <span data-ttu-id="4ba18-163">Isso requer que os dados de desempenho apropriados sejam capturados e monitorados continuamente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-163">This requires that the appropriate performance data is continually captured and monitored.</span></span>

- <span data-ttu-id="4ba18-164">Se um serviço precisar negar temporariamente uma solicitação de usuário, ele deverá retornar um código de erro específico para que o aplicativo cliente compreenda que o motivo da recusa em executar uma operação é a limitação.</span><span class="sxs-lookup"><span data-stu-id="4ba18-164">If a service needs to temporarily deny a user request, it should return a specific error code so the client application understands that the reason for the refusal to perform an operation is due to throttling.</span></span> <span data-ttu-id="4ba18-165">O aplicativo cliente pode aguardar um período antes de tentar novamente a solicitação.</span><span class="sxs-lookup"><span data-stu-id="4ba18-165">The client application can wait for a period before retrying the request.</span></span>

- <span data-ttu-id="4ba18-166">A limitação pode ser usada como uma medida temporária enquanto o sistema é dimensionado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="4ba18-166">Throttling can be used as a temporary measure while a system autoscales.</span></span> <span data-ttu-id="4ba18-167">Em alguns casos, é melhor simplesmente limitar, em vez de dimensionar, se um aumento na atividade for repentino e provavelmente não for durar muito, pois o dimensionamento pode aumentar consideravelmente os custos de execução.</span><span class="sxs-lookup"><span data-stu-id="4ba18-167">In some cases it's better to simply throttle, rather than to scale, if a burst in activity is sudden and isn't expected to be long lived because scaling can add considerably to running costs.</span></span>

- <span data-ttu-id="4ba18-168">Se a limitação estiver sendo usada como uma medida temporária enquanto um sistema é dimensionado automaticamente e, se as demandas de recursos aumentarem muito rapidamente, o sistema poderá não conseguir continuar funcionando &mdash; mesmo ao operar em um modo limitado.</span><span class="sxs-lookup"><span data-stu-id="4ba18-168">If throttling is being used as a temporary measure while a system autoscales, and if resource demands grow very quickly, the system might not be able to continue functioning&mdash;even when operating in a throttled mode.</span></span> <span data-ttu-id="4ba18-169">Se isso não for aceitável, considere a possibilidade de manter maiores reservas de capacidade e configurar um dimensionamento automático mais agressivo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-169">If this isn't acceptable, consider maintaining larger capacity reserves and configuring more aggressive autoscaling.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="4ba18-170">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="4ba18-170">When to use this pattern</span></span>

<span data-ttu-id="4ba18-171">Use este padrão:</span><span class="sxs-lookup"><span data-stu-id="4ba18-171">Use this pattern:</span></span>

- <span data-ttu-id="4ba18-172">Para garantir que um sistema continue a cumprir os contratos de nível de serviço.</span><span class="sxs-lookup"><span data-stu-id="4ba18-172">To ensure that a system continues to meet service level agreements.</span></span>

- <span data-ttu-id="4ba18-173">Para impedir que um único locatário monopolize os recursos fornecidos por um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-173">To prevent a single tenant from monopolizing the resources provided by an application.</span></span>

- <span data-ttu-id="4ba18-174">Para lidar com estouros de atividade.</span><span class="sxs-lookup"><span data-stu-id="4ba18-174">To handle bursts in activity.</span></span>

- <span data-ttu-id="4ba18-175">Para ajudar a otimizar os custos de um sistema, limitando os níveis máximos de recursos necessários para mantê-lo funcionando.</span><span class="sxs-lookup"><span data-stu-id="4ba18-175">To help cost-optimize a system by limiting the maximum resource levels needed to keep it functioning.</span></span>

## <a name="example"></a><span data-ttu-id="4ba18-176">Exemplo</span><span class="sxs-lookup"><span data-stu-id="4ba18-176">Example</span></span>

<span data-ttu-id="4ba18-177">A figura final ilustra como a limitação pode ser implementada em um sistema multilocatário.</span><span class="sxs-lookup"><span data-stu-id="4ba18-177">The final figure illustrates how throttling can be implemented in a multi-tenant system.</span></span> <span data-ttu-id="4ba18-178">Os usuários de cada uma das organizações de locatário acessam um aplicativo hospedado na nuvem em que eles preenchem e enviam as pesquisas.</span><span class="sxs-lookup"><span data-stu-id="4ba18-178">Users from each of the tenant organizations access a cloud-hosted application where they fill out and submit surveys.</span></span> <span data-ttu-id="4ba18-179">O aplicativo contém instrumentação que monitora a taxa à qual esses usuários estão enviando solicitações ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4ba18-179">The application contains instrumentation that monitors the rate at which these users are submitting requests to the application.</span></span>

<span data-ttu-id="4ba18-180">Para evitar que os usuários de um locatário afetam a capacidade de resposta e a disponibilidade do aplicativo para todos os outros usuários, é aplicado um limite ao número de solicitações por segundo que os usuários de um locatário podem enviar.</span><span class="sxs-lookup"><span data-stu-id="4ba18-180">In order to prevent the users from one tenant affecting the responsiveness and availability of the application for all other users, a limit is applied to the number of requests per second the users from any one tenant can submit.</span></span> <span data-ttu-id="4ba18-181">O aplicativo bloqueia solicitações que excedem esse limite.</span><span class="sxs-lookup"><span data-stu-id="4ba18-181">The application blocks requests that exceed this limit.</span></span>

![Figura 3 – Implementar limitação em um aplicativo multilocatário](./_images/throttling-multi-tenant.png)


## <a name="related-patterns-and-guidance"></a><span data-ttu-id="4ba18-183">Diretrizes e padrões relacionados</span><span class="sxs-lookup"><span data-stu-id="4ba18-183">Related patterns and guidance</span></span>

<span data-ttu-id="4ba18-184">Os padrões e diretrizes a seguir também podem ser relevantes ao implementar esse padrão:</span><span class="sxs-lookup"><span data-stu-id="4ba18-184">The following patterns and guidance may also be relevant when implementing this pattern:</span></span>
- <span data-ttu-id="4ba18-185">[Diretrizes sobre Instrumentação e Telemetria](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ba18-185">[Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span> <span data-ttu-id="4ba18-186">A limitação depende da coleta de informações sobre o quanto um serviço está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="4ba18-186">Throttling depends on gathering information about how heavily a service is being used.</span></span> <span data-ttu-id="4ba18-187">Descreve como gerar e capturar informações de monitoramento personalizadas.</span><span class="sxs-lookup"><span data-stu-id="4ba18-187">Describes how to generate and capture custom monitoring information.</span></span>
- <span data-ttu-id="4ba18-188">[Diretrizes de Medição de Serviço](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ba18-188">[Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span> <span data-ttu-id="4ba18-189">Descreve como medir o uso de serviços para compreender como eles são usados.</span><span class="sxs-lookup"><span data-stu-id="4ba18-189">Describes how to meter the use of services in order to gain an understanding of how they are used.</span></span> <span data-ttu-id="4ba18-190">Essa informação pode ser útil para determinar como limitar um serviço.</span><span class="sxs-lookup"><span data-stu-id="4ba18-190">This information can be useful in determining how to throttle a service.</span></span>
- <span data-ttu-id="4ba18-191">[Diretrizes de dimensionamento automático](https://msdn.microsoft.com/library/dn589774.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ba18-191">[Autoscaling Guidance](https://msdn.microsoft.com/library/dn589774.aspx).</span></span> <span data-ttu-id="4ba18-192">A limitação pode ser usada como uma medida temporária enquanto um sistema é dimensionado automaticamente ou para eliminar a necessidade de dimensionamento automático de um sistema.</span><span class="sxs-lookup"><span data-stu-id="4ba18-192">Throttling can be used as an interim measure while a system autoscales, or to remove the need for a system to autoscale.</span></span> <span data-ttu-id="4ba18-193">Contém informações sobre estratégias de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="4ba18-193">Contains information on autoscaling strategies.</span></span>
- <span data-ttu-id="4ba18-194">[Padrão de nivelamento de carga baseado em fila](queue-based-load-leveling.md).</span><span class="sxs-lookup"><span data-stu-id="4ba18-194">[Queue-based Load Leveling pattern](queue-based-load-leveling.md).</span></span> <span data-ttu-id="4ba18-195">O nivelamento de carga baseado em fila é um mecanismo comumente usado para implementar a limitação.</span><span class="sxs-lookup"><span data-stu-id="4ba18-195">Queue-based load leveling is a commonly used mechanism for implementing throttling.</span></span> <span data-ttu-id="4ba18-196">Uma fila pode agir como um buffer que ajuda a estabilizar a taxa em que as solicitações enviadas por um aplicativo são entregues a um serviço.</span><span class="sxs-lookup"><span data-stu-id="4ba18-196">A queue can act as a buffer that helps to even out the rate at which requests sent by an application are delivered to a service.</span></span>
- <span data-ttu-id="4ba18-197">[padrão de Fila de Prioridade][].</span><span class="sxs-lookup"><span data-stu-id="4ba18-197">[Priority Queue pattern][].</span></span> <span data-ttu-id="4ba18-198">Um sistema pode usar o enfileiramento prioritário como parte da sua estratégia de limitação para manter o desempenho de aplicativos críticos ou de maior valor, ao mesmo tempo reduzindo o desempenho de aplicativos menos importantes.</span><span class="sxs-lookup"><span data-stu-id="4ba18-198">A system can use priority queuing as part of its throttling strategy to maintain performance for critical or higher value applications, while reducing the performance of less important applications.</span></span>

[padrão de Fila de Prioridade]: priority-queue.md
[Priority Queue pattern]: priority-queue.md
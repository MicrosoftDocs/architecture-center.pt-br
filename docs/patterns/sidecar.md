---
title: Padrão sidecar
description: Implante os componentes de um aplicativo em um processo ou contêiner separado para fornecer isolamento e encapsulamento.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: ec168009aa99f412c3f1222a1c404ea4ea5cb669
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
ms.locfileid: "24541762"
---
# <a name="sidecar-pattern"></a><span data-ttu-id="8d801-103">Padrão sidecar</span><span class="sxs-lookup"><span data-stu-id="8d801-103">Sidecar pattern</span></span>

<span data-ttu-id="8d801-104">Implante os componentes de um aplicativo em um processo ou contêiner separado para fornecer isolamento e encapsulamento.</span><span class="sxs-lookup"><span data-stu-id="8d801-104">Deploy components of an application into a separate process or container to provide isolation and encapsulation.</span></span> <span data-ttu-id="8d801-105">Esse padrão também pode habilitar aplicativos para serem compostos por tecnologias e componentes heterogêneos.</span><span class="sxs-lookup"><span data-stu-id="8d801-105">This pattern can also enable applications to be composed of heterogeneous components and technologies.</span></span>

<span data-ttu-id="8d801-106">Esse padrão é denominado *Sidecar* porque é semelhante a um sidecar anexado a uma moto.</span><span class="sxs-lookup"><span data-stu-id="8d801-106">This pattern is named *Sidecar* because it resembles a sidecar attached to a motorcycle.</span></span> <span data-ttu-id="8d801-107">No padrão, o sidecar está anexado a um aplicativo pai e fornece recursos de suporte para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d801-107">In the pattern, the sidecar is attached to a parent application and provides supporting features for the application.</span></span> <span data-ttu-id="8d801-108">O sidecar também compartilha o mesmo ciclo de vida do aplicativo pai, sendo criado e desativado junto com ele.</span><span class="sxs-lookup"><span data-stu-id="8d801-108">The sidecar also shares the same lifecycle as the parent application, being created and retired alongside the parent.</span></span> <span data-ttu-id="8d801-109">O padrão sidecar às vezes é conhecido como o padrão de sidekick e é um padrão de decomposição.</span><span class="sxs-lookup"><span data-stu-id="8d801-109">The sidecar pattern is sometimes referred to as the sidekick pattern and is a decomposition pattern.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="8d801-110">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="8d801-110">Context and Problem</span></span>

<span data-ttu-id="8d801-111">Aplicativos e serviços geralmente requerem funcionalidades relacionadas, como monitoramento, registro em log, configuração e serviços de rede.</span><span class="sxs-lookup"><span data-stu-id="8d801-111">Applications and services often require related functionality, such as monitoring, logging, configuration, and networking services.</span></span> <span data-ttu-id="8d801-112">Essas tarefas periféricas podem ser implementadas como componentes ou serviços separados.</span><span class="sxs-lookup"><span data-stu-id="8d801-112">These peripheral tasks can be implemented as separate components or services.</span></span> 

<span data-ttu-id="8d801-113">Se elas estiverem intimamente integrados ao aplicativo, poderão ser executadas no mesmo processo que o aplicativo, usando com eficiência os recursos compartilhados.</span><span class="sxs-lookup"><span data-stu-id="8d801-113">If they are tightly integrated into the application, they can run in the same process as the application, making efficient use of shared resources.</span></span> <span data-ttu-id="8d801-114">No entanto, isso também significa que eles não são bem isolados e uma interrupção em um desses componentes poderia afetar os demais componentes ou todo o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d801-114">However, this also means they are not well isolated, and an outage in one of these components can affect other components or the entire application.</span></span> <span data-ttu-id="8d801-115">Além disso, eles geralmente precisam ser implementados usando o mesmo idioma que o aplicativo pai.</span><span class="sxs-lookup"><span data-stu-id="8d801-115">Also, they usually need to be implemented using the same language as the parent application.</span></span> <span data-ttu-id="8d801-116">Como resultado, o componente e o aplicativo têm uma interdependência íntima entre si.</span><span class="sxs-lookup"><span data-stu-id="8d801-116">As a result, the component and the application have close interdependence on each other.</span></span>

<span data-ttu-id="8d801-117">Se o aplicativo for decomposto em serviços, cada serviço poderá ser compilado usando diferentes linguagens e tecnologias.</span><span class="sxs-lookup"><span data-stu-id="8d801-117">If the application is decomposed into services, then each service can be built using different languages and technologies.</span></span> <span data-ttu-id="8d801-118">Embora isso proporcione maior flexibilidade, também significa que cada componente tem suas próprias dependências e requer bibliotecas específicas a um idioma para acessar a plataforma subjacente e qualquer recurso compartilhados com o aplicativo pai.</span><span class="sxs-lookup"><span data-stu-id="8d801-118">While this gives more flexibility, it means that each component has its own dependencies and requires language-specific libraries to access the underlying platform and any resources shared with the parent application.</span></span> <span data-ttu-id="8d801-119">Além disso, implantar esses recursos como serviços separados pode acrescentar latência ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d801-119">In addition, deploying these features as separate services can add latency to the application.</span></span> <span data-ttu-id="8d801-120">Gerenciar o código e as dependências para essas interfaces específicas a um idioma também pode agregar considerável complexidade, especialmente para hospedagem, implantação e gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="8d801-120">Managing the code and dependencies for these language-specific interfaces can also add considerable complexity, especially for hosting, deployment, and management.</span></span>

## <a name="solution"></a><span data-ttu-id="8d801-121">Solução</span><span class="sxs-lookup"><span data-stu-id="8d801-121">Solution</span></span>

<span data-ttu-id="8d801-122">Posicione um conjunto consistente de tarefas no aplicativo principal, porém coloque-os dentro de seu próprio processo ou contêiner, fornecendo uma interface homogênea para serviços de plataforma entre linguagens.</span><span class="sxs-lookup"><span data-stu-id="8d801-122">Co-locate a cohesive set of tasks with the primary application, but place them inside their own process or container, providing a homogeneous interface for platform services across languages.</span></span> 

![](./_images/sidecar.png)

<span data-ttu-id="8d801-123">Um serviço sidecar não faz necessariamente parte do aplicativo, mas está conectado a ele.</span><span class="sxs-lookup"><span data-stu-id="8d801-123">A sidecar service is not necessarily part of the application, but is connected to it.</span></span> <span data-ttu-id="8d801-124">Ele irá sempre onde o aplicativo pai for.</span><span class="sxs-lookup"><span data-stu-id="8d801-124">It goes wherever the parent application goes.</span></span> <span data-ttu-id="8d801-125">Sidecars são processos ou serviços de apoio que são implantados com o aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8d801-125">Sidecars are supporting processes or services that are deployed with the primary application.</span></span> <span data-ttu-id="8d801-126">Em um moto, o sidecar é anexado a uma moto e cada moto pode ter seu próprio sidecar.</span><span class="sxs-lookup"><span data-stu-id="8d801-126">On a motorcycle, the sidecar is attached to one motorcycle, and each motorcycle can have its own sidecar.</span></span> <span data-ttu-id="8d801-127">Da mesma forma, um serviço sidecar compartilha a sina de seu aplicativo pai.</span><span class="sxs-lookup"><span data-stu-id="8d801-127">In the same way, a sidecar service shares the fate of its parent application.</span></span> <span data-ttu-id="8d801-128">Para cada instância do aplicativo, uma instância do sidecar é implantada e hospedada junto com ele.</span><span class="sxs-lookup"><span data-stu-id="8d801-128">For each instance of the application, an instance of the sidecar is deployed and hosted alongside it.</span></span> 

<span data-ttu-id="8d801-129">Vantagens de usar um padrão de sidecar:</span><span class="sxs-lookup"><span data-stu-id="8d801-129">Advantages of using a sidecar pattern include:</span></span>

- <span data-ttu-id="8d801-130">Um sidecar é independente do seu aplicativo principal em termos de ambiente de tempo de execução e de linguagem de programação, portanto você não precisa desenvolver um sidecar por linguagem.</span><span class="sxs-lookup"><span data-stu-id="8d801-130">A sidecar is independent from its primary application in terms of runtime environment and programming language, so you don't need to develop one sidecar per language.</span></span> 

- <span data-ttu-id="8d801-131">O sidecar pode acessar os mesmos recursos que o aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8d801-131">The sidecar can access the same resources as the primary application.</span></span> <span data-ttu-id="8d801-132">Por exemplo, um sidecar pode monitorar os recursos do sistema usados tanto por ele mesmo quanto pelo aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8d801-132">For example, a sidecar can monitor system resources used by both the sidecar and the primary application.</span></span> 

- <span data-ttu-id="8d801-133">Por causa de sua proximidade do aplicativo principal, não há latência significativa ao se comunicar entre eles.</span><span class="sxs-lookup"><span data-stu-id="8d801-133">Because of its proximity to the primary application, there’s no significant latency when communicating between them.</span></span>

- <span data-ttu-id="8d801-134">Mesmo para aplicativos que não fornecem um mecanismo de extensibilidade, você pode usar um sidecar para estender a funcionalidade anexando-o como o próprio processo no mesmo host ou subcontêiner como o aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8d801-134">Even for applications that don’t provide an extensibility mechanism, you can use a sidecar to extend functionality by attaching it as own process in the same host or sub-container as the primary application.</span></span>

<span data-ttu-id="8d801-135">O padrão de sidecar geralmente é usado com contêineres e conhecido como um contêiner de sidecar ou sidekick.</span><span class="sxs-lookup"><span data-stu-id="8d801-135">The sidecar pattern is often used with containers and referred to as a sidecar container or sidekick container.</span></span> 

## <a name="issues-and-considerations"></a><span data-ttu-id="8d801-136">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="8d801-136">Issues and Considerations</span></span>

- <span data-ttu-id="8d801-137">Considere a implantação e o formato de empacotamento que você usará para implantar serviços, processos ou contêineres.</span><span class="sxs-lookup"><span data-stu-id="8d801-137">Consider the deployment and packaging format you will use to deploy services, processes, or containers.</span></span> <span data-ttu-id="8d801-138">Contêineres são especialmente adequados para o padrão de sidecar.</span><span class="sxs-lookup"><span data-stu-id="8d801-138">Containers are particularly well suited to the sidecar pattern.</span></span>
- <span data-ttu-id="8d801-139">Ao projetar um serviço sidecar, escolha cuidadosamente o mecanismo de comunicação entre processos.</span><span class="sxs-lookup"><span data-stu-id="8d801-139">When designing a sidecar service, carefully decide on the interprocess communication mechanism.</span></span> <span data-ttu-id="8d801-140">Experimente usar tecnologias independente de linguagem ou estrutura, a menos que os requisitos de desempenho tornem isso inviável.</span><span class="sxs-lookup"><span data-stu-id="8d801-140">Try to use language- or framework-agnostic technologies unless performance requirements make that impractical.</span></span>
- <span data-ttu-id="8d801-141">Antes de colocar a funcionalidade em um sidecar, considere se ela funcionaria melhor como um serviço separado ou um daemon mais tradicional.</span><span class="sxs-lookup"><span data-stu-id="8d801-141">Before putting functionality into a sidecar, consider whether it would work better as a separate service or a more traditional daemon.</span></span>
- <span data-ttu-id="8d801-142">Considere também se a funcionalidade poderia ser implementada como uma biblioteca ou usando um mecanismo de extensão tradicional.</span><span class="sxs-lookup"><span data-stu-id="8d801-142">Also consider whether the functionality could be implemented as a library or using a traditional extension mechanism.</span></span> <span data-ttu-id="8d801-143">Bibliotecas específicas a um idioma podem ter um nível mais profundo de integração e menos sobrecarga de rede.</span><span class="sxs-lookup"><span data-stu-id="8d801-143">Language-specific libraries may have a deeper level of integration and less network overhead.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="8d801-144">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="8d801-144">When to Use this Pattern</span></span>

<span data-ttu-id="8d801-145">Use esse padrão quando:</span><span class="sxs-lookup"><span data-stu-id="8d801-145">Use this pattern when:</span></span>

- <span data-ttu-id="8d801-146">O aplicativo principal usa um conjunto heterogêneo de linguagens e estruturas.</span><span class="sxs-lookup"><span data-stu-id="8d801-146">Your primary application uses a heterogenous set of languages and frameworks.</span></span> <span data-ttu-id="8d801-147">Um componente localizado em um serviço secundários pode ser consumido por aplicativos escritos em linguagens diferentes usando estruturas diferentes.</span><span class="sxs-lookup"><span data-stu-id="8d801-147">A component located in a sidecar service can be consumed by applications written in different languages using different frameworks.</span></span>
- <span data-ttu-id="8d801-148">Um componente pertence a uma equipe remota ou a uma organização diferente.</span><span class="sxs-lookup"><span data-stu-id="8d801-148">A component is owned by a remote team or a different organization.</span></span>
- <span data-ttu-id="8d801-149">Um componente ou recurso deve ser localizado no mesmo host que o aplicativo</span><span class="sxs-lookup"><span data-stu-id="8d801-149">A component or feature must be co-located on the same host as the application</span></span>
- <span data-ttu-id="8d801-150">Você precisa de um serviço que compartilha o ciclo de vida geral do aplicativo principal, mas pode ser atualizado independentemente.</span><span class="sxs-lookup"><span data-stu-id="8d801-150">You need a service that shares the overall lifecycle of your main application, but can be independently updated.</span></span>
- <span data-ttu-id="8d801-151">Você precisa de controle refinado sobre os limites do recurso para determinado recurso ou componente.</span><span class="sxs-lookup"><span data-stu-id="8d801-151">You need fine-grained control over resource limits for a particular resource or component.</span></span> <span data-ttu-id="8d801-152">Por exemplo, você talvez queira restringir a quantidade de memória que um componente específico usa.</span><span class="sxs-lookup"><span data-stu-id="8d801-152">For example, you may want to restrict the amount of memory a specific component uses.</span></span> <span data-ttu-id="8d801-153">Você pode implantar o componente como um sidecar e gerenciar o uso de memória, independentemente do aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8d801-153">You can deploy the component as a sidecar and manage memory usage independently of the main application.</span></span>

<span data-ttu-id="8d801-154">Esse padrão pode não ser adequado:</span><span class="sxs-lookup"><span data-stu-id="8d801-154">This pattern may not be suitable:</span></span>

- <span data-ttu-id="8d801-155">Quando a comunicação entre processos precisa ser otimizada.</span><span class="sxs-lookup"><span data-stu-id="8d801-155">When interprocess communication needs to be optimized.</span></span> <span data-ttu-id="8d801-156">A comunicação entre um aplicativo pai e os serviços de sidecar incluem certa sobrecarga e latência notável nas chamadas.</span><span class="sxs-lookup"><span data-stu-id="8d801-156">Communication between a parent application and sidecar services includes some overhead, notably latency in the calls.</span></span> <span data-ttu-id="8d801-157">Essa pode não ser uma compensação aceitável para interfaces verborrágicas.</span><span class="sxs-lookup"><span data-stu-id="8d801-157">This may not be an acceptable trade-off for chatty interfaces.</span></span>
- <span data-ttu-id="8d801-158">Para pequenos aplicativos em que o custo do recurso da implantação de um serviço de sidecar para cada instância não compensa a vantagem de isolamento.</span><span class="sxs-lookup"><span data-stu-id="8d801-158">For small applications where the resource cost of deploying a sidecar service for each instance is not worth the advantage of isolation.</span></span>
- <span data-ttu-id="8d801-159">Quando o serviço precisa ser dimensionado de forma diferente ou independente dos aplicativos principais.</span><span class="sxs-lookup"><span data-stu-id="8d801-159">When the service needs to scale differently than or independently from the main applications.</span></span> <span data-ttu-id="8d801-160">Nesse caso, é melhor implantar o recurso como um serviço separado.</span><span class="sxs-lookup"><span data-stu-id="8d801-160">If so, it may be better to deploy the feature as a separate service.</span></span>

## <a name="example"></a><span data-ttu-id="8d801-161">Exemplo</span><span class="sxs-lookup"><span data-stu-id="8d801-161">Example</span></span>

<span data-ttu-id="8d801-162">O padrão sidecar se aplica a muitos cenários.</span><span class="sxs-lookup"><span data-stu-id="8d801-162">The sidecar pattern is applicable to many scenarios.</span></span> <span data-ttu-id="8d801-163">Alguns exemplos comuns:</span><span class="sxs-lookup"><span data-stu-id="8d801-163">Some common examples:</span></span>

- <span data-ttu-id="8d801-164">API de Infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="8d801-164">Infrastructure API.</span></span> <span data-ttu-id="8d801-165">A equipe de desenvolvimento de infraestrutura cria um serviço implantado ao lado de cada aplicativo, em vez de uma biblioteca de cliente específica a um idioma para acessar a infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="8d801-165">The infrastructure development team creates a service that's deployed alongside each application, instead of a language-specific client library to access the infrastructure.</span></span> <span data-ttu-id="8d801-166">O serviço é carregado como um sidecar e fornece uma camada comum para serviços de infraestrutura, incluindo registro em log, dados de ambiente, repositório de configuração, descoberta, verificações de integridade e serviços de watchdog.</span><span class="sxs-lookup"><span data-stu-id="8d801-166">The service is loaded as a sidecar and provides a common layer for infrastructure services, including logging, environment data, configuration store, discovery, health checks, and watchdog services.</span></span> <span data-ttu-id="8d801-167">O secundário também monitora o ambiente de host do aplicativo pai e o processo (ou contêiner) e registra as informações em um serviço centralizado.</span><span class="sxs-lookup"><span data-stu-id="8d801-167">The sidecar also monitors the parent application's host environment and process (or container) and logs the information to a centralized service.</span></span>
- <span data-ttu-id="8d801-168">Gerenciar NGINX/HAProxy.</span><span class="sxs-lookup"><span data-stu-id="8d801-168">Manage NGINX/HAProxy.</span></span> <span data-ttu-id="8d801-169">Implante NGINX com um serviço sidecar que monitora o estado do ambiente, em seguida, atualize o arquivo de configuração NGINX e recicle o processo quando uma alteração de estado é necessária.</span><span class="sxs-lookup"><span data-stu-id="8d801-169">Deploy NGINX with a sidecar service that monitors environment state, then updates the NGINX configuration file and recycles the process when a change in state is needed.</span></span>
- <span data-ttu-id="8d801-170">Sidecar embaixador.</span><span class="sxs-lookup"><span data-stu-id="8d801-170">Ambassador sidecar.</span></span> <span data-ttu-id="8d801-171">Implantar um serviço [embaixador][ambassador] como um sidecar.</span><span class="sxs-lookup"><span data-stu-id="8d801-171">Deploy an [ambassador][ambassador] service as a sidecar.</span></span> <span data-ttu-id="8d801-172">O aplicativo chama por meio do embaixador, que lida com o registro em log de solicitações, roteamento, quebra de circuito e demais recursos relacionados à conectividade.</span><span class="sxs-lookup"><span data-stu-id="8d801-172">The application calls through the ambassador, which handles request logging, routing, circuit breaking, and other connectivity related features.</span></span>
- <span data-ttu-id="8d801-173">Proxy de descarregamento.</span><span class="sxs-lookup"><span data-stu-id="8d801-173">Offload proxy.</span></span> <span data-ttu-id="8d801-174">Coloque um proxy NGINX na frente de uma instância de serviço do node.js, para manipular a distribuição do conteúdo de arquivo estático para o serviço.</span><span class="sxs-lookup"><span data-stu-id="8d801-174">Place an NGINX proxy in front of a node.js service instance, to handle serving static file content for the service.</span></span>


## <a name="related-guidance"></a><span data-ttu-id="8d801-175">Diretrizes relacionadas</span><span class="sxs-lookup"><span data-stu-id="8d801-175">Related guidance</span></span>

- <span data-ttu-id="8d801-176">[Padrão embaixador][ambassador]</span><span class="sxs-lookup"><span data-stu-id="8d801-176">[Ambassador pattern][ambassador]</span></span>


[ambassador]: ./ambassador.md


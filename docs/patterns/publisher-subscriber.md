---
title: Padrão Publisher-Subscriber
description: Permite a um aplicativo anunciar assincronamente eventos para vários consumidores interessados.
keywords: padrão de design
author: alexbuckgit
ms.date: 12/07/2018
ms.openlocfilehash: f47792dd60e65cac1ff06928d9ea100ed452933a
ms.sourcegitcommit: a0a9981e7586bed8d876a54e055dea1e392118f8
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/11/2018
ms.locfileid: "53233934"
---
# <a name="publisher-subscriber-pattern"></a><span data-ttu-id="c1478-104">Padrão Publisher-Subscriber</span><span class="sxs-lookup"><span data-stu-id="c1478-104">Publisher-Subscriber pattern</span></span>

<span data-ttu-id="c1478-105">Permite a um aplicativo anunciar eventos para vários consumidores de seu interesse assincronamente, sem acoplar os remetentes aos destinatários.</span><span class="sxs-lookup"><span data-stu-id="c1478-105">Enable an application to announce events to multiple interested consumers aynchronously, without coupling the senders to the receivers.</span></span>

<span data-ttu-id="c1478-106">**Também chamado de**: Mensagens pub/sub</span><span class="sxs-lookup"><span data-stu-id="c1478-106">**Also called**: Pub/sub messaging</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="c1478-107">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="c1478-107">Context and problem</span></span>

<span data-ttu-id="c1478-108">Em aplicativos distribuídos baseados em nuvem, normalmente, os componentes do sistema precisam fornecer informações a outros componentes à medida que os eventos acontecem.</span><span class="sxs-lookup"><span data-stu-id="c1478-108">In cloud-based and distributed applications, components of the system often need to provide information to other components as events happen.</span></span>

<span data-ttu-id="c1478-109">Mensagens assíncronas são uma maneira eficiente de dissociar os remetentes dos consumidores e evitar o bloqueio do remetente até receber uma resposta.</span><span class="sxs-lookup"><span data-stu-id="c1478-109">Asynchronous messaging is an effective way to decouple senders from consumers, and avoid blocking the sender to wait for a response.</span></span> <span data-ttu-id="c1478-110">No entanto, usar uma fila de mensagens dedicadas para cada consumidor não é algo bom quando há vários consumidores.</span><span class="sxs-lookup"><span data-stu-id="c1478-110">However, using a dedicated message queue for each consumer does not effectively scale to many consumers.</span></span> <span data-ttu-id="c1478-111">Além disso, talvez alguns consumidores tenham interesse em apenas um subconjunto das informações.</span><span class="sxs-lookup"><span data-stu-id="c1478-111">Also, some of the consumers might be interested in only a subset of the information.</span></span> <span data-ttu-id="c1478-112">Como o remetente pode anunciar eventos a todos os consumidores interessados sem conhecer suas identidades?</span><span class="sxs-lookup"><span data-stu-id="c1478-112">How can the sender announce events to all interested consumers without knowing their identities?</span></span>

## <a name="solution"></a><span data-ttu-id="c1478-113">Solução</span><span class="sxs-lookup"><span data-stu-id="c1478-113">Solution</span></span>

<span data-ttu-id="c1478-114">Introduza um subsistema assíncrono de mensagens que inclua o seguinte:</span><span class="sxs-lookup"><span data-stu-id="c1478-114">Introduce an asynchronous messaging subsystem that includes the following:</span></span>

- <span data-ttu-id="c1478-115">Um canal de entrada de mensagens usado pelo remetente.</span><span class="sxs-lookup"><span data-stu-id="c1478-115">An input messaging channel used by the sender.</span></span> <span data-ttu-id="c1478-116">O remetente insere os eventos nas mensagens, usando um formato de mensagem conhecido, e envia essas mensagens por meio do canal de entrada.</span><span class="sxs-lookup"><span data-stu-id="c1478-116">The sender packages events into messages, using a known message format, and sends these messages via the input channel.</span></span> <span data-ttu-id="c1478-117">O remetente nesse padrão também é chamado de *publicador*.</span><span class="sxs-lookup"><span data-stu-id="c1478-117">The sender in this pattern is also called the *publisher*.</span></span>

  > [!NOTE]
  > <span data-ttu-id="c1478-118">Uma *mensagem* é um pacote de dados.</span><span class="sxs-lookup"><span data-stu-id="c1478-118">A *message* is a packet of data.</span></span> <span data-ttu-id="c1478-119">Um *evento* é uma mensagem que notifica outros componentes sobre uma alteração ou uma ação que tenha ocorrido.</span><span class="sxs-lookup"><span data-stu-id="c1478-119">An *event* is a message that notifies other components about a change or an action that has taken place.</span></span>

- <span data-ttu-id="c1478-120">Um canal de saída de mensagens por consumidor.</span><span class="sxs-lookup"><span data-stu-id="c1478-120">One output messaging channel per consumer.</span></span> <span data-ttu-id="c1478-121">Os consumidores são conhecidos como *assinantes*.</span><span class="sxs-lookup"><span data-stu-id="c1478-121">The consumers are known as *subscribers*.</span></span>

- <span data-ttu-id="c1478-122">Um mecanismo para copiar cada mensagem do canal de entrada para os canais de saída de todos os assinantes interessados nessa mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-122">A mechanism for copying each message from the input channel to the output channels for all subscribers interested in that message.</span></span> <span data-ttu-id="c1478-123">Normalmente, essa operação é manipulada por um intermediário, como um agente de mensagem ou barramento de evento.</span><span class="sxs-lookup"><span data-stu-id="c1478-123">This operation is typically handled by a intermediary such as a message broker or event bus.</span></span>

<span data-ttu-id="c1478-124">O diagrama a seguir mostra os componentes lógicos desse padrão:</span><span class="sxs-lookup"><span data-stu-id="c1478-124">The following diagram shows the logical components of this pattern:</span></span>

![Padrão publish-subscribe usando um agente de mensagens](./_images/publish-subscribe.png)
 
<span data-ttu-id="c1478-126">A mensagem pub/sub tem os seguintes benefícios:</span><span class="sxs-lookup"><span data-stu-id="c1478-126">Pub/sub messaging has the following benefits:</span></span>

- <span data-ttu-id="c1478-127">Ela separa subsistemas que ainda precisam se comunicar.</span><span class="sxs-lookup"><span data-stu-id="c1478-127">It decouples subsystems that still need to communicate.</span></span> <span data-ttu-id="c1478-128">Os subsistemas podem ser gerenciados independentemente e as mensagens podem ser gerenciadas corretamente mesmo se um ou mais destinatários estiverem offline.</span><span class="sxs-lookup"><span data-stu-id="c1478-128">Subsystems can be managed independently, and messages can be properly managed even if one or more receivers are offline.</span></span>

- <span data-ttu-id="c1478-129">Ela aumenta a escalabilidade e melhora a capacidade de resposta do remetente.</span><span class="sxs-lookup"><span data-stu-id="c1478-129">It increases scalability and improves responsiveness of the sender.</span></span> <span data-ttu-id="c1478-130">O remetente pode enviar rapidamente uma única mensagem para o canal de entrada, e voltar às responsabilidades de processamento principais.</span><span class="sxs-lookup"><span data-stu-id="c1478-130">The sender can quickly send a single message to the input channel, then return to its core processing responsibilities.</span></span> <span data-ttu-id="c1478-131">A infraestrutura de mensagens é responsável por garantir que as mensagens sejam entregues aos assinantes interessados.</span><span class="sxs-lookup"><span data-stu-id="c1478-131">The messaging infrastructure is responsible for ensuring messages are delivered to interested subscribers.</span></span>

- <span data-ttu-id="c1478-132">Isso aumenta a confiabilidade.</span><span class="sxs-lookup"><span data-stu-id="c1478-132">It improves reliability.</span></span> <span data-ttu-id="c1478-133">Mensagens assíncronas ajudam na execução tranquila dos aplicativos sob cargas maiores e lidam com falhas intermitentes com mais eficiência.</span><span class="sxs-lookup"><span data-stu-id="c1478-133">Asynchronous messaging helps applications continue to run smoothly under increased loads and handle intermittent failures more effectively.</span></span>

- <span data-ttu-id="c1478-134">Ela permite o processamento agendado ou adiado.</span><span class="sxs-lookup"><span data-stu-id="c1478-134">It allows for deferred or scheduled processing.</span></span> <span data-ttu-id="c1478-135">Os assinantes podem esperar para ver as mensagens em um horário de pouco movimento, ou as mensagens podem ser roteadas ou processadas de acordo com um agendamento específico.</span><span class="sxs-lookup"><span data-stu-id="c1478-135">Subscribers can wait to pick up messages until off-peak hours, or messages can be routed or processed according to a specific schedule.</span></span>

- <span data-ttu-id="c1478-136">Ela permite uma integração mais simples entre sistemas com plataformas diferentes, linguagens de programação ou protocolos de comunicação, bem como entre sistemas locais e aplicativos em execução na nuvem.</span><span class="sxs-lookup"><span data-stu-id="c1478-136">It enables simpler integration between systems using different platforms, programming languages, or communication protocols, as well as between on-premises systems and applications running in the cloud.</span></span>

- <span data-ttu-id="c1478-137">Ela facilita fluxos de trabalho assíncronos em toda a empresa.</span><span class="sxs-lookup"><span data-stu-id="c1478-137">It facilitates asynchronous workflows across an enterprise.</span></span>

- <span data-ttu-id="c1478-138">Ela melhora a capacidade de teste.</span><span class="sxs-lookup"><span data-stu-id="c1478-138">It improves testability.</span></span> <span data-ttu-id="c1478-139">Os canais podem ser monitorados, e as mensagens inspecionadas ou registradas como parte de uma estratégia de teste geral de integração.</span><span class="sxs-lookup"><span data-stu-id="c1478-139">Channels can be monitored and messages can be inspected or logged as part of an overall integration test strategy.</span></span>

- <span data-ttu-id="c1478-140">Ela proporciona uma separação das preocupações com seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="c1478-140">It provides separation of concerns for your applications.</span></span> <span data-ttu-id="c1478-141">Cada aplicativo pode se concentrar em suas funcionalidades principais, enquanto a infraestrutura de mensagens lida com tudo que é necessário para rotear de forma confiável as mensagens para vários consumidores.</span><span class="sxs-lookup"><span data-stu-id="c1478-141">Each application can focus on its core capabilities, while the messaging infrastructure handles everything required to reliably route messages to multiple consumers.</span></span> 

## <a name="issues-and-considerations"></a><span data-ttu-id="c1478-142">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="c1478-142">Issues and considerations</span></span>

<span data-ttu-id="c1478-143">Considere os seguintes pontos ao decidir como implementar esse padrão:</span><span class="sxs-lookup"><span data-stu-id="c1478-143">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="c1478-144">**Tecnologias existentes.**</span><span class="sxs-lookup"><span data-stu-id="c1478-144">**Existing technologies.**</span></span> <span data-ttu-id="c1478-145">Recomendamos usar os produtos e serviços de mensagens disponíveis que dão suporte ao modelo publish-subscribe, em vez de criar seu próprio modelo.</span><span class="sxs-lookup"><span data-stu-id="c1478-145">It is strongly recommended to use available messaging products and services that support a publish-subscribe model, rather than building your own.</span></span> <span data-ttu-id="c1478-146">No Azure, considere o uso do [Barramento de Serviço](/azure/service-bus-messaging/) ou da [Grade de Eventos](/azure/event-grid/).</span><span class="sxs-lookup"><span data-stu-id="c1478-146">In Azure, consider using [Service Bus](/azure/service-bus-messaging/) or [Event Grid](/azure/event-grid/).</span></span> <span data-ttu-id="c1478-147">Outras tecnologias que podem ser usadas para mensagens de pub/sub incluem Apache Kafka, RabbitMQ e Redis.</span><span class="sxs-lookup"><span data-stu-id="c1478-147">Other technologies that can be used for pub/sub messaging include Redis, RabbitMQ, and Apache Kafka.</span></span>

- <span data-ttu-id="c1478-148">**Manipulação de assinatura.**</span><span class="sxs-lookup"><span data-stu-id="c1478-148">**Subscription handling.**</span></span> <span data-ttu-id="c1478-149">A infraestrutura de mensagens deve fornecer mecanismos que os consumidores possam usar para assinar ou cancelar a assinatura de canais disponíveis.</span><span class="sxs-lookup"><span data-stu-id="c1478-149">The messaging infrastructure must provide mechanisms that consumers can use to subscribe to or unsubscribe from available channels.</span></span>

- <span data-ttu-id="c1478-150">**Segurança.**</span><span class="sxs-lookup"><span data-stu-id="c1478-150">**Security.**</span></span> <span data-ttu-id="c1478-151">A conexão com qualquer canal de mensagem deve ser restrita por uma política de segurança, para impedir a interceptação por usuários ou aplicativos não autorizados.</span><span class="sxs-lookup"><span data-stu-id="c1478-151">Connecting to any message channel must be restricted by security policy to prevent eavesdropping by unauthorized users or applications.</span></span>

- <span data-ttu-id="c1478-152">**Subconjuntos de mensagens.**</span><span class="sxs-lookup"><span data-stu-id="c1478-152">**Subsets of messages.**</span></span> <span data-ttu-id="c1478-153">Geralmente, os assinantes só têm interesse em um subconjunto das mensagens distribuídas por um publicador.</span><span class="sxs-lookup"><span data-stu-id="c1478-153">Subscribers are usually only interested in subset of the messages distributed by a publisher.</span></span> <span data-ttu-id="c1478-154">Frequentemente, os serviços de mensagens permitem que os assinantes restrinjam o conjunto de mensagens recebidas por:</span><span class="sxs-lookup"><span data-stu-id="c1478-154">Messaging services often allow subscribers to narrow the set of messages received by:</span></span>

  - <span data-ttu-id="c1478-155">**Tópicos.**</span><span class="sxs-lookup"><span data-stu-id="c1478-155">**Topics.**</span></span> <span data-ttu-id="c1478-156">Cada tópico tem um canal de saída dedicado, e cada consumidor pode assinar todos os tópicos relevantes.</span><span class="sxs-lookup"><span data-stu-id="c1478-156">Each topic has a dedicated output channel, and each consumer can subscribe to all relevant topics.</span></span>
  - <span data-ttu-id="c1478-157">**Filtragem de conteúdo.**</span><span class="sxs-lookup"><span data-stu-id="c1478-157">**Content filtering.**</span></span> <span data-ttu-id="c1478-158">As mensagens são inspecionadas e distribuídas com base no conteúdo de cada uma delas.</span><span class="sxs-lookup"><span data-stu-id="c1478-158">Messages are inspected and distributed based on the content of each message.</span></span> <span data-ttu-id="c1478-159">Cada assinante pode especificar o conteúdo no qual tem interesse.</span><span class="sxs-lookup"><span data-stu-id="c1478-159">Each subscriber can specify the content it is interested in.</span></span>

- <span data-ttu-id="c1478-160">**Assinantes curinga.**</span><span class="sxs-lookup"><span data-stu-id="c1478-160">**Wildcard subscribers.**</span></span> <span data-ttu-id="c1478-161">Considere a possibilidade de permitir que os assinantes se inscrevam em vários tópicos por meio de curingas.</span><span class="sxs-lookup"><span data-stu-id="c1478-161">Consider allowing subscribers to subscribe to multiple topics via wildcards.</span></span>

- <span data-ttu-id="c1478-162">**Comunicação bidirecional.**</span><span class="sxs-lookup"><span data-stu-id="c1478-162">**Bi-directional communication.**</span></span> <span data-ttu-id="c1478-163">Os canais em um sistema publish-subscribe são tratados como unidirecionais.</span><span class="sxs-lookup"><span data-stu-id="c1478-163">The channels in a publish-subscribe system are treated as unidirectional.</span></span> <span data-ttu-id="c1478-164">Se um assinante específico precisar enviar uma confirmação ou informar o status ao publicador, considere o uso do [Padrão de solicitação/resposta](http://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html).</span><span class="sxs-lookup"><span data-stu-id="c1478-164">If a specific subscriber needs to send acknowledgement or communicate status back to the publisher, consider using the [Request/Reply Pattern](http://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html).</span></span> <span data-ttu-id="c1478-165">Esse padrão usa um canal para enviar uma mensagem ao assinante, e um canal de resposta separado para se comunicar com o publicador.</span><span class="sxs-lookup"><span data-stu-id="c1478-165">This pattern uses one channel to send a message to the subscriber, and a separate reply channel for communicating back to the publisher.</span></span>

- <span data-ttu-id="c1478-166">**Ordenação de mensagem.**</span><span class="sxs-lookup"><span data-stu-id="c1478-166">**Message ordering.**</span></span> <span data-ttu-id="c1478-167">A ordem na qual as instâncias do consumidor recebem as mensagens não é garantida, e não reflete necessariamente a ordem na qual as mensagens foram criadas.</span><span class="sxs-lookup"><span data-stu-id="c1478-167">The order in which consumer instances receive messages isn't guaranteed, and doesn't necessarily reflect the order in which the messages were created.</span></span> <span data-ttu-id="c1478-168">Projete o sistema para garantir que o processamento de mensagens seja idempotente, para ajudar a eliminar qualquer dependência em relação à ordem de manipulação das mensagens.</span><span class="sxs-lookup"><span data-stu-id="c1478-168">Design the system to ensure that message processing is idempotent to help eliminate any dependency on the order of message handling.</span></span>

- <span data-ttu-id="c1478-169">**Prioridade da mensagem.**</span><span class="sxs-lookup"><span data-stu-id="c1478-169">**Message priority.**</span></span> <span data-ttu-id="c1478-170">Algumas soluções podem exigir que as mensagens sejam processadas em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="c1478-170">Some solutions may require that messages are processed in a specific order.</span></span> <span data-ttu-id="c1478-171">O [Padrão de fila de prioridade](priority-queue.md) fornece um mecanismo para garantir que mensagens específicas sejam entregues antes de outras.</span><span class="sxs-lookup"><span data-stu-id="c1478-171">The [Priority Queue pattern](priority-queue.md) provides a mechanism for ensuring specific messages are delivered before others.</span></span>

- <span data-ttu-id="c1478-172">**Mensagens suspeitas.**</span><span class="sxs-lookup"><span data-stu-id="c1478-172">**Poison messages.**</span></span> <span data-ttu-id="c1478-173">Uma mensagem malformada ou uma tarefa que exige acesso a recursos que não estão disponíveis, pode causar uma falha em uma instância de serviço.</span><span class="sxs-lookup"><span data-stu-id="c1478-173">A malformed message, or a task that requires access to resources that aren't available, can cause a service instance to fail.</span></span> <span data-ttu-id="c1478-174">O sistema deve impedir que essas mensagens retornem para a fila.</span><span class="sxs-lookup"><span data-stu-id="c1478-174">The system should prevent such messages being returned to the queue.</span></span> <span data-ttu-id="c1478-175">Em vez disso, capture e armazene os detalhes dessas mensagens em outro lugar, para que elas possam ser analisadas, se for necessário.</span><span class="sxs-lookup"><span data-stu-id="c1478-175">Instead, capture and store the details of these messages elsewhere so that they can be analyzed if necessary.</span></span>

- <span data-ttu-id="c1478-176">**Mensagens repetidas.**</span><span class="sxs-lookup"><span data-stu-id="c1478-176">**Repeated messages.**</span></span> <span data-ttu-id="c1478-177">A mesma mensagem pode ser enviada mais de uma vez.</span><span class="sxs-lookup"><span data-stu-id="c1478-177">The same message might be sent more than once.</span></span> <span data-ttu-id="c1478-178">Por exemplo, o remetente pode falhar após a postagem de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-178">For example, the sender might fail after posting a message.</span></span> <span data-ttu-id="c1478-179">Em seguida, uma nova instância do remetente pode iniciar e repetir a mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-179">Then a new instance of the sender might start up and repeat the message.</span></span> <span data-ttu-id="c1478-180">A infraestrutura de mensagens deve implementar a detecção e remoção de mensagens duplicadas (também conhecida como de-duping) com base nas IDs das mensagens, para realizar, no máximo uma vez, a entrega das mensagens.</span><span class="sxs-lookup"><span data-stu-id="c1478-180">The messaging infrastructure should implement duplicate message detection and removal (also known as de-duping) based on message IDs in order to provide at-most-once delivery of messages.</span></span>

- <span data-ttu-id="c1478-181">**Expiração da mensagem.**</span><span class="sxs-lookup"><span data-stu-id="c1478-181">**Message expiration.**</span></span> <span data-ttu-id="c1478-182">Uma mensagem pode ter um tempo de vida limitado.</span><span class="sxs-lookup"><span data-stu-id="c1478-182">A message might have a limited lifetime.</span></span> <span data-ttu-id="c1478-183">Se ela não for processada dentro desse tempo, talvez não seja mais relevante e deva ser descartada.</span><span class="sxs-lookup"><span data-stu-id="c1478-183">If it isn't processed within this period, it might no longer be relevant and should be discarded.</span></span> <span data-ttu-id="c1478-184">Um remetente pode especificar um tempo de expiração como parte dos dados na mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-184">A sender can specify an experiation time as part of the data in the message.</span></span> <span data-ttu-id="c1478-185">Um receptor pode examinar essas informações antes de decidir se deve executar a lógica de negócios associada à mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-185">A receiver can examine this information before deciding whether to perform the business logic associated with the message.</span></span>

- <span data-ttu-id="c1478-186">**Agendamento de mensagem.**</span><span class="sxs-lookup"><span data-stu-id="c1478-186">**Message scheduling.**</span></span> <span data-ttu-id="c1478-187">Uma mensagem pode ser temporariamente embargada e não deve ser processada até uma data e hora específica.</span><span class="sxs-lookup"><span data-stu-id="c1478-187">A message might be temporarily embargoed and should not be processed until a specific date and time.</span></span> <span data-ttu-id="c1478-188">A mensagem não ficará disponível para um receptor até que esse tempo passe.</span><span class="sxs-lookup"><span data-stu-id="c1478-188">The message should not be available to a receiver until this time.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="c1478-189">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="c1478-189">When to use this pattern</span></span>

<span data-ttu-id="c1478-190">Use esse padrão quando:</span><span class="sxs-lookup"><span data-stu-id="c1478-190">Use this pattern when:</span></span>

- <span data-ttu-id="c1478-191">Um aplicativo precisar transmitir informações para um número considerável de consumidores.</span><span class="sxs-lookup"><span data-stu-id="c1478-191">An application needs to broadcast information to a significant number of consumers.</span></span>

- <span data-ttu-id="c1478-192">Um aplicativo precisar se comunicar com um ou mais aplicativos ou serviços desenvolvidos de forma independente, que podem usar plataformas, linguagens de programação e protocolos de comunicação diferentes.</span><span class="sxs-lookup"><span data-stu-id="c1478-192">An application needs to communicate with one or more independently-developed applications or services, which may use different platforms, programming languages, and communication protocols.</span></span>

- <span data-ttu-id="c1478-193">Um aplicativo puder enviar informações para os consumidores sem a necessidade de respostas em tempo real.</span><span class="sxs-lookup"><span data-stu-id="c1478-193">An application can send information to consumers without requiring real-time responses from the consumers.</span></span>

- <span data-ttu-id="c1478-194">Os sistemas que estão sendo integrados forem projetados para dar suporte a um modelo de consistência eventual para seus dados.</span><span class="sxs-lookup"><span data-stu-id="c1478-194">The systems being integrated are designed to support an eventual consistency model for their data.</span></span>

- <span data-ttu-id="c1478-195">Um aplicativo precisar comunicar informações para vários consumidores, que podem ter requisitos de disponibilidade ou cronogramas de tempo de atividade diferentes do remetente.</span><span class="sxs-lookup"><span data-stu-id="c1478-195">An application needs to communicate information to multiple consumers, which may have different availability requirements or uptime schedules than the sender.</span></span>

<span data-ttu-id="c1478-196">Esse padrão pode não ser útil quando:</span><span class="sxs-lookup"><span data-stu-id="c1478-196">This pattern might not be useful when:</span></span>

- <span data-ttu-id="c1478-197">Um aplicativo tiver apenas alguns consumidores que precisam de informações consideravelmente diferentes do aplicativo de produção.</span><span class="sxs-lookup"><span data-stu-id="c1478-197">An application has only a few consumers who need significantly different information from the producing application.</span></span>

- <span data-ttu-id="c1478-198">Um aplicativo exigir interação quase em tempo real com os consumidores.</span><span class="sxs-lookup"><span data-stu-id="c1478-198">An application requires near real-time interaction with consumers.</span></span>

## <a name="example"></a><span data-ttu-id="c1478-199">Exemplo</span><span class="sxs-lookup"><span data-stu-id="c1478-199">Example</span></span>

<span data-ttu-id="c1478-200">O diagrama a seguir mostra uma arquitetura de integração corporativa que usa o Barramento de Serviço para coordenar fluxos de trabalho, e a Grade de Eventos notifica os subsistemas sobre eventos que ocorrem.</span><span class="sxs-lookup"><span data-stu-id="c1478-200">The following diagram shows an enterprise integration architecture that uses Service Bus to coordinate workflows, and Event Grid notify subsystems of events that occur.</span></span> <span data-ttu-id="c1478-201">Para saber mais, confira [Integração corporativa no Azure usando filas de mensagens e eventos](../reference-architectures/enterprise-integration/queues-events.md).</span><span class="sxs-lookup"><span data-stu-id="c1478-201">For more information, see [Enterprise integration on Azure using message queues and events](../reference-architectures/enterprise-integration/queues-events.md).</span></span>

![Arquitetura de integração corporativa](../reference-architectures/enterprise-integration/_images/enterprise-integration-queues-events.png)

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="c1478-203">Diretrizes e padrões relacionados</span><span class="sxs-lookup"><span data-stu-id="c1478-203">Related patterns and guidance</span></span>

<span data-ttu-id="c1478-204">Os padrões e diretrizes a seguir também podem ser relevantes ao implementar esse padrão:</span><span class="sxs-lookup"><span data-stu-id="c1478-204">The following patterns and guidance might be relevant when implementing this pattern:</span></span>

- <span data-ttu-id="c1478-205">[Escolha entre os serviços do Azure que entregam mensagens](/azure/event-grid/compare-messaging-services).</span><span class="sxs-lookup"><span data-stu-id="c1478-205">[Choose between Azure services that deliver messages](/azure/event-grid/compare-messaging-services).</span></span>

- <span data-ttu-id="c1478-206">O [Estilo de arquitetura orientada a eventos](../guide/architecture-styles/event-driven.md) usa o sistema de mensagens pub/sub.</span><span class="sxs-lookup"><span data-stu-id="c1478-206">The [Event-driven architecture style](../guide/architecture-styles/event-driven.md) is an architecture style that uses pub/sub messaging.</span></span>

- <span data-ttu-id="c1478-207">[Prévia de mensagens assíncronas](https://msdn.microsoft.com/library/dn589781.aspx).</span><span class="sxs-lookup"><span data-stu-id="c1478-207">[Asynchronous Messaging Primer](https://msdn.microsoft.com/library/dn589781.aspx).</span></span> <span data-ttu-id="c1478-208">Filas de mensagens são um mecanismo de comunicação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="c1478-208">Message queues are an asynchronous communications mechanism.</span></span> <span data-ttu-id="c1478-209">Se um serviço do consumidor precisa enviar uma resposta para um aplicativo, pode ser necessário implementar alguma forma de mensagens de resposta.</span><span class="sxs-lookup"><span data-stu-id="c1478-209">If a consumer service needs to send a reply to an application, it might be necessary to implement some form of response messaging.</span></span> <span data-ttu-id="c1478-210">O Primer de mensagens assíncronas fornece informações sobre como implementar mensagens de solicitação/resposta usando filas de mensagens.</span><span class="sxs-lookup"><span data-stu-id="c1478-210">The Asynchronous Messaging Primer provides information on how to implement request/reply messaging using message queues.</span></span>

- <span data-ttu-id="c1478-211">[Padrão de observador](https://en.wikipedia.org/wiki/Observer_pattern).</span><span class="sxs-lookup"><span data-stu-id="c1478-211">[Observer Pattern](https://en.wikipedia.org/wiki/Observer_pattern).</span></span> <span data-ttu-id="c1478-212">O padrão Publish-Subscribe se baseia no padrão de observador, separando os assuntos de observadores por meio de mensagens assíncronas.</span><span class="sxs-lookup"><span data-stu-id="c1478-212">The Publish-Subscribe pattern builds on the Observer pattern by decoupling subjects from observers via asynchronous messaging.</span></span>

- <span data-ttu-id="c1478-213">[Padrão de agente de mensagem](https://en.wikipedia.org/wiki/Message_broker).</span><span class="sxs-lookup"><span data-stu-id="c1478-213">[Message Broker Pattern](https://en.wikipedia.org/wiki/Message_broker).</span></span> <span data-ttu-id="c1478-214">Muitos subsistemas de mensagens que dão suporte ao modelo publish-subscribe são implementados por meio de um agente de mensagem.</span><span class="sxs-lookup"><span data-stu-id="c1478-214">Many messaging subsystems that support a publish-subscribe modek are implemented via a message broker.</span></span>

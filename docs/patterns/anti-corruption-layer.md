---
title: Padrão de Camada Anticorrupção
titleSuffix: Cloud Design Patterns
description: Implemente uma camada de fachada ou adaptador entre um aplicativo moderno e um sistema herdado.
keywords: padrão de design
author: dragon119
ms.date: 06/23/2017
ms.custom: seodec18
ms.openlocfilehash: d1023140deea4a2714c762945935d0838136e508
ms.sourcegitcommit: 680c9cef945dff6fee5e66b38e24f07804510fa9
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/04/2019
ms.locfileid: "54011269"
---
# <a name="anti-corruption-layer-pattern"></a><span data-ttu-id="b8c1e-104">Padrão de Camada Anticorrupção</span><span class="sxs-lookup"><span data-stu-id="b8c1e-104">Anti-Corruption Layer pattern</span></span>

<span data-ttu-id="b8c1e-105">Implemente uma camada de fachada ou de adaptador entre diferentes subsistemas que não compartilham a mesma semântica.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-105">Implement a façade or adapter layer between different subsystems that don't share the same semantics.</span></span> <span data-ttu-id="b8c1e-106">Essa camada move solicitações feitas por um subsistema para o outro subsistema.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-106">This layer translates requests that one subsystem makes to the other subsystem.</span></span> <span data-ttu-id="b8c1e-107">Use esse padrão para garantir que o design do aplicativo não seja limitado por dependências em subsistemas externos.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-107">Use this pattern to ensure that an application's design is not limited by dependencies on outside subsystems.</span></span> <span data-ttu-id="b8c1e-108">Esse padrão foi descrito pela primeira vez por Eric Evans em *Design orientado ao domínio*.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-108">This pattern was first described by Eric Evans in *Domain-Driven Design*.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="b8c1e-109">Contexto e problema</span><span class="sxs-lookup"><span data-stu-id="b8c1e-109">Context and problem</span></span>

<span data-ttu-id="b8c1e-110">A maioria dos aplicativos depende de outros sistemas para alguns dados ou funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-110">Most applications rely on other systems for some data or functionality.</span></span> <span data-ttu-id="b8c1e-111">Por exemplo, quando um aplicativo herdado é migrado para um sistema moderno, talvez ainda precise de recursos herdados existentes.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-111">For example, when a legacy application is migrated to a modern system, it may still need existing legacy resources.</span></span> <span data-ttu-id="b8c1e-112">Os novos recursos devem ser capazes de chamar o sistema herdado.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-112">New features must be able to call the legacy system.</span></span> <span data-ttu-id="b8c1e-113">Isso é especialmente verdadeiro para migrações graduais, onde os diferentes recursos de um aplicativo maior são movidos para um sistema moderno ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-113">This is especially true of gradual migrations, where different features of a larger application are moved to a modern system over time.</span></span>

<span data-ttu-id="b8c1e-114">Geralmente, esses sistemas herdados sofrem problemas de qualidade, como esquemas de dados diferentes ou APIs obsoletas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-114">Often these legacy systems suffer from quality issues such as convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="b8c1e-115">Os recursos e tecnologias usados em sistemas herdados podem variar amplamente em sistemas mais modernos.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-115">The features and technologies used in legacy systems can vary widely from more modern systems.</span></span> <span data-ttu-id="b8c1e-116">Para interagir com o sistema herdado, pode ser necessário que o novo aplicativo dê suporte a infraestrutura, protocolos, modelos de dados, APIs ou outros recursos desatualizados que você não colocaria em um aplicativo moderno.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-116">To interoperate with the legacy system, the new application may need to support outdated infrastructure, protocols, data models, APIs, or other features that you wouldn't otherwise put into a modern application.</span></span>

<span data-ttu-id="b8c1e-117">Manter o acesso entre sistemas herdados e novos pode forçar o novo sistema a aderir a pelo menos algumas das APIs do sistema herdado ou outras semânticas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-117">Maintaining access between new and legacy systems can force the new system to adhere to at least some of the legacy system's APIs or other semantics.</span></span> <span data-ttu-id="b8c1e-118">Quando esses recursos herdados tiverem problemas de qualidade, o suporte a eles "corrompe" o que, caso contrário, seria um aplicativo moderno projetado corretamente.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-118">When these legacy features have quality issues, supporting them "corrupts" what might otherwise be a cleanly designed modern application.</span></span>

<span data-ttu-id="b8c1e-119">Problemas semelhantes podem surgir com qualquer sistema externo que sua equipe de desenvolvimento não controle, não apenas com sistemas herdados.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-119">Similar issues can arise with any external system that your development team doesn't control, not just legacy systems.</span></span>

## <a name="solution"></a><span data-ttu-id="b8c1e-120">Solução</span><span class="sxs-lookup"><span data-stu-id="b8c1e-120">Solution</span></span>

<span data-ttu-id="b8c1e-121">Isole os diferentes subsistemas colocando uma camada anticorrupção entre eles.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-121">Isolate the different subsystems by placing an anti-corruption layer between them.</span></span> <span data-ttu-id="b8c1e-122">Essa camada move as comunicações entre os dois sistemas, permitindo que um sistema permaneça inalterado, enquanto o outro pode evitar comprometer seu design e sua abordagem tecnológica.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-122">This layer translates communications between the two systems, allowing one system to remain unchanged while the other can avoid compromising its design and technological approach.</span></span>

![Diagrama do padrão da Camada Anticorrupção](./_images/anti-corruption-layer.png)

<span data-ttu-id="b8c1e-124">O diagrama acima mostra um aplicativo com dois subsistemas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-124">The diagram above shows an application with two subsystems.</span></span> <span data-ttu-id="b8c1e-125">O Subsistema A chama para o Subsistema B por meio de uma camada anticorrupção.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-125">Subsystem A calls to subsystem B through an anti-corruption layer.</span></span> <span data-ttu-id="b8c1e-126">A comunicação entre o Subsistema A e a camada anticorrupção sempre usa o modelo de dados e a arquitetura do subsistema A. Chamadas da camada anticorrupção para o Subsistema B estão em conformidade com o modelo de dados ou os métodos desse subsistema.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-126">Communication between subsystem A and the anti-corruption layer always uses the data model and architecture of subsystem A. Calls from the anti-corruption layer to subsystem B conform to that subsystem's data model or methods.</span></span> <span data-ttu-id="b8c1e-127">A camada anticorrupção contém toda a lógica necessária para traduzir entre os dois sistemas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-127">The anti-corruption layer contains all of the logic necessary to translate between the two systems.</span></span> <span data-ttu-id="b8c1e-128">A camada pode ser implementada como um componente do aplicativo ou como um serviço independente.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-128">The layer can be implemented as a component within the application or as an independent service.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="b8c1e-129">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="b8c1e-129">Issues and considerations</span></span>

- <span data-ttu-id="b8c1e-130">A camada anticorrupção pode adicionar latência para chamadas feitas entre os dois sistemas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-130">The anti-corruption layer may add latency to calls made between the two systems.</span></span>
- <span data-ttu-id="b8c1e-131">A camada anticorrupção adiciona outro serviço que deve ser gerenciado e mantido.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-131">The anti-corruption layer adds an additional service that must be managed and maintained.</span></span>
- <span data-ttu-id="b8c1e-132">Considere como a camada anticorrupção será dimensionada.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-132">Consider how your anti-corruption layer will scale.</span></span>
- <span data-ttu-id="b8c1e-133">Considere se você precisa de mais de uma camada anticorrupção.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-133">Consider whether you need more than one anti-corruption layer.</span></span> <span data-ttu-id="b8c1e-134">Talvez você queira decompor a funcionalidade em vários serviços usando tecnologias ou linguagens diferentes, ou pode haver outros motivos para particionar a camada anticorrupção.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-134">You may want to decompose functionality into multiple services using different technologies or languages, or there may be other reasons to partition the anti-corruption layer.</span></span>
- <span data-ttu-id="b8c1e-135">Considere como a camada anticorrupção será gerenciada em relação com outros aplicativos ou serviços.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-135">Consider how the anti-corruption layer will be managed in relation with your other applications or services.</span></span> <span data-ttu-id="b8c1e-136">Como ele será integrado aos processos de monitoramento, versão e configuração?</span><span class="sxs-lookup"><span data-stu-id="b8c1e-136">How will it be integrated into your monitoring, release, and configuration processes?</span></span>
- <span data-ttu-id="b8c1e-137">Certifique-se de que a transação e a consistência de dados sejam mantidas e que possam ser monitoradas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-137">Make sure transaction and data consistency are maintained and can be monitored.</span></span>
- <span data-ttu-id="b8c1e-138">Leve em consideração se a camada anticorrupção precisa lidar com toda a comunicação entre diferentes subsistemas ou apenas com um subconjunto de recursos.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-138">Consider whether the anti-corruption layer needs to handle all communication between different subsystems, or just a subset of features.</span></span>
- <span data-ttu-id="b8c1e-139">Se a camada anticorrupção fizer parte de uma estratégia de migração, leve em consideração se ela será permanente ou se será desativada depois que todas as funcionalidades herdadas forem migradas.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-139">If the anti-corruption layer is part of an application migration strategy, consider whether it will be permanent, or will be retired after all legacy functionality has been migrated.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="b8c1e-140">Quando usar esse padrão</span><span class="sxs-lookup"><span data-stu-id="b8c1e-140">When to use this pattern</span></span>

<span data-ttu-id="b8c1e-141">Use esse padrão quando:</span><span class="sxs-lookup"><span data-stu-id="b8c1e-141">Use this pattern when:</span></span>

- <span data-ttu-id="b8c1e-142">Haja um plano de migração que acontecerá em vários estágios, mas a integração entre os sistemas novo e herdado precisará ser mantida.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-142">A migration is planned to happen over multiple stages, but integration between new and legacy systems needs to be maintained.</span></span>
- <span data-ttu-id="b8c1e-143">Dois ou mais subsistemas têm semânticas diferentes, mas ainda precisam se comunicar.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-143">Two or more subsystems have different semantics, but still need to communicate.</span></span>

<span data-ttu-id="b8c1e-144">Esse padrão poderá não ser adequado se não houver nenhuma diferença significativa semântica entre os sistemas herdados e novos.</span><span class="sxs-lookup"><span data-stu-id="b8c1e-144">This pattern may not be suitable if there are no significant semantic differences between new and legacy systems.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="b8c1e-145">Diretrizes relacionadas</span><span class="sxs-lookup"><span data-stu-id="b8c1e-145">Related guidance</span></span>

- [<span data-ttu-id="b8c1e-146">Padrão do estrangulador</span><span class="sxs-lookup"><span data-stu-id="b8c1e-146">Strangler pattern</span></span>](./strangler.md)

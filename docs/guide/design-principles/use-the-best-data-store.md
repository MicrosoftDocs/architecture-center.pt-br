---
title: Usar o melhor armazenamento de dados para o trabalho
titleSuffix: Azure Application Architecture Guide
description: Escolha a tecnologia de armazenamento que é o mais adequado para seus dados e como ele será usado.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: 2f83e7a184e8fa94f49da4e8fd5252396ecfd632
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/20/2019
ms.locfileid: "58242007"
---
# <a name="use-the-best-data-store-for-the-job"></a><span data-ttu-id="33a02-103">Usar o melhor armazenamento de dados para o trabalho</span><span class="sxs-lookup"><span data-stu-id="33a02-103">Use the best data store for the job</span></span>

## <a name="pick-the-storage-technology-that-is-the-best-fit-for-your-data-and-how-it-will-be-used"></a><span data-ttu-id="33a02-104">Escolha a tecnologia de armazenamento mais adequada aos seus dados e como eles serão usados</span><span class="sxs-lookup"><span data-stu-id="33a02-104">Pick the storage technology that is the best fit for your data and how it will be used</span></span>

<span data-ttu-id="33a02-105">Já se foram os dias em que você simplesmente colocaria todos os seus dados em um grande banco de dados SQL relacional.</span><span class="sxs-lookup"><span data-stu-id="33a02-105">Gone are the days when you would just stick all of your data into a big relational SQL database.</span></span> <span data-ttu-id="33a02-106">Bancos de dados relacionais são muito bons no que fazem &mdash; fornecer garantias ACID para transações sobre dados relacionais.</span><span class="sxs-lookup"><span data-stu-id="33a02-106">Relational databases are very good at what they do &mdash; providing ACID guarantees for transactions over relational data.</span></span> <span data-ttu-id="33a02-107">Porém, isso tem alguns custos:</span><span class="sxs-lookup"><span data-stu-id="33a02-107">But they come with some costs:</span></span>

- <span data-ttu-id="33a02-108">As consultas podem exigir junções caras.</span><span class="sxs-lookup"><span data-stu-id="33a02-108">Queries may require expensive joins.</span></span>
- <span data-ttu-id="33a02-109">Os dados devem ser normalizados e estar em conformidade com um esquema predefinido (esquema na gravação).</span><span class="sxs-lookup"><span data-stu-id="33a02-109">Data must be normalized and conform to a predefined schema (schema on write).</span></span>
- <span data-ttu-id="33a02-110">A contenção de bloqueio pode afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="33a02-110">Lock contention may impact performance.</span></span>

<span data-ttu-id="33a02-111">Em qualquer solução de grande, é provável que uma tecnologia de armazenamento de dados única não atenda a todas as suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="33a02-111">In any large solution, it's likely that a single data store technology won't fill all your needs.</span></span> <span data-ttu-id="33a02-112">Alternativas a bancos de dados relacionais incluem repositórios de chave/valor, bancos de dados de documentos, bancos de dados de mecanismos de pesquisa, bancos de dados de séries de tempo, bancos de dados de família de colunas e bancos de dados de gráficos.</span><span class="sxs-lookup"><span data-stu-id="33a02-112">Alternatives to relational databases include key/value stores, document databases, search engine databases, time series databases, column family databases, and graph databases.</span></span> <span data-ttu-id="33a02-113">Cada um tem vantagens e desvantagens, e diferentes tipos de dados se encaixam mais naturalmente em um ou em outro.</span><span class="sxs-lookup"><span data-stu-id="33a02-113">Each has pros and cons, and different types of data fit more naturally into one or another.</span></span>

<span data-ttu-id="33a02-114">Por exemplo, você pode armazenar um catálogo de produtos em um banco de dados de documentos, como o Cosmos DB, que permite que um esquema flexível.</span><span class="sxs-lookup"><span data-stu-id="33a02-114">For example, you might store a product catalog in a document database, such as Cosmos DB, which allows for a flexible schema.</span></span> <span data-ttu-id="33a02-115">Nesse caso, cada descrição de produto é um documento independente.</span><span class="sxs-lookup"><span data-stu-id="33a02-115">In that case, each product description is a self-contained document.</span></span> <span data-ttu-id="33a02-116">Para consultas em todo o catálogo, você pode indexar o catálogo e armazenar o índice no Azure Search.</span><span class="sxs-lookup"><span data-stu-id="33a02-116">For queries over the entire catalog, you might index the catalog and store the index in Azure Search.</span></span> <span data-ttu-id="33a02-117">O inventário de produto pode ir para um banco de dados SQL, porque esses dados exigem garantias ACID.</span><span class="sxs-lookup"><span data-stu-id="33a02-117">Product inventory might go into a SQL database, because that data requires ACID guarantees.</span></span>

<span data-ttu-id="33a02-118">Lembre-se de que os dados incluem mais do que apenas os dados de aplicativo persistentes.</span><span class="sxs-lookup"><span data-stu-id="33a02-118">Remember that data includes more than just the persisted application data.</span></span> <span data-ttu-id="33a02-119">Eles também incluem logs de aplicativo, eventos, mensagens e caches.</span><span class="sxs-lookup"><span data-stu-id="33a02-119">It also includes application logs, events, messages, and caches.</span></span>

## <a name="recommendations"></a><span data-ttu-id="33a02-120">Recomendações</span><span class="sxs-lookup"><span data-stu-id="33a02-120">Recommendations</span></span>

<span data-ttu-id="33a02-121">**Não use um banco de dados relacional para tudo**.</span><span class="sxs-lookup"><span data-stu-id="33a02-121">**Don't use a relational database for everything**.</span></span> <span data-ttu-id="33a02-122">Considere outros repositórios de dados quando apropriado.</span><span class="sxs-lookup"><span data-stu-id="33a02-122">Consider other data stores when appropriate.</span></span> <span data-ttu-id="33a02-123">Consulte [Escolher o armazenamento de dados correto][data-store-overview].</span><span class="sxs-lookup"><span data-stu-id="33a02-123">See [Choose the right data store][data-store-overview].</span></span>

<span data-ttu-id="33a02-124">**Adotar persistência poliglota**.</span><span class="sxs-lookup"><span data-stu-id="33a02-124">**Embrace polyglot persistence**.</span></span> <span data-ttu-id="33a02-125">Em qualquer solução de grande, é provável que uma tecnologia de armazenamento de dados única não atenda a todas as suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="33a02-125">In any large solution, it's likely that a single data store technology won't fill all your needs.</span></span>

<span data-ttu-id="33a02-126">**Considere o tipo de dados**.</span><span class="sxs-lookup"><span data-stu-id="33a02-126">**Consider the type of data**.</span></span> <span data-ttu-id="33a02-127">Por exemplo, colocar os dados transacionais em SQL, colocar documentos JSON em um banco de dados de documento, colocar dados de telemetria em um banco de dados de série de tempo, colocar logs de aplicativo em Elasticsearch e colocar blobs no Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="33a02-127">For example, put transactional data into SQL, put JSON documents into a document database, put telemetry data into a time series data base, put application logs in Elasticsearch, and put blobs in Azure Blob Storage.</span></span>

<span data-ttu-id="33a02-128">**Prefira disponibilidade a consistência (forte)**.</span><span class="sxs-lookup"><span data-stu-id="33a02-128">**Prefer availability over (strong) consistency**.</span></span> <span data-ttu-id="33a02-129">O teorema CAP implica que um sistema distribuído deve equilibrar disponibilidade e consistência.</span><span class="sxs-lookup"><span data-stu-id="33a02-129">The CAP theorem implies that a distributed system must make trade-offs between availability and consistency.</span></span> <span data-ttu-id="33a02-130">(Partições de rede, o outro segmento do teorema CAP, nunca podem ser completamente evitadas.) Geralmente, você pode atingir maior disponibilidade adotando um modelo de *consistência eventual*.</span><span class="sxs-lookup"><span data-stu-id="33a02-130">(Network partitions, the other leg of the CAP theorem, can never be completely avoided.) Often, you can achieve higher availability by adopting an *eventual consistency* model.</span></span>

<span data-ttu-id="33a02-131">**Considere o conjunto de habilidades da equipe de desenvolvimento**.</span><span class="sxs-lookup"><span data-stu-id="33a02-131">**Consider the skill set of the development team**.</span></span> <span data-ttu-id="33a02-132">Há vantagens em usar a persistência poliglota, mas é possível exagerar.</span><span class="sxs-lookup"><span data-stu-id="33a02-132">There are advantages to using polyglot persistence, but it's possible to go overboard.</span></span> <span data-ttu-id="33a02-133">Adotar uma nova tecnologia de armazenamento de dados requer um novo conjunto de habilidades.</span><span class="sxs-lookup"><span data-stu-id="33a02-133">Adopting a new data storage technology requires a new set of skills.</span></span> <span data-ttu-id="33a02-134">A equipe de desenvolvimento deve entender como tirar o máximo proveito da tecnologia.</span><span class="sxs-lookup"><span data-stu-id="33a02-134">The development team must understand how to get the most out of the technology.</span></span> <span data-ttu-id="33a02-135">Ela deve entender os padrões de uso apropriados, como otimizar consultas, ajustar o desempenho e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="33a02-135">They must understand appropriate usage patterns, how to optimize queries, tune for performance, and so on.</span></span> <span data-ttu-id="33a02-136">Considere isso ao avaliar tecnologias de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="33a02-136">Factor this in when considering storage technologies.</span></span>

<span data-ttu-id="33a02-137">**Use transações de compensação**.</span><span class="sxs-lookup"><span data-stu-id="33a02-137">**Use compensating transactions**.</span></span> <span data-ttu-id="33a02-138">Um efeito colateral de persistência poliglota é que uma única transação pode gravar dados em vários repositórios.</span><span class="sxs-lookup"><span data-stu-id="33a02-138">A side effect of polyglot persistence is that single transaction might write data to multiple stores.</span></span> <span data-ttu-id="33a02-139">Se algo falhar, use transações de compensação para desfazer todas as etapas já concluídas.</span><span class="sxs-lookup"><span data-stu-id="33a02-139">If something fails, use compensating transactions to undo any steps that already completed.</span></span>

<span data-ttu-id="33a02-140">**Examinar contextos limitados**.</span><span class="sxs-lookup"><span data-stu-id="33a02-140">**Look at bounded contexts**.</span></span> <span data-ttu-id="33a02-141">*Contexto limitado* é um termo de design conduzido por domínio.</span><span class="sxs-lookup"><span data-stu-id="33a02-141">*Bounded context* is a term from domain driven design.</span></span> <span data-ttu-id="33a02-142">Um contexto associado é um limite explícito em torno de um modelo de domínio e define a quais partes do domínio o modelo se aplica.</span><span class="sxs-lookup"><span data-stu-id="33a02-142">A bounded context is an explicit boundary around a domain model, and defines which parts of the domain the model applies to.</span></span> <span data-ttu-id="33a02-143">Idealmente, um contexto limitado é mapeado para um subdomínio do domínio da empresa.</span><span class="sxs-lookup"><span data-stu-id="33a02-143">Ideally, a bounded context maps to a subdomain of the business domain.</span></span> <span data-ttu-id="33a02-144">Os contextos limitados no seu sistema são um lugar natural considerar persistência poliglota.</span><span class="sxs-lookup"><span data-stu-id="33a02-144">The bounded contexts in your system are a natural place to consider polyglot persistence.</span></span> <span data-ttu-id="33a02-145">Por exemplo, "produtos" podem aparecer no subdomínio do Catálogo de Produtos e no subdomínio de Estoque de Produtos, mas é muito provável que esses dois subdomínios tenham requisitos diferentes para armazenar, atualizar e consultar produtos.</span><span class="sxs-lookup"><span data-stu-id="33a02-145">For example, "products" may appear in both the Product Catalog subdomain and the Product Inventory subdomain, but it's very likely that these two subdomains have different requirements for storing, updating, and querying products.</span></span>

[data-store-overview]: ../technology-choices/data-store-overview.md

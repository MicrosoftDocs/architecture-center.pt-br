---
title: Partição de limites
titleSuffix: Azure Application Architecture Guide
description: Use particionamento para contornar o banco de dados, rede e limites de computação.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: 76590d2a0c16df9d599e7d4a856a84b5e3bdcec8
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/20/2019
ms.locfileid: "58241777"
---
# <a name="partition-around-limits"></a><span data-ttu-id="5977c-103">Partição de limites</span><span class="sxs-lookup"><span data-stu-id="5977c-103">Partition around limits</span></span>

## <a name="use-partitioning-to-work-around-database-network-and-compute-limits"></a><span data-ttu-id="5977c-104">Usar o particionamento para contornar os limites de banco de dados, de rede e de computação</span><span class="sxs-lookup"><span data-stu-id="5977c-104">Use partitioning to work around database, network, and compute limits</span></span>

<span data-ttu-id="5977c-105">Na nuvem, todos os serviços têm limites em sua capacidade de escalar verticalmente.</span><span class="sxs-lookup"><span data-stu-id="5977c-105">In the cloud, all services have limits in their ability to scale up.</span></span> <span data-ttu-id="5977c-106">Os limites de serviço do Azure estão documentados na [Assinatura e limites de serviço, cotas e restrições do Azure][azure-limits].</span><span class="sxs-lookup"><span data-stu-id="5977c-106">Azure service limits are documented in [Azure subscription and service limits, quotas, and constraints][azure-limits].</span></span> <span data-ttu-id="5977c-107">Os limites incluem o número de núcleos, o tamanho do banco de dados, a taxa de transferência de consulta e a taxa de transferência de rede.</span><span class="sxs-lookup"><span data-stu-id="5977c-107">Limits include number of cores, database size, query throughput, and network throughput.</span></span> <span data-ttu-id="5977c-108">Se o sistema ficar suficientemente grande, você poderá atingir um ou mais desses limites.</span><span class="sxs-lookup"><span data-stu-id="5977c-108">If your system grows sufficiently large, you may hit one or more of these limits.</span></span> <span data-ttu-id="5977c-109">Use o particionamento para solucionar esses limites.</span><span class="sxs-lookup"><span data-stu-id="5977c-109">Use partitioning to work around these limits.</span></span>

<span data-ttu-id="5977c-110">Há várias maneiras de particionar um sistema, como:</span><span class="sxs-lookup"><span data-stu-id="5977c-110">There are many ways to partition a system, such as:</span></span>

- <span data-ttu-id="5977c-111">Partição de um banco de dados para evitar o limite de tamanho do banco de dados, E/S de dados ou número de sessões simultâneas.</span><span class="sxs-lookup"><span data-stu-id="5977c-111">Partition a database to avoid limits on database size, data I/O, or number of concurrent sessions.</span></span>

- <span data-ttu-id="5977c-112">Partição de uma fila ou mensagem de barramento para evitar limites sobre o número de solicitações ou o número de conexões simultâneas.</span><span class="sxs-lookup"><span data-stu-id="5977c-112">Partition a queue or message bus to avoid limits on the number of requests or the number of concurrent connections.</span></span>

- <span data-ttu-id="5977c-113">Partição de um aplicativo Web do Serviço de Aplicativo para evitar limites no número de instâncias por plano do Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5977c-113">Partition an App Service web app to avoid limits on the number of instances per App Service plan.</span></span>

<span data-ttu-id="5977c-114">Um banco de dados pode ser particionado *horizontalmente*, *verticalmente* ou *funcionalmente*.</span><span class="sxs-lookup"><span data-stu-id="5977c-114">A database can be partitioned *horizontally*, *vertically*, or *functionally*.</span></span>

- <span data-ttu-id="5977c-115">No particionamento horizontal, também chamado de fragmentação, cada partição contém dados para um subconjunto do conjunto de dados total.</span><span class="sxs-lookup"><span data-stu-id="5977c-115">In horizontal partitioning, also called sharding, each partition holds data for a subset of the total data set.</span></span> <span data-ttu-id="5977c-116">As partições compartilham o mesmo esquema de dados.</span><span class="sxs-lookup"><span data-stu-id="5977c-116">The partitions share the same data schema.</span></span> <span data-ttu-id="5977c-117">Por exemplo, os clientes cujos nomes começam com A&ndash;M entram em uma partição, N&ndash;Z em outra partição.</span><span class="sxs-lookup"><span data-stu-id="5977c-117">For example, customers whose names start with A&ndash;M go into one partition, N&ndash;Z into another partition.</span></span>

- <span data-ttu-id="5977c-118">Com o particionamento vertical, cada partição contém um subconjunto dos campos para os itens no armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="5977c-118">In vertical partitioning, each partition holds a subset of the fields for the items in the data store.</span></span> <span data-ttu-id="5977c-119">Por exemplo, coloque os campos acessados com frequência em uma partição vertical e os campos acessados com menos frequência em outra.</span><span class="sxs-lookup"><span data-stu-id="5977c-119">For example, put frequently accessed fields in one partition, and less frequently accessed fields in another.</span></span>

- <span data-ttu-id="5977c-120">No particionamento funcional, os dados são particionados de acordo com a forma como eles são usados por cada contexto limitado no sistema.</span><span class="sxs-lookup"><span data-stu-id="5977c-120">In functional partitioning, data is partitioned according to how it is used by each bounded context in the system.</span></span> <span data-ttu-id="5977c-121">Por exemplo, armazene dados da fatura em uma partição e os dados de estoque de produtos em outra.</span><span class="sxs-lookup"><span data-stu-id="5977c-121">For example, store invoice data in one partition and product inventory data in another.</span></span> <span data-ttu-id="5977c-122">Os esquemas são independentes.</span><span class="sxs-lookup"><span data-stu-id="5977c-122">The schemas are independent.</span></span>

<span data-ttu-id="5977c-123">Para obter diretrizes mais detalhadas, veja [Particionamento de dados][data-partitioning-guidance].</span><span class="sxs-lookup"><span data-stu-id="5977c-123">For more detailed guidance, see [Data partitioning][data-partitioning-guidance].</span></span>

## <a name="recommendations"></a><span data-ttu-id="5977c-124">Recomendações</span><span class="sxs-lookup"><span data-stu-id="5977c-124">Recommendations</span></span>

<span data-ttu-id="5977c-125">**Particione partes diferentes do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="5977c-125">**Partition different parts of the application**.</span></span> <span data-ttu-id="5977c-126">Os bancos de dados são candidatos óbvios ao particionamento, mas também considere as instâncias de armazenamento, cache, filas e computação.</span><span class="sxs-lookup"><span data-stu-id="5977c-126">Databases are one obvious candidate for partitioning, but also consider storage, cache, queues, and compute instances.</span></span>

<span data-ttu-id="5977c-127">**Projete a chave de partição para evitar pontos de acesso**.</span><span class="sxs-lookup"><span data-stu-id="5977c-127">**Design the partition key to avoid hot spots**.</span></span> <span data-ttu-id="5977c-128">Se você particionar um banco de dados, mas se um fragmento ainda tiver a maioria das solicitações, você ainda não terá solucionado o problema.</span><span class="sxs-lookup"><span data-stu-id="5977c-128">If you partition a database, but one shard still gets the majority of the requests, then you haven't solved your problem.</span></span> <span data-ttu-id="5977c-129">Idealmente, a carga é distribuída uniformemente entre todas as partições.</span><span class="sxs-lookup"><span data-stu-id="5977c-129">Ideally, load gets distributed evenly across all the partitions.</span></span> <span data-ttu-id="5977c-130">Por exemplo, o hash por ID de cliente e não a primeira letra do nome do cliente, pois algumas letras são mais frequentes.</span><span class="sxs-lookup"><span data-stu-id="5977c-130">For example, hash by customer ID and not the first letter of the customer name, because some letters are more frequent.</span></span> <span data-ttu-id="5977c-131">O mesmo princípio se aplica no particionamento de uma fila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="5977c-131">The same principle applies when partitioning a message queue.</span></span> <span data-ttu-id="5977c-132">Selecione uma chave de partição que leve a uma distribuição uniforme de mensagens em um conjunto de filas.</span><span class="sxs-lookup"><span data-stu-id="5977c-132">Pick a partition key that leads to an even distribution of messages across the set of queues.</span></span> <span data-ttu-id="5977c-133">Para saber mais, veja [Fragmentação][sharding].</span><span class="sxs-lookup"><span data-stu-id="5977c-133">For more information, see [Sharding][sharding].</span></span>

<span data-ttu-id="5977c-134">**Particione em torno da assinatura do Azure e limites de serviço**.</span><span class="sxs-lookup"><span data-stu-id="5977c-134">**Partition around Azure subscription and service limits**.</span></span> <span data-ttu-id="5977c-135">Os componentes e os serviços individuais têm limites, mas também há limites para assinaturas e grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="5977c-135">Individual components and services have limits, but there are also limits for subscriptions and resource groups.</span></span> <span data-ttu-id="5977c-136">Para aplicativos muito grandes, talvez seja necessário particionar em torno desses limites.</span><span class="sxs-lookup"><span data-stu-id="5977c-136">For very large applications, you might need to partition around those limits.</span></span>

<span data-ttu-id="5977c-137">**Particione em níveis diferentes**.</span><span class="sxs-lookup"><span data-stu-id="5977c-137">**Partition at different levels**.</span></span> <span data-ttu-id="5977c-138">Considere um servidor de banco de dados implantado em uma máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="5977c-138">Consider a database server deployed on a VM.</span></span> <span data-ttu-id="5977c-139">A máquina virtual tem um VHD cujo backup é feito pelo Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="5977c-139">The VM has a VHD that is backed by Azure Storage.</span></span> <span data-ttu-id="5977c-140">A conta de armazenamento pertence a uma assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="5977c-140">The storage account belongs to an Azure subscription.</span></span> <span data-ttu-id="5977c-141">Observe que cada etapa na hierarquia tem limites.</span><span class="sxs-lookup"><span data-stu-id="5977c-141">Notice that each step in the hierarchy has limits.</span></span> <span data-ttu-id="5977c-142">O servidor de banco de dados pode ter um limite de pool de conexão.</span><span class="sxs-lookup"><span data-stu-id="5977c-142">The database server may have a connection pool limit.</span></span> <span data-ttu-id="5977c-143">As máquinas virtuais têm limites de CPU e de rede.</span><span class="sxs-lookup"><span data-stu-id="5977c-143">VMs have CPU and network limits.</span></span> <span data-ttu-id="5977c-144">O Armazenamento tem limites de IOPS.</span><span class="sxs-lookup"><span data-stu-id="5977c-144">Storage has IOPS limits.</span></span> <span data-ttu-id="5977c-145">A assinatura tem limites no número de núcleos de VM.</span><span class="sxs-lookup"><span data-stu-id="5977c-145">The subscription has limits on the number of VM cores.</span></span> <span data-ttu-id="5977c-146">Geralmente, é mais fácil particionar a parte inferior na hierarquia.</span><span class="sxs-lookup"><span data-stu-id="5977c-146">Generally, it's easier to partition lower in the hierarchy.</span></span> <span data-ttu-id="5977c-147">Somente os aplicativos grandes devem precisar de particionamento no nível da assinatura.</span><span class="sxs-lookup"><span data-stu-id="5977c-147">Only large applications should need to partition at the subscription level.</span></span>

<!-- links -->

[azure-limits]: /azure/azure-subscription-service-limits
[data-partitioning-guidance]: ../../best-practices/data-partitioning.md
[sharding]: ../../patterns/sharding.md

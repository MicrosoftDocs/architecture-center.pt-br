---
title: Design de mudança
description: Um design evolutivo é a chave para a inovação contínua.
author: MikeWasson
ms.date: 08/30/2018
ms.openlocfilehash: df5a2d0756295a9632b3ea336527b2fbfb35318c
ms.sourcegitcommit: f6be2825bf2d37dfe25cfab92b9e3973a6b51e16
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/08/2018
ms.locfileid: "48858139"
---
# <a name="design-for-evolution"></a><span data-ttu-id="30bc8-103">Design para evolução</span><span class="sxs-lookup"><span data-stu-id="30bc8-103">Design for evolution</span></span>

## <a name="an-evolutionary-design-is-key-for-continuous-innovation"></a><span data-ttu-id="30bc8-104">Um design evolutivo é a chave para a inovação contínua</span><span class="sxs-lookup"><span data-stu-id="30bc8-104">An evolutionary design is key for continuous innovation</span></span>

<span data-ttu-id="30bc8-105">Todos os aplicativos de sucesso mudam ao longo do tempo, seja para corrigir bugs, adicionar novos recursos, apresentar novas tecnologias ou deixar sistemas existentes mais escalonáveis e flexíveis.</span><span class="sxs-lookup"><span data-stu-id="30bc8-105">All successful applications change over time, whether to fix bugs, add new features, bring in new technologies, or make existing systems more scalable and resilient.</span></span> <span data-ttu-id="30bc8-106">Se todas as partes de um aplicativo estão firmemente acopladas, fica muito difícil introduzir alterações no sistema.</span><span class="sxs-lookup"><span data-stu-id="30bc8-106">If all the parts of an application are tightly coupled, it becomes very hard to introduce changes into the system.</span></span> <span data-ttu-id="30bc8-107">Uma alteração em uma parte do aplicativo pode interromper outra parte ou fazer com que as alterações sejam propagadas à toda a base de código.</span><span class="sxs-lookup"><span data-stu-id="30bc8-107">A change in one part of the application may break another part, or cause changes to ripple through the entire codebase.</span></span>

<span data-ttu-id="30bc8-108">Esse problema não é limitado aos aplicativos monolíticos.</span><span class="sxs-lookup"><span data-stu-id="30bc8-108">This problem is not limited to monolithic applications.</span></span> <span data-ttu-id="30bc8-109">Um aplicativo pode ser decomposto em serviços e continuar exibindo o tipo de acoplamento firme que deixa o sistema rígido e frágil.</span><span class="sxs-lookup"><span data-stu-id="30bc8-109">An application can be decomposed into services, but still exhibit the sort of tight coupling that leaves the system rigid and brittle.</span></span> <span data-ttu-id="30bc8-110">Mas quando os serviços são projetados para serem desenvolvidos, as equipes podem inovar e entregar novos recursos continuamente.</span><span class="sxs-lookup"><span data-stu-id="30bc8-110">But when services are designed to evolve, teams can innovate and continuously deliver new features.</span></span> 

<span data-ttu-id="30bc8-111">Os microsserviços estão se tornando uma maneira popular de obter um design evolutivo, pois abordam muitas das considerações listadas aqui.</span><span class="sxs-lookup"><span data-stu-id="30bc8-111">Microservices are becoming a popular way to achieve an evolutionary design, because they address many of the considerations listed here.</span></span>

## <a name="recommendations"></a><span data-ttu-id="30bc8-112">Recomendações</span><span class="sxs-lookup"><span data-stu-id="30bc8-112">Recommendations</span></span>

<span data-ttu-id="30bc8-113">**Impor alta coesão e acoplamento flexível**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-113">**Enforce high cohesion and loose coupling**.</span></span> <span data-ttu-id="30bc8-114">Um serviço é *coeso* se fornecer uma funcionalidade que está logicamente interligada.</span><span class="sxs-lookup"><span data-stu-id="30bc8-114">A service is *cohesive* if it provides functionality that logically belongs together.</span></span> <span data-ttu-id="30bc8-115">Os serviços têm *acoplamento flexível* se for possível alterar um serviço sem alterar outro.</span><span class="sxs-lookup"><span data-stu-id="30bc8-115">Services are *loosely coupled* if you can change one service without changing the other.</span></span> <span data-ttu-id="30bc8-116">Alta coesão geralmente significa que as alterações feitas em uma função exigirão alterações em outras funções relacionadas.</span><span class="sxs-lookup"><span data-stu-id="30bc8-116">High cohesion generally means that changes in one function will require changes in other related functions.</span></span> <span data-ttu-id="30bc8-117">Se você descobrir que a atualização de um serviço requer atualizações coordenadas com outros serviços, isso pode ser um sinal de que os serviços não são coesos.</span><span class="sxs-lookup"><span data-stu-id="30bc8-117">If you find that updating a service requires coordinated updates to other services, it may be a sign that your services are not cohesive.</span></span> <span data-ttu-id="30bc8-118">Uma das metas do design orientado a domínio (DDD) é identificar esses limites.</span><span class="sxs-lookup"><span data-stu-id="30bc8-118">One of the goals of domain-driven design (DDD) is to identify those boundaries.</span></span>

<span data-ttu-id="30bc8-119">**Encapsular o conhecimento de domínio**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-119">**Encapsulate domain knowledge**.</span></span> <span data-ttu-id="30bc8-120">Quando um cliente consome um serviço, a imposição das regras de negócio do domínio não deve ficar sob a responsabilidade do cliente.</span><span class="sxs-lookup"><span data-stu-id="30bc8-120">When a client consumes a service, the responsibility for enforcing the business rules of the domain should not fall on the client.</span></span> <span data-ttu-id="30bc8-121">Em vez disso, o serviço deve encapsular todo o conhecimento de domínio que esteja sob sua responsabilidade.</span><span class="sxs-lookup"><span data-stu-id="30bc8-121">Instead, the service should encapsulate all of the domain knowledge that falls under its responsibility.</span></span> <span data-ttu-id="30bc8-122">Caso contrário, cada cliente tem de impor as regras de negócio, e você acaba com conhecimento do domínio espalhado entre diferentes partes do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="30bc8-122">Otherwise, every client has to enforce the business rules, and you end up with domain knowledge spread across different parts of the application.</span></span> 

<span data-ttu-id="30bc8-123">**Usar mensagens assíncronas**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-123">**Use asynchronous messaging**.</span></span> <span data-ttu-id="30bc8-124">O sistema de mensagens assíncronas é uma forma de desacoplar o produtor de mensagem do consumidor.</span><span class="sxs-lookup"><span data-stu-id="30bc8-124">Asynchronous messaging is a way to decouple the message producer from the consumer.</span></span> <span data-ttu-id="30bc8-125">O produtor não depende da resposta do consumidor à mensagem ou da tomada de qualquer ação específica.</span><span class="sxs-lookup"><span data-stu-id="30bc8-125">The producer does not depend on the consumer responding to the message or taking any particular action.</span></span> <span data-ttu-id="30bc8-126">Com uma arquitetura de publicação/assinatura, talvez o produtor nem saiba quem está consumindo a mensagem.</span><span class="sxs-lookup"><span data-stu-id="30bc8-126">With a pub/sub architecture, the producer may not even know who is consuming the message.</span></span> <span data-ttu-id="30bc8-127">Novos serviços podem facilmente consumir as mensagens sem nenhuma modificação ao produtor.</span><span class="sxs-lookup"><span data-stu-id="30bc8-127">New services can easily consume the messages without any modifications to the producer.</span></span>

<span data-ttu-id="30bc8-128">**Não compilar conhecimento de domínio em um gateway**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-128">**Don't build domain knowledge into a gateway**.</span></span> <span data-ttu-id="30bc8-129">Gateways podem ser úteis em uma arquitetura de microsserviços para coisas como roteamento de solicitação, conversão de protocolo, balanceamento de carga ou autenticação.</span><span class="sxs-lookup"><span data-stu-id="30bc8-129">Gateways can be useful in a microservices architecture, for things like request routing, protocol translation, load balancing, or authentication.</span></span> <span data-ttu-id="30bc8-130">No entanto, o gateway deve ser restrito a esse tipo de funcionalidade de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="30bc8-130">However, the gateway should be restricted to this sort of infrastructure functionality.</span></span> <span data-ttu-id="30bc8-131">Ele não deve implementar nenhum conhecimento de domínio para evitar se tornar uma dependência pesada.</span><span class="sxs-lookup"><span data-stu-id="30bc8-131">It should not implement any domain knowledge, to avoid becoming a heavy dependency.</span></span>

<span data-ttu-id="30bc8-132">**Expor interfaces abertas**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-132">**Expose open interfaces**.</span></span> <span data-ttu-id="30bc8-133">Evite criar camadas de conversão personalizada que ficam entre serviços.</span><span class="sxs-lookup"><span data-stu-id="30bc8-133">Avoid creating custom translation layers that sit between services.</span></span> <span data-ttu-id="30bc8-134">Em vez disso, um serviço deve expor uma API com um contrato de API bem definido.</span><span class="sxs-lookup"><span data-stu-id="30bc8-134">Instead, a service should expose an API with a well-defined API contract.</span></span> <span data-ttu-id="30bc8-135">A API deve ter uma versão para que seja possível evoluir a API e manter a compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="30bc8-135">The API should be versioned, so that you can evolve the API while maintaining backward compatibility.</span></span> <span data-ttu-id="30bc8-136">Dessa forma, é possível atualizar um serviço sem coordenar as atualizações para todos os serviços de upstream que dependem dele.</span><span class="sxs-lookup"><span data-stu-id="30bc8-136">That way, you can update a service without coordinating updates to all of the upstream services that depend on it.</span></span> <span data-ttu-id="30bc8-137">Serviços voltados ao público devem expor uma API RESTful via HTTP.</span><span class="sxs-lookup"><span data-stu-id="30bc8-137">Public facing services should expose a RESTful API over HTTP.</span></span> <span data-ttu-id="30bc8-138">Serviços de back-end podem usar um protocolo de mensagens estilo RPC por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="30bc8-138">Backend services might use an RPC-style messaging protocol for performance reasons.</span></span> 

<span data-ttu-id="30bc8-139">**Projetar e testar em comparação a contratos de serviço**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-139">**Design and test against service contracts**.</span></span> <span data-ttu-id="30bc8-140">Quando serviços expõem APIs bem definidas, é possível desenvolver e testar em comparação a essas APIs.</span><span class="sxs-lookup"><span data-stu-id="30bc8-140">When services expose well-defined APIs, you can develop and test against those APIs.</span></span> <span data-ttu-id="30bc8-141">Dessa forma, você pode desenvolver e testar um serviço individual sem afetar todos os seus serviços dependentes.</span><span class="sxs-lookup"><span data-stu-id="30bc8-141">That way, you can develop and test an individual service without spinning up all of its dependent services.</span></span> <span data-ttu-id="30bc8-142">(É claro que ainda será realizada a integração e o teste de carga em comparação aos serviços reais.)</span><span class="sxs-lookup"><span data-stu-id="30bc8-142">(Of course, you would still perform integration and load testing against the real services.)</span></span>

<span data-ttu-id="30bc8-143">**Infraestrutura abstrata distante da lógica do domínio**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-143">**Abstract infrastructure away from domain logic**.</span></span> <span data-ttu-id="30bc8-144">Não deixe a lógica do domínio se misturar a funcionalidades relacionadas à infraestrutura, como sistema de mensagens ou persistência.</span><span class="sxs-lookup"><span data-stu-id="30bc8-144">Don't let domain logic get mixed up with infrastructure-related functionality, such as messaging or persistence.</span></span> <span data-ttu-id="30bc8-145">Caso contrário, as alterações na lógica do domínio exigirão atualizações para as camadas de infraestrutura e vice-versa.</span><span class="sxs-lookup"><span data-stu-id="30bc8-145">Otherwise, changes in the domain logic will require updates to the infrastructure layers and vice versa.</span></span> 

<span data-ttu-id="30bc8-146">**Descarregar preocupações abrangentes para um serviço separado**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-146">**Offload cross-cutting concerns to a separate service**.</span></span> <span data-ttu-id="30bc8-147">Por exemplo, se vários serviços precisarem autenticar solicitações, seria possível mover essa funcionalidade para seu próprio serviço.</span><span class="sxs-lookup"><span data-stu-id="30bc8-147">For example, if several services need to authenticate requests, you could move this functionality into its own service.</span></span> <span data-ttu-id="30bc8-148">Depois seria possível evoluir o serviço de autenticação &mdash; por exemplo, adicionando um novo fluxo de autenticação &mdash; sem tocar em qualquer serviço que o utiliza.</span><span class="sxs-lookup"><span data-stu-id="30bc8-148">Then you could evolve the authentication service &mdash; for example, by adding a new authentication flow &mdash; without touching any of the services that use it.</span></span>

<span data-ttu-id="30bc8-149">**Implantar serviços de modo independente**.</span><span class="sxs-lookup"><span data-stu-id="30bc8-149">**Deploy services independently**.</span></span> <span data-ttu-id="30bc8-150">Quando a equipe de DevOps pode implantar um único serviço independentemente de outros serviços do aplicativo, as atualizações podem ocorrer com mais rapidez e segurança.</span><span class="sxs-lookup"><span data-stu-id="30bc8-150">When the DevOps team can deploy a single service independently of other services in the application, updates can happen more quickly and safely.</span></span> <span data-ttu-id="30bc8-151">Correções de bugs e novos recursos podem ser implantados em um ritmo mais regular.</span><span class="sxs-lookup"><span data-stu-id="30bc8-151">Bug fixes and new features can be rolled out at a more regular cadence.</span></span> <span data-ttu-id="30bc8-152">Projete o aplicativo e o processo de lançamento para oferecerem suporte a atualizações independentes.</span><span class="sxs-lookup"><span data-stu-id="30bc8-152">Design both the application and the release process to support independent updates.</span></span>

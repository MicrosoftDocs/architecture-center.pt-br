---
title: Detecção de fraude em tempo real
titleSuffix: Azure Example Scenarios
description: Detecte atividades fraudulentas em tempo real usando os Hubs de Eventos do Azure e o Stream Analytics.
author: alexbuckgit
ms.date: 07/05/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
social_image_url: /azure/architecture/example-scenario/data/media/architecture-fraud-detection.png
ms.openlocfilehash: fc2222874b807a53b5e575973aa6dd4eca63fa3b
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640033"
---
# <a name="real-time-fraud-detection-on-azure"></a><span data-ttu-id="2d5de-103">Detecção de fraude em tempo real no Azure</span><span class="sxs-lookup"><span data-stu-id="2d5de-103">Real-time fraud detection on Azure</span></span>

<span data-ttu-id="2d5de-104">Este cenário de exemplo é relevante para organizações que precisam analisar dados em tempo real para detectar transações fraudulentas ou outra atividade anômala.</span><span class="sxs-lookup"><span data-stu-id="2d5de-104">This example scenario is relevant to organizations that need to analyze data in real time to detect fraudulent transactions or other anomalous activity.</span></span>

<span data-ttu-id="2d5de-105">Entre os possíveis usos estão a identificação de atividades fraudulentas em cartões de crédito ou de chamadas de celular.</span><span class="sxs-lookup"><span data-stu-id="2d5de-105">Potential applications include identifying fraudulent credit card activity or mobile phone calls.</span></span> <span data-ttu-id="2d5de-106">Os sistemas tradicionais de análise online podem levar horas para transformar e analisar os dados para identificar atividade anômala.</span><span class="sxs-lookup"><span data-stu-id="2d5de-106">Traditional online analytical systems might take hours to transform and analyze the data to identify anomalous activity.</span></span>

<span data-ttu-id="2d5de-107">Usando serviços do Azure totalmente gerenciados, como os Hubs de Eventos e o Stream Analytics, as empresas podem eliminar a necessidade de gerenciar servidores individuais, reduzindo custos e aproveitando a experiência da Microsoft na ingestão de dados em escala de nuvem e na análise em tempo real.</span><span class="sxs-lookup"><span data-stu-id="2d5de-107">By using fully managed Azure services such as Event Hubs and Stream Analytics, companies can eliminate the need to manage individual servers, while reducing costs and leveraging Microsoft's expertise in cloud-scale data ingestion and real-time analytics.</span></span> <span data-ttu-id="2d5de-108">Este cenário aborda especificamente a detecção de atividade fraudulenta.</span><span class="sxs-lookup"><span data-stu-id="2d5de-108">This scenario specifically addresses the detection of fraudulent activity.</span></span> <span data-ttu-id="2d5de-109">Se você tiver outras necessidades de análise de dados, analise a lista de [serviços do Azure Analytics][product-category] disponíveis.</span><span class="sxs-lookup"><span data-stu-id="2d5de-109">If you have other needs for data analytics, you should review the list of available [Azure Analytics services][product-category].</span></span>

<span data-ttu-id="2d5de-110">Este exemplo representa parte de uma estratégia e uma arquitetura de processamento de dados mais amplas.</span><span class="sxs-lookup"><span data-stu-id="2d5de-110">This sample represents one part of a broader data processing architecture and strategy.</span></span> <span data-ttu-id="2d5de-111">Outras opções para esse aspecto de uma arquitetura geral serão discutidas mais adiante neste artigo.</span><span class="sxs-lookup"><span data-stu-id="2d5de-111">Other options for this aspect of an overall architecture are discussed later in this article.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="2d5de-112">Casos de uso relevantes</span><span class="sxs-lookup"><span data-stu-id="2d5de-112">Relevant use cases</span></span>

<span data-ttu-id="2d5de-113">Outros casos de uso relevantes incluem:</span><span class="sxs-lookup"><span data-stu-id="2d5de-113">Other relevant use cases include:</span></span>

- <span data-ttu-id="2d5de-114">Detectar chamadas fraudulentas em cenários de telecomunicações.</span><span class="sxs-lookup"><span data-stu-id="2d5de-114">Detecting fraudulent mobile-phone calls in telecommunications scenarios.</span></span>
- <span data-ttu-id="2d5de-115">Identificar transações fraudulentas de cartão de crédito para instituições bancárias.</span><span class="sxs-lookup"><span data-stu-id="2d5de-115">Identifying fraudulent credit card transactions for banking institutions.</span></span>
- <span data-ttu-id="2d5de-116">Identificar compras fraudulentas em cenários de varejo ou comércio eletrônico.</span><span class="sxs-lookup"><span data-stu-id="2d5de-116">Identifying fraudulent purchases in retail or e-commerce scenarios.</span></span>

## <a name="architecture"></a><span data-ttu-id="2d5de-117">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="2d5de-117">Architecture</span></span>

![Visão geral da arquitetura dos componentes do Azure de um cenário de detecção de fraudes em tempo real][architecture]

<span data-ttu-id="2d5de-119">Este cenário cobre os componentes de back-end de um pipeline de análise em tempo real.</span><span class="sxs-lookup"><span data-stu-id="2d5de-119">This scenario covers the back-end components of a real-time analytics pipeline.</span></span> <span data-ttu-id="2d5de-120">O fluxo de dados deste cenário ocorre da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="2d5de-120">Data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="2d5de-121">Metadados de chamadas de celular são enviados do sistema de origem para uma instância dos Hubs de Eventos do Azure.</span><span class="sxs-lookup"><span data-stu-id="2d5de-121">Mobile phone call metadata is sent from the source system to an Azure Event Hubs instance.</span></span>
2. <span data-ttu-id="2d5de-122">Um trabalho do Stream Analytics é iniciado e recebe dados da fonte do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-122">A Stream Analytics job is started, which receives data via the event hub source.</span></span>
3. <span data-ttu-id="2d5de-123">O trabalho do Stream Analytics executa uma consulta predefinida para transformar o fluxo de entrada e analisá-lo com base em um algoritmo de transações fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="2d5de-123">The Stream Analytics job runs a predefined query to transform the input stream and analyze it based on a fraudulent-transaction algorithm.</span></span> <span data-ttu-id="2d5de-124">Essa consulta usa uma janela em cascata para segmentar o fluxo em unidades temporais distintas.</span><span class="sxs-lookup"><span data-stu-id="2d5de-124">This query uses a tumbling window to segment the stream into distinct temporal units.</span></span>
4. <span data-ttu-id="2d5de-125">O trabalho do Stream Analytics grava o fluxo transformado que representa chamadas fraudulentas para um coletor de saída do Armazenamentos de blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="2d5de-125">The Stream Analytics job writes the transformed stream representing detected fraudulent calls to an output sink in Azure Blob storage.</span></span>

### <a name="components"></a><span data-ttu-id="2d5de-126">Componentes</span><span class="sxs-lookup"><span data-stu-id="2d5de-126">Components</span></span>

- <span data-ttu-id="2d5de-127">Os [Hubs de Eventos do Azure][docs-event-hubs] são uma plataforma de streaming em tempo real e um serviço de ingestão de eventos capaz de receber e processar milhões de eventos por segundo.</span><span class="sxs-lookup"><span data-stu-id="2d5de-127">[Azure Event Hubs][docs-event-hubs] is a real-time streaming platform and event ingestion service, capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="2d5de-128">Os Hubs de Eventos podem processar e armazenar eventos, dados ou telemetria produzidos pelos dispositivos e software distribuídos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-128">Event Hubs can process and store events, data, or telemetry produced by distributed software and devices.</span></span> <span data-ttu-id="2d5de-129">Neste cenário, os Hubs de Eventos recebem todos os metadados de chamadas telefônicas que serão analisadas em relação a atividades fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="2d5de-129">In this scenario, Event Hubs receives all phone call metadata to be analyzed for fraudulent activity.</span></span>
- <span data-ttu-id="2d5de-130">O [Azure Stream Analytics][docs-stream-analytics] é um mecanismo de processamento de eventos que permite examinar grandes volumes de fluxo de dados de dispositivos e de outras fontes de dados.</span><span class="sxs-lookup"><span data-stu-id="2d5de-130">[Azure Stream Analytics][docs-stream-analytics] is an event-processing engine that can analyze high volumes of data streaming from devices and other data sources.</span></span> <span data-ttu-id="2d5de-131">Ele também oferece suporte à extração de informações dos fluxos de dados para identificar padrões e relações.</span><span class="sxs-lookup"><span data-stu-id="2d5de-131">It also supports extracting information from data streams to identify patterns and relationships.</span></span> <span data-ttu-id="2d5de-132">Esses padrões podem disparar outras ações downstream.</span><span class="sxs-lookup"><span data-stu-id="2d5de-132">These patterns can trigger other downstream actions.</span></span> <span data-ttu-id="2d5de-133">Neste cenário, o Stream Analytics transforma o fluxo de entrada do Hub de Eventos para identificar chamadas fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="2d5de-133">In this scenario, Stream Analytics transforms the input stream from Event Hubs to identify fraudulent calls.</span></span>
- <span data-ttu-id="2d5de-134">O [Armazenamento de Blobs](/azure/storage/blobs/storage-blobs-introduction) é usado neste cenário para armazenar os resultados do trabalho do Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="2d5de-134">[Blob storage](/azure/storage/blobs/storage-blobs-introduction) is used in this scenario to store the results of the Stream Analytics job.</span></span>

## <a name="considerations"></a><span data-ttu-id="2d5de-135">Considerações</span><span class="sxs-lookup"><span data-stu-id="2d5de-135">Considerations</span></span>

### <a name="alternatives"></a><span data-ttu-id="2d5de-136">Alternativas</span><span class="sxs-lookup"><span data-stu-id="2d5de-136">Alternatives</span></span>

<span data-ttu-id="2d5de-137">Muitas opções de tecnologia estão disponíveis para ingestão de mensagens em tempo real, armazenamento de dados, processamento de fluxo, armazenamento de dados analíticos, análise e relatórios.</span><span class="sxs-lookup"><span data-stu-id="2d5de-137">Many technology choices are available for real-time message ingestion, data storage, stream processing, storage of analytical data, and analytics and reporting.</span></span> <span data-ttu-id="2d5de-138">Para obter uma visão geral dessas opções, seus recursos e principais critérios de seleção, confira [Arquiteturas de Big Data: Processamento em tempo real](/azure/architecture/data-guide/technology-choices/real-time-ingestion) no Guia de Arquitetura de Dados do Azure.</span><span class="sxs-lookup"><span data-stu-id="2d5de-138">For an overview of these options, their capabilities, and key selection criteria, see [Big data architectures: Real-time processing](/azure/architecture/data-guide/technology-choices/real-time-ingestion) in the Azure Data Architecture Guide.</span></span>

<span data-ttu-id="2d5de-139">Além disso, os algoritmos mais complexos para detecção de fraude podem ser produzidos por vários serviços de aprendizado de máquina no Azure.</span><span class="sxs-lookup"><span data-stu-id="2d5de-139">Additionally, more complex algorithms for fraud detection can be produced by various machine learning services in Azure.</span></span> <span data-ttu-id="2d5de-140">Para obter uma visão geral dessas opções, confira [Opções de tecnologia para aprendizado de máquina](/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning) no [Guia de Arquitetura de Dados do Azure](../../data-guide/index.md).</span><span class="sxs-lookup"><span data-stu-id="2d5de-140">For an overview of these options, see [Technology choices for machine learning](/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning) in the [Azure Data Architecture Guide](../../data-guide/index.md).</span></span>

### <a name="availability"></a><span data-ttu-id="2d5de-141">Disponibilidade</span><span class="sxs-lookup"><span data-stu-id="2d5de-141">Availability</span></span>

<span data-ttu-id="2d5de-142">O Azure Monitor fornece interfaces de usuário unificadas para monitoramento entre os diferentes serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="2d5de-142">Azure Monitor provides unified user interfaces for monitoring across various Azure services.</span></span> <span data-ttu-id="2d5de-143">Para obter mais informações, confira [Monitoramento no Microsoft Azure](/azure/monitoring-and-diagnostics/monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="2d5de-143">For more information, see [Monitoring in Microsoft Azure](/azure/monitoring-and-diagnostics/monitoring-overview).</span></span> <span data-ttu-id="2d5de-144">Os Hubs de Eventos e o Stream Analytics estão integrados ao Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="2d5de-144">Event Hubs and Stream Analytics are both integrated with Azure Monitor.</span></span>

### <a name="scalability"></a><span data-ttu-id="2d5de-145">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="2d5de-145">Scalability</span></span>

<span data-ttu-id="2d5de-146">Os componentes deste cenários foram concebidos para ingestão de grande escala e análise em tempo real paralela em massa.</span><span class="sxs-lookup"><span data-stu-id="2d5de-146">The components of this scenario are designed for hyper-scale ingestion and massively parallel real-time analytics.</span></span> <span data-ttu-id="2d5de-147">Os Hubs de Eventos do Azure são altamente escalonáveis, capazes de receber e processar milhões de eventos por segundo com baixa latência.</span><span class="sxs-lookup"><span data-stu-id="2d5de-147">Azure Event Hubs is highly scalable, capable of receiving and processing millions of events per second with low latency.</span></span> <span data-ttu-id="2d5de-148">Os Hubs de Eventos [escalam verticalmente](/azure/event-hubs/event-hubs-auto-inflate) o número de unidades de taxa de transferência automaticamente para atender às necessidades de uso.</span><span class="sxs-lookup"><span data-stu-id="2d5de-148">Event Hubs can [automatically scale up](/azure/event-hubs/event-hubs-auto-inflate) the number of throughput units to meet usage needs.</span></span> <span data-ttu-id="2d5de-149">O Azure Stream Analytics é capaz de analisar grandes volumes de dados de streaming de várias fontes.</span><span class="sxs-lookup"><span data-stu-id="2d5de-149">Azure Stream Analytics is capable of analyzing high volumes of streaming data from many sources.</span></span> <span data-ttu-id="2d5de-150">Você pode escalar verticalmente o Stream Analytics, aumentando o número de [unidades de streaming](/azure/stream-analytics/stream-analytics-streaming-unit-consumption) alocado para executar o trabalho de streaming.</span><span class="sxs-lookup"><span data-stu-id="2d5de-150">You can scale up Stream Analytics by increasing the number of [streaming units](/azure/stream-analytics/stream-analytics-streaming-unit-consumption) allocated to execute your streaming job.</span></span>

<span data-ttu-id="2d5de-151">Para obter diretrizes gerais sobre como criar soluções escalonáveis, confira a [lista de verificação de escalabilidade] [ scalability] no Azure Architecture Center.</span><span class="sxs-lookup"><span data-stu-id="2d5de-151">For general guidance on designing scalable solutions, see the [scalability checklist][scalability] in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="2d5de-152">Segurança</span><span class="sxs-lookup"><span data-stu-id="2d5de-152">Security</span></span>

<span data-ttu-id="2d5de-153">Os Hubs de Eventos do Azure protegem dados por meio de um [modelo de autenticação e segurança][docs-event-hubs-security-model] com base em uma combinação de tokens SAS (Assinatura de Acesso Compartilhado) e editores de eventos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-153">Azure Event Hubs secures data through an [authentication and security model][docs-event-hubs-security-model] based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="2d5de-154">Um editor de eventos define um ponto de extremidade virtual para um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-154">An event publisher defines a virtual endpoint for an event hub.</span></span> <span data-ttu-id="2d5de-155">O editor só pode ser usado para enviar mensagens a um hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-155">The publisher can only be used to send messages to an event hub.</span></span> <span data-ttu-id="2d5de-156">Não é possível receber mensagens de um editor.</span><span class="sxs-lookup"><span data-stu-id="2d5de-156">It is not possible to receive messages from a publisher.</span></span>

<span data-ttu-id="2d5de-157">Para obter orientação geral sobre como criar soluções seguras, confira a [Documentação de segurança do Azure][security].</span><span class="sxs-lookup"><span data-stu-id="2d5de-157">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="2d5de-158">Resiliência</span><span class="sxs-lookup"><span data-stu-id="2d5de-158">Resiliency</span></span>

<span data-ttu-id="2d5de-159">Para obter diretrizes gerais sobre como criar soluções resilientes, consulte [desenvolvendo aplicativos do Azure confiáveis](../../reliability/index.md).</span><span class="sxs-lookup"><span data-stu-id="2d5de-159">For general guidance on designing resilient solutions, see [Designing reliable Azure applications](../../reliability/index.md).</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="2d5de-160">Implantar o cenário</span><span class="sxs-lookup"><span data-stu-id="2d5de-160">Deploy the scenario</span></span>

<span data-ttu-id="2d5de-161">Para implantar este cenário, você pode seguir este [tutorial passo a passo][tutorial] que demonstra como implantar manualmente cada componente do cenário.</span><span class="sxs-lookup"><span data-stu-id="2d5de-161">To deploy this scenario, you can follow this [step-by-step tutorial][tutorial] demonstrating how to manually deploy each component of the scenario.</span></span> <span data-ttu-id="2d5de-162">O tutorial também fornece um aplicativo de cliente .NET para gerar metadados de chamada telefônica de exemplo e enviar esses dados para uma instância de hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-162">This tutorial also provides a .NET client application to generate sample phone call metadata and send that data to an event hub instance.</span></span>

## <a name="pricing"></a><span data-ttu-id="2d5de-163">Preços</span><span class="sxs-lookup"><span data-stu-id="2d5de-163">Pricing</span></span>

<span data-ttu-id="2d5de-164">Para explorar o custo de executar esse cenário, todos os serviços são pré-configurados na calculadora de custos.</span><span class="sxs-lookup"><span data-stu-id="2d5de-164">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="2d5de-165">Para ver como o preço seria alterado em seu caso de uso específico, altere as variáveis apropriadas de acordo com o volume de dados esperado.</span><span class="sxs-lookup"><span data-stu-id="2d5de-165">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected data volume.</span></span>

<span data-ttu-id="2d5de-166">Fornecemos três perfis de custo de exemplo com base na quantidade de tráfego que você espera receber:</span><span class="sxs-lookup"><span data-stu-id="2d5de-166">We have provided three sample cost profiles based on amount of traffic you expect to get:</span></span>

- <span data-ttu-id="2d5de-167">[Pequeno][small-pricing]: processa um milhão de eventos por meio de uma unidade de streaming padrão por mês.</span><span class="sxs-lookup"><span data-stu-id="2d5de-167">[Small][small-pricing]: process one million events through one standard streaming unit per month.</span></span>
- <span data-ttu-id="2d5de-168">[Médio][medium-pricing]: processa 100 milhões de eventos por meio de cinco unidades de streaming padrão por mês.</span><span class="sxs-lookup"><span data-stu-id="2d5de-168">[Medium][medium-pricing]: process 100M events through five standard streaming units per month.</span></span>
- <span data-ttu-id="2d5de-169">[Grande][large-pricing]: processa 999 milhões de eventos por meio de 20 unidades de streaming padrão por mês.</span><span class="sxs-lookup"><span data-stu-id="2d5de-169">[Large][large-pricing]: process 999 million events through 20 standard streaming units per month.</span></span>

## <a name="related-resources"></a><span data-ttu-id="2d5de-170">Recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="2d5de-170">Related resources</span></span>

<span data-ttu-id="2d5de-171">Cenários de detecção de fraude mais complexos podem se beneficiar de um modelo de aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="2d5de-171">More complex fraud detection scenarios can benefit from a machine learning model.</span></span> <span data-ttu-id="2d5de-172">Para cenários criados usando o Machine Learning Server, confira [Detecção de fraude usando o Machine Learning Server][r-server-fraud-detection].</span><span class="sxs-lookup"><span data-stu-id="2d5de-172">For scenarios built using Machine Learning Server, see [Fraud detection using Machine Learning Server][r-server-fraud-detection].</span></span> <span data-ttu-id="2d5de-173">Para outros modelos de solução usando o Machine Learning Server, confira [Cenários de ciência de dados e modelos de solução][docs-r-server-sample-solutions].</span><span class="sxs-lookup"><span data-stu-id="2d5de-173">For other solution templates using Machine Learning Server, see [Data science scenarios and solution templates][docs-r-server-sample-solutions].</span></span> <span data-ttu-id="2d5de-174">Para uma solução de exemplo usando o Azure Data Lake Analytics, confira [Usando Azure Data Lake e R para Detecção de Fraude][technet-fraud-detection].</span><span class="sxs-lookup"><span data-stu-id="2d5de-174">For an example solution using Azure Data Lake Analytics, see [Using Azure Data Lake and R for Fraud Detection][technet-fraud-detection].</span></span>

<!-- links -->
[product-category]: https://azure.microsoft.com/product-categories/analytics/
[tutorial]: /azure/stream-analytics/stream-analytics-real-time-fraud-detection
[small-pricing]: https://azure.com/e/74149ec312c049ccba79bfb3cfa67606
[medium-pricing]: https://azure.com/e/4fc94f7376de484d8ae67a6958cae60a
[large-pricing]: https://azure.com/e/7da8804396f9428a984578700003ba42
[architecture]: ./media/architecture-fraud-detection.png
[docs-event-hubs]: /azure/event-hubs/event-hubs-what-is-event-hubs
[docs-event-hubs-security-model]: /azure/event-hubs/event-hubs-authentication-and-security-model-overview
[docs-stream-analytics]: /azure/stream-analytics/stream-analytics-introduction
[docs-r-server-sample-solutions]: /machine-learning-server/r/sample-solutions
[r-server-fraud-detection]: https://microsoft.github.io/r-server-fraud-detection/
[technet-fraud-detection]: https://blogs.technet.microsoft.com/machinelearning/2017/06/28/using-azure-data-lake-and-r-for-fraud-detection/
[scalability]: /azure/architecture/checklist/scalability
[security]: /azure/security/

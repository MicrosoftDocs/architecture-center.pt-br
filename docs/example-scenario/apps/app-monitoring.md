---
title: Monitoramento de aplicativo Web no Azure
description: Monitore um aplicativo Web hospedado no Serviço de Aplicativo do Azure.
author: adamboeglin
ms.date: 09/12/2018
ms.openlocfilehash: b1beb5cf5e29ab1ceb760bf95eab85d819b69342
ms.sourcegitcommit: 62945777e519d650159f0f963a2489b6bb6ce094
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/09/2018
ms.locfileid: "48876844"
---
# <a name="web-application-monitoring-on-azure"></a><span data-ttu-id="00909-103">Monitoramento de aplicativo Web no Azure</span><span class="sxs-lookup"><span data-stu-id="00909-103">Web application monitoring on Azure</span></span>

<span data-ttu-id="00909-104">Ofertas de PaaS (Plataforma como Serviço) no Azure para gerenciar recursos de computação para você e, de certa forma, alterar a forma como você monitora implantações.</span><span class="sxs-lookup"><span data-stu-id="00909-104">Platform as a service (PaaS) offerings on Azure manage compute resources for you and in some ways change how you monitor deployments.</span></span> <span data-ttu-id="00909-105">O Azure inclui vários serviços de monitoramento, e cada um realiza uma função específica.</span><span class="sxs-lookup"><span data-stu-id="00909-105">Azure includes multiple monitoring services, each of which performs a specific role.</span></span> <span data-ttu-id="00909-106">Juntos, esses serviços oferecem uma solução abrangente para coletar, analisar e agir na telemetria do seu aplicativo e os recursos do Azure que eles usam.</span><span class="sxs-lookup"><span data-stu-id="00909-106">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your applications and the Azure resources they use.</span></span>

<span data-ttu-id="00909-107">Esse cenário aborda os serviços de monitoramento que você pode usar e descreve um modelo de fluxo de dados para uso com várias fontes de dados.</span><span class="sxs-lookup"><span data-stu-id="00909-107">This scenario addresses the monitoring services you can use and describes a dataflow model for use with multiple data sources.</span></span> <span data-ttu-id="00909-108">Quando se trata de monitoramento, várias ferramentas e serviços funcionam com implantações do Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-108">When it comes to monitoring, many tools and services work with Azure deployments.</span></span> <span data-ttu-id="00909-109">Nesse cenário, escolhemos serviços prontamente disponíveis, pois eles são fáceis de usar.</span><span class="sxs-lookup"><span data-stu-id="00909-109">In this scenario, we choose readily available services precisely because they are easy to consume.</span></span> <span data-ttu-id="00909-110">Outras opções de monitoramento serão discutidas mais adiante neste artigo.</span><span class="sxs-lookup"><span data-stu-id="00909-110">Other monitoring options are discussed later in this article.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="00909-111">Casos de uso relevantes</span><span class="sxs-lookup"><span data-stu-id="00909-111">Relevant use cases</span></span>

<span data-ttu-id="00909-112">Considere este cenário para os casos de uso a seguir:</span><span class="sxs-lookup"><span data-stu-id="00909-112">Consider this scenario for the following use cases:</span></span>

- <span data-ttu-id="00909-113">Instrumentação de um aplicativo Web para monitoramento de telemetria.</span><span class="sxs-lookup"><span data-stu-id="00909-113">Instrumenting a web application for monitoring telemetry.</span></span>
- <span data-ttu-id="00909-114">Coleta de telemetria de front-end e back-end para um aplicativo implantado no Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-114">Collecting front-end and back-end telemetry for an application deployed on Azure.</span></span>
- <span data-ttu-id="00909-115">Monitoramento de métricas e cotas associadas aos serviços no Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-115">Monitoring metrics and quotas associated with services on Azure.</span></span>

## <a name="architecture"></a><span data-ttu-id="00909-116">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="00909-116">Architecture</span></span>

![Diagrama da Arquitetura do Monitor de Aplicativo][architecture]

<span data-ttu-id="00909-118">Esse cenário usa um ambiente do Azure gerenciado para hospedar um aplicativo e a camada de dados.</span><span class="sxs-lookup"><span data-stu-id="00909-118">This scenario uses a managed Azure environment to host an application and data tier.</span></span> <span data-ttu-id="00909-119">O fluxo de dados neste cenário ocorre da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="00909-119">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="00909-120">Um usuário interage com o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-120">A user interacts with the application.</span></span>
2. <span data-ttu-id="00909-121">O serviço de aplicativo e o navegador emitem a telemetria.</span><span class="sxs-lookup"><span data-stu-id="00909-121">The browser and app service emit telemetry.</span></span>
3. <span data-ttu-id="00909-122">O Application Insights coleta e analisa dados de integridade, de desempenho e de uso de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="00909-122">Application Insights collects and analyzes application health, performance, and usage data.</span></span>
4. <span data-ttu-id="00909-123">Os desenvolvedores e administradores podem examinar informações de integridade, desempenho e uso.</span><span class="sxs-lookup"><span data-stu-id="00909-123">Developers and administrators can review health, performance, and usage information.</span></span>
5. <span data-ttu-id="00909-124">O Banco de Dados SQL do Azure emite telemetria.</span><span class="sxs-lookup"><span data-stu-id="00909-124">Azure SQL Database emits telemetry.</span></span>
6. <span data-ttu-id="00909-125">O Azure Monitor coleta e analisa cotas e métricas de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="00909-125">Azure Monitor collects and analyzes infrastructure metrics and quotas.</span></span>
7. <span data-ttu-id="00909-126">O Log Analytics coleta e analisa logs e métricas.</span><span class="sxs-lookup"><span data-stu-id="00909-126">Log Analytics collects and analyzes logs and metrics.</span></span>
8. <span data-ttu-id="00909-127">Os desenvolvedores e administradores podem examinar informações de integridade, desempenho e uso.</span><span class="sxs-lookup"><span data-stu-id="00909-127">Developers and administrators can review health, performance, and usage information.</span></span>

### <a name="components"></a><span data-ttu-id="00909-128">Componentes</span><span class="sxs-lookup"><span data-stu-id="00909-128">Components</span></span>

- <span data-ttu-id="00909-129">O [Serviço de Aplicativo do Azure](/azure/app-service/) é um serviço de PaaS para compilar e hospedar aplicativos em máquinas virtuais gerenciadas.</span><span class="sxs-lookup"><span data-stu-id="00909-129">[Azure App Service](/azure/app-service/) is a PaaS service for building and hosting apps in managed virtual machines.</span></span> <span data-ttu-id="00909-130">As infraestruturas de computação subjacentes em que os aplicativos são executados são gerenciadas para você.</span><span class="sxs-lookup"><span data-stu-id="00909-130">The underlying compute infrastructures on which your apps run is managed for you.</span></span> <span data-ttu-id="00909-131">O Serviço de Aplicativo fornece monitoramento de cotas de uso de recursos e métricas de aplicativo, registro em log de informações de diagnóstico e alertas com base nas métricas.</span><span class="sxs-lookup"><span data-stu-id="00909-131">App Service provides monitoring of resource usage quotas and app metrics, logging of diagnostic information, and alerts based on metrics.</span></span> <span data-ttu-id="00909-132">Melhor ainda, você pode usar o Application Insights para criar [testes de disponibilidade][availability-tests] para testar o aplicativo em diferentes regiões.</span><span class="sxs-lookup"><span data-stu-id="00909-132">Even better, you can use Application Insights to create [availability tests][availability-tests] for testing your application from different regions.</span></span>
- <span data-ttu-id="00909-133">O [Application Insights][application-insights] é um serviço de gerenciamento de desempenho de aplicativo (APM) extensível para desenvolvedores e dá suporte a várias plataformas.</span><span class="sxs-lookup"><span data-stu-id="00909-133">[Application Insights][application-insights] is an extensible Application Performance Management (APM) service for developers and supports multiple platforms.</span></span> <span data-ttu-id="00909-134">Ele monitora o aplicativo, detecta anomalias de aplicativo, como falhas e desempenho ruim, e envia a telemetria ao portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-134">It monitors the application, detects application anomalies such as poor performance and failures, and sends telemetry to the Azure portal.</span></span> <span data-ttu-id="00909-135">O Application Insights também pode ser usado para registro em log, rastreamento distribuído e métricas de aplicativo personalizadas.</span><span class="sxs-lookup"><span data-stu-id="00909-135">Application Insights can also be used for logging, distributed tracing, and custom application metrics.</span></span>
- <span data-ttu-id="00909-136">O [Azure Monitor][azure-monitor] fornece logs e [métricas de infraestrutura de nível básico][metrics] para a maioria dos serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-136">[Azure Monitor][azure-monitor] provides base-level infrastructure [metrics and logs][metrics] for most services in Azure.</span></span> <span data-ttu-id="00909-137">Você pode interagir com as métricas de diversas maneiras, incluindo criar gráficos delas no portal do Azure, acessá-las por meio da API REST ou consultá-las usando o PowerShell ou a CLI.</span><span class="sxs-lookup"><span data-stu-id="00909-137">You can interact with the metrics in several ways, including charting them in Azure portal, accessing them through the REST API, or querying them using PowerShell or CLI.</span></span> <span data-ttu-id="00909-138">O Azure Monitor também oferece seus dados diretamente no [Log Analytics e outros serviços], em que você pode consultá-los e combiná-los com dados de outras fontes no local ou na nuvem.</span><span class="sxs-lookup"><span data-stu-id="00909-138">Azure Monitor also offers its data directly into [Log Analytics and other services], where you can query and combine it with data from other sources on premises or in the cloud.</span></span>
- <span data-ttu-id="00909-139">O [Log Analytics][log-analytics] ajuda a correlacionar os dados de uso e desempenho coletados pelo Application Insights com dados de configuração e desempenho nos recursos do Azure que dão suporte ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-139">[Log Analytics][log-analytics] helps correlate the usage and performance data collected by Application Insights with configuration and performance data across the Azure resources that support the app.</span></span> <span data-ttu-id="00909-140">Este cenário usa o [agente do Azure Log Analytics][Azure Log Analytics agent] para enviar por push logs de auditoria do SQL Server para o Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="00909-140">This scenario uses the [Azure Log Analytics agent][Azure Log Analytics agent] to push SQL Server audit logs into Log Analytics.</span></span> <span data-ttu-id="00909-141">Você pode escrever consultas e exibir dados na folha do Log Analytics no portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="00909-141">You can write queries and view data in the Log Analytics blade of the Azure portal.</span></span>

## <a name="considerations"></a><span data-ttu-id="00909-142">Considerações</span><span class="sxs-lookup"><span data-stu-id="00909-142">Considerations</span></span>

<span data-ttu-id="00909-143">Uma prática recomendada é adicionar o Application Insights ao código em desenvolvimento usando [SDKs do Application Insights][Application Insights SDKs] e personalizar por aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-143">A best practice is to add Application Insights to your code at development using the [Application Insights SDKs][Application Insights SDKs], and customize per application.</span></span> <span data-ttu-id="00909-144">Esses SDKs de software livre estão disponíveis para a maioria das estruturas de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-144">These open source SDKs are available for most application frameworks.</span></span> <span data-ttu-id="00909-145">Para enriquecer e controlar os dados coletados, incorpore o uso de ambos os SDKs para implantações de produção e teste em seu processo de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="00909-145">To enrich and control the data you collect, incorporate the use of the SDKs both for testing and production deployments into your development process.</span></span> <span data-ttu-id="00909-146">O principal requisito é que o aplicativo tenha uma linha de visão direta ou indireta para o ponto de extremidade de ingestão do Applications Insights hospedado com um endereço voltado para a Internet.</span><span class="sxs-lookup"><span data-stu-id="00909-146">The main requirement is for the app to have a direct or indirect line of sight to the Applications Insights ingestion endpoint hosted with an Internet-facing address.</span></span> <span data-ttu-id="00909-147">Você pode então adicionar telemetria ou enriquecer uma coleção de telemetria existente.</span><span class="sxs-lookup"><span data-stu-id="00909-147">You can then add telemetry or enrich an existing telemetry collection.</span></span>

<span data-ttu-id="00909-148">O monitoramento de tempo de execução é outra maneira fácil de começar.</span><span class="sxs-lookup"><span data-stu-id="00909-148">Runtime monitoring is another easy way to get started.</span></span> <span data-ttu-id="00909-149">A telemetria coletada deve ser controlada por meio de arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="00909-149">The telemetry that is collected must be controlled through configuration files.</span></span> <span data-ttu-id="00909-150">Por exemplo, você pode incluir métodos de tempo de execução que habilitam ferramentas como o [Application Insights Status Monitor][Application Insights Status Monitor] para implantar os SDKs na pasta correta e adicionar as configurações corretas para começar o monitoramento.</span><span class="sxs-lookup"><span data-stu-id="00909-150">For example, you can include runtime methods that enable tools such as [Application Insights Status Monitor][Application Insights Status Monitor] to deploy the SDKs into the correct folder and add the right configurations to begin monitoring.</span></span>

<span data-ttu-id="00909-151">Como o Application Insights, o Log Analytics fornece ferramentas para [analisar dados em fontes][analyzing data across sources], criar consultas complexas e [enviar alertas proativos][sending proactive alerts] nas condições especificadas.</span><span class="sxs-lookup"><span data-stu-id="00909-151">Like Application Insights, Log Analytics provides tools for [analyzing data across sources][analyzing data across sources], creating complex queries, and [sending proactive alerts][sending proactive alerts] on specified conditions.</span></span> <span data-ttu-id="00909-152">Você também pode exibir a telemetria no [portal do Azure][the Azure portal].</span><span class="sxs-lookup"><span data-stu-id="00909-152">You can also view telemetry in [the Azure portal][the Azure portal].</span></span> <span data-ttu-id="00909-153">O Log Analytics agrega valor aos serviços de monitoramento existentes, como o [Azure Monitor][Azure Monitor], e também pode monitorar ambientes locais.</span><span class="sxs-lookup"><span data-stu-id="00909-153">Log Analytics adds value to existing monitoring services such as [Azure Monitor][Azure Monitor] and can also monitor on-premises environments.</span></span>

<span data-ttu-id="00909-154">O Application Insights e o Log Analytics usam a [Linguagem de Consulta do Azure Log Analytics][Azure Log Analytics Query Language].</span><span class="sxs-lookup"><span data-stu-id="00909-154">Both Application Insights and Log Analytics use [Azure Log Analytics Query Language][Azure Log Analytics Query Language].</span></span> <span data-ttu-id="00909-155">Você também pode usar [consultas de recursos cruzados](https://azure.microsoft.com/blog/query-across-resources) para analisar a telemetria coletada pelo Application Insights e pelo Log Analytics em uma única consulta.</span><span class="sxs-lookup"><span data-stu-id="00909-155">You can also use [cross-resource queries](https://azure.microsoft.com/blog/query-across-resources) to analyze the telemetry gathered by Application Insights and Log Analytics in a single query.</span></span>

<span data-ttu-id="00909-156">O Azure Monitor, o Application Insights e o Log Analytics enviam [alertas](/azure/monitoring-and-diagnostics/monitoring-overview-alerts).</span><span class="sxs-lookup"><span data-stu-id="00909-156">Azure Monitor, Application Insights, and Log Analytics all send [alerts](/azure/monitoring-and-diagnostics/monitoring-overview-alerts).</span></span> <span data-ttu-id="00909-157">Por exemplo, o Azure Monitor alerta sobre métricas de nível de plataforma, como a utilização de CPU, enquanto o Application Insights alerta sobre métricas de nível de aplicativo, como tempo de resposta do servidor.</span><span class="sxs-lookup"><span data-stu-id="00909-157">For example, Azure Monitor alerts on platform-level metrics such as CPU utilization, while Application Insights alerts on application-level metrics such as server response time.</span></span> <span data-ttu-id="00909-158">O Azure Monitor alerta sobre novos eventos no Log de Atividades do Azure, enquanto o Log Analytics pode emitir alertas sobre dados de métricas ou eventos para os serviços configurados para usá-lo.</span><span class="sxs-lookup"><span data-stu-id="00909-158">Azure Monitor alerts on new events in the Azure Activity Log, while Log Analytics can issue alerts about metrics or event data for the services configured to use it.</span></span> <span data-ttu-id="00909-159">[Alertas unificados no Azure Monitor](/azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts) é uma nova experiência de alertas unificados no Azure que usa uma taxonomia diferente.</span><span class="sxs-lookup"><span data-stu-id="00909-159">[Unified alerts in Azure Monitor](/azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts) is a new, unified alerting experience in Azure that uses a different taxonomy.</span></span>

### <a name="alternatives"></a><span data-ttu-id="00909-160">Alternativas</span><span class="sxs-lookup"><span data-stu-id="00909-160">Alternatives</span></span>

<span data-ttu-id="00909-161">Este artigo descreve opções de monitoramento convenientemente disponíveis com recursos populares, mas você tem muitas opções, incluindo a opção de criar seus próprios mecanismos de registro em log.</span><span class="sxs-lookup"><span data-stu-id="00909-161">This article describes conveniently available monitoring options with popular features, but you have many choices, including the option to create your own logging mechanisms.</span></span> <span data-ttu-id="00909-162">Uma prática recomendada é adicionar os serviços de monitoramento conforme você compila as camadas em uma solução.</span><span class="sxs-lookup"><span data-stu-id="00909-162">A best practice is to add monitoring services as you build out tiers in a solution.</span></span> <span data-ttu-id="00909-163">Aqui estão algumas possíveis extensões e alternativas:</span><span class="sxs-lookup"><span data-stu-id="00909-163">Here are some possible extensions and alternatives:</span></span>

- <span data-ttu-id="00909-164">Consolide as métricas do Azure Monitor e do Application Insights no Grafana usando o [Azure Monitor Data Source para Grafana][Azure Monitor Data Source For Grafana].</span><span class="sxs-lookup"><span data-stu-id="00909-164">Consolidate Azure Monitor and Application Insights metrics in Grafana using the [Azure Monitor Data Source For Grafana][Azure Monitor Data Source For Grafana].</span></span>
- <span data-ttu-id="00909-165">O [Data Dog][data-dog] tem um conector para o Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="00909-165">[Data Dog][data-dog] features a connector for Azure Monitor</span></span>
- <span data-ttu-id="00909-166">Automatize funções de monitoramento usando a [Automação do Azure][Azure Automation].</span><span class="sxs-lookup"><span data-stu-id="00909-166">Automate monitoring functions using [Azure Automation][Azure Automation].</span></span>
- <span data-ttu-id="00909-167">Adicione a comunicação com [soluções ITSM][ITSM solutions].</span><span class="sxs-lookup"><span data-stu-id="00909-167">Add communication with [ITSM solutions][ITSM solutions].</span></span>
- <span data-ttu-id="00909-168">Estenda o Log Analytics com uma [solução de gerenciamento][management solution].</span><span class="sxs-lookup"><span data-stu-id="00909-168">Extend Log Analytics with a [management solution][management solution].</span></span>

### <a name="scalability-and-availability"></a><span data-ttu-id="00909-169">Escalabilidade e disponibilidade</span><span class="sxs-lookup"><span data-stu-id="00909-169">Scalability and availability</span></span>

<span data-ttu-id="00909-170">Esse cenário se concentra em soluções de PaaS para o monitoramento, em grande parte porque elas lidam de forma conveniente com a disponibilidade e a escalabilidade para você e contam com SLAs (contratos de nível de serviço).</span><span class="sxs-lookup"><span data-stu-id="00909-170">This scenario focuses on PaaS solutions for monitoring in large part because they conveniently handle availability and scalability for you and are backed by service-level agreements (SLAs).</span></span> <span data-ttu-id="00909-171">Por exemplo, os Serviços de Aplicativos fornecem um [SLA][SLA] com garantia de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="00909-171">For example, App Services provides a guaranteed [SLA][SLA] for its availability.</span></span>

<span data-ttu-id="00909-172">O Application Insights tem [limites][app-insights-limits] para o número de solicitações que podem ser processadas por segundo.</span><span class="sxs-lookup"><span data-stu-id="00909-172">Application Insights has [limits][app-insights-limits] on how many requests can be processed per second.</span></span> <span data-ttu-id="00909-173">Se exceder o limite de solicitação, você poderá enfrentar a limitação de mensagens.</span><span class="sxs-lookup"><span data-stu-id="00909-173">If you exceed the request limit, you may experience message throttling.</span></span> <span data-ttu-id="00909-174">Para evitar isso, implemente [filtragem][message-filtering] ou [amostragem][message-sampling] para reduzir a taxa de dados</span><span class="sxs-lookup"><span data-stu-id="00909-174">To prevent this, implement [filtering][message-filtering] or [sampling][message-sampling] to reduce the data rate</span></span>

<span data-ttu-id="00909-175">No entanto, considerações de alta disponibilidade para o aplicativo que você executa são responsabilidade do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="00909-175">High availability considerations for the app you run, however, are the developer's responsibility.</span></span> <span data-ttu-id="00909-176">Para saber mais sobre a escala, por exemplo, confira a seção [Considerações sobre escalabilidade](#scalability-considerations) na arquitetura de referência do aplicativo Web básico.</span><span class="sxs-lookup"><span data-stu-id="00909-176">For information about scale, for example, see the [Scalability considerations](#scalability-considerations) section in the basic web application reference architecture.</span></span> <span data-ttu-id="00909-177">Depois que um aplicativo for implantado, você poderá configurar testes para [monitorar sua disponibilidade][monitor its availability] usando o Application Insights.</span><span class="sxs-lookup"><span data-stu-id="00909-177">After an app is deployed, you can set up tests to [monitor its availability][monitor its availability] using Application Insights.</span></span>

### <a name="security"></a><span data-ttu-id="00909-178">Segurança</span><span class="sxs-lookup"><span data-stu-id="00909-178">Security</span></span>

<span data-ttu-id="00909-179">Os requisitos de conformidade e informações confidenciais afetam a coleta, a retenção e o armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="00909-179">Sensitive information and compliance requirements affect data collection, retention, and storage.</span></span> <span data-ttu-id="00909-180">Saiba mais sobre como o [Application Insights][application-insights] e o [Log Analytics][log-analytics] lidam com a telemetria.</span><span class="sxs-lookup"><span data-stu-id="00909-180">Learn more about how [Application Insights][application-insights] and [Log Analytics][log-analytics] handle telemetry.</span></span>

<span data-ttu-id="00909-181">As seguintes considerações de segurança também podem ser aplicáveis:</span><span class="sxs-lookup"><span data-stu-id="00909-181">The following security considerations may also apply:</span></span>

- <span data-ttu-id="00909-182">Desenvolva um plano para lidar com informações pessoais, se os desenvolvedores têm permissão para coletar seus próprios dados ou enriquecer a telemetria existente.</span><span class="sxs-lookup"><span data-stu-id="00909-182">Develop a plan to handle personal information if developers are allowed to collect their own data or enrich existing telemetry.</span></span>
- <span data-ttu-id="00909-183">Considere a possibilidade de retenção de dados.</span><span class="sxs-lookup"><span data-stu-id="00909-183">Consider data retention.</span></span> <span data-ttu-id="00909-184">Por exemplo, o Application Insights retém dados de telemetria por 90 dias.</span><span class="sxs-lookup"><span data-stu-id="00909-184">For example, Application Insights retains telemetry data for 90 days.</span></span> <span data-ttu-id="00909-185">Arquive dados que você deseja acessar por períodos mais longos usando o Microsoft Power BI, a Exportação Contínua ou a API REST.</span><span class="sxs-lookup"><span data-stu-id="00909-185">Archive data you want access to for longer periods using Microsoft Power BI, Continuous Export, or the REST API.</span></span> <span data-ttu-id="00909-186">As taxas de armazenamento se aplicam.</span><span class="sxs-lookup"><span data-stu-id="00909-186">Storage rates apply.</span></span>
- <span data-ttu-id="00909-187">Limite o acesso aos recursos do Azure para controlar o acesso a dados e quem pode exibir a telemetria de um aplicativo específico.</span><span class="sxs-lookup"><span data-stu-id="00909-187">Limit access to Azure resources to control access to data and who can view telemetry from a specific application.</span></span> <span data-ttu-id="00909-188">Para ajudar a bloquear o acesso ao monitoramento de telemetria, confira [Recursos, funções e controle de acesso no Application Insights][Resources, roles, and access control in Application Insights].</span><span class="sxs-lookup"><span data-stu-id="00909-188">To help lock down access to monitoring telemetry, see [Resources, roles, and access control in Application Insights][Resources, roles, and access control in Application Insights].</span></span>
- <span data-ttu-id="00909-189">Considere a possibilidade de controlar o acesso de leitura/gravação no código do aplicativo para impedir que usuários adicionem marcadores de versão ou marca que limitam a ingestão de dados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-189">Consider whether to control read/write access in application code to prevent users from adding version or tag markers that limit data ingestion from the application.</span></span> <span data-ttu-id="00909-190">Com o Application Insights, não há controle sobre itens de dados individuais quando eles são enviados a um recurso. Portanto, se um usuário tem acesso a alguns dados, tem acesso a todos os dados em um recurso individual.</span><span class="sxs-lookup"><span data-stu-id="00909-190">With Application Insights, there is no control over individual data items once they are sent to a resource, so if a user has access to any data, they have access to all data in an individual resource.</span></span>
- <span data-ttu-id="00909-191">Adicione mecanismos de [governança](/azure/security/governance-in-azure) para impor a política ou controles de custo sobre recursos do Azure, se necessário.</span><span class="sxs-lookup"><span data-stu-id="00909-191">Add [governance](/azure/security/governance-in-azure) mechanisms to enforce policy or cost controls over Azure resources if needed.</span></span> <span data-ttu-id="00909-192">Por exemplo, use o Log Analytics para monitoramento de segurança, como políticas e controle de acesso baseado em função, ou use o [Azure Policy](/azure/azure-policy/azure-policy-introduction) para criar, atribuir e gerenciar definições de política.</span><span class="sxs-lookup"><span data-stu-id="00909-192">For example, use Log Analytics for security-related monitoring such as policies and role based access control, or use [Azure Policy](/azure/azure-policy/azure-policy-introduction) to create, assign and, manage policy definitions.</span></span>
- <span data-ttu-id="00909-193">Para monitorar problemas de segurança potenciais e obter uma visão central do estado de segurança de seus recursos do Azure, considere o uso da [Central de Segurança do Azure](/azure/security-center/security-center-intro).</span><span class="sxs-lookup"><span data-stu-id="00909-193">To monitor potential security issues and get a central view of the security state of your Azure resources, consider using [Azure Security Center](/azure/security-center/security-center-intro).</span></span>

## <a name="pricing"></a><span data-ttu-id="00909-194">Preços</span><span class="sxs-lookup"><span data-stu-id="00909-194">Pricing</span></span>

<span data-ttu-id="00909-195">Os encargos de monitoramento podem se acumular rapidamente. Portanto, considere o preço com antecedência, entenda o que você está monitorando e verifique as taxas associadas a cada serviço.</span><span class="sxs-lookup"><span data-stu-id="00909-195">Monitoring charges can add up quickly, so consider pricing up front, understand what you are monitoring, and check the associated fees for each service.</span></span> <span data-ttu-id="00909-196">O Azure Monitor fornece [métricas básicas][basic metrics] sem custo, enquanto o monitoramento dos custos do [Application Insights][application-insights-pricing] e do [Log Analytics][log-analytics] se baseia na quantidade de dados ingeridos e no número de testes que você executa.</span><span class="sxs-lookup"><span data-stu-id="00909-196">Azure Monitor provides [basic metrics][basic metrics] at no cost, while monitoring costs for [Application Insights][application-insights-pricing] and [Log Analytics][log-analytics] are based on the amount of data ingested and the number of tests you run.</span></span>

<span data-ttu-id="00909-197">Para ajudá-lo a começar, use a [calculadora de preços][pricing] para estimar os custos.</span><span class="sxs-lookup"><span data-stu-id="00909-197">To help you get started, use the [pricing calculator][pricing] to estimate costs.</span></span> <span data-ttu-id="00909-198">Para ver como o preço seria alterado para seu caso de uso específico, altere as várias opções para corresponder à sua implantação esperada.</span><span class="sxs-lookup"><span data-stu-id="00909-198">To see how the pricing would change for your particular use case, change the various options to match your expected deployment.</span></span>

<span data-ttu-id="00909-199">A telemetria do Application Insights é enviada ao portal do Azure durante a depuração e depois que você publica o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00909-199">Telemetry from Application Insights is sent to the Azure portal during debugging and after you have published your app.</span></span> <span data-ttu-id="00909-200">Para fins de teste e para evitar cobranças, um volume limitado de telemetria é instrumentado.</span><span class="sxs-lookup"><span data-stu-id="00909-200">For testing purposes and to avoid charges, a limited volume of telemetry is instrumented.</span></span> <span data-ttu-id="00909-201">Para adicionar indicadores, você pode aumentar o limite de telemetria.</span><span class="sxs-lookup"><span data-stu-id="00909-201">To add more indicators, you can raise the telemetry limit.</span></span> <span data-ttu-id="00909-202">Para obter um controle mais granular, confira [Amostragem no Application Insights][Sampling in Application Insights].</span><span class="sxs-lookup"><span data-stu-id="00909-202">For more granular control, see [Sampling in Application Insights][Sampling in Application Insights].</span></span>

<span data-ttu-id="00909-203">Após a implantação, você poderá assistir a um [Live Metrics Stream][Live Metrics Stream] dos indicadores de desempenho.</span><span class="sxs-lookup"><span data-stu-id="00909-203">After deployment, you can watch a [Live Metrics Stream][Live Metrics Stream] of performance indicators.</span></span> <span data-ttu-id="00909-204">Esses dados não são armazenados (você está exibindo métricas em tempo real), mas a telemetria pode ser coletada e analisada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="00909-204">This data is not stored---you are viewing real-time metrics---but the telemetry can be collected and analyzed later.</span></span> <span data-ttu-id="00909-205">Não há custo para dados do Live Stream.</span><span class="sxs-lookup"><span data-stu-id="00909-205">There is no charge for Live Stream data.</span></span>

<span data-ttu-id="00909-206">O Log Analytics é cobrado por GB (gigabyte) de dados ingeridos no serviço.</span><span class="sxs-lookup"><span data-stu-id="00909-206">Log Analytics is billed per gigabyte (GB) of data ingested into the service.</span></span> <span data-ttu-id="00909-207">Os primeiros 5 GB de dados ingeridos para o serviço Azure Log Analytics a cada mês são oferecidos gratuitamente, e os dados são retidos sem custo pelos primeiros 31 dias no espaço de trabalho do Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="00909-207">The first 5 GB of data ingested to the Azure Log Analytics service every month is offered free, and the data is retained at no charge for first 31 days in your Log Analytics workspace.</span></span>

## <a name="next-steps"></a><span data-ttu-id="00909-208">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="00909-208">Next steps</span></span>

<span data-ttu-id="00909-209">Confira estes recursos projetados para ajudar você a se familiarizar com sua própria solução de monitoramento:</span><span class="sxs-lookup"><span data-stu-id="00909-209">Check out these resources designed to help you get started with your own monitoring solution:</span></span>

<span data-ttu-id="00909-210">[Arquitetura de referência de aplicativo Web básico][Basic web application reference architecture]</span><span class="sxs-lookup"><span data-stu-id="00909-210">[Basic web application reference architecture][Basic web application reference architecture]</span></span>

<span data-ttu-id="00909-211">[Começar a monitorar o aplicativo Web ASP.NET][Start monitoring your ASP.NET Web Application]</span><span class="sxs-lookup"><span data-stu-id="00909-211">[Start monitoring your ASP.NET Web Application][Start monitoring your ASP.NET Web Application]</span></span>

<span data-ttu-id="00909-212">[Coletar dados sobre as Máquinas Virtuais do Azure][Collect data about Azure Virtual Machines]</span><span class="sxs-lookup"><span data-stu-id="00909-212">[Collect data about Azure Virtual Machines][Collect data about Azure Virtual Machines]</span></span>

## <a name="related-resources"></a><span data-ttu-id="00909-213">Recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="00909-213">Related resources</span></span>

<span data-ttu-id="00909-214">[Monitoramento dos aplicativos e recursos do Azure][Monitoring Azure applications and resources]</span><span class="sxs-lookup"><span data-stu-id="00909-214">[Monitoring Azure applications and resources][Monitoring Azure applications and resources]</span></span>

<span data-ttu-id="00909-215">[Localizar e diagnosticar exceções de tempo de execução com o Azure Application Insights][Find and diagnose run-time exceptions with Azure Application Insights]</span><span class="sxs-lookup"><span data-stu-id="00909-215">[Find and diagnose run-time exceptions with Azure Application Insights][Find and diagnose run-time exceptions with Azure Application Insights]</span></span>

<!-- links -->
[architecture]: ./media/architecture-app-monitoring.png
[availability-tests]: /azure/application-insights/app-insights-monitor-web-app-availability
[application-insights]: /azure/application-insights/app-insights-overview
[azure-monitor]: /azure/monitoring-and-diagnostics/monitoring-overview-azure-monitor
[metrics]: /azure/monitoring-and-diagnostics/monitoring-supported-metrics
[Log Analytics e outros serviços]: /azure/log-analytics/log-analytics-azure-storage
[Log Analytics and other services]: /azure/log-analytics/log-analytics-azure-storage
[log-analytics]: /azure/log-analytics/log-analytics-overview
[Azure Log Analytics agent]: https://blogs.msdn.microsoft.com/sqlsecurity/2017/12/28/azure-log-analytics-oms-agent-now-collects-sql-server-audit-logs/
[application-insights-pricing]: https://azure.microsoft.com/pricing/details/application-insights/
[Application Insights SDKs]: /azure/application-insights/app-insights-asp-net
[Application Insights Status Monitor]: https://azure.microsoft.com/updates/application-insights-status-monitor-and-sdk-updated/
[analyzing data across sources]: /azure/log-analytics/log-analytics-dashboards
[sending proactive alerts]: /azure/log-analytics/log-analytics-alerts
[the Azure portal]: /azure/log-analytics/log-analytics-tutorial-dashboards
[Azure Log Analytics Query Language]: https://docs.loganalytics.io/docs/Learn
[cross-resource queries]: https://azure.microsoft.com/blog/query-across-resources/
[alerts]: /azure/monitoring-and-diagnostics/monitoring-overview-alerts
[Alerts (Preview)]: /azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts
[Azure Monitor Data Source For Grafana]: https://grafana.com/plugins/grafana-azure-monitor-datasource
[Azure Automation]: /azure/automation/automation-intro
[ITSM solutions]: https://azure.microsoft.com/blog/itsm-connector-for-azure-is-now-generally-available/
[management solution]: /azure/monitoring/monitoring-solutions
[SLA]: https://azure.microsoft.com/support/legal/sla/app-service/v1_4/
[monitor its availability]: /azure/application-insights/app-insights-monitor-web-app-availability
[Resources, roles, and access control in Application Insights]: /azure/application-insights/app-insights-resources-roles-access-control
[basic metrics]: /azure/monitoring-and-diagnostics/monitoring-supported-metrics
[pricing]: https://azure.microsoft.com/pricing/calculator/#log-analyticsc126d8c1-ec9c-4e5b-9b51-4db95d06a9b1
[Sampling in Application Insights]: /azure/application-insights/app-insights-sampling
[Live Metrics Stream]: /azure/application-insights/app-insights-live-stream
[Basic web application reference architecture]: /azure/architecture/reference-architectures/app-service-web-app/basic-web-app#scalability-considerations
[Start monitoring your ASP.NET Web Application]: /azure/application-insights/quick-monitor-portal
[Collect data about Azure Virtual Machines]: /azure/log-analytics/log-analytics-quick-collect-azurevm
[Monitoring Azure applications and resources]: /azure/monitoring-and-diagnostics/monitoring-overview
[Find and diagnose run-time exceptions with Azure Application Insights]: /azure/application-insights/app-insights-tutorial-runtime-exceptions
[data-dog]: https://www.datadoghq.com/blog/azure-monitoring-enhancements/
[app-insights-limits]: /azure/azure-subscription-service-limits#application-insights-limits
[message-filtering]: /azure/application-insights/app-insights-api-filtering-sampling
[message-sampling]: /azure/application-insights/app-insights-sampling

---
title: Acelerar a modelagem baseada em imagem digital no Azure
titleSuffix: Azure Example Scenarios
description: Acelere a modelagem baseada em imagem digital no Azure usando o Avere e o Agisoft PhotoScan
author: adamboeglin
ms.date: 01/11/2019
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: cat-team, Linux, HPC
social_image_url: /azure/architecture/example-scenario/infrastructure/media/architecture-image-modeling.png
ms.openlocfilehash: 981d9f01ef12f75d9b292196f754f3a0affa791a
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640372"
---
# <a name="accelerate-digital-image-based-modeling-on-azure"></a><span data-ttu-id="ae9fc-103">Acelerar a modelagem baseada em imagem digital no Azure</span><span class="sxs-lookup"><span data-stu-id="ae9fc-103">Accelerate digital image-based modeling on Azure</span></span>

<span data-ttu-id="ae9fc-104">Este cenário de exemplo oferece orientação de arquitetura e design para qualquer organização que queira fazer a modelagem baseada em imagem na IaaS (infraestrutura como serviço) do Azure.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-104">This example scenario provides architecture and design guidance for any organization that wants to perform image-based modeling on Azure infrastructure-as-a-service (IaaS).</span></span> <span data-ttu-id="ae9fc-105">O cenário é projetado para executar software de fotogrametria em VMs (máquinas virtuais) do Azure usando um armazenamento de alto desempenho que agiliza o tempo de processamento.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-105">The scenario is designed for running photogrammetry software on Azure Virtual Machines (VMs) using high-performance storage that accelerates processing time.</span></span> <span data-ttu-id="ae9fc-106">O ambiente pode ser escalado e reduzido verticalmente conforme a necessidade e dá suporte a terabytes de armazenamento sem prejudicar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-106">The environment can be scaled up and down as needed and supports terabytes of storage without sacrificing performance.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="ae9fc-107">Casos de uso relevantes</span><span class="sxs-lookup"><span data-stu-id="ae9fc-107">Relevant use cases</span></span>

<span data-ttu-id="ae9fc-108">Outros casos de uso relevantes incluem:</span><span class="sxs-lookup"><span data-stu-id="ae9fc-108">Relevant use cases include:</span></span>

- <span data-ttu-id="ae9fc-109">Modelagem e medição de prédios, estruturas de engenharia e cenas de investigação de acidentes.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-109">Modeling and measuring buildings, engineering structures, and forensic accident scenes.</span></span>
- <span data-ttu-id="ae9fc-110">Criação de efeitos visuais para filmes e jogos de computador.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-110">Creating visual effects for computer games and movies.</span></span>
- <span data-ttu-id="ae9fc-111">Uso de imagens digitais para gerar indiretamente medições de objetos de várias escalas, como no planejamento urbano e em outros usos.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-111">Using digital images to indirectly generate measurements of objects of various scales as in urban planning and other applications.</span></span>

## <a name="architecture"></a><span data-ttu-id="ae9fc-112">Arquitetura</span><span class="sxs-lookup"><span data-stu-id="ae9fc-112">Architecture</span></span>

<span data-ttu-id="ae9fc-113">Este exemplo descreve o uso do software de fotogrametria Agisoft PhotoScan com suporte do repositório do Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-113">This example describes the use of Agisoft PhotoScan photogrammetry software backed by Avere vFXT storage.</span></span> <span data-ttu-id="ae9fc-114">O PhotoScan foi escolhido pela sua popularidade em aplicativos de GIS (sistema de informações geográficas), documentação de herança cultural, desenvolvimento de jogos e produção de efeitos visuais.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-114">PhotoScan was chosen for its popularity in geographic information system (GIS) applications, cultural heritage documentation, game development, and visual effects production.</span></span> <span data-ttu-id="ae9fc-115">Ele é adequado tanto para fotogrametria aérea quanto de proximidade.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-115">It is suitable for both close-range photogrammetry and aerial photogrammetry.</span></span>

<span data-ttu-id="ae9fc-116">Os conceitos neste artigo se aplicam a qualquer carga de trabalho de HPC (computação de alto desempenho) com base em um agendador e nós de trabalho gerenciados como infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-116">The concepts in this article apply to any high-performance computing (HPC) workload based on a scheduler and worker nodes managed as infrastructure.</span></span>  <span data-ttu-id="ae9fc-117">Para essa carga de trabalho, o Avere vFXT foi selecionado por conta de seu desempenho superior durante os testes de benchmark.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-117">For this workload, Avere vFXT was selected for its superior performance during benchmark tests.</span></span>  <span data-ttu-id="ae9fc-118">No entanto, o cenário distingue o armazenamento do processamento para que outras soluções de armazenamento possam ser usadas (confira as [alternativas](#alternatives) mais adiante neste documento).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-118">However, the scenario decouples the storage from the processing so that other storage solutions can be used (see [alternatives](#alternatives) later in this document).</span></span>

<span data-ttu-id="ae9fc-119">Esta arquitetura também inclui os controladores de domínio do Active Directory para controlar o acesso aos recursos do Azure e fornecer resolução de nomes interna por meio de DNS (Sistema de Nomes de Domínio).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-119">This architecture also includes Active Directory domain controllers to control access to Azure resources and provide internal name resolution through the Domain Name System (DNS).</span></span> <span data-ttu-id="ae9fc-120">Jump boxes fornecem acesso de administrador a VMs do Windows e do Linux que estejam executando a solução.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-120">Jump boxes provide administrator access to the Windows and Linux VMs that run the solution.</span></span>

![diagrama da arquitetura](./media/architecture-image-modeling.png)

1. <span data-ttu-id="ae9fc-122">O usuário envia várias imagens ao PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-122">User submits a number of images to PhotoScan.</span></span>
2. <span data-ttu-id="ae9fc-123">O Agendador do PhotoScan é executado em uma VM do Windows que serve como o nó de cabeçalho e orienta o processamento das imagens do usuário.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-123">The PhotoScan Scheduler runs on a Windows VM that serves as the head node and directs processing of the user's images.</span></span>
3. <span data-ttu-id="ae9fc-124">O PhotoScan procura pontos comuns nas fotografias e constrói a geometria (malha) usando os nós de processamento do PhotoScan executados em VMs com GPUs (unidades de processamento gráfico).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-124">PhotoScan searches for common points on the photographs and constructs the geometry (mesh) using the PhotoScan processing nodes running on VMs with graphics processing units (GPUs).</span></span>
4. <span data-ttu-id="ae9fc-125">O Avere vFXT fornece uma solução de armazenamento de alto desempenho no Azure com base em NFSv3 (Network File System versão 3) e composta por pelo menos quatro VMs.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-125">Avere vFXT provides a high-performance storage solution on Azure based on Network File System version 3 (NFSv3) and comprised of at least four VMs.</span></span>
5. <span data-ttu-id="ae9fc-126">O PhotoScan renderiza o modelo.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-126">PhotoScan renders the model.</span></span>

### <a name="components"></a><span data-ttu-id="ae9fc-127">Componentes</span><span class="sxs-lookup"><span data-stu-id="ae9fc-127">Components</span></span>

- <span data-ttu-id="ae9fc-128">[Agisoft PhotoScan](http://www.agisoft.com/): o Agendador do PhotoScan é executado em uma VM do Windows Server 2016 e os nós de processamento usam cinco VMs com GPUs que executam o CentOS Linux 7.5.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-128">[Agisoft PhotoScan](http://www.agisoft.com/): The PhotoScan Scheduler runs on a Windows 2016 Server VM, and the processing nodes use five VMs with GPUs that run CentOS Linux 7.5.</span></span>
- <span data-ttu-id="ae9fc-129">O [Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) é um arquivo de solução de cache de arquivos que usa armazenamento de objeto e NAS (Network Attached Storage) para otimizar o armazenamento de grandes conjuntos de dados.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) is a file caching solution that uses object storage and traditional network-attached storage (NAS) to optimize storage of large datasets.</span></span> <span data-ttu-id="ae9fc-130"> Ele inclui:</span><span class="sxs-lookup"><span data-stu-id="ae9fc-130">It includes:</span></span>
  - <span data-ttu-id="ae9fc-131">Controlador do Avere.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-131">Avere Controller.</span></span> <span data-ttu-id="ae9fc-132">Essa VM executa o script que instala o cluster do Avere vFXT e executa Ubuntu 18.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-132">This VM executes the script that installs the Avere vFXT cluster and runs Ubuntu 18.04 LTS.</span></span> <span data-ttu-id="ae9fc-133">A VM pode ser usada posteriormente para adicionar ou remover nós de cluster e também para acabar com o cluster.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-133">The VM can be used later to add or remove cluster nodes and to destroy the cluster as well.</span></span>
  - <span data-ttu-id="ae9fc-134">Cluster do vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-134">vFXT cluster.</span></span> <span data-ttu-id="ae9fc-135">Pelo menos três VMs são usadas, uma para cada um dos nós do Avere vFXT com base no sistema operacional Avere 5.0.2.1.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-135">At least three VMs are used, one for each of the Avere vFXT nodes based on Avere OS 5.0.2.1.</span></span> <span data-ttu-id="ae9fc-136">Essas VMs formam o cluster do vFXT, que é anexado ao Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-136">These VMs form the vFXT cluster, which is attached to Azure Blob storage.</span></span>
- <span data-ttu-id="ae9fc-137">Os [controladores de domínio do Microsoft Active Directory](/windows/desktop/ad/active-directory-domain-services) dão ao host acesso aos recursos do domínio e fornecem resolução de nomes DNS.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-137">[Microsoft Active Directory domain controllers](/windows/desktop/ad/active-directory-domain-services) allow the host access to domain resources and provide DNS name resolution.</span></span> <span data-ttu-id="ae9fc-138">Avere vFXT adiciona um número de registros &mdash; por exemplo, cada registro em um cluster vFXT aponta para o endereço IP de cada nó de vFXT Avere.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-138">Avere vFXT adds a number of A records &mdash; for example, each A record in a vFXT cluster points to the IP address of each Avere vFXT node.</span></span> <span data-ttu-id="ae9fc-139">Nessa configuração, todas as VMs usam o padrão round robin para acessar exportações do vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-139">In this setup, all VMs use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="ae9fc-140">[Outras VMs](/azure/virtual-machines/) servem como jump boxes usadas pelo administrador para acessar os nós de processamento e do agendador.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-140">[Other VMs](/azure/virtual-machines/) serve as jump boxes used by the administrator to access the scheduler and processing nodes.</span></span> <span data-ttu-id="ae9fc-141">A jumpbox do Windows é obrigatória para permitir que o administrador acesse o nó de cabeçalho por meio do protocolo de área de trabalho remota.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-141">The Windows jumpbox is mandatory to allow the administrator to access the head node via remote desktop protocol.</span></span> <span data-ttu-id="ae9fc-142">A segunda jumpbox é opcional e executa o Linux para administrar nós de trabalho.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-142">The second jumpbox is optional and runs Linux for administration of the worker nodes.</span></span>
- <span data-ttu-id="ae9fc-143">Os [NSGs](/azure/virtual-network/manage-network-security-group) (Grupos de Segurança de Rede) limitam o acesso ao PIP (endereço IP público) e permitem as portas 3389 e 22 para acesso às VMs conectadas à sub-rede da Jumpbox.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-143">[Network security groups](/azure/virtual-network/manage-network-security-group) (NSGs) limit access to the public IP address (PIP) and allow ports 3389 and 22 for access to the VMs attached to the Jumpbox subnet.</span></span>
- <span data-ttu-id="ae9fc-144">O [Emparelhamento VNET](/azure/virtual-network/virtual-network-peering-overview) conecta uma rede virtual do PhotoScan a uma rede virtual do Avere.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-144">[Virtual network peering](/azure/virtual-network/virtual-network-peering-overview) connects a PhotoScan virtual network to an Avere virtual network.</span></span>
- <span data-ttu-id="ae9fc-145">O [Armazenamento de Blobs do Azure](/azure/storage/blobs/storage-blobs-introduction) funciona com o Avere vFXT como o arquivista principal para armazenar os dados confirmados que estão sendo processados.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-145">[Azure Blob storage](/azure/storage/blobs/storage-blobs-introduction) works with Avere vFXT as the core filer to store the committed data being processed.</span></span> <span data-ttu-id="ae9fc-146">O Avere vFXT identifica os dados ativos armazenados no Blob do Azure e os coloca em camadas nas SSD (unidades de estado sólido) usadas para fazer o cache em seus nós de computação enquanto um trabalho do PhotoScan está em execução.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-146">Avere vFXT identifies the active data stored in Azure Blob and tiers it into solid-state drives (SSD) used for caching in its compute nodes while a PhotoScan job is running.</span></span> <span data-ttu-id="ae9fc-147">Em caso de alterações, os dados são assincronamente confirmados novamente no arquivista principal.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-147">If changes are made, the data is asynchronously committed back to the core filer.</span></span>
- <span data-ttu-id="ae9fc-148">O [Azure Key Vault](/azure/key-vault/key-vault-overview) é usado para armazenar as senhas de administrador e o código de ativação do PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) is used to store the administrator passwords and PhotoScan activation code.</span></span>

### <a name="alternatives"></a><span data-ttu-id="ae9fc-149">Alternativas</span><span class="sxs-lookup"><span data-stu-id="ae9fc-149">Alternatives</span></span>

- <span data-ttu-id="ae9fc-150">Para tirar proveito dos serviços do Azure para gerenciar um cluster de HPC, use ferramentas como o Azure CycleCloud ou o Lote do Azure em vez de gerenciar os recursos por meio de modelos ou scripts.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-150">To take advantage of Azure services for managing an HPC cluster, use tools such as Azure CycleCloud or Azure Batch instead of managing the resources through templates or scripts.</span></span>
- <span data-ttu-id="ae9fc-151">Implante o sistema de arquivos virtuais paralelos BeeGFS como o armazenamento de back-end no Azure em vez do Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-151">Deploy the BeeGFS parallel virtual file system as the back-end storage on Azure instead of Avere vFXT.</span></span> <span data-ttu-id="ae9fc-152">Use o [modelo do BeeGFS](https://github.com/paulomarquesc/beegfs-template) para implantar essa solução de ponta a ponta no Azure.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-152">Use the [BeeGFS template](https://github.com/paulomarquesc/beegfs-template) to deploy this end-to-end solution on Azure.</span></span>
- <span data-ttu-id="ae9fc-153">Implante a solução de armazenamento de sua escolha, como GlusterFS, Lustre ou Espaços de Armazenamento Diretos do Windows.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-153">Deploy the storage solution of your choice, such as GlusterFS, Lustre, or Windows Storage Spaces Direct.</span></span> <span data-ttu-id="ae9fc-154">Para fazer isso, edite o [modelo do PhotoScan](https://github.com/paulomarquesc/photoscan-template) para trabalhar com a solução de armazenamento desejada.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-154">To do this, edit the [PhotoScan template](https://github.com/paulomarquesc/photoscan-template) to work with the storage solution you want.</span></span>
- <span data-ttu-id="ae9fc-155">Implante os nós de trabalho com o sistema operacional Windows em vez do Linux, a opção padrão.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-155">Deploy the worker nodes with the Windows operating system instead of Linux, the default option.</span></span> <span data-ttu-id="ae9fc-156">Ao escolher nós do Windows, as opções de integração de armazenamento não serão executadas pelos modelos de implantação.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-156">When choosing Windows nodes, storage integration options are not executed by the deployment templates.</span></span> <span data-ttu-id="ae9fc-157">Você deve integrar o ambiente a uma solução de armazenamento existente manualmente ou personalizar o modelo do PhotoScan para fornecer essa automação, conforme descrito no [repositório](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-157">You must manually integrate the environment with an existing storage solution, or customize the PhotoScan template to provide such automation, as described in the [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span></span>

## <a name="considerations"></a><span data-ttu-id="ae9fc-158">Considerações</span><span class="sxs-lookup"><span data-stu-id="ae9fc-158">Considerations</span></span>

<span data-ttu-id="ae9fc-159">Esse cenário foi projetado especificamente para fornecer armazenamento de alto desempenho para uma carga de trabalho de HPC, seja implantada no Windows ou no Linux.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-159">This scenario is designed specifically to provide high-performance storage for an HPC workload, whether it is deployed on Windows or Linux.</span></span> <span data-ttu-id="ae9fc-160">Em geral, a configuração de armazenamento da carga de trabalho de HPC deve corresponder às práticas recomendadas pertinentes usadas para implantações locais.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-160">In general, the storage configuration of the HPC workload should match the appropriate best practices used for on-premises deployments.</span></span>

<span data-ttu-id="ae9fc-161">As considerações sobre a implantação dependem dos aplicativos e serviços usados, mas algumas observações se aplicam:</span><span class="sxs-lookup"><span data-stu-id="ae9fc-161">Deployment considerations depend on the applications and services used, but a few notes apply:</span></span>

- <span data-ttu-id="ae9fc-162">Ao criar aplicativos de alto desempenho, use o Armazenamento Premium do Azure e [otimize a camada de aplicativo](/azure/virtual-machines/windows/premium-storage-performance).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-162">When building high-performance applications, use Azure Premium Storage and [optimize the application layer](/azure/virtual-machines/windows/premium-storage-performance).</span></span> <span data-ttu-id="ae9fc-163">Otimize o armazenamento para acesso frequente usando a [camada de acesso frequente](/azure/storage/blobs/storage-blob-storage-tiers) do Blob do Azure.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-163">Optimize storage for frequent access using Azure Blob [hot tier access](/azure/storage/blobs/storage-blob-storage-tiers).</span></span>
- <span data-ttu-id="ae9fc-164">Usar um armazenamento [opção de replicação](/azure/storage/common/storage-redundancy) que atenda às suas necessidades de desempenho e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-164">Use a storage [replication option](/azure/storage/common/storage-redundancy) that meets your availability and performance requirements.</span></span> <span data-ttu-id="ae9fc-165">Neste exemplo, o Avere vFXT está configurado para alta disponibilidade por padrão, com LRS (armazenamento com redundância local).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-165">In this example, Avere vFXT is configured for high availability by default, with locally redundant storage (LRS).</span></span> <span data-ttu-id="ae9fc-166">Para balanceamento de carga, todas as VMs nessa instalação usam o padrão round robin para acessar as exportações do vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-166">For load balancing, all VMs in this setup use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="ae9fc-167">Se o armazenamento de back-end for consumido por clientes do Windows e do Linux, use servidores Samba para dar suporte a nós do Windows.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-167">If the backend storage will be consumed by both Windows clients and Linux clients, use Samba servers to support the Windows nodes.</span></span> <span data-ttu-id="ae9fc-168">Uma [versão](https://github.com/paulomarquesc/beegfs-template) deste cenário de exemplo com base em BeeGFS usa Samba para dar suporte ao nó agendador da carga de trabalho de HPC (PhotoScan) em execução no Windows.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-168">A [version](https://github.com/paulomarquesc/beegfs-template) of this example scenario based on BeeGFS uses Samba to support the scheduler node of the HPC workload (PhotoScan) running on Windows.</span></span> <span data-ttu-id="ae9fc-169">Um balanceador de carga é implantado para atuar como uma substituição inteligente do round robin de DNS.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-169">A load balancer is deployed to act like a smart replacement for DNS round robin.</span></span>
- <span data-ttu-id="ae9fc-170">Execute aplicativos de HPC usando o tipo de VM mais adequado para sua carga de trabalho do [Windows](/azure/virtual-machines/windows/sizes-hpc) ou do [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-170">Run HPC applications using the VM type best suited for your [Windows](/azure/virtual-machines/windows/sizes-hpc) or [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) workload.</span></span>
- <span data-ttu-id="ae9fc-171">Para isolar a carga de trabalho de HPC dos recursos de armazenamento, implante cada uma em sua própria rede virtual e, em seguida, use o [emparelhamento](/azure/virtual-network/virtual-network-peering-overview) VNET para conectá-las.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-171">To isolate the HPC workload from the storage resources, deploy each in its own virtual network, then use virtual network [peering](/azure/virtual-network/virtual-network-peering-overview) to connect the two.</span></span> <span data-ttu-id="ae9fc-172">O emparelhamento cria uma conexão de baixa latência e alta largura de banda entre recursos em redes virtuais diferentes e roteia o tráfego pela infraestrutura de backbone da Microsoft somente por meio de endereços IP privados.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-172">Peering creates a low-latency, high-bandwidth connection between resources in different virtual networks and routes traffic through the Microsoft backbone infrastructure through private IP addresses only.</span></span>

### <a name="security"></a><span data-ttu-id="ae9fc-173">Segurança</span><span class="sxs-lookup"><span data-stu-id="ae9fc-173">Security</span></span>

<span data-ttu-id="ae9fc-174">Este exemplo se concentra na implantação de uma solução de armazenamento de alto desempenho para uma carga de trabalho de HPC e não é uma solução de segurança.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-174">This example focuses on deploying a high-performance storage solution for an HPC workload and is not a security solution.</span></span> <span data-ttu-id="ae9fc-175">Envolva sua equipe de segurança em caso de alterações.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-175">Make sure to involve your security team for any changes.</span></span>

<span data-ttu-id="ae9fc-176">Para aumentar a segurança, a infraestrutura de exemplo permite que todas as VMs do Windows ingressem no domínio e usa o Active Directory para autenticação central.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-176">For added security, this example infrastructure enables all the Windows VMs to be domain-joined and uses Active Directory for central authentication.</span></span> <span data-ttu-id="ae9fc-177">Ela também fornece serviços DNS personalizados para todas as VMs.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-177">It also provides custom DNS services for all VMs.</span></span> <span data-ttu-id="ae9fc-178">Para ajudar a proteger o ambiente, o modelo utiliza [NSGs (Grupos de Segurança de Rede)](/azure/virtual-network/security-overview).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-178">To help protect the environment, this template relies on [network security groups (NSGs)](/azure/virtual-network/security-overview).</span></span> <span data-ttu-id="ae9fc-179">Os NSGs oferecem regras de segurança e filtros de tráfego básicos.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-179">NSGs offer basic traffic filters and security rules.</span></span>

<span data-ttu-id="ae9fc-180">Considere as seguintes opções para melhorar ainda mais a segurança no cenário:</span><span class="sxs-lookup"><span data-stu-id="ae9fc-180">Consider the following options to further improve security in this scenario:</span></span>

- <span data-ttu-id="ae9fc-181">Use dispositivos de rede virtual, como Fortinet, Checkpoint e Juniper.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-181">Use network virtual appliances such as Fortinet, Checkpoint, and Juniper.</span></span>
- <span data-ttu-id="ae9fc-182">Aplique [controle de acesso baseado em função](/azure/role-based-access-control/overview) aos grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-182">Apply [role-based access control](/azure/role-based-access-control/overview) to the resource groups.</span></span>
- <span data-ttu-id="ae9fc-183">Habilite o acesso [JIT](/azure/security-center/security-center-just-in-time) à VM se as jump boxes forem acessadas pela Internet.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-183">Enable VM [JIT](/azure/security-center/security-center-just-in-time) access if jump boxes are accessed via the Internet.</span></span>
- <span data-ttu-id="ae9fc-184">Use o [Azure Key Vault](/azure/key-vault/quick-create-portal) para armazenar as senhas usadas pelas contas de administrador.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-184">Use [Azure Key Vault](/azure/key-vault/quick-create-portal) to store the passwords used by administrator accounts.</span></span>

## <a name="pricing"></a><span data-ttu-id="ae9fc-185">Preços</span><span class="sxs-lookup"><span data-stu-id="ae9fc-185">Pricing</span></span>

<span data-ttu-id="ae9fc-186">O custo de executar esse cenário pode variar muito, dependendo de vários fatores.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-186">The cost of running this scenario can vary greatly depending on multiple factors.</span></span>  <span data-ttu-id="ae9fc-187">O número e o tamanho das VMs, a quantidade de armazenamento necessária e a quantidade de tempo exigida para concluir um trabalho determinarão seu custo.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-187">The number and size of VMs, how much storage is required, and the amount of time to complete a job will determine your cost.</span></span>

<span data-ttu-id="ae9fc-188">O perfil de custo de exemplo a seguir na [Calculadora de preços do Azure](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) baseia-se em uma configuração típica para Avere vFXT e PhotoScan:</span><span class="sxs-lookup"><span data-stu-id="ae9fc-188">The following sample cost profile in the [Azure pricing calculator](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) is based on a typical configuration for Avere vFXT and PhotoScan:</span></span>

- <span data-ttu-id="ae9fc-189">1 VM A1\_v2 Ubuntu para executar o controlador do Avere.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-189">1 A1\_v2 Ubuntu VM to run the Avere controller.</span></span>
- <span data-ttu-id="ae9fc-190">3 VMs D16s\_v3 Avere SO, uma para cada um dos nós do Avere vFXT que formam o cluster do vFXT.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-190">3 D16s\_v3 Avere OS VMs, one for each of the Avere vFXT nodes that form the vFXT cluster.</span></span>
- <span data-ttu-id="ae9fc-191">5 VMs NC24\_v2 do Linux para fornecer as GPUs necessárias para os nós de processamento do PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-191">5 NC24\_v2 Linux VMs to provide the GPUs needed by the PhotoScan processing nodes.</span></span>
- <span data-ttu-id="ae9fc-192">1 VM D8s\_v3 CentOS para o nó do Agendador do PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-192">1 D8s\_v3 CentOS VM for the PhotoScan scheduler node.</span></span>
- <span data-ttu-id="ae9fc-193">1 CentOS DS2\_v2 usado como jumpbox do administrador.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-193">1 DS2\_v2 CentOS used as administrator jumpbox.</span></span>
- <span data-ttu-id="ae9fc-194">2 VMs DS2\_v2 para os controladores de domínio do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-194">2 DS2\_v2 VMs for the Active Directory domain controllers.</span></span>
- <span data-ttu-id="ae9fc-195">Discos gerenciados Premium.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-195">Premium managed disks.</span></span>
- <span data-ttu-id="ae9fc-196">Armazenamento de Blobs de Uso Geral v2 (GPv2) com LRS e acesso frequente (somente contas de armazenamento GPv2 expõem o atributo Camada de Acesso).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-196">General purpose v2 (GPv2) Blob storage with LRS and hot tier access (only GPv2 storage accounts expose the Access Tier attribute).</span></span>
- <span data-ttu-id="ae9fc-197">Rede virtual com suporte para transferência de dados de 10 TB.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-197">Virtual network with support for 10 TB data transfer.</span></span>

<span data-ttu-id="ae9fc-198">Para obter detalhes sobre a arquitetura, confira o [livro eletrônico](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-198">For details about this architecture, see the [ebook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span> <span data-ttu-id="ae9fc-199">Para ver como o preço seria alterado para o seu caso de uso específico, escolha diferentes tamanhos de VM na calculadora de preços para corresponder à implantação estimada.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-199">To see how the pricing would change for your particular use case, choose different VM sizes in the pricing calculator to match your expected deployment.</span></span>

## <a name="deployment"></a><span data-ttu-id="ae9fc-200">Implantação</span><span class="sxs-lookup"><span data-stu-id="ae9fc-200">Deployment</span></span>

<span data-ttu-id="ae9fc-201">Para obter instruções passo a passo para implantar a arquitetura, incluindo todos os pré-requisitos para usar o Avere FxT ou o BeeGFS, faça o download do livro eletrônico: [Implantar Agisoft PhotoScan no Azure com Avere vFXT para Azure ou BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span><span class="sxs-lookup"><span data-stu-id="ae9fc-201">For step-by-step instructions for deploying this architecture, including all the prerequisites for using either Avere FxT or BeeGFS, download the ebook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span>

## <a name="related-resources"></a><span data-ttu-id="ae9fc-202">Recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="ae9fc-202">Related resources</span></span>

<span data-ttu-id="ae9fc-203">Os recursos a seguir fornecerão mais informações sobre os componentes utilizados neste cenário, juntamente com abordagens alternativas para a computação em lote no Azure.</span><span class="sxs-lookup"><span data-stu-id="ae9fc-203">The following resources will provide more information on the components utilized in this scenario, along with alternative approaches for batch computing on Azure.</span></span>

- <span data-ttu-id="ae9fc-204">Visão geral do [Avere vFXT para Azure](/azure/avere-vfxt/avere-vfxt-overview)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-204">Overview of [Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview)</span></span>
- <span data-ttu-id="ae9fc-205">Página inicial do [Agisoft PhotoScan](https://www.agisoft.com/)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-205">[Agisoft PhotoScan](https://www.agisoft.com/) home Page</span></span>
- [<span data-ttu-id="ae9fc-206">Lista de verificação de desempenho e escalabilidade do Armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="ae9fc-206">Azure Storage Performance and Scalability Checklist</span></span>](/azure/storage/common/storage-performance-checklist)
- <span data-ttu-id="ae9fc-207">[Sistemas de arquivos virtuais paralelos no Microsoft Azure: testes de desempenho de Lustre, GlusterFS e BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span></span>
- <span data-ttu-id="ae9fc-208">Um cenário de exemplo para [CAE (engenharia auxiliada por computador) no Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-208">An example scenario for [computer-aided engineering (CAE) on Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span></span>
- <span data-ttu-id="ae9fc-209">Página inicial de [HPC no Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-209">[HPC on Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) home page</span></span>
- <span data-ttu-id="ae9fc-210">Visão geral do [Big Compute: HPC &amp; Lote do Microsoft](https://azure.microsoft.com/en-us/solutions/big-compute/)</span><span class="sxs-lookup"><span data-stu-id="ae9fc-210">Overview of [Big Compute: HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span></span>
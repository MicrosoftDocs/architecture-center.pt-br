---
title: Recuperação de dados corrompidos ou exclusão acidental
description: Noções básicas sobre como recuperar dados corrompidos ou de exclusão acidental e como criar aplicativos resilientes, altamente disponíveis, com tolerância a falhas, bem como planejamento de recuperação de desastres.
author: MikeWasson
ms.date: 11/11/2018
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.custom: resiliency
ms.openlocfilehash: e28f26683c6d7dba196d4351ef3942830c9e7fc2
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54486284"
---
# <a name="recover-from-data-corruption-or-accidental-deletion"></a><span data-ttu-id="719c1-103">Recuperação de dados corrompidos ou exclusão acidental</span><span class="sxs-lookup"><span data-stu-id="719c1-103">Recover from data corruption or accidental deletion</span></span>

<span data-ttu-id="719c1-104">Parte de um plano robusto da continuidade de negócios é ter um plano, caso os dados sejam corrompidos ou excluídos acidentalmente.</span><span class="sxs-lookup"><span data-stu-id="719c1-104">Part of a robust business continuity plan is having a plan if your data gets corrupted or accidentally deleted.</span></span> <span data-ttu-id="719c1-105">Veja a seguir informações sobre recuperação depois que dados forem corrompidos ou excluídos acidentalmente devido a erros do aplicativo ou do operador.</span><span class="sxs-lookup"><span data-stu-id="719c1-105">The following is information about recovery after data has been corrupted or accidentally deleted, due to application errors or operator error.</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="719c1-106">Máquinas Virtuais</span><span class="sxs-lookup"><span data-stu-id="719c1-106">Virtual Machines</span></span>

<span data-ttu-id="719c1-107">Para proteger as Máquinas Virtuais do Azure (VMs) de erros de aplicativo ou exclusão acidental, use o [Backup do Azure](/azure/backup/).</span><span class="sxs-lookup"><span data-stu-id="719c1-107">To protect Azure Virtual Machines (VMs) from application errors or accidental deletion, use [Azure Backup](/azure/backup/).</span></span> <span data-ttu-id="719c1-108">O Backup do Azure permite a criação de backups que são consistentes em vários discos de VM.</span><span class="sxs-lookup"><span data-stu-id="719c1-108">Azure Backup enables the creation of backups that are consistent across multiple VM disks.</span></span> <span data-ttu-id="719c1-109">Além disso, o Cofre de Backup pode ser replicado entre regiões para fornecer recuperação de perda de região.</span><span class="sxs-lookup"><span data-stu-id="719c1-109">In addition, the Backup Vault can be replicated across regions to provide recovery from region loss.</span></span>

## <a name="storage"></a><span data-ttu-id="719c1-110">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="719c1-110">Storage</span></span>

<span data-ttu-id="719c1-111">O Armazenamento do Azure fornece resiliência de dados por meio de réplicas automatizadas.</span><span class="sxs-lookup"><span data-stu-id="719c1-111">Azure Storage provides data resiliency through automated replicas.</span></span> <span data-ttu-id="719c1-112">No entanto, isso não impede que o código do aplicativo ou os usuários corrompam dados, seja acidental ou maliciosamente.</span><span class="sxs-lookup"><span data-stu-id="719c1-112">However, this does not prevent application code or users from corrupting data, whether accidentally or maliciously.</span></span> <span data-ttu-id="719c1-113">Manter a fidelidade dos dados no caso de erro do usuário ou aplicativo requer técnicas mais avançadas, como copiar os dados para um local de armazenamento secundário com um log de auditoria.</span><span class="sxs-lookup"><span data-stu-id="719c1-113">Maintaining data fidelity in the face of application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span>

- <span data-ttu-id="719c1-114">**Blobs de blocos**.</span><span class="sxs-lookup"><span data-stu-id="719c1-114">**Block blobs**.</span></span> <span data-ttu-id="719c1-115">Crie um instantâneo pontual de cada blob de blocos.</span><span class="sxs-lookup"><span data-stu-id="719c1-115">Create a point-in-time snapshot of each block blob.</span></span> <span data-ttu-id="719c1-116">Para obter mais informações, consulte [Criar um instantâneo de um blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span><span class="sxs-lookup"><span data-stu-id="719c1-116">For more information, see [Creating a Snapshot of a Blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span></span> <span data-ttu-id="719c1-117">Para cada instantâneo, você é cobrado apenas pelo armazenamento necessário para armazenar as diferenças no blob desde o último estado do instantâneo.</span><span class="sxs-lookup"><span data-stu-id="719c1-117">For each snapshot, you are only charged for the storage required to store the differences within the blob since the last snapshot state.</span></span> <span data-ttu-id="719c1-118">Os instantâneos são dependentes da existência do blob original nos quais se baseiam, portanto, uma operação de cópia para outro blob ou até mesmo outra conta de armazenamento é aconselhável.</span><span class="sxs-lookup"><span data-stu-id="719c1-118">The snapshots are dependent on the existence of the original blob they are based on, so a copy operation to another blob or even another storage account is advisable.</span></span> <span data-ttu-id="719c1-119">Isso garante que os dados de backup estejam adequadamente protegidos contra exclusão acidental.</span><span class="sxs-lookup"><span data-stu-id="719c1-119">This ensures that backup data is properly protected against accidental deletion.</span></span> <span data-ttu-id="719c1-120">É possível usar [AzCopy](/azure/storage/common/storage-use-azcopy) ou [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) para copiar os blobs para outra conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="719c1-120">You can use [AzCopy](/azure/storage/common/storage-use-azcopy) or [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) to copy the blobs to another storage account.</span></span>

- <span data-ttu-id="719c1-121">**Arquivos**.</span><span class="sxs-lookup"><span data-stu-id="719c1-121">**Files**.</span></span> <span data-ttu-id="719c1-122">Use [instantâneos de compartilhamento](/azure/storage/files/storage-snapshots-files) ou use AzCopy ou PowerShell a fim de copiar os arquivos para outra conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="719c1-122">Use [share snapshots](/azure/storage/files/storage-snapshots-files), or use AzCopy or PowerShell to copy your files to another storage account.</span></span>

- <span data-ttu-id="719c1-123">**Tabelas**.</span><span class="sxs-lookup"><span data-stu-id="719c1-123">**Tables**.</span></span> <span data-ttu-id="719c1-124">Use AzCopy para exportar os dados da tabela para outra conta de armazenamento em outra região.</span><span class="sxs-lookup"><span data-stu-id="719c1-124">Use AzCopy to export the table data into another storage account in another region.</span></span>

## <a name="database"></a><span data-ttu-id="719c1-125">Banco de dados</span><span class="sxs-lookup"><span data-stu-id="719c1-125">Database</span></span>

### <a name="azure-sql-database"></a><span data-ttu-id="719c1-126">Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="719c1-126">Azure SQL Database</span></span>

<span data-ttu-id="719c1-127">O Banco de Dados SQL executa automaticamente uma combinação de backups de banco de dados semanais, backups de bancos de dados diferenciais por hora e backups de logs de transação a cada cinco a dez minutos para proteger sua empresa contra a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="719c1-127">SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every five - ten minutes to protect your business from data loss.</span></span> <span data-ttu-id="719c1-128">Use a restauração pontual para restaurar um banco de dados para um momento anterior.</span><span class="sxs-lookup"><span data-stu-id="719c1-128">Use point-in-time restore to restore a database to an earlier time.</span></span> <span data-ttu-id="719c1-129">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="719c1-129">For more information, see:</span></span>

- [<span data-ttu-id="719c1-130">Recuperar um banco de dados SQL do Azure usando backups de banco de dados automatizados</span><span class="sxs-lookup"><span data-stu-id="719c1-130">Recover an Azure SQL database using automated database backups</span></span>](/azure/sql-database/sql-database-recovery-using-backups)

- [<span data-ttu-id="719c1-131">Visão geral da continuidade dos negócios com o Banco de Dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="719c1-131">Overview of business continuity with Azure SQL Database</span></span>](/azure/sql-database/sql-database-business-continuity)

### <a name="sql-server-on-vms"></a><span data-ttu-id="719c1-132">SQL Server em VMs</span><span class="sxs-lookup"><span data-stu-id="719c1-132">SQL Server on VMs</span></span>

<span data-ttu-id="719c1-133">Para o SQL Server em execução em VMs, há duas opções: backups tradicionais e envio de logs.</span><span class="sxs-lookup"><span data-stu-id="719c1-133">For SQL Server running on VMs, there are two options: traditional backups and log shipping.</span></span> <span data-ttu-id="719c1-134">Backups tradicionais permitem a restauração para um ponto específico no tempo, mas o processo de recuperação é lento.</span><span class="sxs-lookup"><span data-stu-id="719c1-134">Traditional backups enables you to restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="719c1-135">A restauração de backups tradicionais exige começar com um backup inicial completo e aplicar quaisquer backups feitos depois disso.</span><span class="sxs-lookup"><span data-stu-id="719c1-135">Restoring traditional backups requires starting with an initial full backup, and then applying any backups taken after that.</span></span> <span data-ttu-id="719c1-136">A segunda opção é configurar uma sessão de envio de logs para atrasar a restauração de backups de log (por exemplo, por duas horas).</span><span class="sxs-lookup"><span data-stu-id="719c1-136">The second option is to configure a log shipping session to delay the restore of log backups (for example, by two hours).</span></span> <span data-ttu-id="719c1-137">Isso fornece uma janela para recuperação de erros feitos no primário.</span><span class="sxs-lookup"><span data-stu-id="719c1-137">This provides a window to recover from errors made on the primary.</span></span>

### <a name="azure-cosmos-db"></a><span data-ttu-id="719c1-138">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="719c1-138">Azure Cosmos DB</span></span>

<span data-ttu-id="719c1-139">O Azure Cosmos DB faz backups automaticamente em intervalos regulares.</span><span class="sxs-lookup"><span data-stu-id="719c1-139">Azure Cosmos DB automatically takes backups at regular intervals.</span></span> <span data-ttu-id="719c1-140">Os backups são armazenados separadamente em outro serviço de armazenamento, e esses backups são replicados globalmente para resiliência contra desastres regionais.</span><span class="sxs-lookup"><span data-stu-id="719c1-140">Backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span></span> <span data-ttu-id="719c1-141">Caso exclua seu banco de dados ou coleção acidentalmente, é possível criar um tíquete de suporte ou ligar para o suporte do Azure a fim de restaurar os dados usando o último backup automático.</span><span class="sxs-lookup"><span data-stu-id="719c1-141">If you accidentally delete your database or collection, you can file a support ticket or call Azure support to restore the data from the last automatic backup.</span></span> <span data-ttu-id="719c1-142">Para obter mais informações, consulte [Backup e restauração online automáticos com o Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span><span class="sxs-lookup"><span data-stu-id="719c1-142">For more information, see [Automatic online backup and restore with Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span></span>

### <a name="azure-database-for-mysql-azure-database-for-postgresql"></a><span data-ttu-id="719c1-143">Banco de Dados do Azure para MySQL, Banco de Dados do Azure para PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="719c1-143">Azure Database for MySQL, Azure Database for PostgreSQL</span></span>

<span data-ttu-id="719c1-144">Ao usar o Banco de Dados do Azure para MySQL ou o Banco de Dados do Azure para PostgreSQL, o serviço banco de dados faz um backup do serviço automaticamente a cada cinco minutos.</span><span class="sxs-lookup"><span data-stu-id="719c1-144">When using Azure Database for MySQL or Azure Database for PostgreSQL, the database service automatically makes a backup of the service every five minutes.</span></span> <span data-ttu-id="719c1-145">Com esse recurso de backup automático você pode restaurar o servidor e todos os seus bancos de dados em um novo servidor em um ponto anterior no tempo.</span><span class="sxs-lookup"><span data-stu-id="719c1-145">Using this automatic backup feature you may restore the server and all its databases into a new server to an earlier point-in-time.</span></span> <span data-ttu-id="719c1-146">Para obter mais informações, consulte:</span><span class="sxs-lookup"><span data-stu-id="719c1-146">For more information, see:</span></span>

- [<span data-ttu-id="719c1-147">Como fazer backup e restaurar um servidor no Banco de Dados do Azure para MySQL usando o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="719c1-147">How to back up and restore a server in Azure Database for MySQL by using the Azure portal</span></span>](/azure/mysql/howto-restore-server-portal)

- [<span data-ttu-id="719c1-148">Como fazer backup e restaurar um servidor no Banco de Dados do Azure para PostgreSQL usando o portal do Azure</span><span class="sxs-lookup"><span data-stu-id="719c1-148">How to backup and restore a server in Azure Database for PostgreSQL using the Azure portal</span></span>](/azure/postgresql/howto-restore-server-portal)

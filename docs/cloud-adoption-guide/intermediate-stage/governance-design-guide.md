---
title: 'Guia de design de governança: novo desenvolvimento no Azure para várias equipes'
description: Diretrizes para configurar controles de governança do Azure para vários ambientes de várias equipes e várias cargas de trabalho
author: petertay
ms.openlocfilehash: 05f1f9bb24af4f4da55b15c1aca2c71bc0b65411
ms.sourcegitcommit: b3d74d8a89b2224fc796ce0e89cea447af43a0d4
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/11/2018
ms.locfileid: "35290986"
---
# <a name="governance-design-guide-new-development-in-azure-for-multiple-teams"></a><span data-ttu-id="7683b-103">Guia de design de governança: novo desenvolvimento no Azure para várias equipes</span><span class="sxs-lookup"><span data-stu-id="7683b-103">Governance design guide: new development in Azure for multiple teams</span></span>

<span data-ttu-id="7683b-104">O objetivo deste guia é ajudar você a aprender o processo para criar um modelo de controle de recursos no Azure.</span><span class="sxs-lookup"><span data-stu-id="7683b-104">The goal of this guidance is to help you learn the process for designing a resource governance model in Azure.</span></span>  <span data-ttu-id="7683b-105">Nós irá examinar um conjunto de requisitos de governança hipotético e passar por várias implementações de exemplo que atendem a esses requisitos.</span><span class="sxs-lookup"><span data-stu-id="7683b-105">We'll look at a set of hypothetical governance requirements, then go through several example implementations that satisfy those requirements.</span></span> 

<span data-ttu-id="7683b-106">Nossos requisitos são:</span><span class="sxs-lookup"><span data-stu-id="7683b-106">Our requirements are:</span></span>
* <span data-ttu-id="7683b-107">Gerenciamento de identidade para várias equipes com requisitos de acesso de recursos diferentes no Azure.</span><span class="sxs-lookup"><span data-stu-id="7683b-107">Identity management for multiple teams with different resource access requirements in Azure.</span></span> <span data-ttu-id="7683b-108">O sistema de gerenciamento de identidades armazena a identidade dos seguintes usuários:</span><span class="sxs-lookup"><span data-stu-id="7683b-108">The identity management system stores the identity of the following users:</span></span>
  1. <span data-ttu-id="7683b-109">A pessoa em nossa organização responsável pela propriedade de **assinaturas**.</span><span class="sxs-lookup"><span data-stu-id="7683b-109">The individual in our organization responsible for ownership of **subscriptions**.</span></span>
  2. <span data-ttu-id="7683b-110">O indivíduo em nossa organização responsável pelo **infraestrutura recursos compartilhados** usada para se conectar a rede local a uma rede virtual do Azure.</span><span class="sxs-lookup"><span data-stu-id="7683b-110">The individual in our organization responsible for the **shared infrastructure resources** used to connect our on-premises network to an Azure virtual network.</span></span> 
  3. <span data-ttu-id="7683b-111">Duas pessoas em nossa organização responsáveis pelo gerenciamento de uma **carga de trabalho**.</span><span class="sxs-lookup"><span data-stu-id="7683b-111">Two individuals in our organization responsible for managing a **workload**.</span></span> 
* <span data-ttu-id="7683b-112">Suporte para vários **ambientes**.</span><span class="sxs-lookup"><span data-stu-id="7683b-112">Support for multiple **environments**.</span></span> <span data-ttu-id="7683b-113">Como você aprendeu anteriormente, um ambiente é um agrupamento lógico de recursos com requisitos de segurança e gerenciamento semelhante.</span><span class="sxs-lookup"><span data-stu-id="7683b-113">As you learned earlier, an environment is a logical grouping of resources with similar management and security requirements.</span></span> <span data-ttu-id="7683b-114">São necessários três ambientes:</span><span class="sxs-lookup"><span data-stu-id="7683b-114">We require three environments:</span></span>
  1. <span data-ttu-id="7683b-115">Um **ambiente de infraestrutura compartilhada** que inclui recursos compartilhados por cargas de trabalho em outros ambientes.</span><span class="sxs-lookup"><span data-stu-id="7683b-115">A **shared infrastructure environment** that includes resources shared by workloads in other environments.</span></span> <span data-ttu-id="7683b-116">Por exemplo, uma rede virtual com uma sub-rede do gateway que fornece conectividade para locais.</span><span class="sxs-lookup"><span data-stu-id="7683b-116">For example, a virtual network with a gateway subnet that provides connectivity to on-premises.</span></span>
  2. <span data-ttu-id="7683b-117">Um **ambiente de produção** com as políticas de segurança mais restritivas.</span><span class="sxs-lookup"><span data-stu-id="7683b-117">A **production environment** with the most restrictive security policies.</span></span> <span data-ttu-id="7683b-118">Pode incluir cargas de trabalho voltadas para o ambiente interno ou externo.</span><span class="sxs-lookup"><span data-stu-id="7683b-118">May include internal or external facing workloads.</span></span>
  3. <span data-ttu-id="7683b-119">Um **ambiente de desenvolvimento** para o trabalho de verificação de conceito e teste.</span><span class="sxs-lookup"><span data-stu-id="7683b-119">A **development environment** for proof-of-concept and testing work.</span></span> <span data-ttu-id="7683b-120">Esse ambiente tem políticas de segurança, conformidade e custo que diferem no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="7683b-120">This environment has security, compliance, and cost policies that differ from those in the production environment.</span></span>
* <span data-ttu-id="7683b-121">Um **modelo de permissões de privilégio mínimo** no qual os usuários não têm permissões por padrão.</span><span class="sxs-lookup"><span data-stu-id="7683b-121">A **permissions model of least privilege** in which users have no permissions by default.</span></span> <span data-ttu-id="7683b-122">O modelo deve oferecer suporte ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="7683b-122">The model must support the following:</span></span>
  * <span data-ttu-id="7683b-123">Um único usuário confiável no escopo de assinatura com permissão para atribuir direitos de acesso de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-123">A single trusted user at the subscription scope with permission to assign resource access rights.</span></span>
  * <span data-ttu-id="7683b-124">Por padrão, todos os proprietários de carga de trabalho têm seu acesso negado aos recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-124">Each workload owner is denied access to resources by default.</span></span> <span data-ttu-id="7683b-125">Os direitos de acesso do recurso são concedidos explicitamente pelo usuário único confiável no escopo da assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-125">Resource access rights are granted explicitly by the single trusted user at the subscription scope.</span></span>
  * <span data-ttu-id="7683b-126">Acesso de gerenciamento para os recursos de infraestrutura compartilhada limitado ao proprietário da infraestrutura compartilhada.</span><span class="sxs-lookup"><span data-stu-id="7683b-126">Management access for the shared infrastructure resources limited to the shared infrastructure owner.</span></span>  
  * <span data-ttu-id="7683b-127">Acesso de gerenciamento para cada carga de trabalho restrito ao proprietário da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-127">Management access for each workload restricted to the workload owner.</span></span>
  * <span data-ttu-id="7683b-128">Uso restrito a [funções internas de RBAC][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="7683b-128">Use of [built-in RBAC roles][rbac-built-in-roles] only.</span></span> <span data-ttu-id="7683b-129">Nenhuma função RBAC personalizada.</span><span class="sxs-lookup"><span data-stu-id="7683b-129">No custom RBAC roles.</span></span>
* <span data-ttu-id="7683b-130">Custo de controle por nome de proprietário de carga de trabalho, ambiente ou ambos.</span><span class="sxs-lookup"><span data-stu-id="7683b-130">Cost tracking by workload owner name, environment, or both.</span></span> 

## <a name="identity-management"></a><span data-ttu-id="7683b-131">Gerenciamento de identidades</span><span class="sxs-lookup"><span data-stu-id="7683b-131">Identity management</span></span>

<span data-ttu-id="7683b-132">Antes de podermos projetar o gerenciamento de identidades para nosso modelo de controle, é importante entender as quatro áreas principais que englobam:</span><span class="sxs-lookup"><span data-stu-id="7683b-132">Before we can design identity management for our governance model, it's important to understand the four major areas it encompasses:</span></span>

* <span data-ttu-id="7683b-133">Administração: os processos e as ferramentas para criação, edição e exclusão de identidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="7683b-133">Administration: the processes and tools for creating, editing, and deleting user identity.</span></span>
* <span data-ttu-id="7683b-134">Autenticação: verificando a identidade do usuário por meio da validação de credenciais, como um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="7683b-134">Authentication: verifying user identity by validating credentials, such as a user name and password.</span></span>
* <span data-ttu-id="7683b-135">Autorização: determinar os recursos que um usuário autenticado tem permissão para acesso ou as operações que eles têm permissão para executar.</span><span class="sxs-lookup"><span data-stu-id="7683b-135">Authorization: determining which resources an authenticated user is allowed to access or what operations they have permission to perform.</span></span>
* <span data-ttu-id="7683b-136">Auditoria: examinar periodicamente os logs e outras informações para descobrir problemas de segurança relacionados à identidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="7683b-136">Auditing: periodically reviewing logs and other information to discover security issues related to user identity.</span></span> <span data-ttu-id="7683b-137">Isso inclui a revisão de padrões de uso suspeito, periodicamente revisando as permissões de usuário para verificar se que elas estão corretas e outras funções.</span><span class="sxs-lookup"><span data-stu-id="7683b-137">This includes reviewing suspicious usage patterns, periodically reviewing user permissions to verify they are accurate, and other functions.</span></span>

<span data-ttu-id="7683b-138">Há apenas um serviço confiável para o Azure para identidade, que é o Azure AD (Active Directory).</span><span class="sxs-lookup"><span data-stu-id="7683b-138">There is only one service trusted by Azure for identity, and that is Azure Active Directory (AD).</span></span> <span data-ttu-id="7683b-139">Vamos ser adicionar usuários ao Azure AD e usá-lo para todas as funções listadas acima.</span><span class="sxs-lookup"><span data-stu-id="7683b-139">We'll be adding users to Azure AD and using it for all of the functions listed above.</span></span> <span data-ttu-id="7683b-140">Mas, antes de examinarmos como configuraremos Azure AD, é importante entender as contas com privilégios que são usadas para gerenciar o acesso a esses serviços.</span><span class="sxs-lookup"><span data-stu-id="7683b-140">But before we look at how we'll configure Azure AD, it's important to understand the privileged accounts that are used to manage access to these services.</span></span>

<span data-ttu-id="7683b-141">Quando sua organização se inscreveu para uma conta do Azure, pelo menos um Azure **proprietário da conta** foi atribuído e do Azure AD **locatário** foi criado se já não havia um locatário do Azure AD associado à sua uso de organização de outros serviços da Microsoft como o Office 365.</span><span class="sxs-lookup"><span data-stu-id="7683b-141">When your organization signed up for an Azure account, at least one Azure **account owner** was assigned and an Azure AD **tenant** was created if there was not already an Azure AD tenant associated with your organization's use of other Microsoft services such as Office 365.</span></span> <span data-ttu-id="7683b-142">Um **administrador global** com permissões totais no locatário do Azure AD estava associado quando ele foi criado.</span><span class="sxs-lookup"><span data-stu-id="7683b-142">A **global administrator** with full permissions on the Azure AD tenant was associated when it was created.</span></span> 

<span data-ttu-id="7683b-143">Ambas as identidades de usuário de administrador global do proprietário da conta do Azure e o Azure AD são armazenadas em um sistema de identidade altamente seguro que é gerenciado pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7683b-143">Both of the Azure Account Owner and Azure AD global administrator user identities are stored in a highly secure identity system that is managed by Microsoft.</span></span> <span data-ttu-id="7683b-144">O proprietário da conta do Azure está autorizado a criar, atualizar e excluir assinaturas.</span><span class="sxs-lookup"><span data-stu-id="7683b-144">The Azure Account Owner is authorized to create, update, and delete subscriptions.</span></span> <span data-ttu-id="7683b-145">O administrador global do Azure AD está autorizado a realizar várias ações no Azure AD, mas para este guia de design vamos nos concentrar na criação e exclusão de identidade de usuário.</span><span class="sxs-lookup"><span data-stu-id="7683b-145">The Azure AD global administrator is authorized to perform many actions in Azure AD, but for this design guide we'll focus on the creation and deletion of user identity.</span></span> 

> [!NOTE]
> <span data-ttu-id="7683b-146">Sua organização talvez já tenha um locatário existente do Azure AD, se houver um existente do Office 365 ou a licença do Intune associada à sua conta.</span><span class="sxs-lookup"><span data-stu-id="7683b-146">Your organization may already have an existing Azure AD tenant if there's an existing Office 365 or Intune license associated with your account.</span></span>

<span data-ttu-id="7683b-147">O proprietário da conta do Azure tem permissão para criar, atualizar e excluir assinaturas:</span><span class="sxs-lookup"><span data-stu-id="7683b-147">The Azure Account Owner has permission to create, update, and delete subscriptions:</span></span> 

<span data-ttu-id="7683b-148">![Conta do Azure com o Gerente de Contas do Azure e o administrador global do Azure AD](../_images/governance-3-0.png)
*Figura 1. Uma conta do Azure com um gerente de conta e o Administrador Global do Azure AD.*</span><span class="sxs-lookup"><span data-stu-id="7683b-148">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0.png)
*Figure 1. An Azure account with an Account Manager and Azure AD Global Administrator.*</span></span>

<span data-ttu-id="7683b-149">O **administrador global** do Azure AD tem permissão para criar contas de usuário:</span><span class="sxs-lookup"><span data-stu-id="7683b-149">The Azure AD **global administrator** has permission to create user accounts:</span></span>  

<span data-ttu-id="7683b-150">![Conta do Azure com o Gerente de Contas do Azure e o administrador global do Azure AD](../_images/governance-3-0a.png)
*Figura 2. O Administrador Global do Azure AD cria as contas de usuário necessárias no locatário.*</span><span class="sxs-lookup"><span data-stu-id="7683b-150">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0a.png)
*Figure 2. The Azure AD Global Administrator creates the required user accounts in the tenant.*</span></span>

<span data-ttu-id="7683b-151">As duas primeiras contas, **proprietário de carga de trabalho do app1** e **proprietário de carga de trabalho do app2** são associadas a um indivíduo em nossa organização responsável por gerenciar uma carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-151">The first two accounts, **App1 Workload Owner** and **App2 Workload Owner** are each associated with an individual in our organization responsible for managing a workload.</span></span> <span data-ttu-id="7683b-152">A conta **operações de rede** pertence à pessoa responsável pelos recursos de infraestrutura compartilhada.</span><span class="sxs-lookup"><span data-stu-id="7683b-152">The **network operations** account is owned by the individual that is responsible for the shared infrastructure resources.</span></span> <span data-ttu-id="7683b-153">Por fim, a conta do **proprietário da assinatura** está associada à pessoa responsável pela propriedade de assinaturas.</span><span class="sxs-lookup"><span data-stu-id="7683b-153">Finally, the **subscription owner** account is associated with the individual responsible for ownership of subscriptions.</span></span>

## <a name="resource-access-permissions-model-of-least-privilege"></a><span data-ttu-id="7683b-154">Modelo de permissões de acesso do recurso de privilégio mínimo</span><span class="sxs-lookup"><span data-stu-id="7683b-154">Resource access permissions model of least privilege</span></span>

<span data-ttu-id="7683b-155">Agora que temos nosso sistema de gerenciamento de identidades e contas de usuário criadas, precisamos decidir como podemos aplicará funções RBAC (controle) de acesso baseado em função para cada conta para dar suporte a um modelo de permissões de menos privilégios.</span><span class="sxs-lookup"><span data-stu-id="7683b-155">Now that we have our identity management system and user accounts created, we have to decide how we'll apply role-based access control (RBAC) roles to each account to support a permissions model of least privilege.</span></span>

<span data-ttu-id="7683b-156">Nosso outro requisito é para os recursos associados a cada carga de trabalho ser isoladas umas das outras, de modo que nenhum proprietário de uma carga de trabalho tem acesso de gerenciamento para qualquer outra carga de trabalho que não possuem.</span><span class="sxs-lookup"><span data-stu-id="7683b-156">Our other requirement is for the resources associated with each workload be isolated from one another such that no one workload owner has management access to any other workload they do not own.</span></span> <span data-ttu-id="7683b-157">Temos um requisito para implementar esse modelo usando somente [funções internas para o RBAC do Azure][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="7683b-157">We have a requirement to implement this model using only [built-in roles for Azure RBAC][rbac-built-in-roles].</span></span>

<span data-ttu-id="7683b-158">Cada função RBAC é aplicada em um dos três escopos no Azure: **assinatura**, **grupo de recursos**, em seguida, um **recurso** individual.</span><span class="sxs-lookup"><span data-stu-id="7683b-158">Each RBAC role is applied at one of three scopes in Azure: **subscription**, **resource group**, then an individual **resource**.</span></span> <span data-ttu-id="7683b-159">As funções são herdadas em escopos inferiores.</span><span class="sxs-lookup"><span data-stu-id="7683b-159">Roles are inherited at lower scopes.</span></span> <span data-ttu-id="7683b-160">Por exemplo, se um usuário é atribuído a [função proprietário interno] [ rbac-built-in-owner] no nível de assinatura, essa função também foi atribuída a esse usuário no grupo de recursos e no nível de recurso individual, a menos que ele seja substituído.</span><span class="sxs-lookup"><span data-stu-id="7683b-160">For example, if a user is assigned the [built-in owner role][rbac-built-in-owner] at the subscription level, that role is also assigned to that user at the resource group and individual resource level unless it's overridden.</span></span>

<span data-ttu-id="7683b-161">Portanto, para criar um modelo de acesso de privilégio mínimo, é necessário decidir as ações que um tipo específico de usuário pode realizar em cada um desses três escopos.</span><span class="sxs-lookup"><span data-stu-id="7683b-161">Therefore, to create a model of least privilege access we have to decide the actions a particular type of user is allowed to take at each of these three scopes.</span></span> <span data-ttu-id="7683b-162">Por exemplo, nosso requisito é para um proprietário de carga de trabalho tem permissão para gerenciar o acesso a somente os recursos associados à sua carga de trabalho e nenhum outro.</span><span class="sxs-lookup"><span data-stu-id="7683b-162">For example, our requirement is for a workload owner to have permission to manage access to only the resources associated with their workload and no others.</span></span> <span data-ttu-id="7683b-163">Se tivéssemos atribuir a [função de proprietário interna][rbac-built-in-owner] no escopo de assinatura, o proprietário de cada carga de trabalho teria acesso de gerenciamento para todas as cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-163">If we were to assign the [built-in owner role][rbac-built-in-owner] at the subscription scope, each workload owner would have management access to all workloads.</span></span>

<span data-ttu-id="7683b-164">Vamos dar uma olhada em dois modelos de permissão de exemplo para entender esse conceito um pouco melhor.</span><span class="sxs-lookup"><span data-stu-id="7683b-164">Let's take a look at two example permission models to understand this concept a little better.</span></span> <span data-ttu-id="7683b-165">No primeiro exemplo, nosso modelo confia somente no administrador de serviço para criar grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-165">In the first example, our model trusts only the service administrator to create resource groups.</span></span> <span data-ttu-id="7683b-166">No segundo exemplo, nosso modelo atribui a função de proprietário interno para o proprietário de cada carga de trabalho no escopo da assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-166">In the second example, our model assigns the built-in owner role to each workload owner at the subscription scope.</span></span> 

<span data-ttu-id="7683b-167">Nos dois exemplos, temos um administrador de serviço de assinatura que é atribuído a [função proprietário interno][rbac-built-in-owner] no escopo de assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-167">In both examples, we have a subscription service administrator that is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope.</span></span> <span data-ttu-id="7683b-168">Lembre-se de que a [função de proprietário interna][rbac-built-in-owner] concede todas as permissões, incluindo o gerenciamento de acesso aos recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-168">Recall that the [built-in owner role][rbac-built-in-owner] grants all permissions including the management of access to resources.</span></span>
<span data-ttu-id="7683b-169">![administrador de serviços de assinatura com a função de proprietário](../_images/governance-2-1.png)
*Figura 3. Uma assinatura com um administrador de serviços atribuídos à função de proprietário interno.*</span><span class="sxs-lookup"><span data-stu-id="7683b-169">![subscription service administrator with owner role](../_images/governance-2-1.png)
*Figure 3. A subscription with a service administrator assigned the built-in owner role.*</span></span> 

1. <span data-ttu-id="7683b-170">No primeiro exemplo, temos **proprietário da carga de trabalho A** com nenhuma permissões no escopo de assinatura - tiverem sem direitos de gerenciamento de acesso de recursos por padrão.</span><span class="sxs-lookup"><span data-stu-id="7683b-170">In our first example, we have **workload owner A** with no permissions at the subscription scope - they have no resource access management rights by default.</span></span> <span data-ttu-id="7683b-171">Esse usuário deseja implantar e gerenciar os recursos para sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-171">This user wants to deploy and manage the resources for their workload.</span></span> <span data-ttu-id="7683b-172">Eles devem contatar o **administrador de serviço** para solicitar a criação de um grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-172">They must contact the **service administrator** to request creation of a resource group.</span></span>
<span data-ttu-id="7683b-173">![criação de solicitações de proprietário de carga de trabalho do grupo de recursos A](../_images/governance-2-2.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-173">![workload owner requests creation of resource group A](../_images/governance-2-2.png)</span></span>  

2. <span data-ttu-id="7683b-174">O **administrador de serviço** examina a solicitação e cria o **grupo de recursos A**. Neste ponto, o **proprietário da carga de trabalho A** ainda não tem permissão para fazer nada.</span><span class="sxs-lookup"><span data-stu-id="7683b-174">The **service administrator** reviews their request and creates **resource group A**. At this point, **workload owner A** still doesn't have permission to do anything.</span></span>
<span data-ttu-id="7683b-175">![administrador de serviço cria o grupo de recursos A](../_images/governance-2-3.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-175">![service administrator creates resource group A](../_images/governance-2-3.png)</span></span>

3. <span data-ttu-id="7683b-176">O **administrador de serviço** adiciona **proprietário da carga de trabalho A** para **do grupo de recursos A** e atribui o [função colaborador interna](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="7683b-176">The **service administrator** adds **workload owner A** to **resource group A** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> <span data-ttu-id="7683b-177">A função de colaborador concede todas as permissões no **grupo de recursos A**, exceto o gerenciamento de permissão de acesso.</span><span class="sxs-lookup"><span data-stu-id="7683b-177">The contributor role grants all permissions on **resource group A** except managing access permission.</span></span>
<span data-ttu-id="7683b-178">![O administrador de serviços adiciona o proprietário da carga de trabalho a para o grupo de recursos a](../_images/governance-2-4.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-178">![service administrator adds workload owner a to resource group a](../_images/governance-2-4.png)</span></span>

4. <span data-ttu-id="7683b-179">Vamos supor que o **proprietário da carga de trabalho A** tenha um requisito para um par de membros da equipe para exibir o tráfego de rede e CPU dados como parte do planejamento de capacidade para a carga de trabalho de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="7683b-179">Let's assume that **Workload owner A** has a requirement for a pair of team members to view the CPU and network traffic monitoring data as part of capacity planning for the workload.</span></span> <span data-ttu-id="7683b-180">Como o **proprietário da carga de trabalho A** é atribuído à função de colaborador, ele não tem permissão para adicionar um usuário ao **grupo de recursos A**. Eles devem enviar esta solicitação para o **administrador de serviços**.</span><span class="sxs-lookup"><span data-stu-id="7683b-180">Because **workload owner A** is assigned the contributor role, they do not have permission to add a user to **resource group A**. They must send this request to the **service administrator**.</span></span>
<span data-ttu-id="7683b-181">![o proprietário da carga de trabalho solicita que colaboradores de carga de trabalho sejam adicionados ao grupo de recursos](../_images/governance-2-5.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-181">![workload owner requests workload contributors be added to resource group](../_images/governance-2-5.png)</span></span>

5. <span data-ttu-id="7683b-182">O **administrador de serviço** examina a solicitação e adiciona os dois **colaborador da carga de trabalho** usuários **do grupo de recursos A**. Nenhum desses dois usuários exige a permissão para gerenciar recursos, portanto, eles recebem a [função de leitor interna](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="7683b-182">The **service administrator** reviews the request, and adds the two **workload contributor** users to **resource group A**. Neither of these two users require permission to manage resources, so they are assigned the [built-in reader role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="7683b-183">![o administrador de serviço adiciona colaboradores da carga de trabalho ao grupo de recursos A](../_images/governance-2-6.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-183">![service administrator adds workload contributors to resource group A](../_images/governance-2-6.png)</span></span>

6. <span data-ttu-id="7683b-184">Em seguida, o **proprietário da carga de trabalho B** também requer um grupo de recursos conter os recursos para sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-184">Next, **workload owner B** also requires a resource group to contain the resources for their workload.</span></span> <span data-ttu-id="7683b-185">Assim como acontece com **proprietário da carga de trabalho A**, **proprietário da carga de trabalho B** inicialmente não tem permissão para realizar qualquer ação no escopo de assinatura para que eles devem enviar uma solicitação para o **administrador de serviços**.</span><span class="sxs-lookup"><span data-stu-id="7683b-185">As with **workload owner A**, **workload owner B** initially does not have permission to take any action at the subscription scope so they must send a request to the **service administrator**.</span></span> 
<span data-ttu-id="7683b-186">![criação de solicitações de proprietário de carga de trabalho B do grupo de recursos B](../_images/governance-2-7.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-186">![workload owner B requests creation of resource group B](../_images/governance-2-7.png)</span></span>

7. <span data-ttu-id="7683b-187">O **administrador de serviço** examina a solicitação e cria o **grupo de recursos B**. ![Administrador de Serviços cria o grupo de recursos B](../_images/governance-2-8.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-187">The **service administrator** reviews the request and creates **resource group B**. ![Service Administrator creates resource group B](../_images/governance-2-8.png)</span></span>

8. <span data-ttu-id="7683b-188">O **administrador de serviço** então adiciona o **proprietário da carga de trabalho B** ao **grupo de recursos B** e atribui a [função colaborador interna](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="7683b-188">The **service administrator** then adds **workload owner B** to **resource group B** and assigns the [built-in contributor role](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="7683b-189">![O administrador de serviços adiciona o proprietário da carga de trabalho B ao grupo de recursos B](../_images/governance-2-9.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-189">![Service Administrator adds Workload Owner B to resource group B](../_images/governance-2-9.png)</span></span>

<span data-ttu-id="7683b-190">Neste ponto, cada um dos proprietários da carga de trabalho é isolado em seu próprio grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-190">At this point, each of the workload owners is isolated in their own resource group.</span></span> <span data-ttu-id="7683b-191">Nenhum dos proprietários da carga de trabalho ou membros da equipe tem acesso de gerenciamento para os recursos em outro grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-191">None of the workload owners or their team members have management access to the resources in any other resource group.</span></span> 

<span data-ttu-id="7683b-192">![assinatura com grupos de recursos A e B](../_images/governance-2-10.png)
*Figura 4. Uma assinatura com dois proprietários da carga de trabalho isolada com seu próprio grupo de recursos.*</span><span class="sxs-lookup"><span data-stu-id="7683b-192">![subscription with resource groups A and B](../_images/governance-2-10.png)
*Figure 4. A subscription with two workload owners isolated with their own resource group.*</span></span>

<span data-ttu-id="7683b-193">Este é um modelo de privilégio mínimo - cada usuário recebe a permissão correta no escopo de gerenciamento do recurso correto.</span><span class="sxs-lookup"><span data-stu-id="7683b-193">This model is a least privilege model - each user is assigned the correct permission at the correct resource management scope.</span></span>

<span data-ttu-id="7683b-194">No entanto, considere a possibilidade de que todas as tarefas neste exemplo sejam executadas pelo **administrador de serviço**.</span><span class="sxs-lookup"><span data-stu-id="7683b-194">However, consider that every task in this example was performed by the **service administrator**.</span></span> <span data-ttu-id="7683b-195">Enquanto esse é um exemplo simples e não parece ser um problema porque não havia apenas dois proprietários da carga de trabalho, é fácil imaginar que os tipos de problemas que possam resultar de uma organização de grande porte.</span><span class="sxs-lookup"><span data-stu-id="7683b-195">While this is a simple example and may not appear to be an issue because there were only two workload owners, it's easy to imagine the types of issues that would result for a large organization.</span></span> <span data-ttu-id="7683b-196">Por exemplo, o **administrador de serviço** pode se tornar um afunilamento com uma grande lista de pendências de solicitações que resultar em atrasos.</span><span class="sxs-lookup"><span data-stu-id="7683b-196">For example, the **service administrator** can become a bottleneck with a large backlog of requests that result in delays.</span></span>  

<span data-ttu-id="7683b-197">Vamos dar uma olhada no segundo exemplo que reduz o número de tarefas executadas pelo **administrador de serviço**.</span><span class="sxs-lookup"><span data-stu-id="7683b-197">Let's take a look at second example that reduces the number of tasks performed by the **service administrator**.</span></span> 

1. <span data-ttu-id="7683b-198">Nesse modelo, **proprietário da carga de trabalho A** é atribuído a [função proprietário interno][rbac-built-in-owner] no escopo de assinatura, permitindo que eles criem seu próprios grupo de recursos: **grupo de recursos A**. ![O administrador de serviços adiciona um proprietário da carga de trabalho A à assinatura](../_images/governance-2-11.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-198">In this model, **workload owner A** is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope, enabling them to create their own resource group: **resource group A**. ![Service Administrator adds Workload Owner A to subscription](../_images/governance-2-11.png)</span></span>

2. <span data-ttu-id="7683b-199">Quando **do grupo de recursos A** é criado, **proprietário da carga de trabalho A** é adicionado por padrão e herda o [proprietário interno] [ rbac-built-in-owner] função do escopo de assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-199">When **resource group A** is created, **workload owner A** is added by default and inherits the [built-in owner][rbac-built-in-owner] role from the subscription scope.</span></span>
<span data-ttu-id="7683b-200">![O proprietário da carga de trabalho A cria o grupo de recursos A](../_images/governance-2-12.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-200">![Workload Owner A creates resource group A](../_images/governance-2-12.png)</span></span>

3. <span data-ttu-id="7683b-201">A [função interna de proprietário][rbac-built-in-owner] concede ao **proprietário da carga de trabalho A** permissão para gerenciar o acesso ao grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-201">The [built-in owner role][rbac-built-in-owner] grants **workload owner A** permission to manage access to the resource group.</span></span> <span data-ttu-id="7683b-202">O **proprietário da carga de trabalho A** adiciona dois **colaboradores da carga de trabalho** e atribui a [função leitor interna][rbac-built-in-owner] para cada um deles.</span><span class="sxs-lookup"><span data-stu-id="7683b-202">**Workload owner A** adds two **workload contributors** and assigns the [built-in reader role][rbac-built-in-owner] to each of them.</span></span> 
<span data-ttu-id="7683b-203">![Proprietário da carga de trabalho A adiciona colaboradores da carga de trabalho](../_images/governance-2-13.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-203">![Workload Owner A adds Workload Contributors](../_images/governance-2-13.png)</span></span>

4. <span data-ttu-id="7683b-204">O **administrador de serviço** agora adiciona o **proprietário da carga de trabalho B** à assinatura com a função de proprietário interno.</span><span class="sxs-lookup"><span data-stu-id="7683b-204">**Service administrator** now adds **workload owner B** to the subscription with the built-in owner role.</span></span> 
<span data-ttu-id="7683b-205">![O administrador de serviços adiciona proprietários da carga de trabalho B à assinatura](../_images/governance-2-14.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-205">![Service Administrator adds Workload Owners B to subscription](../_images/governance-2-14.png)</span></span>

5. <span data-ttu-id="7683b-206">O **proprietário da carga de trabalho B** cria o **grupo de recursos B** e é adicionado por padrão.</span><span class="sxs-lookup"><span data-stu-id="7683b-206">**Workload owner B** creates **resource group B** and is added by default.</span></span> <span data-ttu-id="7683b-207">Novamente, o **proprietário da carga de trabalho B** herda a função de proprietário interno do escopo da assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-207">Again, **workload owner B** inherits the built-in owner role from the subscription scope.</span></span>
<span data-ttu-id="7683b-208">![O proprietário da carga de trabalho B cria o grupo de recursos B](../_images/governance-2-15.png)</span><span class="sxs-lookup"><span data-stu-id="7683b-208">![Workload Owner B creates resource group B](../_images/governance-2-15.png)</span></span>

<span data-ttu-id="7683b-209">Observe que, neste modelo, o **administrador de serviço** executou ações menos do que no primeiro exemplo, devido a delegação de acesso de gerenciamento para cada um dos proprietários da carga de trabalho individuais.</span><span class="sxs-lookup"><span data-stu-id="7683b-209">Note that in this model, the **service administrator** performed fewer actions than they did in the first example due to the delegation of management access to each of the individual workload owners.</span></span>

<span data-ttu-id="7683b-210">![assinatura com grupos de recursos A e B](../_images/governance-2-16.png)
*Figura 5. Uma assinatura com um administrador de serviço e dois proprietários da carga de trabalho, todos atribuídos à função de proprietário interno.*</span><span class="sxs-lookup"><span data-stu-id="7683b-210">![subscription with resource groups A and B](../_images/governance-2-16.png)
*Figure 5. A subscription with a service administrator and two workload owners, all assigned the built-in owner role.*</span></span>

<span data-ttu-id="7683b-211">No entanto, porque ambos **proprietário da carga de trabalho A** e **proprietário da carga de trabalho B** são atribuídos à função de proprietário interno no escopo de assinatura, eles terão cada herdadas a função de proprietário interno para cada um dos outros recursos grupo.</span><span class="sxs-lookup"><span data-stu-id="7683b-211">However, because both **workload owner A** and **workload owner B** are assigned the built-in owner role at the subscription scope, they have each inherited the built-in owner role for each other's resource group.</span></span> <span data-ttu-id="7683b-212">Isso significa que não só têm acesso total aos recursos do outro, eles também são capazes de delegar acesso de gerenciamento para cada um dos outros grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-212">This means that not only do they have full access to one another's resources, they are also able to delegate management access to each other's resource groups.</span></span> <span data-ttu-id="7683b-213">Por exemplo, **proprietário da carga de trabalho B** tem direitos para adicionar qualquer outro usuário para **do grupo de recursos A** e pode atribuir qualquer função a eles, incluindo a função de proprietário interno.</span><span class="sxs-lookup"><span data-stu-id="7683b-213">For example, **workload owner B** has rights to add any other user to **resource group A** and can assign any role to them, including the built-in owner role.</span></span>

<span data-ttu-id="7683b-214">Se compararmos cada exemplo para nossos requisitos, podemos ver dois exemplos dar suporte a um único usuário confiável no escopo de assinatura com permissão para conceder direitos de acesso de recursos para os proprietários de duas cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-214">If we compare each example to our requirements, we see that both examples support a single trusted user at the subscription scope with permission to grant resource access rights to our two workload owners.</span></span> <span data-ttu-id="7683b-215">Cada um dos proprietários de duas cargas de trabalho não tinham acesso ao gerenciamento de recursos por padrão e exigiam que o **administrador de serviço** atribuísse explicitamente permissões a eles.</span><span class="sxs-lookup"><span data-stu-id="7683b-215">Each of the two workload owners did not have access to resource management by default and required the **service administrator** to explicitly assign permissions to them.</span></span> <span data-ttu-id="7683b-216">No entanto, somente o primeiro exemplo suporta o requisito de que os recursos associados a cada carga de trabalho são isolados uma da outra, de modo que nenhum proprietário da carga de trabalho tem acesso aos recursos de qualquer outra carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-216">However, only the first example supports the requirement that the resources associated with each workload are isolated from one another such that no workload owner has access to the resources of any other workload.</span></span>

## <a name="resource-management-model"></a><span data-ttu-id="7683b-217">Modelo de gerenciamento de recursos</span><span class="sxs-lookup"><span data-stu-id="7683b-217">Resource management model</span></span>

<span data-ttu-id="7683b-218">Agora que criamos um modelo de permissões de privilégios mínimos, vamos dar uma olhada em algumas aplicações desses modelos de controle.</span><span class="sxs-lookup"><span data-stu-id="7683b-218">Now that we've designed a permissions model of least privilege, let's move on to take a look at some practical applications of these governance models.</span></span> <span data-ttu-id="7683b-219">Lembre-se de que nossos requisitos devem dar suporte a três ambientes a seguir:</span><span class="sxs-lookup"><span data-stu-id="7683b-219">Recall from our requirements that we must support the following three environments:</span></span>
1. <span data-ttu-id="7683b-220">**Infraestrutura compartilhada:** um único grupo de recursos compartilhados por todas as cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-220">**Shared infrastructure:** a single group of resources shared by all workloads.</span></span> <span data-ttu-id="7683b-221">Estes são recursos como gateways de rede, firewalls e serviços de segurança.</span><span class="sxs-lookup"><span data-stu-id="7683b-221">These are resources such as network gateways, firewalls, and security services.</span></span>  
2. <span data-ttu-id="7683b-222">**Desenvolvimento:** vários grupos de recursos que representam várias cargas de trabalho prontas para não produção.</span><span class="sxs-lookup"><span data-stu-id="7683b-222">**Development:** multiple groups of resources representing multiple non-production ready workloads.</span></span> <span data-ttu-id="7683b-223">Esses recursos são usados para verificação de conceito, teste e outras atividades de desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="7683b-223">These resources are used for proof-of-concept, testing, and other developer activities.</span></span> <span data-ttu-id="7683b-224">Esses recursos podem ter um modelo de governança mais reduzido, para permitir maior agilidade do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="7683b-224">These resources may have a more relaxed governance model because to allow for increased developer agility.</span></span>
3. <span data-ttu-id="7683b-225">**Produção:** vários grupos de recursos que representam várias cargas de trabalho de produção.</span><span class="sxs-lookup"><span data-stu-id="7683b-225">**Production:** multiple groups of resources representing multiple production workloads.</span></span> <span data-ttu-id="7683b-226">Esses recursos são usados para hospedar os artefatos de aplicativo voltados para o público e o privado.</span><span class="sxs-lookup"><span data-stu-id="7683b-226">These resources are used to host the private and public facing application artifacts.</span></span> <span data-ttu-id="7683b-227">Esses recursos normalmente têm o controle mais completa e modelos de segurança para proteger os recursos, o código do aplicativo e dados contra acesso não autorizado.</span><span class="sxs-lookup"><span data-stu-id="7683b-227">These resources typically have the tightest governance and security models to protect the resources, application code, and data from unauthorized access.</span></span>

<span data-ttu-id="7683b-228">Para cada um desses três ambientes, temos um requisito para controlar dados de custo por **proprietário da carga de trabalho**, **ambiente**, ou ambos.</span><span class="sxs-lookup"><span data-stu-id="7683b-228">For each of these three environments, we have a requirement to track cost data by **workload owner**, **environment**, or both.</span></span> <span data-ttu-id="7683b-229">Ou seja, gostaríamos de saber o custo em andamento de nosso **infraestrutura compartilhada**, os custos por pessoas em ambos o **desenvolvimento** e **produção** ambientes, e Finalmente custo geral **desenvolvimento** e **produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-229">That is, we want to know the ongoing cost of our **shared infrastructure**, the costs incurred by individuals in both the **development** and **production** environments, and finally the overall cost of **development** and **production**.</span></span> 

<span data-ttu-id="7683b-230">Você já aprendeu que os recursos estão no escopo em dois níveis: **assinatura** e **grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="7683b-230">You have already learned that resources are scoped to two levels: **subscription** and **resource group**.</span></span> <span data-ttu-id="7683b-231">Portanto, nossa primeira decisão é como organizar nossos ambientes por **assinatura**.</span><span class="sxs-lookup"><span data-stu-id="7683b-231">Therefore, our first decision is how to organize our environments by **subscription**.</span></span> <span data-ttu-id="7683b-232">Há apenas duas possibilidades: uma única assinatura ou várias assinaturas.</span><span class="sxs-lookup"><span data-stu-id="7683b-232">There are only two possibilities: a single subscription, or, multiple subscriptions.</span></span> 

<span data-ttu-id="7683b-233">Antes de examinarmos exemplos de cada um desses modelos, vamos examinar a estrutura de gerenciamento de assinaturas no Azure.</span><span class="sxs-lookup"><span data-stu-id="7683b-233">Before we look at examples of each of these models, let's review the management structure for subscriptions in Azure.</span></span> 

<span data-ttu-id="7683b-234">Lembre-se de nossos requisitos que temos um indivíduo em nossa organização que é responsável por assinaturas, e esse usuário possui o **proprietário da assinatura** conta em nosso locatário do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7683b-234">Recall from our requirements that we have an individual in our organization that is responsible for subscriptions, and this user owns the **subscription owner** account in our Azure AD tenant.</span></span> <span data-ttu-id="7683b-235">No entanto, essa conta não tem permissão para criar assinaturas.</span><span class="sxs-lookup"><span data-stu-id="7683b-235">However, this account does not have permission to create subscriptions.</span></span> <span data-ttu-id="7683b-236">Somente o **Proprietário da Conta do Azure** tem permissão para fazer isso: ![](../_images/governance-3-0b.png)
*Figura 6. Um proprietário de conta do Azure cria uma assinatura.*</span><span class="sxs-lookup"><span data-stu-id="7683b-236">Only the **Azure Account Owner** has permission to do this: ![](../_images/governance-3-0b.png)
*Figure 6. An Azure Account Owner creates a subscription.*</span></span>

<span data-ttu-id="7683b-237">Quando a assinatura tiver sido criada, o **proprietário da conta do Azure** pode adicionar o **proprietário da assinatura** de conta para a assinatura com o **proprietário** função:</span><span class="sxs-lookup"><span data-stu-id="7683b-237">Once the subscription has been created, the **Azure Account Owner** can add the **subscription owner** account to the subscription with the **owner** role:</span></span>

<span data-ttu-id="7683b-238">![](../_images/governance-3-0c.png)
*Figura 7. O proprietário da conta do Azure adiciona a conta de usuário do **proprietário da assinatura** para a assinatura com a função **proprietário**.*</span><span class="sxs-lookup"><span data-stu-id="7683b-238">![](../_images/governance-3-0c.png)
*Figure 7. The Azure Account Owner adds the **subscription owner** user account to the subscription with the **owner** role.*</span></span>

<span data-ttu-id="7683b-239">O **proprietário da assinatura** agora pode criar **grupos de recursos** e delegar o gerenciamento de acesso de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-239">The **subscription owner** can now create **resource groups** and delegate resource access management.</span></span>

<span data-ttu-id="7683b-240">Primeiro vamos examinar um modelo de gerenciamento de recursos de exemplo usando uma única assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-240">First let's look at an example resource management model using a single subscription.</span></span> <span data-ttu-id="7683b-241">Nossa primeira decisão é como alinhar grupos de recursos para os três ambientes.</span><span class="sxs-lookup"><span data-stu-id="7683b-241">Our first decision is how to align resource groups to the three environments.</span></span> <span data-ttu-id="7683b-242">Nós temos duas opções:</span><span class="sxs-lookup"><span data-stu-id="7683b-242">We have two options:</span></span>
1. <span data-ttu-id="7683b-243">Alinhe cada ambiente a um único grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-243">Align each environment to a single resource group.</span></span> <span data-ttu-id="7683b-244">Todos os recursos de infraestrutura compartilhada são implantados em um único grupo de recursos de **infraestrutura compartilhada**.</span><span class="sxs-lookup"><span data-stu-id="7683b-244">All shared infrastructure resources are deployed to a single **shared infrastructure** resource group.</span></span> <span data-ttu-id="7683b-245">Todos os recursos associados com cargas de trabalho de desenvolvimento são implantados em um único grupo de recursos de **desenvolvimento**.</span><span class="sxs-lookup"><span data-stu-id="7683b-245">All resources associated with development workloads are deployed to a single **development** resource group.</span></span> <span data-ttu-id="7683b-246">Todos os recursos associados com cargas de trabalho de produção são implantados em um único grupo de recursos de **produção** para o ambiente de **produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-246">All resources associated with production workloads are deployed into a single **production** resource group for the **production** environment.</span></span> 
2. <span data-ttu-id="7683b-247">Alinhe as cargas de trabalho com um grupo de recursos separado, usando uma convenção de nomenclatura e marcas para alinhar grupos de recursos com cada um dos três ambientes.</span><span class="sxs-lookup"><span data-stu-id="7683b-247">Align workloads with a separate resource group, using a naming convention and tags to align resource groups with each of the three environments.</span></span>  

<span data-ttu-id="7683b-248">Vamos começar avaliando a primeira opção.</span><span class="sxs-lookup"><span data-stu-id="7683b-248">Let's begin by evaluating the first option.</span></span> <span data-ttu-id="7683b-249">Usaremos o modelo de permissões, discutido na seção anterior, com um administrador de serviço de assinatura única que cria grupos de recursos e adiciona os usuários a eles com qualquer interno **colaborador** ou **leitor** função.</span><span class="sxs-lookup"><span data-stu-id="7683b-249">We'll be using the permissions model that we discussed in the previous section, with a single subscription service administrator that creates resource groups and adds users to them with either the built-in **contributor** or **reader** role.</span></span> 

1. <span data-ttu-id="7683b-250">O primeiro grupo de recursos implantados representa o ambiente de **infraestrutura compartilhada**.</span><span class="sxs-lookup"><span data-stu-id="7683b-250">The first resource group deployed represents the **shared infrastructure** environment.</span></span> <span data-ttu-id="7683b-251">O **proprietário da assinatura** cria um grupo de recursos para os recursos de infraestrutura compartilhada denominados **netops-shared-rg**.</span><span class="sxs-lookup"><span data-stu-id="7683b-251">The **subscription owner** creates a resource group for the shared infrastructure resources named **netops-shared-rg**.</span></span> 
![](../_images/governance-3-0d.png)
2. <span data-ttu-id="7683b-252">O **proprietário da assinatura** adiciona a conta de **usuário operações de rede** ao grupo de recursos e atribui a função **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="7683b-252">The **subscription owner** adds the **network operations user** account to the resource group and assigns the **contributor** role.</span></span> 
![](../_images/governance-3-0e.png)
3. <span data-ttu-id="7683b-253">O **usuário de operações de rede** cria um [gateway VPN](/azure/vpn-gateway/vpn-gateway-about-vpngateways) e o configura para se conectar ao dispositivo de VPN local.</span><span class="sxs-lookup"><span data-stu-id="7683b-253">The **network operations user** creates a [VPN gateway](/azure/vpn-gateway/vpn-gateway-about-vpngateways) and configures it to connect to the on-premises VPN appliance.</span></span> <span data-ttu-id="7683b-254">O usuário **operações de rede** também se aplica a um par de [marcas](/azure/azure-resource-manager/resource-group-using-tags) para cada um dos recursos: *environment:shared* e *managedBy:netOps*.</span><span class="sxs-lookup"><span data-stu-id="7683b-254">The **network operations** user also applies a pair of [tags](/azure/azure-resource-manager/resource-group-using-tags) to each of the resources: *environment:shared* and *managedBy:netOps*.</span></span> <span data-ttu-id="7683b-255">Quando o **administrador de serviço de assinatura** exportar um custo de relatório, os custos serão alinhados com cada uma dessas marcas.</span><span class="sxs-lookup"><span data-stu-id="7683b-255">When the **subscription service administrator** exports a cost report, costs will be aligned with each of these tags.</span></span> <span data-ttu-id="7683b-256">Isso permite que o **administrador de serviço de assinatura** dinamizar os custos usando a marca *environment* e a marca *managedBy*.</span><span class="sxs-lookup"><span data-stu-id="7683b-256">This allows the **subscription service administrator** to pivot costs using the *environment* tag and the *managedBy* tag.</span></span> <span data-ttu-id="7683b-257">Observe o contador de **limites de recursos** no lado superior direito da figura.</span><span class="sxs-lookup"><span data-stu-id="7683b-257">Notice the **resource limits** counter at the top right-hand side of the figure.</span></span> <span data-ttu-id="7683b-258">Cada assinatura do Azure tem [limites de serviço](/azure/azure-subscription-service-limits), e para ajudá-lo a entender o efeito desses limites Seguiremos o limite de rede virtual para cada assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-258">Each Azure subscription has [service limits](/azure/azure-subscription-service-limits), and to help you understand the effect of these limits we'll follow the virtual network limit for each subscription.</span></span> <span data-ttu-id="7683b-259">Há um limite padrão de 50 redes virtuais por assinatura e depois que a primeira rede virtual é implantada agora há 49 disponíveis.</span><span class="sxs-lookup"><span data-stu-id="7683b-259">There is a default limit of 50 virtual networks per subscription, and after the first virtual network is deployed there are now 49 available.</span></span>
![](../_images/governance-3-1.png)
4. <span data-ttu-id="7683b-260">Dois ou mais grupos de recursos são implantados, o primeiro é denominado *prod rg*.</span><span class="sxs-lookup"><span data-stu-id="7683b-260">Two more resource groups are deployed, the first is named *prod-rg*.</span></span> <span data-ttu-id="7683b-261">Este grupo de recursos está alinhado com o ambiente de **produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-261">This resource group is aligned with the **production** environment.</span></span> <span data-ttu-id="7683b-262">O segundo é denominado *dev-rg* e é alinhado ao ambiente de **desenvolvimento**.</span><span class="sxs-lookup"><span data-stu-id="7683b-262">The second is named *dev-rg* and is aligned with the **development** environment.</span></span> <span data-ttu-id="7683b-263">Todos os recursos associados com cargas de trabalho de produção são implantados para o **produção** todos os recursos associados com cargas de trabalho de desenvolvimento e ambiente são implantados para o ambiente de **desenvolvimento**.</span><span class="sxs-lookup"><span data-stu-id="7683b-263">All resources associated with production workloads are deployed to the **production** environment and all resources associated with development workloads are deployed to the **development** environment.</span></span> <span data-ttu-id="7683b-264">Neste exemplo, só implantaremos duas cargas de trabalho para cada um desses dois ambientes para não encontramos qualquer limite de serviço de assinatura do Azure.</span><span class="sxs-lookup"><span data-stu-id="7683b-264">In this example we'll only deploy two workloads to each of these two environments so we won't encounter any Azure subscription service limits.</span></span> <span data-ttu-id="7683b-265">No entanto, é importante considerar que cada grupo de recursos tem um limite de 800 recursos por grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-265">However, it's important to consider that each resource group has a limit of 800 resources per resource group.</span></span> <span data-ttu-id="7683b-266">Portanto, se pudermos continuar adicionando cargas de trabalho para cada grupo de recursos, é possível que esse limite seja atingido.</span><span class="sxs-lookup"><span data-stu-id="7683b-266">Therefore, if we keep adding workloads to each resource group it is possible that this limit will be reached.</span></span> 
![](../_images/governance-3-2.png)
5. <span data-ttu-id="7683b-267">A primeira **proprietário da carga de trabalho** envia uma solicitação para o **administrador de serviço de assinatura** e é adicionado a cada um dos grupos de recursos dos ambientes de **desenvolvimento** e de **produção** com a função **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="7683b-267">The first **workload owner** sends a request to the **subscription service administrator** and is added to each of the **development** and **production** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="7683b-268">Como você aprendeu anteriormente, o **colaborador** função permite que o usuário execute qualquer operação que não seja a atribuição de uma função para outro usuário.</span><span class="sxs-lookup"><span data-stu-id="7683b-268">As you learned earlier, the **contributor** role allows the user to perform any operation other than assigning a role to another user.</span></span> <span data-ttu-id="7683b-269">O primeiro **proprietário da carga de trabalho** agora pode criar os recursos associados à sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-269">The first **workload owner** can now create the resources associated with their workload.</span></span>
![](../_images/governance-3-3.png)
6. <span data-ttu-id="7683b-270">O primeiro **proprietário da carga de trabalho** cria uma rede virtual em cada dois grupos de recursos com um par de máquinas virtuais em cada um.</span><span class="sxs-lookup"><span data-stu-id="7683b-270">The first **workload owner** creates a virtual network in each of the two resource groups with a pair of virtual machines in each.</span></span> <span data-ttu-id="7683b-271">O primeiro **proprietário da carga de trabalho** se aplica às marcas *environment* e *managedBy* para todos os recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-271">The first **workload owner** applies the *environment* and *managedBy* tags to all resources.</span></span> <span data-ttu-id="7683b-272">Observe que o contador de limite do serviço do Azure está agora em 47 redes virtuais restantes.</span><span class="sxs-lookup"><span data-stu-id="7683b-272">Note that the Azure service limit counter is now at 47 virtual networks remaining.</span></span>
![](../_images/governance-3-4.png)
7. <span data-ttu-id="7683b-273">Nenhuma das redes virtuais não tem conectividade com o local quando é criada.</span><span class="sxs-lookup"><span data-stu-id="7683b-273">Each of the virtual networks does not have connectivity to on-premises when they are created.</span></span> <span data-ttu-id="7683b-274">Nesse tipo de arquitetura, cada rede virtual deve ser emparelhada para a *hub-vnet* no ambiente de **infraestrutura compartilhada**.</span><span class="sxs-lookup"><span data-stu-id="7683b-274">In this type of architecture, each virtual network must be peered to the *hub-vnet* in the **shared infrastructure** environment.</span></span> <span data-ttu-id="7683b-275">O emparelhamento de rede virtual cria uma conexão entre duas redes virtuais separadas e permite o tráfego de rede entre eles.</span><span class="sxs-lookup"><span data-stu-id="7683b-275">Virtual network peering creates a connection between two separate virtual networks and allows network traffic to travel between them.</span></span> <span data-ttu-id="7683b-276">Observe que o emparelhamento de rede virtual não é inerentemente transitiva.</span><span class="sxs-lookup"><span data-stu-id="7683b-276">Note that virtual network peering is not inherently transitive.</span></span> <span data-ttu-id="7683b-277">Um emparelhamento deve ser especificado em cada uma das duas redes virtuais que estão conectadas e se apenas uma das redes virtuais Especifica um emparelhamento a conexão está incompleta.</span><span class="sxs-lookup"><span data-stu-id="7683b-277">A peering must be specified in each of the two virtual networks that are connected, and if only one of the virtual networks specifies a peering the connection is incomplete.</span></span> <span data-ttu-id="7683b-278">Para ilustrar o efeito disso, o primeiro **proprietário da carga de trabalho** Especifica um emparelhamento entre **prod-vnet** e **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="7683b-278">To illustrate the effect of this, the first **workload owner** specifies a peering between **prod-vnet** and **hub-vnet**.</span></span> <span data-ttu-id="7683b-279">O emparelhamento primeiro é criado, mas nenhum tráfego flui, já que o emparelhamento complementar do **hub-vnet** para **prod-vnet** ainda não foi especificado.</span><span class="sxs-lookup"><span data-stu-id="7683b-279">The first peering is created, but no traffic flows because the complementary peering from **hub-vnet** to **prod-vnet** has not yet been specified.</span></span> <span data-ttu-id="7683b-280">A primeira **proprietário da carga de trabalho** contatos a **operações de rede** solicitações nesse complementares emparelhamento de conexão e usuário.</span><span class="sxs-lookup"><span data-stu-id="7683b-280">The first **workload owner** contacts the **network operations** user and requests this complementary peering connection.</span></span>
![](../_images/governance-3-5.png)
8. <span data-ttu-id="7683b-281">O usuário **operações de rede** examina a solicitação, a aprova e então especifica o emparelhamento nas configurações para o **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="7683b-281">The **network operations** user reviews the request, approves it, then specifies the peering in the settings for the **hub-vnet**.</span></span> <span data-ttu-id="7683b-282">A conexão de emparelhamento agora está concluída e o tráfego de rede flui entre as duas redes virtuais.</span><span class="sxs-lookup"><span data-stu-id="7683b-282">The peering connection is now complete and network traffic flows between the two virtual networks.</span></span>
![](../_images/governance-3-6.png)
9. <span data-ttu-id="7683b-283">Agora, um segundo **proprietário da carga de trabalho** envia uma solicitação para o **administrador de serviço de assinatura** e é adicionado à existente **produção** e **desenvolvimento**  grupos de recurso de ambiente com o **colaborador** função.</span><span class="sxs-lookup"><span data-stu-id="7683b-283">Now, a second **workload owner** sends a request to the **subscription service administrator** and is added to the existing **production** and **development** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="7683b-284">O segundo **proprietário da carga de trabalho** tem as mesmas permissões em todos os recursos como o primeiro **proprietário da carga de trabalho** em cada grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-284">The second **workload owner** has the same permissions on all resources as the first **workload owner** in each resource group.</span></span> 
![](../_images/governance-3-7.png)
10. <span data-ttu-id="7683b-285">O segundo **proprietário da carga de trabalho** cria uma sub-rede na rede virtual **prod-vnet** e então adicionada duas máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="7683b-285">The second **workload owner** creates a subnet in the **prod-vnet** virtual network, then adds two virtual machines.</span></span> <span data-ttu-id="7683b-286">O segundo **proprietário da carga de trabalho** se aplica às marcas *environment* e *managedBy* para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="7683b-286">The second **workload owner** applies the *environment* and *managedBy* tags to each resource.</span></span>
![](../_images/governance-3-8.png) 

<span data-ttu-id="7683b-287">Esse modelo de gerenciamento de recursos de exemplo permite gerenciar nossos recursos nos três ambientes necessários.</span><span class="sxs-lookup"><span data-stu-id="7683b-287">This example resource management model enables us to manage our resources in the three required environments.</span></span> <span data-ttu-id="7683b-288">Nossos recursos de infraestrutura compartilhada estão protegidos porque há apenas um usuário na assinatura com a permissão para acessar esses recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-288">Our shared infrastructure resources are protected because there's only a single user in the subscription with permission to access those resources.</span></span> <span data-ttu-id="7683b-289">Cada um dos nossos proprietários da carga de trabalho é capaz de utilizar os recursos de infraestrutura de compartilhamento sem ter que todas as permissões sobre os recursos compartilhados reais próprios.</span><span class="sxs-lookup"><span data-stu-id="7683b-289">Each of our workload owners is able to utilize the share infrastructure resources without having any permissions on the actual shared resources themselves.</span></span> <span data-ttu-id="7683b-290">Esse modelo de gerenciamento falha nosso requisito para o isolamento de carga de trabalho - cada um dos dois **proprietários da carga de trabalho** sejam capazes de acessar os recursos de carga de trabalho do outro.</span><span class="sxs-lookup"><span data-stu-id="7683b-290">This management model fails our requirement for workload isolation - each of the two **workload owners** are able to access the resources of the other's workload.</span></span> 

<span data-ttu-id="7683b-291">Há outra consideração importante com esse modelo, que pode não ser imediatamente óbvia.</span><span class="sxs-lookup"><span data-stu-id="7683b-291">There's another important consideration with this model that may not be immediately obvious.</span></span> <span data-ttu-id="7683b-292">Em nosso exemplo, foi **proprietário de carga de trabalho do app1** que solicitou a conexão de rede emparelhamento com o **vnet hub** para fornecer conectividade a locais.</span><span class="sxs-lookup"><span data-stu-id="7683b-292">In our example, it was **app1 workload owner** that requested the network peering connection with the **hub-vnet** to provide connectivity to on-premises.</span></span> <span data-ttu-id="7683b-293">O usuário **operações de rede** avaliou a solicitação com base nos recursos implantados com carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-293">The **network operations** user evaluated that request based on the resources deployed with that workload.</span></span> <span data-ttu-id="7683b-294">Quando o **proprietário da assinatura** adicionou o **proprietário de carga de trabalho do app2** com a função **colaborador**, o usuário tinha direitos de acesso de gerenciamento para todos os recursos no grupo de recursos **prod-rg**.</span><span class="sxs-lookup"><span data-stu-id="7683b-294">When the **subscription owner** added **app2 workload owner** with the **contributor** role, that user had management access rights to all resources in the **prod-rg** resource group.</span></span> 

![](../_images/governance-3-10.png)

<span data-ttu-id="7683b-295">Isso significa que o **proprietário de carga de trabalho do app2** teve permissão para implantar sua própria sub-rede com máquinas virtuais na rede virtual **redes de produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-295">This means **app2 workload owner** had permission to deploy their own subnet with virtual machines in the **prod-vnet** virtual network.</span></span> <span data-ttu-id="7683b-296">Por padrão, essas máquinas virtuais agora têm acesso à rede local.</span><span class="sxs-lookup"><span data-stu-id="7683b-296">By default, those virtual machines now have access to the on-premises network.</span></span> <span data-ttu-id="7683b-297">O usuário **operações de rede** não está ciente dessas máquinas e não aprova sua conectividade com local.</span><span class="sxs-lookup"><span data-stu-id="7683b-297">The **network operations** user is not aware of those machines and did not approve their connectivity to on-premises.</span></span>

<span data-ttu-id="7683b-298">Em seguida, vamos examinar uma única assinatura com vários grupos de recursos para diferentes ambientes e cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-298">Next, let's look at a single subscription with multiple resources groups for different environments and workloads.</span></span> <span data-ttu-id="7683b-299">Observe que no exemplo anterior, os recursos para cada ambiente foram facilmente identificáveis porque estavam no mesmo grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-299">Note that in the previous example, the resources for each environment were easily identifiable because they were in the same resource group.</span></span> <span data-ttu-id="7683b-300">Agora que não temos mais esse agrupamento, precisamos contar com uma convenção de nomenclatura do grupo de recursos para fornecer essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="7683b-300">Now that we no longer have that grouping, we will have to rely on a resource group naming convention to provide that functionality.</span></span> 

1. <span data-ttu-id="7683b-301">Nossos recursos de **infraestrutura compartilhada** ainda terão um grupo de recursos separado nesse modelo, para que ele permaneça igual.</span><span class="sxs-lookup"><span data-stu-id="7683b-301">Our **shared infrastructure** resources will still have a separate resource group in this model, so that remains the same.</span></span> <span data-ttu-id="7683b-302">Cada carga de trabalho exige dois grupos de recursos, um para cada um dos ambientes de **desenvolvimento** e de **produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-302">Each workload requires two resource groups - one for each of the **development** and **production** environments.</span></span> <span data-ttu-id="7683b-303">Para a primeira carga de trabalho, o **proprietário da assinatura** cria dois grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-303">For the first workload, the **subscription owner** creates two resource groups.</span></span> <span data-ttu-id="7683b-304">A primeira é denominada **app1-prod-rg** e a segunda é denominada **app1-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="7683b-304">The first is named **app1-prod-rg** and the second one is named **app1-dev-rg**.</span></span> <span data-ttu-id="7683b-305">Como discutido anteriormente, essa convenção de nomenclatura identifica os recursos como sendo associados à primeira carga de trabalho, **app1**, e o ambiente de **desenvolvimento** ou de **produção**.</span><span class="sxs-lookup"><span data-stu-id="7683b-305">As discussed earlier, this naming convention identifies the resources as being associated with the first workload, **app1**, and either the **dev** or **prod** environment.</span></span> <span data-ttu-id="7683b-306">Novamente, o proprietário da *assinatura* adiciona o **proprietário de carga de trabalho do app1** ao grupo de recursos com a função **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="7683b-306">Again, the *subscription* owner adds **app1 workload owner** to the resource group with the **contributor** role.</span></span>
![](../_images/governance-3-12.png)
2. <span data-ttu-id="7683b-307">Semelhante ao primeiro exemplo, **proprietário de carga de trabalho do app1** implanta uma rede virtual denominada **app1-prod-vnet** para o **produção** ambiente e outro nomeado**app1-dev-vnet** para o **desenvolvimento** ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-307">Similar to the first example, **app1 workload owner** deploys a virtual network named **app1-prod-vnet** to the **production** environment, and another named **app1-dev-vnet** to the **development** environment.</span></span> <span data-ttu-id="7683b-308">Novamente, o **proprietário de carga de trabalho do app1** envia uma solicitação para o usuário **operações de rede** para criar uma conexão de emparelhamento.</span><span class="sxs-lookup"><span data-stu-id="7683b-308">Again, **app1 workload owner** sends a request to the **network operations** user to create a peering connection.</span></span> <span data-ttu-id="7683b-309">Observe que o **proprietário de carga de trabalho do app1** adiciona as mesmas marcas como no primeiro exemplo e o limite de contador foi reduzido para 47 redes virtuais restantes na assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-309">Note that **app1 workload owner** adds the same tags as in the first example, and the limit counter has been decremented to 47 virtual networks remaining in the subscription.</span></span>
![](../_images/governance-3-13.png)
3. <span data-ttu-id="7683b-310">Agora, o **proprietário da assinatura** cria dois grupos de recursos para o **proprietário de carga de trabalho do app2**.</span><span class="sxs-lookup"><span data-stu-id="7683b-310">The **subscription owner** now creates two resource groups for **app2 workload owner**.</span></span> <span data-ttu-id="7683b-311">Seguir as mesmas convenções de **proprietário de carga de trabalho do app1**, os grupos de recursos são nomeados como **app2-prod-rg** e **app2-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="7683b-311">Following the same conventions as for **app1 workload owner**, the resource groups are named **app2-prod-rg** and **app2-dev-rg**.</span></span> <span data-ttu-id="7683b-312">O **proprietário da assinatura** adiciona **proprietário de carga de trabalho do app2** para cada um dos grupos de recursos com a função **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="7683b-312">The **subscription owner** adds **app2 workload owner** to each of the resource groups with the **contributor** role.</span></span>
![](../_images/governance-3-14.png)
4. <span data-ttu-id="7683b-313">O *proprietário da carga de trabalho de app2* implanta redes virtuais e máquinas virtuais para os grupos de recursos com as mesmas convenções de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-313">*App2 workload owner* deploys virtual networks and virtual machines to the resource groups with the same naming conventions.</span></span> <span data-ttu-id="7683b-314">As marcas são adicionadas e o contador de limite foi reduzido para 45 redes virtuais restantes na *assinatura*.</span><span class="sxs-lookup"><span data-stu-id="7683b-314">Tags are added and the limit counter has been decremented to 45 virtual networks remaining in the *subscription*.</span></span>
![](../_images/governance-3-15.png)
5. <span data-ttu-id="7683b-315">O *proprietário da carga de trabalho do app2* envia uma solicitação para o usuário *operações de rede* para o mesmo nível a *app2-prod-vnet* com o *hub vnet*.</span><span class="sxs-lookup"><span data-stu-id="7683b-315">*App2 workload owner* sends a request to the *network operations* user to peer the *app2-prod-vnet* with the *hub-vnet*.</span></span> <span data-ttu-id="7683b-316">O usuário de *operações de rede* cria a conexão de emparelhamento.</span><span class="sxs-lookup"><span data-stu-id="7683b-316">The *network operations* user creates the peering connection.</span></span>
![](../_images/governance-3-16.png)

<span data-ttu-id="7683b-317">O modelo de gerenciamento resultante é semelhante ao primeiro exemplo, com várias diferenças importantes:</span><span class="sxs-lookup"><span data-stu-id="7683b-317">The resulting management model is similar to the first example, with several key differences:</span></span>
* <span data-ttu-id="7683b-318">Cada uma das duas cargas de trabalho é isolada por carga de trabalho e pelo ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-318">Each of the two workloads is isolated by workload and by environment.</span></span>
* <span data-ttu-id="7683b-319">Esse modelo exigia duas redes virtuais a mais do que o primeiro modelo de exemplo.</span><span class="sxs-lookup"><span data-stu-id="7683b-319">This model required two more virtual networks than the first example model.</span></span> <span data-ttu-id="7683b-320">Enquanto isso não é uma distinção importante com apenas duas cargas de trabalho, o limite teórico no número de cargas de trabalho para esse modelo é 24.</span><span class="sxs-lookup"><span data-stu-id="7683b-320">While this is not an important distinction with only two workloads, the theoretical limit on the number of workloads for this model is 24.</span></span> 
* <span data-ttu-id="7683b-321">Os recursos não são agrupados em um único grupo de recursos para cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-321">Resources are no longer grouped in a single resource group for each environment.</span></span> <span data-ttu-id="7683b-322">O agrupamento de recursos requer uma compreensão das convenções de nomenclatura usadas para cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-322">Grouping resources requires an understanding of the naming conventions used for each environment.</span></span> 
* <span data-ttu-id="7683b-323">Cada uma das conexões de rede virtual emparelhadas foi revisada e aprovada pelo usuário *operações de rede*.</span><span class="sxs-lookup"><span data-stu-id="7683b-323">Each of the peered virtual network connections was reviewed and approved by the *network operations* user.</span></span>

<span data-ttu-id="7683b-324">Agora vamos dar uma olhada em um modelo de gerenciamento de recursos usando várias assinaturas.</span><span class="sxs-lookup"><span data-stu-id="7683b-324">Now let's look at a resource management model using multiple subscriptions.</span></span> <span data-ttu-id="7683b-325">Nesse modelo, cada um dos três ambientes para uma assinatura separada será alinhar: uma **serviços compartilhados** assinatura, **produção** assinatura e, finalmente, um **desenvolvimento** assinatura.</span><span class="sxs-lookup"><span data-stu-id="7683b-325">In this model, we'll align each of the three environments to a separate subscription: a **shared services** subscription, **production** subscription, and finally a **development** subscription.</span></span> <span data-ttu-id="7683b-326">As considerações para este modelo são semelhantes a um modelo usando uma única assinatura em que temos que decidir como alinhar grupos de recursos para cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7683b-326">The considerations for this model are similar to a model using a single subscription in that we have to decide how to align resource groups to workloads.</span></span> <span data-ttu-id="7683b-327">Nós já determinamos que criar um grupo de recursos para cada carga de trabalho satisfaz nosso requisito de isolamento de carga de trabalho, portanto ficaremos com esse modelo neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="7683b-327">We've already determined that creating a resource group for each workload satisfies our workload isolation requirement, so we'll stick with that model in this example.</span></span>

1. <span data-ttu-id="7683b-328">Nesse modelo, há três *assinaturas*: *infraestrutura compartilhada*, *produção* e *desenvolvimento*.</span><span class="sxs-lookup"><span data-stu-id="7683b-328">In this model, there are three *subscriptions*: *shared infrastructure*, *production*, and *development*.</span></span> <span data-ttu-id="7683b-329">Cada uma dessas três assinaturas requer um *proprietário da assinatura* e, em nosso exemplo simples, vamos usar a mesma conta de usuário para todos os três.</span><span class="sxs-lookup"><span data-stu-id="7683b-329">Each of these three subscriptions requires a *subscription owner*, and in our simple example we'll use the same user account for all three.</span></span> <span data-ttu-id="7683b-330">O *infraestrutura compartilhada* recursos são gerenciados da mesma forma para os dois primeiros exemplos acima, e a primeira carga de trabalho está associada a *app1-rg* no *produção* ambiente e o recurso de mesmo nome de grupo no *desenvolvimento* ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-330">The *shared infrastructure* resources are managed similarly to the first two examples above, and the first workload is associated with the *app1-rg* in the *production* environment and the same-named resource group in the *development* environment.</span></span> <span data-ttu-id="7683b-331">O *proprietário de carga de trabalho do app1* é adicionado a cada grupo de recursos com a função *colaborador*.</span><span class="sxs-lookup"><span data-stu-id="7683b-331">The *app1 workload owner* is added to each of the resource group with the *contributor* role.</span></span> 
![](../_images/governance-3-17.png)
2. <span data-ttu-id="7683b-332">Assim como acontece com os exemplos anteriores, *proprietário de carga de trabalho do app1* cria os recursos e as solicitações de conexão de emparelhamento com o *infraestrutura compartilhada* rede virtual.</span><span class="sxs-lookup"><span data-stu-id="7683b-332">As with the earlier examples, *app1 workload owner* creates the resources and requests the peering connection with the *shared infrastructure* virtual network.</span></span> <span data-ttu-id="7683b-333">O *proprietário de carga de trabalho do app1* adiciona somente a marca *managedBy* porque não há mais necessidade para a marca *environment*.</span><span class="sxs-lookup"><span data-stu-id="7683b-333">*App1 workload owner* adds only the *managedBy* tag because there is no longer a need for the *environment* tag.</span></span> <span data-ttu-id="7683b-334">Ou seja, os recursos para cada ambiente agora são agrupados na mesma *assinatura* e a marca *environment* fica redundante.</span><span class="sxs-lookup"><span data-stu-id="7683b-334">That is, resources are for each environment are now grouped in the same *subscription* and the *environment* tag is redundant.</span></span> <span data-ttu-id="7683b-335">O contador de limites será diminuído para 49 redes virtuais restantes.</span><span class="sxs-lookup"><span data-stu-id="7683b-335">The limit counter is decremented to 49 virtual networks remaining.</span></span>
![](../_images/governance-3-18.png)
3. <span data-ttu-id="7683b-336">Por fim, o *proprietário da assinatura* repete o processo para a carga de trabalho segundo, adicionando os grupos de recursos com o *app2 proprietário da carga de trabalho* no \* função de colaborador.</span><span class="sxs-lookup"><span data-stu-id="7683b-336">Finally, the *subscription owner* repeats the process for the second workload, adding the resource groups with the *app2 workload owner* in the \*contributor role.</span></span> <span data-ttu-id="7683b-337">O contador de limite para cada uma das assinaturas do ambiente é reduzido para 48 redes virtuais restantes.</span><span class="sxs-lookup"><span data-stu-id="7683b-337">The limit counter for each of the environment subscriptions is decremented to 48 virtual networks remaining.</span></span> 

<span data-ttu-id="7683b-338">Esse modelo de gerenciamento tem os benefícios do segundo exemplo acima.</span><span class="sxs-lookup"><span data-stu-id="7683b-338">This management model has the benefits of the second example above.</span></span> <span data-ttu-id="7683b-339">No entanto, a principal diferença é que os limites são um problema devido ao fato de que eles estão espalhados por duas *assinaturas*.</span><span class="sxs-lookup"><span data-stu-id="7683b-339">However, the key difference is that limits are less of an issue due to the fact that they are spread over two *subscriptions*.</span></span> <span data-ttu-id="7683b-340">A desvantagem é que os dados de custo controlados por marcas devem ser agregados em todas as três *assinaturas*.</span><span class="sxs-lookup"><span data-stu-id="7683b-340">The drawback is that the cost data tracked by tags must be aggregated across all three *subscriptions*.</span></span> 

<span data-ttu-id="7683b-341">Portanto, você pode selecionar qualquer um desses dois modelos de gerenciamento de recursos de exemplo, dependendo da prioridade de seus requisitos.</span><span class="sxs-lookup"><span data-stu-id="7683b-341">Therefore, you can select any of these two examples resource management models depending on the priority of your requirements.</span></span> <span data-ttu-id="7683b-342">Se você antecipar que sua organização não atinja os limites de serviço para uma única assinatura, poderá usar uma única assinatura com vários grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="7683b-342">If you anticipate that your organization will not reach the service limits for a single subscription, you can use a single subscription with multiple resource groups.</span></span> <span data-ttu-id="7683b-343">Por outro lado, se sua organização prevê várias cargas de trabalho, pode ser melhor ter várias assinaturas para cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="7683b-343">Conversely, if your organization anticipates many workloads, multiple subscriptions for each environment may be better.</span></span>

<!-- ## Summary



## Next steps -->


<!-- links -->

[rbac-built-in-owner]: /azure/role-based-access-control/built-in-roles#owner
[rbac-built-in-roles]: /azure/role-based-access-control/built-in-roles

---
title: "Diretrizes da rede de distribuição de conteúdo"
description: "Diretriz na Rede de Distribuição de Conteúdo (CDN) para fornecer conteúdo de alta largura de banda hospedado no Azure."
author: dragon119
ms.date: 09/30/2016
pnp.series.title: Best Practices
ms.openlocfilehash: 94036c803552d5e7061f99e6dd0ca9e563a32690
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/14/2017
---
# <a name="content-delivery-network"></a><span data-ttu-id="eb9c1-103">Rede de Distribuição de Conteúdo</span><span class="sxs-lookup"><span data-stu-id="eb9c1-103">Content Delivery Network</span></span>
[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="eb9c1-104">A CDN (Rede de Distribuição de Conteúdo) do Microsoft Azure oferece aos desenvolvedores uma solução global de fornecimento de conteúdo de alta largura de banda hospedada no Azure ou em qualquer outro local.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-104">The Microsoft Azure Content Delivery Network (CDN) offers developers a global solution for delivering high-bandwidth content that is hosted in Azure or any other location.</span></span> <span data-ttu-id="eb9c1-105">Com a CDN, você pode armazenar em cache objetos publicamente disponíveis carregados do Armazenamento de Blobs do Azure, de um aplicativo Web, da máquina virtual, de uma pasta de aplicativo ou de outro local HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-105">Using the CDN, you can cache publicly available objects loaded from Azure blob storage, a web application, virtual machine, application folder, or other HTTP/HTTPS location.</span></span> <span data-ttu-id="eb9c1-106">O cache da CDN pode ser mantido em locais estratégicos para fornecer a máxima largura de banda para fornecimento de conteúdo aos usuários.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-106">The CDN cache can be held at strategic locations to provide maximum bandwidth for delivering content to users.</span></span> <span data-ttu-id="eb9c1-107">A CDN normalmente é usada para fornecimento de conteúdo estático, como imagens, folhas de estilo, documentos, arquivos, scripts do lado do cliente e páginas HTML.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-107">The CDN is typically used for delivering static content such as images, style sheets, documents, files, client-side scripts, and HTML pages.</span></span>

<span data-ttu-id="eb9c1-108">Você também pode usar a CDN como um cache para servir conteúdo dinâmico, como um relatório em PDF ou um gráfico com base em entradas especificadas. Se os mesmos valores de entrada forem fornecidos por usuários diferentes, o resultado deverá ser o mesmo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-108">You can also use the CDN as a cache for serving dynamic content, such as a PDF report or graph based on specified inputs; if the same input values are provided by different users the result should be the same.</span></span>

<span data-ttu-id="eb9c1-109">As principais vantagens de usar a CDN são latência mais baixa e fornecimento mais rápido de conteúdo aos usuários independentemente da localização geográfica em relação ao datacenter em que o aplicativo está hospedado.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-109">The major advantages of using the CDN are lower latency and faster delivery of content to users irrespective of their geographical location in relation to the datacenter where the application is hosted.</span></span>  

![Diagrama da CDN](./images/cdn/CDN.png)

<span data-ttu-id="eb9c1-111">Usar a CDN também deve ajudar a reduzir a carga no aplicativo, pois ele é liberado do processamento necessário para acessar e entregar o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-111">Using the CDN should also help to reduce the load on application because it is relieved of the processing required to access and deliver the content.</span></span> <span data-ttu-id="eb9c1-112">Essa redução de carga pode ajudar a aumentar o desempenho e a escalabilidade do aplicativo, bem como minimizar os custos de hospedagem, reduzindo os recursos de processamento necessários para alcançar um nível específico de desempenho e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-112">This reduction in load can help to increase the performance and scalability of the application, as well as minimizing hosting costs by reducing the processing resources required to achieve a specific level of performance and availability.</span></span>

## <a name="how-and-why-a-cdn-is-used"></a><span data-ttu-id="eb9c1-113">Como e por que a CDN é usada</span><span class="sxs-lookup"><span data-stu-id="eb9c1-113">How and why a CDN is used</span></span>
<span data-ttu-id="eb9c1-114">Entre os usos comuns para a CDN estão:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-114">Typical uses for a CDN include:</span></span>  

* <span data-ttu-id="eb9c1-115">Fornecer recursos estáticos para aplicativos cliente, geralmente por meio de um site.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-115">Delivering static resources for client applications, often from a website.</span></span> <span data-ttu-id="eb9c1-116">Esses recursos podem ser imagens, folhas de estilo, documentos, arquivos, scripts do lado do cliente, páginas HTML, fragmentos HTML ou qualquer outro conteúdo que o servidor não precise modificar para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-116">These resources can be images, style sheets, documents, files, client-side scripts, HTML pages, HTML fragments, or any other content that the server does not need to modify for each request.</span></span> <span data-ttu-id="eb9c1-117">O aplicativo pode criar itens em tempo de execução e disponibilizá-los para o CDN (por exemplo, ao criar uma lista atual de manchetes de notícias), mas ele não faz isso para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-117">The application can create items at runtime and make them available to the CDN (for example, by creating a list of current news headlines), but it does not do so for each request.</span></span>
* <span data-ttu-id="eb9c1-118">Fornecimento de conteúdo estático e compartilhado público para dispositivos como telefones móveis e tablet PCs.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-118">Delivering public static and shared content to devices such as mobile phones and tablet computers.</span></span> <span data-ttu-id="eb9c1-119">O aplicativo em si é um serviço web que oferece uma API aos clientes que são executados em vários dispositivos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-119">The application itself is a web service that offers an API to clients running on the various devices.</span></span> <span data-ttu-id="eb9c1-120">O CDN também pode fornecer conjuntos de dados estáticos (por meio do serviço web) para os clientes usarem, talvez para gerar a interface do usuário do cliente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-120">The CDN can also deliver static datasets (via the web service) for the clients to use, perhaps to generate the client UI.</span></span> <span data-ttu-id="eb9c1-121">Por exemplo, o CDN pode ser usado para distribuir documentos XML ou JSON.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-121">For example, the CDN could be used to distribute JSON or XML documents.</span></span>
* <span data-ttu-id="eb9c1-122">Servir sites inteiros que consistem em apenas conteúdo estático público para os clientes, sem a necessidade de quaisquer recursos de computação dedicados.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-122">Serving entire websites that consist of only public static content to clients, without requiring any dedicated compute resources.</span></span>
* <span data-ttu-id="eb9c1-123">Fazer o streaming de arquivos de vídeo ao cliente sob demanda.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-123">Streaming video files to the client on demand.</span></span> <span data-ttu-id="eb9c1-124">Os benefícios do vídeo de baixa latência e conectividade confiável disponível em datacenters globalmente localizados que oferecem conexões do CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-124">Video benefits from the low latency and reliable connectivity available from the globally located datacenters that offer CDN connections.</span></span> <span data-ttu-id="eb9c1-125">Os Serviços de Mídia do Microsoft Azure (AMS) integram-se com o Azure CDN para entregar conteúdo diretamente ao CDN para melhor distribuição.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-125">Microsoft Azure Media Services (AMS) integrates with Azure CDN to deliver content directly to the CDN for further distribution.</span></span> <span data-ttu-id="eb9c1-126">Para saber mais, confira [Streaming endpoints overview](/azure/media-services/media-services-streaming-endpoints-overview) (Visão geral dos pontos de extremidade de streaming).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-126">For more information, see [Streaming endpoints overview](/azure/media-services/media-services-streaming-endpoints-overview).</span></span>
* <span data-ttu-id="eb9c1-127">Geralmente aprimorar a experiência dos usuários, especialmente aqueles localizados longe o datacenter que hospeda o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-127">Generally improving the experience for users, especially those located far from the datacenter hosting the application.</span></span> <span data-ttu-id="eb9c1-128">Esses usuários poderiam, de outra forma, sofrer latência mais alta.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-128">These users might otherwise suffer higher latency.</span></span> <span data-ttu-id="eb9c1-129">Uma grande proporção do tamanho total do conteúdo em um aplicativo Web geralmente é estática e usar o CDN pode ajudar a manter o desempenho e a experiência geral do usuário eliminando a necessidade de implantar o aplicativo em vários datacenters.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-129">A large proportion of the total size of the content in a web application is often static, and using the CDN can help to maintain performance and overall user experience while eliminating the requirement to deploy the application to multiple data centers.</span></span>
* <span data-ttu-id="eb9c1-130">Manipular a carga crescente em aplicativos que dão suporte a soluções de IoT (Internet das coisas).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-130">Handling the growing load on applications that support IoT (Internet of Things) solutions.</span></span> <span data-ttu-id="eb9c1-131">O grande número desses dispositivos e aparelhos envolvidos poderia facilmente sobrecarregar o aplicativo se fosse necessário processar mensagens de difusão e gerenciar a distribuição de atualização de firmware diretamente para cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-131">The huge numbers of such devices and appliances involved could easily overwhelm an application if it was required to process broadcast messages and manage firmware update distribution directly to each device.</span></span>
* <span data-ttu-id="eb9c1-132">Lidar com picos e sobretensão de energia sob demanda sem exigir que o aplicativo dimensione, evitando o consequente aumento dos custos de execução.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-132">Coping with peaks and surges in demand without requiring the application to scale, avoiding the consequent increased running costs.</span></span> <span data-ttu-id="eb9c1-133">Por exemplo, quando uma atualização para um sistema operacional é liberada, para um dispositivo de hardware, como um modelo específico do roteador ou para um dispositivo do consumidor, como uma smart TV, haverá um grande pico na demanda conforme ele é baixado por milhões de usuários e dispositivos em um curto período de tempo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-133">For example, when an update to an operating system is released for a hardware device such as a specific model of router, or for a consumer device such as a smart TV, there will be a huge peak in demand as it is downloaded by millions of users and devices over a short period.</span></span>

<span data-ttu-id="eb9c1-134">A lista a seguir mostra exemplos do tempo médio para primeiro byte de vários locais geográficos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-134">The following list shows examples of the median time to first byte from various geographic locations.</span></span> <span data-ttu-id="eb9c1-135">A função web de destino é implantada ao Azure no Oeste dos EUA.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-135">The target web role is deployed to Azure West US.</span></span> <span data-ttu-id="eb9c1-136">Há uma forte correlação entre o maior aumento devido ao CDN e a proximidade com um nó CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-136">There is a strong correlation between greater boost due to the CDN and proximity to a CDN node.</span></span> <span data-ttu-id="eb9c1-137">Para obter uma lista completa com as localizações dos nós do CDN disponíveis, veja [Locais de Nó da Rede de Distribuição de Conteúdo (CDN) do Azure](/azure/cdn/cdn-pop-locations/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-137">A complete list of Azure CDN node locations is available at [Azure Content Delivery Network (CDN) Node Locations](/azure/cdn/cdn-pop-locations/).</span></span>

|  | <span data-ttu-id="eb9c1-138">Tempo (ms) até o Primeiro Byte (Origem)</span><span class="sxs-lookup"><span data-stu-id="eb9c1-138">Time (ms) to First Byte (Origin)</span></span> | <span data-ttu-id="eb9c1-139">Tempo (ms) até o Primeiro (CDN)</span><span class="sxs-lookup"><span data-stu-id="eb9c1-139">Time (ms) to First (CDN)</span></span> | <span data-ttu-id="eb9c1-140">% de aprimoramento de tempo de CDN</span><span class="sxs-lookup"><span data-stu-id="eb9c1-140">%CDN time improvement</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="eb9c1-141">\*São José, CA</span><span class="sxs-lookup"><span data-stu-id="eb9c1-141">\*San Jose, CA</span></span> |<span data-ttu-id="eb9c1-142">47,5</span><span class="sxs-lookup"><span data-stu-id="eb9c1-142">47.5</span></span> |<span data-ttu-id="eb9c1-143">46,5</span><span class="sxs-lookup"><span data-stu-id="eb9c1-143">46.5</span></span> |<span data-ttu-id="eb9c1-144">2%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-144">2%</span></span> |
| <span data-ttu-id="eb9c1-145">\*\*Dulles, VA</span><span class="sxs-lookup"><span data-stu-id="eb9c1-145">\*\*Dulles, VA</span></span> |<span data-ttu-id="eb9c1-146">109</span><span class="sxs-lookup"><span data-stu-id="eb9c1-146">109</span></span> |<span data-ttu-id="eb9c1-147">40,5</span><span class="sxs-lookup"><span data-stu-id="eb9c1-147">40.5</span></span> |<span data-ttu-id="eb9c1-148">169%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-148">169%</span></span> |
| <span data-ttu-id="eb9c1-149">Buenos Aires, AR</span><span class="sxs-lookup"><span data-stu-id="eb9c1-149">Buenos Aires, AR</span></span> |<span data-ttu-id="eb9c1-150">210</span><span class="sxs-lookup"><span data-stu-id="eb9c1-150">210</span></span> |<span data-ttu-id="eb9c1-151">151</span><span class="sxs-lookup"><span data-stu-id="eb9c1-151">151</span></span> |<span data-ttu-id="eb9c1-152">39%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-152">39%</span></span> |
| <span data-ttu-id="eb9c1-153">\*Londres, Reino Unido</span><span class="sxs-lookup"><span data-stu-id="eb9c1-153">\*London, UK</span></span> |<span data-ttu-id="eb9c1-154">195</span><span class="sxs-lookup"><span data-stu-id="eb9c1-154">195</span></span> |<span data-ttu-id="eb9c1-155">44</span><span class="sxs-lookup"><span data-stu-id="eb9c1-155">44</span></span> |<span data-ttu-id="eb9c1-156">343%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-156">343%</span></span> |
| <span data-ttu-id="eb9c1-157">Xangai, CN</span><span class="sxs-lookup"><span data-stu-id="eb9c1-157">Shanghai, CN</span></span> |<span data-ttu-id="eb9c1-158">242</span><span class="sxs-lookup"><span data-stu-id="eb9c1-158">242</span></span> |<span data-ttu-id="eb9c1-159">206</span><span class="sxs-lookup"><span data-stu-id="eb9c1-159">206</span></span> |<span data-ttu-id="eb9c1-160">17%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-160">17%</span></span> |
| <span data-ttu-id="eb9c1-161">\*Cingapura</span><span class="sxs-lookup"><span data-stu-id="eb9c1-161">\*Singapore</span></span> |<span data-ttu-id="eb9c1-162">214</span><span class="sxs-lookup"><span data-stu-id="eb9c1-162">214</span></span> |<span data-ttu-id="eb9c1-163">74</span><span class="sxs-lookup"><span data-stu-id="eb9c1-163">74</span></span> |<span data-ttu-id="eb9c1-164">189%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-164">189%</span></span> |
| <span data-ttu-id="eb9c1-165">\*Tóquio, JP</span><span class="sxs-lookup"><span data-stu-id="eb9c1-165">\*Tokyo, JP</span></span> |<span data-ttu-id="eb9c1-166">163</span><span class="sxs-lookup"><span data-stu-id="eb9c1-166">163</span></span> |<span data-ttu-id="eb9c1-167">48</span><span class="sxs-lookup"><span data-stu-id="eb9c1-167">48</span></span> |<span data-ttu-id="eb9c1-168">204%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-168">204%</span></span> |
| <span data-ttu-id="eb9c1-169">Seul, Coreia do Sul</span><span class="sxs-lookup"><span data-stu-id="eb9c1-169">Seoul, KR</span></span> |<span data-ttu-id="eb9c1-170">190</span><span class="sxs-lookup"><span data-stu-id="eb9c1-170">190</span></span> |<span data-ttu-id="eb9c1-171">190</span><span class="sxs-lookup"><span data-stu-id="eb9c1-171">190</span></span> |<span data-ttu-id="eb9c1-172">0%</span><span class="sxs-lookup"><span data-stu-id="eb9c1-172">0%</span></span> |

<span data-ttu-id="eb9c1-173">\* Tem um nó do CDN do Azure na mesma cidade.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-173">\* Has an Azure CDN node in the same city.</span></span>  
<span data-ttu-id="eb9c1-174">\*\* Tem um nó do CDN do Azure em uma cidade vizinha.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-174">\*\* Has an Azure CDN node in a neighboring city.</span></span>  

## <a name="challenges"></a><span data-ttu-id="eb9c1-175">Desafios</span><span class="sxs-lookup"><span data-stu-id="eb9c1-175">Challenges</span></span>
<span data-ttu-id="eb9c1-176">Há vários desafios a serem considerados ao planejar usar o CDN:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-176">There are several challenges to take into account when planning to use the CDN:</span></span>  

* <span data-ttu-id="eb9c1-177">**Implantação**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-177">**Deployment**.</span></span> <span data-ttu-id="eb9c1-178">Decida a origem da qual o CDN busca o conteúdo e se é necessário implantar o conteúdo em mais de um sistema de armazenamento (como no CDN e em um local alternativo).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-178">Decide the origin from which the CDN fetches the content, and whether you need to deploy the content in more than one storage system (such as in the CDN and an alternative location).</span></span>

  <span data-ttu-id="eb9c1-179">Seu mecanismo de implantação de aplicativo deve considerar o processo para a implantação de conteúdo e recursos estáticos, bem como implantar os arquivos do aplicativo, como páginas ASPX.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-179">Your application deployment mechanism must take into account the process for deploying static content and resources as well as deploying the application files, such as ASPX pages.</span></span> <span data-ttu-id="eb9c1-180">Por exemplo, talvez seja necessário implementar uma etapa separada para carregar conteúdo no armazenamento de blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-180">For example, you may need to implement a separate step to load content into Azure blob storage.</span></span>
* <span data-ttu-id="eb9c1-181">**Controle de versão e controle de cache**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-181">**Versioning and cache-control**.</span></span> <span data-ttu-id="eb9c1-182">Leve em consideração como você atualizará o conteúdo estático e implantará novas versões.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-182">Consider how you will update static content and deploy new versions.</span></span> <span data-ttu-id="eb9c1-183">O conteúdo da CDN pode ser [limpo](/azure/cdn/cdn-purge-endpoint/) usando o Portal do Azure quando houver novas versões de seus ativos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-183">The CDN content may be [purged](/azure/cdn/cdn-purge-endpoint/) using the Azure portal when new versions of your assets are available.</span></span> <span data-ttu-id="eb9c1-184">Esse é um desafio semelhante a gerenciar armazenamento em cache do lado do cliente, como aquele que ocorre em um navegador da Web.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-184">This is a similar challenge to managing client-side caching, such as that which occurs in a web browser.</span></span>
* <span data-ttu-id="eb9c1-185">**Testando**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-185">**Testing**.</span></span> <span data-ttu-id="eb9c1-186">Pode ser difícil executar teste local de suas configurações de CDN ao desenvolver e testar um aplicativo localmente ou em um ambiente de preparo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-186">It can be difficult to perform local testing of your CDN settings when developing and testing an application locally or in a staging environment.</span></span>
* <span data-ttu-id="eb9c1-187">**SEO (otimização do mecanismo de pesquisa)**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-187">**Search engine optimization (SEO)**.</span></span> <span data-ttu-id="eb9c1-188">Conteúdo como imagens e documentos são atendidos de um domínio diferente quando você usa CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-188">Content such as images and documents are served from a different domain when you use the CDN.</span></span> <span data-ttu-id="eb9c1-189">Isso pode afetar a SEO para esse conteúdo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-189">This can have an effect on SEO for this content.</span></span>
* <span data-ttu-id="eb9c1-190">**Segurança de conteúdo**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-190">**Content security**.</span></span> <span data-ttu-id="eb9c1-191">Atualmente, muitos serviços de CDN, como o Azure CDN, não oferecem qualquer tipo de controle de acesso para o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-191">Many CDN services such as Azure CDN do not currently offer any type of access control for the content.</span></span>
* <span data-ttu-id="eb9c1-192">**Segurança do cliente**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-192">**Client security**.</span></span> <span data-ttu-id="eb9c1-193">Os clientes podem se conectar por meio de um ambiente que não permita acesso a recursos no CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-193">Clients might connect from an environment that does not allow access to resources on the CDN.</span></span> <span data-ttu-id="eb9c1-194">Isso pode ser um ambiente restrito de segurança que limita o acesso a apenas um conjunto de fontes conhecidas ou que impede o carregamento de recursos por meio  de qualquer coisa que não seja a origem da página.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-194">This could be a security-constrained environment that limits access to only a set of known sources, or one that prevents loading of resources from anything other than the page origin.</span></span> <span data-ttu-id="eb9c1-195">Uma implementação de fallback é necessária para lidar com esses casos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-195">A fallback implementation is required to handle these cases.</span></span>
* <span data-ttu-id="eb9c1-196">**Resiliência**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-196">**Resilience**.</span></span> <span data-ttu-id="eb9c1-197">O CDN é um ponto único de falha em potencial de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-197">The CDN is a potential single point of failure for an application.</span></span> <span data-ttu-id="eb9c1-198">Ele tem uma menor disponibilidade de SLA que o armazenamento de blob (que pode ser usado para entregar conteúdo diretamente), então, talvez seja necessário considerar a implementação de um mecanismo de fallback para conteúdo essencial.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-198">It has a lower availability SLA than blob storage (which can be used to deliver content directly) so you may need to consider implementing a fallback mechanism for critical content.</span></span>

  <span data-ttu-id="eb9c1-199">Você pode monitorar a disponibilidade do conteúdo da CDN, a largura de banda, os dados transferidos, as ocorrências, a taxa de ocorrências no cache e as métricas de cache no Portal do Azure em [tempo real](/azure/cdn/cdn-real-time-stats/) e em [relatórios agregados](/azure/cdn/cdn-analyze-usage-patterns/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-199">You can monitor your CDN content availability, bandwidth, data transferred, hits, cache hit ratio, and cache metrics from the Azure portal in [real-time](/azure/cdn/cdn-real-time-stats/) and [aggregate reports](/azure/cdn/cdn-analyze-usage-patterns/).</span></span>

<span data-ttu-id="eb9c1-200">Os cenários onde o CDN pode ser menos útil incluem:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-200">Scenarios where CDN may be less useful include:</span></span>  

* <span data-ttu-id="eb9c1-201">Se o conteúdo tiver uma baixa taxa de ocorrências, ele pode ser acessado apenas algumas vezes enquanto for válido (determinado pela sua configuração de tempo de vida).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-201">If the content has a low hit rate, it might be accessed only few times while it is valid (determined by its time-to-live setting).</span></span> <span data-ttu-id="eb9c1-202">Na primeira vez que um item é baixado, você incorre em duas taxas de transação (da origem para o CDN e então do CDN para o cliente).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-202">The first time an item is downloaded you incur two transaction charges from the origin to the CDN, and then from the CDN to the customer.</span></span>
* <span data-ttu-id="eb9c1-203">Se os dados forem particulares, como para empresas de grande porte ou ecossistemas de cadeia de suprimentos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-203">If the data is private, such as for large enterprises or supply chain ecosystems.</span></span>

## <a name="general-guidelines-and-good-practices"></a><span data-ttu-id="eb9c1-204">Diretrizes gerais e práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="eb9c1-204">General guidelines and good practices</span></span>
<span data-ttu-id="eb9c1-205">Usar o CDN é uma boa maneira de reduzir a carga no seu aplicativo e maximizar a disponibilidade e o desempenho.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-205">Using the CDN is a good way to minimize the load on your application, and maximize availability and performance.</span></span> <span data-ttu-id="eb9c1-206">Leve em consideração a adoção dessa estratégia para todos os recursos e conteúdos apropriados que o seu aplicativo usa.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-206">Consider adopting this strategy for all of the appropriate content and resources your application uses.</span></span> <span data-ttu-id="eb9c1-207">Considere os pontos nas seções a seguir ao projetar a sua estratégia para usar o CDN:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-207">Consider the points in the following sections when designing your strategy to use the CDN:</span></span>  

### <a name="origin"></a><span data-ttu-id="eb9c1-208">Origem</span><span class="sxs-lookup"><span data-stu-id="eb9c1-208">Origin</span></span>
<span data-ttu-id="eb9c1-209">Para implantar o conteúdo por meio da CDN, basta especificar um ponto de extremidade HTTP e/ou HTTPS que o serviço CDN usará para acessar e armazenar o conteúdo em cache.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-209">Deploying content through the CDN simply requires you to specify an HTTP and/or HTTPS endpoint that the CDN service will use to access and cache the content.</span></span>

<span data-ttu-id="eb9c1-210">O ponto de extremidade pode especificar um contêiner de armazenamento de blobs do Azure com o conteúdo estático que você deseja enviar por meio da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-210">The endpoint can specify an Azure blob storage container that holds the static content you want to deliver through the CDN.</span></span> <span data-ttu-id="eb9c1-211">O contêiner deve ser marcado como público.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-211">The container must be marked as public.</span></span> <span data-ttu-id="eb9c1-212">Somente os blobs em um contêiner público que tem acesso público de leitura estão disponíveis por meio da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-212">Only blobs in a public container that have public read access are available through the CDN.</span></span>

<span data-ttu-id="eb9c1-213">O ponto de extremidade pode especificar uma pasta chamada **cdn** na raiz de uma das camadas de computação do aplicativo (por exemplo, uma função web ou uma máquina virtual).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-213">The endpoint can specify a folder named **cdn** in the root of one of application’s compute layers (such as a web role or a virtual machine).</span></span> <span data-ttu-id="eb9c1-214">Os resultados das solicitações de recursos, incluindo recursos dinâmicos, como páginas ASPX, serão armazenados em cache no CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-214">The results from requests for resources, including dynamic resources such as ASPX pages, will be cached on the CDN.</span></span> <span data-ttu-id="eb9c1-215">O período mínimo de cache é de 300 segundos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-215">The minimum cache period is 300 seconds.</span></span> <span data-ttu-id="eb9c1-216">Qualquer período mais curto impede o conteúdo de ser implantado na CDN (para obter mais informações, confira o título *Controle de cache* a seguir).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-216">Any shorter period prevents the content from being deployed to the CDN (for more information, see the following heading *Cache control* below).</span></span>

<span data-ttu-id="eb9c1-217">Se você estiver usando os Aplicativos Web do Azure, o ponto de extremidade será definido como a pasta raiz do site por meio da seleção do site durante a criação da instância da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-217">If you are using Azure Web Apps, the endpoint is set to the root folder of the site by selecting the site when creating the CDN instance.</span></span> <span data-ttu-id="eb9c1-218">Todo o conteúdo do site estará disponível por meio do CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-218">All of the content for the site will be available through the CDN.</span></span>

<span data-ttu-id="eb9c1-219">Na maioria dos casos, apontar o seu ponto de extremidade da CDN em uma pasta dentro de uma das camadas de computação do seu aplicativo oferece mais flexibilidade e controle.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-219">In most cases, pointing your CDN endpoint at a folder within one of the compute layers of your application offers more flexibility and control.</span></span> <span data-ttu-id="eb9c1-220">Por exemplo, ele facilita o gerenciamento das necessidades atuais e futuras de roteamento e gera dinamicamente o conteúdo estático como miniaturas de imagem.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-220">For instance, it makes it easier to manage current and future routing requirements, and dynamically generate static content such as image thumbnails.</span></span>

<span data-ttu-id="eb9c1-221">Você pode usar as [cadeias de caracteres de consulta](/azure/cdn/cdn-query-string/) para diferenciar objetos no cache quando o conteúdo for entregue por meio de origens dinâmicas, como páginas ASPX.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-221">You can use [query strings](/azure/cdn/cdn-query-string/) to differentiate objects in the cache when content is delivered from dynamic sources, such as ASPX pages.</span></span> <span data-ttu-id="eb9c1-222">No entanto, esse comportamento pode ser desabilitado por uma configuração no Portal do Azure quando você especifica o ponto de extremidade da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-222">However, this behavior can be disabled by a setting in the Azure portal when you specify the CDN endpoint.</span></span> <span data-ttu-id="eb9c1-223">Ao fornecer conteúdo do armazenamento de blob, as cadeias de caracteres de consulta são tratadas como literais de cadeia de caracteres para que dois itens que têm o mesmo nome, mas cadeias de caracteres de consulta diferentes, sejam armazenados como itens separados na CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-223">When delivering content from blob storage, query strings are treated as string literals so two items that have the same name but different query strings are stored as separate items on the CDN.</span></span>

<span data-ttu-id="eb9c1-224">Você pode utilizar a regravação de URL para recursos como scripts e outros conteúdos que evitem mover os arquivos para a pasta de origem da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-224">You can utilize URL rewriting for resources, such as scripts and other content, to avoid moving your files to the CDN origin folder.</span></span>

<span data-ttu-id="eb9c1-225">Ao usar os blobs de armazenamento do Azure para manter o conteúdo para a CDN, a URL dos recursos em blobs diferencia maiúsculas de minúsculas para o nome do contêiner e do blob.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-225">When using Azure storage blobs to hold content for the CDN, the URL of the resources in blobs is case-sensitive for the container and blob name.</span></span>

<span data-ttu-id="eb9c1-226">Ao usar origens personalizadas ou Aplicativos Web do Azure, você especifica o caminho para a instância da CDN nos links para recursos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-226">When using custom origins or Azure Web Apps, you specify the path to the CDN instance in the links to resources.</span></span> <span data-ttu-id="eb9c1-227">Por exemplo, a seguir está especificado um arquivo de imagem na pasta **Imagens** do site que será entregue por meio do CDN:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-227">For example, the following specifies an image file in the **Images** folder of the site that will be delivered through the CDN:</span></span>

```XML
<img src="http://[your-cdn-endpoint].azureedge.net/Images/image.jpg" />
```

### <a name="deployment"></a><span data-ttu-id="eb9c1-228">Implantação</span><span class="sxs-lookup"><span data-stu-id="eb9c1-228">Deployment</span></span>
<span data-ttu-id="eb9c1-229">O conteúdo estático pode precisar ser provisionado e implantado independentemente do aplicativo se você não incluí-lo no pacote ou processo de implantação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-229">Static content may need to be provisioned and deployed independently from the application if you do not include it in the application deployment package or process.</span></span> <span data-ttu-id="eb9c1-230">Considere como isso afetará a abordagem do controle de versão usada para gerenciar os componentes do aplicativo e o conteúdo de recursos estáticos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-230">Consider how this will affect the versioning approach you use to manage both the application components and the static resource content.</span></span>

<span data-ttu-id="eb9c1-231">Considere como agrupamento (combinar vários arquivos em um arquivo) e minificação (remover caracteres desnecessários, como espaço em branco, caracteres de nova linha, comentários e outros caracteres) para arquivos de script e CSS serão tratados.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-231">Consider how bundling (combining several files into one file) and minification (removing unnecessary characters such as white space, new line characters, comments, and other characters) for script and CSS files will be handled.</span></span> <span data-ttu-id="eb9c1-232">Essas são técnicas normalmente usadas que podem reduzir tempos de carregamento para clientes e são compatíveis com o fornecimento de conteúdo por meio do CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-232">These are commonly used techniques that can reduce load times for clients, and are compatible with delivering content through the CDN.</span></span> <span data-ttu-id="eb9c1-233">Para obter mais informações, consulte [Agrupamento e minificação](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-233">For more information, see [Bundling and Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification).</span></span>

<span data-ttu-id="eb9c1-234">Se você precisar implantar o conteúdo em um local adicional, isso será uma etapa extra no processo de implantação.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-234">If you need to deploy the content to an additional location, this will be an extra step in the deployment process.</span></span> <span data-ttu-id="eb9c1-235">Se o aplicativo atualizar o conteúdo para o CDN, talvez em intervalos regulares ou em resposta a um evento, ele deve armazenar o conteúdo atualizado em todos os locais adicionais, bem como o ponto de extremidade para o CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-235">If the application updates the content for the CDN, perhaps at regular intervals or in response to an event, it must store the updated content in any additional locations as well as the endpoint for the CDN.</span></span>

<span data-ttu-id="eb9c1-236">Você não pode configurar um ponto de extremidade da CDN para um aplicativo no emulador do Azure local no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-236">You cannot set up a CDN endpoint for an application in the local Azure emulator in Visual Studio.</span></span> <span data-ttu-id="eb9c1-237">Essa restrição afetará o teste de unidade, os testes funcionais e os testes de pré-implantação final.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-237">This restriction will affect unit testing, functional testing, and final pre-deployment testing.</span></span> <span data-ttu-id="eb9c1-238">Você deve permitir isso implementando um mecanismo alternativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-238">You must allow for this by implementing an alternative mechanism.</span></span> <span data-ttu-id="eb9c1-239">Por exemplo, você pode implantar previamente o conteúdo ao CDN usando um utilitário ou um aplicativo personalizado e realizar testes durante o período em que ele é armazenado em cache.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-239">For example, you could pre-deploy the content to the CDN using a custom application or utility, and perform testing during the period in which it is cached.</span></span> <span data-ttu-id="eb9c1-240">Como alternativa, use diretivas de compilação ou constantes globais para controlar de onde o aplicativo carrega os recursos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-240">Alternatively, use compile directives or global constants to control from where the application loads the resources.</span></span> <span data-ttu-id="eb9c1-241">Por exemplo, quando em execução no modo de depuração, ele poderia carregar recursos como pacotes de script do lado do cliente e outros tipos de conteúdo de uma pasta local e usar o CDN ao ser executado no modo de versão.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-241">For example, when running in debug mode it could load resources such as client-side script bundles and other content from a local folder, and use the CDN when running in release mode.</span></span>

<span data-ttu-id="eb9c1-242">Considere para qual abordagem de compactação você deseja que o CDN tenha suporte:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-242">Consider which compression approach you want your CDN to support:</span></span>

* <span data-ttu-id="eb9c1-243">Você pode [habilitar a compactação](/azure/cdn/cdn-improve-performance/) no servidor de origem e, nesse caso, o CDN oferecerá suporte à compactação por padrão e entregará conteúdo compactado aos clientes em um formato como zip ou gzip.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-243">You can [enable compression](/azure/cdn/cdn-improve-performance/) on your origin server, in which case the CDN will support compression by default and deliver compressed content to clients in a format such as zip or gzip.</span></span> <span data-ttu-id="eb9c1-244">Ao usar uma pasta de aplicativo como o ponto de extremidade do CDN, o servidor pode compactar algum conteúdo de modo automático da mesma maneira que ao fornecê-lo diretamente em um navegador da Web ou outro tipo de cliente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-244">When using an application folder as the CDN endpoint, the server may compress some content automatically in the same way as when delivering it directly to a web browser or other type of client.</span></span> <span data-ttu-id="eb9c1-245">O formato depende do valor do cabeçalho **Accept-Encoding** na solicitação enviada pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-245">The format depends on the value of the **Accept-Encoding** header in the request sent by the client.</span></span> <span data-ttu-id="eb9c1-246">No Azure, o mecanismo padrão é compactar automaticamente o conteúdo quando a utilização da CPU for inferior a 50%.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-246">In Azure the default mechanism is to automatically compress content when CPU utilization is below 50%.</span></span> <span data-ttu-id="eb9c1-247">Se você estiver usando um serviço de nuvem para hospedar o aplicativo, alterar as configurações pode exigir o uso de uma tarefa de inicialização para ativar a compactação de saída dinâmica no IIS.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-247">If you are using a cloud service to host the application, changing the settings may require using a startup task to turn on compression of dynamic output in IIS.</span></span> <span data-ttu-id="eb9c1-248">Consulte [Habilitar a compactação gzip com o Microsoft Azure CDN por meio de uma função web](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-248">See [Enabling gzip compression with Microsoft Azure CDN through a Web Role](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx) for more information.</span></span>
* <span data-ttu-id="eb9c1-249">Você pode habilitar a compactação diretamente nos servidores de borda da CDN e, nesse caso, a CDN compactará os arquivos e os servirá para os usuários finais.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-249">You can enable compression directly on CDN edge servers, in which case the CDN will compress the files and serve it to end users.</span></span> <span data-ttu-id="eb9c1-250">Para saber mais, veja [Compactação do CDN do Azure](/azure/cdn/cdn-improve-performance/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-250">For more information, see [Azure CDN Compression](/azure/cdn/cdn-improve-performance/).</span></span>

### <a name="routing-and-versioning"></a><span data-ttu-id="eb9c1-251">Roteamento e controle de versão</span><span class="sxs-lookup"><span data-stu-id="eb9c1-251">Routing and versioning</span></span>
<span data-ttu-id="eb9c1-252">Você talvez precise usar diferentes instâncias do CDN em vários momentos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-252">You may need to use different CDN instances at various times.</span></span> <span data-ttu-id="eb9c1-253">Por exemplo, ao implantar uma nova versão do aplicativo, você pode querer usar um novo CDN e reter o CDN antigo (mantendo o conteúdo em um formato antigo) para versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-253">For example, when you deploy a new version of the application you may want to use a new CDN and retain the old CDN (holding content in an older format) for previous versions.</span></span> <span data-ttu-id="eb9c1-254">Se você usar o armazenamento de blob do Azure como a origem de conteúdo, pode criar uma conta de armazenamento separada ou um contêiner separado e direcionar o ponto de extremidade da CDN a ele.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-254">If you use Azure blob storage as the content origin, you can create a separate storage account or a separate container and point the CDN endpoint to it.</span></span> <span data-ttu-id="eb9c1-255">Se você usar a pasta raiz cdn dentro do aplicativo como o ponto de extremidade da CDN, é possível usar técnicas de regravação de URL para direcionar solicitações para uma pasta diferente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-255">If you use the cdn root folder within the application as the CDN endpoint, you can use URL rewriting techniques to direct requests to a different folder.</span></span>

<span data-ttu-id="eb9c1-256">Não use a cadeia de caracteres de consulta para denotar versões diferentes do aplicativo nos links para recursos na CDN, pois, ao recuperar o conteúdo do armazenamento de blobs do Azure, a cadeia de caracteres de consulta faz parte do nome do recurso (o nome de blob).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-256">Do not use the query string to denote different versions of the application in links to resources on the CDN because, when retrieving content from Azure blob storage, the query string is part of the resource name (the blob name).</span></span> <span data-ttu-id="eb9c1-257">Essa abordagem também pode afetar como o cliente armazena os recursos em cache.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-257">This approach can also affect how the client caches resources.</span></span>

<span data-ttu-id="eb9c1-258">Implantar novas versões do conteúdo estático quando você atualiza um aplicativo pode ser um desafio se os recursos anteriores forem armazenados em cache no CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-258">Deploying new versions of static content when you update an application can be a challenge if the previous resources are cached on the CDN.</span></span> <span data-ttu-id="eb9c1-259">Para saber mais, veja a seção *controle de cache*.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-259">For more information, see the section *Cache control*).</span></span>

<span data-ttu-id="eb9c1-260">Considere restringir o acesso ao conteúdo CDN por país.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-260">Consider restricting the CDN content access by country.</span></span> <span data-ttu-id="eb9c1-261">O CDN do Azure permite filtrar solicitações com base no país de origem e restringir o conteúdo fornecido.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-261">Azure CDN allows you to filter requests based on the country of origin and restrict the content delivered.</span></span> <span data-ttu-id="eb9c1-262">Para saber mais, veja [Restringir o acesso ao seu conteúdo por país](/azure/cdn/cdn-restrict-access-by-country/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-262">For more information, see [Restrict access to your content by country](/azure/cdn/cdn-restrict-access-by-country/).</span></span>

### <a name="cache-control"></a><span data-ttu-id="eb9c1-263">controle de cache</span><span class="sxs-lookup"><span data-stu-id="eb9c1-263">Cache control</span></span>
<span data-ttu-id="eb9c1-264">Considere como gerenciar o caching dentro do sistema.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-264">Consider how to manage caching within the system.</span></span> <span data-ttu-id="eb9c1-265">Por exemplo, ao usar uma pasta como a origem do CDN, você pode especificar a capacidade de cache de páginas que geram o conteúdo e o momento de expiração do conteúdo para todos os recursos em uma pasta específica.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-265">For example, when using a folder as the CDN origin you can specify the cacheability of pages that generate the content, and the content expiry time for all the resources in a specific folder.</span></span> <span data-ttu-id="eb9c1-266">Você também pode especificar propriedades de cache para o CDN e para o cliente usando os cabeçalhos HTTP padrão.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-266">You can also specify cache properties for the CDN, and for the client using standard HTTP headers.</span></span> <span data-ttu-id="eb9c1-267">Embora você já deva estar gerenciando armazenamento em cache no servidor e no cliente, usar o CDN o ajudará a se tornar mais consciente de como o conteúdo é armazenado em cache e onde isso é feito.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-267">Although you should already be managing caching on the server and client, using the CDN will help to make you more aware of how your content is cached, and where.</span></span>

<span data-ttu-id="eb9c1-268">Para impedir que os objetos estejam disponíveis no CDN, você pode excluí-los da origem (pasta raiz *cdn* do aplicativo ou contêiner de blob), remover ou excluir o ponto de extremidade do CDN, ou, no caso do armazenamento de blobs, tornar o contêiner ou blob particular.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-268">To prevent objects from being available on the CDN you can delete them from the origin (blob container or application *cdn* root folder), remove or delete the CDN endpoint, or, in the case of blob storage, make the container or blob private.</span></span> <span data-ttu-id="eb9c1-269">No entanto, os itens serão removidos do CDN somente quando sua vida útil expirar.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-269">However, items will be removed from the CDN only when their time-to-live expires.</span></span> <span data-ttu-id="eb9c1-270">Se nenhum período de expiração do cache for especificado (por exemplo, quando o conteúdo for carregado do armazenamento de blobs), ele é armazenado em cache na CDN por até sete dias.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-270">If no cache expiry period is specified (such as when content is loaded from blob storage), it is cached on the CDN for up to seven days.</span></span>  <span data-ttu-id="eb9c1-271">Você pode também [limpar manualmente um ponto de extremidade da CDN](/azure/cdn/cdn-purge-endpoint/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-271">You can also manually [purge a CDN endpoint](/azure/cdn/cdn-purge-endpoint/).</span></span>

<span data-ttu-id="eb9c1-272">Em um aplicativo Web, você pode definir o caching e a expiração de todo o conteúdo usando o elemento *clientCache* na seção *system.webServer/staticContent* de um arquivo web.config.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-272">In a web application, you can set the caching and expiry for all content by using the *clientCache* element in the *system.webServer/staticContent* section of the web.config file.</span></span> <span data-ttu-id="eb9c1-273">Lembre-se de que, ao colocar um arquivo web.config em uma pasta, ele afetará os arquivos naquela pasta e em todas as subpastas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-273">Remember that when you place a web.config file in a folder it affects the files in that folder and all subfolders.</span></span>

<span data-ttu-id="eb9c1-274">Se você criar o conteúdo para o CDN dinamicamente (no código do aplicativo, por exemplo), verifique se você especificou a propriedade *cache. SetExpires* em cada página.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-274">If you create the content for the CDN dynamically (in your application code for example), ensure that you specify the *Cache.SetExpires* property on each page.</span></span> <span data-ttu-id="eb9c1-275">O CDN não armazenará em cache a saída de páginas que usam a configuração de capacidade de cache *pública*padrão.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-275">The CDN will not cache the output from pages that use the default cacheability setting of *public*.</span></span>  <span data-ttu-id="eb9c1-276">Defina o período de expiração do cache com um valor apropriado para garantir que o conteúdo não seja descartado e recarregado do aplicativo em intervalos muito curtos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-276">Set the cache expiry period to a suitable value to ensure that the content is not discarded and reloaded from the application at very short intervals.</span></span>  

### <a name="security"></a><span data-ttu-id="eb9c1-277">Segurança</span><span class="sxs-lookup"><span data-stu-id="eb9c1-277">Security</span></span>
<span data-ttu-id="eb9c1-278">A CDN pode entregar conteúdo pelo HTTPS (SSL) usando o certificado fornecido pela CDN, e também pelo HTTP padrão.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-278">The CDN can deliver content over HTTPS (SSL), by using the certificate provided by the CDN, as well as over standard HTTP.</span></span> <span data-ttu-id="eb9c1-279">Para evitar avisos de navegador sobre o conteúdo misto, talvez seja necessário usar HTTPS para solicitar o conteúdo estático que é exibido nas páginas carregadas por meio de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-279">To avoid browser warnings about mixed content, you might need to use HTTPS to request static content that is displayed in pages loaded through HTTPS.</span></span>

<span data-ttu-id="eb9c1-280">Se você entregar ativos estáticos (como arquivos de fonte) usando a CDN, talvez encontre problemas de política de mesma origem se usar uma chamada *XMLHttpRequest* para solicitar esses recursos de um domínio diferente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-280">If you deliver static assets such as font files by using the CDN, you might encounter same-origin policy issues if you use an *XMLHttpRequest* call to request these resources from a different domain.</span></span> <span data-ttu-id="eb9c1-281">Muitos navegadores da web impedem o compartilhamento de recursos de origens cruzadas (CORS), a menos que o servidor Web esteja configurado para definir os cabeçalhos de resposta apropriada.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-281">Many web browsers prevent cross-origin resource sharing (CORS) unless the web server is configured to set the appropriate response headers.</span></span> <span data-ttu-id="eb9c1-282">É possível configurar a CDN para dar suporte ao CORS usando um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-282">You can configure the CDN to support CORS by using one of the following methods:</span></span>

* <span data-ttu-id="eb9c1-283">Use o mecanismo de regras da CDN para adicionar cabeçalhos do CORS para as respostas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-283">Use the CDN rules engine to add CORS headers to the responses.</span></span> <span data-ttu-id="eb9c1-284">Esse método geralmente é o melhor porque há suporte para curingas e para várias origens de permissão específica.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-284">This method is usually the best one to use because both wildcard and multiple specific-allowed origins are supported.</span></span> <span data-ttu-id="eb9c1-285">Para obter mais informações, confira [Usando a CDN do Azure com o CORS](https://docs.microsoft.com/en-us/azure/cdn/cdn-cors).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-285">For more information, see [Using Azure CDN with CORS](https://docs.microsoft.com/en-us/azure/cdn/cdn-cors).</span></span> 
* <span data-ttu-id="eb9c1-286">Adicione uma *CorsRule* para as propriedades do serviço.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-286">Add a *CorsRule* to the service properties.</span></span> <span data-ttu-id="eb9c1-287">É possível usar esse método se a origem da qual você está entregando conteúdo for o armazenamento de blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-287">You can use this method if the origin from which you are delivering content is Azure blob storage.</span></span> <span data-ttu-id="eb9c1-288">A regra pode especificar as origens permitidas para solicitações de CORS, os métodos permitidos, como GET, e a duração máxima em segundos para a regra (o período em que o cliente deve solicitar os recursos vinculados depois de carregar o conteúdo original).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-288">The rule can specify the allowed origins for CORS requests, the allowed methods such as GET, and the maximum age in seconds for the rule (the period within which the client must request the linked resources after loading the original content).</span></span> <span data-ttu-id="eb9c1-289">Ao definir CORS no Armazenamento para usar com a CDN, há suporte somente para o curinga ‘*’ para a lista de origens permitidas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-289">When you set CORS on Storage to use with CDN, only the ‘*’ wildcard is supported for the allowed origins list.</span></span> <span data-ttu-id="eb9c1-290">Para obter mais informações, consulte [Suporte de Compartilhamento de Recursos de Origens Cruzadas (CORS) para os serviços de armazenamento do Azure](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-290">For more information, see [Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>
* <span data-ttu-id="eb9c1-291">Configure regras de saída no arquivo de configuração de aplicativo para definir um cabeçalho *Access-Control-Allow-Origin* em todas as respostas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-291">Configure outbound rules in the application configuration file to set an *Access-Control-Allow-Origin* header on all responses.</span></span> <span data-ttu-id="eb9c1-292">É possível usar esse método se o servidor de origem estiver executando o IIS.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-292">You can use this method if the origin server is running IIS.</span></span> <span data-ttu-id="eb9c1-293">Ao usar esse método com a CDN, há suporte somente para o curinga ‘*’ para a lista de origens permitidas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-293">When you use this method with CDN, only the ‘*’ wildcard is supported for the allowed origins list.</span></span> <span data-ttu-id="eb9c1-294">Para obter mais informações sobre como usar regras de reescrita, consulte [Módulo de Reescrita de URL](http://www.iis.net/learn/extensions/url-rewrite-module).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-294">For more information about using rewrite rules, see [URL Rewrite Module](http://www.iis.net/learn/extensions/url-rewrite-module).</span></span>

### <a name="custom-domains"></a><span data-ttu-id="eb9c1-295">Domínios personalizados</span><span class="sxs-lookup"><span data-stu-id="eb9c1-295">Custom domains</span></span>
<span data-ttu-id="eb9c1-296">A CDN do Azure permite especificar um [nome de domínio personalizado](/azure/cdn/cdn-map-content-to-custom-domain/) e usá-lo para acessar recursos por meio da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-296">The Azure CDN allows you to specify a [custom domain name](/azure/cdn/cdn-map-content-to-custom-domain/) and use it to access resources through the CDN.</span></span> <span data-ttu-id="eb9c1-297">Você também pode configurar um nome de subdomínio personalizado usando um registro *CNAME* no seu DNS.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-297">You can also set up a custom subdomain name using a *CNAME* record in your DNS.</span></span> <span data-ttu-id="eb9c1-298">Usar essa abordagem pode fornecer uma camada adicional de abstração e controle.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-298">Using this approach can provide an additional layer of abstraction and control.</span></span>

<span data-ttu-id="eb9c1-299">Se você usar um *CNAME*, não será possível usar SSL, pois o CDN usa o próprio certificado SSL único, e esse certificado não corresponderá aos seus nomes de domínio/subdomínio personalizados.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-299">If you use a *CNAME*, you cannot use SSL because the CDN uses its own single SSL certificate, and this certificate will not match your custom domain/subdomain names.</span></span>

### <a name="cdn-fallback"></a><span data-ttu-id="eb9c1-300">Fallback de CDN</span><span class="sxs-lookup"><span data-stu-id="eb9c1-300">CDN fallback</span></span>
<span data-ttu-id="eb9c1-301">Leve em consideração como seu aplicativo lidará com uma falha ou indisponibilidade temporária da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-301">Consider how your application will cope with a failure or temporary unavailability of the CDN.</span></span> <span data-ttu-id="eb9c1-302">Os aplicativos cliente poderão usar cópias dos recursos que foram armazenados em cache localmente (no cliente) durante solicitações anteriores, ou eles podem incluir o código que detecta falhas e solicita, em vez disso, os recursos de origem (a pasta de aplicativo ou o contêiner de blob do Azure que contém os recursos) se o CDN não estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-302">Client applications may be able to use copies of the resources that were cached locally (on the client) during previous requests, or you can include code that detects failure and instead requests resources from the origin (the application folder or Azure blob container that holds the resources) if the CDN is unavailable.</span></span>

<span data-ttu-id="eb9c1-303">O exemplo a seguir mostra os mecanismos de fallback usando [Auxiliares de marcação](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro) em um modo de exibição do Razor.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-303">The example below shows the fallback mechanisms using [Tag Helpers](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro) in a Razor view.</span></span>

```HTML
...
<link rel="stylesheet" href="https://[your-cdn-endpoint].azureedge.net/lib/bootstrap/dist/css/bootstrap.min.css"
      asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
      asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute"/>
<link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true"/>
...
<script src="https://[your-cdn-endpoint].azureedge.net/lib/jquery/dist/jquery-2.2.0.min.js"
        asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
        asp-fallback-test="window.jQuery">
</script>
<script src="https://[your-cdn-endpoint].azureedge.net/lib/bootstrap/dist/js/bootstrap.min.js"
        asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
        asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal">
</script>
...
```

### <a name="search-engine-optimization"></a><span data-ttu-id="eb9c1-304">Otimização do mecanismo de pesquisa</span><span class="sxs-lookup"><span data-stu-id="eb9c1-304">Search engine optimization</span></span>
<span data-ttu-id="eb9c1-305">Se o SEO for uma consideração importante em seu aplicativo, execute as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-305">If SEO is an important consideration in your application, perform the following tasks:</span></span>

* <span data-ttu-id="eb9c1-306">Incluir um cabeçalho *Rel* canonical em cada página ou recurso.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-306">Include a *Rel* canonical header in each page or resource.</span></span>
* <span data-ttu-id="eb9c1-307">Use um registro de subdomínio *CNAME* e acesse os recursos usando esse nome.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-307">Use a *CNAME* subdomain record and access the resources using this name.</span></span>
* <span data-ttu-id="eb9c1-308">Considere o impacto do fato de que o endereço IP do CDN pode ser um país ou região diferente daquele do aplicativo em si.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-308">Consider the impact of the fact that the IP address of the CDN may be a country or region that differs from that of the application itself.</span></span>
* <span data-ttu-id="eb9c1-309">Ao usar o armazenamento de blob do Azure como a origem, mantenha a mesma estrutura de arquivo para recursos no CDN como nas pastas de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-309">When using Azure blob storage as the origin, maintain the same file structure for resources on the CDN as in the application folders.</span></span>

### <a name="monitoring-and-logging"></a><span data-ttu-id="eb9c1-310">Monitoramento e registro em log</span><span class="sxs-lookup"><span data-stu-id="eb9c1-310">Monitoring and logging</span></span>
<span data-ttu-id="eb9c1-311">Incluem o CDN como parte da sua estratégia para detectar e medir as falhas de monitoramento de aplicativos ou as ocorrências de latência estendidas.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-311">Include the CDN as part of your application monitoring strategy to detect and measure failures or extended latency occurrences.</span></span>  <span data-ttu-id="eb9c1-312">O monitoramento está disponível no gerenciador de perfis da CDN localizado no site do portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-312">Monitoring is available from the CDN profile manager located on the Azure portal site.</span></span>

<span data-ttu-id="eb9c1-313">Habilitar o registro em log para o CDN e monitorar esse log como parte das operações diárias.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-313">Enable logging for the CDN and monitor this log as part of your daily operations.</span></span>

<span data-ttu-id="eb9c1-314">Considere analisar o tráfego do CDN quanto a padrões de uso.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-314">Consider analyzing the CDN traffic for usage patterns.</span></span> <span data-ttu-id="eb9c1-315">O portal do Azure fornece ferramentas que permitem monitorar:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-315">The Azure portal provides tools that enable you to monitor:</span></span>

* <span data-ttu-id="eb9c1-316">Largura de banda,</span><span class="sxs-lookup"><span data-stu-id="eb9c1-316">Bandwidth,</span></span>
* <span data-ttu-id="eb9c1-317">Dados Transferidos,</span><span class="sxs-lookup"><span data-stu-id="eb9c1-317">Data Transferred,</span></span>
* <span data-ttu-id="eb9c1-318">Ocorrências (códigos de status),</span><span class="sxs-lookup"><span data-stu-id="eb9c1-318">Hits (status codes),</span></span>
* <span data-ttu-id="eb9c1-319">Status do Cache,</span><span class="sxs-lookup"><span data-stu-id="eb9c1-319">Cache Status,</span></span>
* <span data-ttu-id="eb9c1-320">Taxa de Ocorrências do Cache e</span><span class="sxs-lookup"><span data-stu-id="eb9c1-320">Cache HIT Ratio, and</span></span>
* <span data-ttu-id="eb9c1-321">Taxa de solicitações de IPV4/IPV6.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-321">Ratio of IPV4/IPV6 requests.</span></span>

<span data-ttu-id="eb9c1-322">Para saber mais, confira [Analisar padrões de uso da CDN](/azure/cdn/cdn-analyze-usage-patterns/).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-322">For more information, see [Analyze CDN usage patterns](/azure/cdn/cdn-analyze-usage-patterns/).</span></span>

### <a name="cost-implications"></a><span data-ttu-id="eb9c1-323">Implicações de custo</span><span class="sxs-lookup"><span data-stu-id="eb9c1-323">Cost implications</span></span>
<span data-ttu-id="eb9c1-324">Você será cobrado por transferências de dados de saída da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-324">You are charged for outbound data transfers from the CDN.</span></span>  <span data-ttu-id="eb9c1-325">Além disso, se você estiver usando o armazenamento de blobs para hospedar seus ativos, será cobrado pelas transações de armazenamento quando a CDN carregar os dados de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-325">Additionally, if you're using blob storage to host your assets, you are charged for storage transactions when the CDN loads data from your application.</span></span> <span data-ttu-id="eb9c1-326">Defina períodos realistas de expiração de cache para o conteúdo a fim de garantir a atualização, mas não tão curtos a ponto de causar a repetição do carregamento de conteúdo do aplicativo ou do armazenamento de blob para o CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-326">Set realistic cache expiry periods for content to ensure freshness, but not so short as to cause repeated reloading of content from the application or blob storage to the CDN.</span></span>

<span data-ttu-id="eb9c1-327">Os itens que raramente são baixados incorrerão em encargos de duas transações sem fornecer qualquer redução significativa na carga do servidor.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-327">Items that are rarely downloaded will incur the two transaction charges without providing any significant reduction in server load.</span></span>

### <a name="bundling-and-minification"></a><span data-ttu-id="eb9c1-328">Agrupamento e minificação</span><span class="sxs-lookup"><span data-stu-id="eb9c1-328">Bundling and minification</span></span>
<span data-ttu-id="eb9c1-329">Use agrupamento e minificação para reduzir o tamanho dos recursos, como código JavaScript e páginas HTML armazenadas no CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-329">Use bundling and minification to reduce the size of resources such as JavaScript code and HTML pages stored in the CDN.</span></span> <span data-ttu-id="eb9c1-330">Essa estratégia pode ajudar a reduzir o tempo necessário para baixar esses itens para o cliente.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-330">This strategy can help to reduce the time taken to download these items to the client.</span></span>

<span data-ttu-id="eb9c1-331">O agrupamento e a minimização podem ser manipulados pelo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-331">Bundling and minification can be handled by ASP.NET.</span></span> <span data-ttu-id="eb9c1-332">Em um projeto do MVC, você define os seus pacotes em *BundleConfig.cs*.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-332">In an MVC project, you define your bundles in *BundleConfig.cs*.</span></span> <span data-ttu-id="eb9c1-333">É criada uma referência ao conjunto de script minificado chamando o método *Script.Render* , normalmente em código na classe de exibição.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-333">A reference to the minified script bundle is created by calling the *Script.Render* method, typically in code in the view class.</span></span> <span data-ttu-id="eb9c1-334">Esta referência contém uma cadeia de caracteres de consulta que inclui um hash, que se baseia no conteúdo do pacote.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-334">This reference contains a query string that includes a hash, which is based on the content of the bundle.</span></span> <span data-ttu-id="eb9c1-335">Se o conteúdo do pacote for alterado, o hash gerado também será alterado.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-335">If the bundle contents change, the generated hash will also change.</span></span>  

<span data-ttu-id="eb9c1-336">Por padrão, as instâncias do Azure CDN têm a configuração *Status de cadeia de caracteres de consulta* desabilitada.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-336">By default, Azure CDN instances have the *Query String Status* setting disabled.</span></span> <span data-ttu-id="eb9c1-337">Para os pacotes de script atualizado serem tratados corretamente pelo CDN, você deve habilitar a configuração *Status de cadeia de caracteres de consulta* para a instância CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-337">In order for updated script bundles to be handled properly by the CDN, you must enable the *Query String Status* setting for the CDN instance.</span></span> <span data-ttu-id="eb9c1-338">Observe que pode levar uma hora ou mais antes de a configuração entrar em vigor.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-338">Note that it may take an hour or more before the setting takes effect.</span></span>

### <a name="features"></a><span data-ttu-id="eb9c1-339">Recursos</span><span class="sxs-lookup"><span data-stu-id="eb9c1-339">Features</span></span>

<span data-ttu-id="eb9c1-340">O Azure tem vários produtos da CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-340">Azure has several CDN products.</span></span> <span data-ttu-id="eb9c1-341">Ao selecionar uma CDN, considere os recursos aos quais cada produto dá suporte.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-341">When selecting a CDN, consider the features that each product supports.</span></span> <span data-ttu-id="eb9c1-342">Confira [Recursos da CDN do Azure][cdn-features] para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-342">See [Azure CDN Features][cdn-features] for details.</span></span> <span data-ttu-id="eb9c1-343">Entre os recursos premium que você talvez queira considerar, temos:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-343">Premium features that you may wish to consider include:</span></span>

- <span data-ttu-id="eb9c1-344">**[Mecanismo de regras](/azure/cdn/cdn-rules-engine)**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-344">**[Rules engine](/azure/cdn/cdn-rules-engine)**.</span></span> <span data-ttu-id="eb9c1-345">O mecanismo de regras permite personalizar a forma como as solicitações HTTP são manipuladas, como o bloqueio de entrega de alguns tipos de conteúdo, definição de uma política de caching e modificação dos cabeçalhos HTTP.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-345">The rules engine allows you to customize how HTTP requests are handled, such as blocking the delivery of certain types of content, defining a caching policy, and modifying HTTP headers.</span></span> 

- <span data-ttu-id="eb9c1-346">**[Estatísticas em tempo real](/azure/cdn/cdn-real-time-stats)**.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-346">**[Real-time statistics](/azure/cdn/cdn-real-time-stats)**.</span></span> <span data-ttu-id="eb9c1-347">Monitora dados em tempo real, como largura de banda, status de cache e conexões simultâneas ao seu perfil da CDN e recebe [alertas em tempo real](/azure/cdn/cdn-real-time-alerts).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-347">Monitor real-time data, such as bandwidth, cache statuses, and concurrent connections to your CDN profile, and receive [real-time alerts](/azure/cdn/cdn-real-time-alerts).</span></span> 


## <a name="rules-engine-url-rewriting-example"></a><span data-ttu-id="eb9c1-348">Exemplo de regravação de URL do mecanismo de regras</span><span class="sxs-lookup"><span data-stu-id="eb9c1-348">Rules engine URL rewriting example</span></span>

<span data-ttu-id="eb9c1-349">O diagrama a seguir demonstra como executar [Regravação de URL](https://technet.microsoft.com/library/ee215194.aspx) ao usar a CDN.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-349">The following diagram demonstrates how to perform [URL rewriting](https://technet.microsoft.com/library/ee215194.aspx) when using the CDN.</span></span> <span data-ttu-id="eb9c1-350">As solicitações do CDN para o conteúdo que está armazenado em cache serão redirecionadas para pastas específicas dentro da raiz do aplicativo com base no tipo de recurso (como scripts e imagens).</span><span class="sxs-lookup"><span data-stu-id="eb9c1-350">Requests from the CDN for content that is cached are redirected to specific folders within the application root based on the type of the resource (such as scripts and images).</span></span>  

![Diagrama do mecanismo de regras](./images/cdn/rules-engine.png)

<span data-ttu-id="eb9c1-352">Essas regras de regravação executam os redirecionamentos a seguir:</span><span class="sxs-lookup"><span data-stu-id="eb9c1-352">These rewrite rules perform the following redirections:</span></span>

* <span data-ttu-id="eb9c1-353">A primeira regra permite que você insira uma versão no nome do arquivo de um recurso, o que, em seguida, é ignorado.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-353">The first rule allows you to embed a version in the file name of a resource, which is then ignored.</span></span> <span data-ttu-id="eb9c1-354">Por exemplo, *Filename_v123.jpg* é regravado como *Filename.jpg*.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-354">For example, *Filename_v123.jpg* is rewritten as *Filename.jpg*.</span></span>
* <span data-ttu-id="eb9c1-355">As próximas quatro regras mostram como redirecionar as solicitações se você não desejar armazenar os recursos em uma pasta chamada *cdn** na raiz da função web.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-355">The next four rules show how to redirect requests if you do not want to store the resources in a folder named *cdn** in the root of the web role.</span></span> <span data-ttu-id="eb9c1-356">As regras mapeiam as URLs *cdn/Images*, *cdn/Content*, *cdn/Scripts* e *cdn/bundles* até suas respectivas pastas raiz na função web.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-356">The rules map the *cdn/Images*, *cdn/Content*, *cdn/Scripts*, and *cdn/bundles* URLs to their respective root folders in the web role.</span></span>

<span data-ttu-id="eb9c1-357">Observe que usar a regravação de URL exige fazer algumas alterações ao agrupamento de recursos.</span><span class="sxs-lookup"><span data-stu-id="eb9c1-357">Note that using URL rewriting requires you to make some changes to the bundling of resources.</span></span>     

## <a name="more-information"></a><span data-ttu-id="eb9c1-358">Mais informações</span><span class="sxs-lookup"><span data-stu-id="eb9c1-358">More information</span></span>
* [<span data-ttu-id="eb9c1-359">CDN do Azure</span><span class="sxs-lookup"><span data-stu-id="eb9c1-359">Azure CDN</span></span>](https://azure.microsoft.com/services/cdn/)
* [<span data-ttu-id="eb9c1-360">Documentação da CDN (rede de distribuição de conteúdo) do Azure</span><span class="sxs-lookup"><span data-stu-id="eb9c1-360">Azure Content Delivery Network (CDN) Documentation</span></span>](https://azure.microsoft.com/documentation/services/cdn/)
* [<span data-ttu-id="eb9c1-361">Usando o Azure CDN</span><span class="sxs-lookup"><span data-stu-id="eb9c1-361">Using Azure CDN</span></span>](/azure/cdn/cdn-create-new-endpoint/)
* <span data-ttu-id="eb9c1-362">[Integrando um serviço de nuvem com a CDN do Azure](/azure/cdn/cdn-cloud-service-with-cdn/) (https://azure.microsoft.com/blog/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network/)</span><span class="sxs-lookup"><span data-stu-id="eb9c1-362">[Integrate a cloud service with Azure CDN](/azure/cdn/cdn-cloud-service-with-cdn/)(https://azure.microsoft.com/blog/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network/)</span></span>


<!-- links -->

[cdn-features]: /azure/cdn/cdn-overview#azure-cdn-features

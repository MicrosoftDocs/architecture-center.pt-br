---
title: "Diretrizes de dimensionamento automático"
description: "Diretrizes sobre como realizar o dimensionamento automático para alocar dinamicamente os recursos exigidos por um aplicativo."
author: dragon119
ms.date: 05/17/2017
pnp.series.title: Best Practices
ms.openlocfilehash: a8489aaabab2b8523fbc9f026f4f435bb6d1ad29
ms.sourcegitcommit: 3d9ee03e2dda23753661a80c7106d1789f5223bb
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/23/2018
---
# <a name="autoscaling"></a><span data-ttu-id="fcfa6-103">Dimensionamento automático</span><span class="sxs-lookup"><span data-stu-id="fcfa6-103">Autoscaling</span></span>
[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="fcfa6-104">O dimensionamento automático é o processo de alocar recursos dinamicamente para atender aos requisitos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-104">Autoscaling is the process of dynamically allocating resources to match performance requirements.</span></span> <span data-ttu-id="fcfa6-105">À medida que o volume de trabalho aumenta, um aplicativo pode precisar de recursos adicionais para manter os níveis de desempenho desejados e atender aos contratos de nível de serviço (SLAs).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-105">As the volume of work grows, an application may need additional resources to maintain the desired performance levels and satisfy service-level agreements (SLAs).</span></span> <span data-ttu-id="fcfa6-106">Conforme a demanda diminui e os recursos adicionais não são mais necessários, é possível desalocá-los para minimizar os custos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-106">As demand slackens and the additional resources are no longer needed, they can be de-allocated to minimize costs.</span></span>

<span data-ttu-id="fcfa6-107">O Dimensionamento Automático aproveita a elasticidade de ambientes hospedados na nuvem ao mesmo tempo em que alivia a sobrecarga de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-107">Autoscaling takes advantage of the elasticity of cloud-hosted environments while easing management overhead.</span></span> <span data-ttu-id="fcfa6-108">Ele reduz a necessidade de um operador monitorar constantemente o desempenho de um sistema e toma decisões, como adicionar ou remover recursos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-108">It reduces the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>

<span data-ttu-id="fcfa6-109">Há duas maneiras principais de um aplicativo ser dimensionado:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-109">There are two main ways that an application can scale:</span></span> 

* <span data-ttu-id="fcfa6-110">**Dimensionamento vertical**, também chamado de aumento e redução vertical, significa que é possível alterar a capacidade de um recurso.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-110">**Vertical scaling**, also called scaling up and down, means changing the capacity of a resource.</span></span> <span data-ttu-id="fcfa6-111">Por exemplo, você pode mover um aplicativo para um tamanho maior de VM.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-111">For example, you could move an application to a larger VM size.</span></span> <span data-ttu-id="fcfa6-112">Geralmente, o dimensionamento vertical requer que o sistema fique temporariamente indisponível enquanto é reimplantado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-112">Vertical scaling often requires making the system temporarily unavailable while it is being redeployed.</span></span> <span data-ttu-id="fcfa6-113">Portanto, não é comum automatizar o dimensionamento vertical.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-113">Therefore, it's less common to automate vertical scaling.</span></span>
* <span data-ttu-id="fcfa6-114">**Dimensionamento horizontal**, também chamado de expansão e redução horizontal, significa que é possível adicionar ou remover instâncias de um recurso.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-114">**Horizontal scaling**, also called scaling out and in, means adding or removing instances of a resource.</span></span> <span data-ttu-id="fcfa6-115">O aplicativo continua em execução sem interrupções conforme os novos recursos são provisionados.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-115">The application continues running without interruption as new resources are provisioned.</span></span> <span data-ttu-id="fcfa6-116">Quando o processo de provisionamento é concluído, a solução é implantada com esses recursos adicionais.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-116">When the provisioning process is complete, the solution is deployed on these additional resources.</span></span> <span data-ttu-id="fcfa6-117">Se a demanda cair, os recursos adicionais poderão ser desligados e desalocados.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-117">If demand drops, the additional resources can be shut down cleanly and deallocated.</span></span> 

<span data-ttu-id="fcfa6-118">Muitos sistemas baseados em nuvem, incluindo o Microsoft Azure, oferecem suporte à automação dessa forma de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-118">Many cloud-based systems, including Microsoft Azure, support automatic horizontal scaling.</span></span> <span data-ttu-id="fcfa6-119">O restante deste artigo está voltado para o dimensionamento horizontal.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-119">The rest of this article focuses on horizontal scaling.</span></span>

> [!NOTE]
> <span data-ttu-id="fcfa6-120">O dimensionamento automático se aplica principalmente a recursos de computação.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-120">Autoscaling mostly applies to compute resources.</span></span> <span data-ttu-id="fcfa6-121">Embora seja possível dimensionar horizontalmente de uma fila de banco de dados ou mensagem, isso normalmente envolve [particionamento de dados][data-partitioning], que geralmente não são automatizados.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-121">While it's possible to horizontally scale a database or message queue, this usually involves [data partitioning][data-partitioning], which is generally not automated.</span></span>
>

## <a name="overview"></a><span data-ttu-id="fcfa6-122">Visão geral</span><span class="sxs-lookup"><span data-stu-id="fcfa6-122">Overview</span></span>

<span data-ttu-id="fcfa6-123">Uma estratégia de dimensionamento automático geralmente envolve as seguintes partes:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-123">An autoscaling strategy typically involves the following pieces:</span></span>

* <span data-ttu-id="fcfa6-124">Sistemas de instrumentação e monitoramento nos níveis de aplicativos, serviços e infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-124">Instrumentation and monitoring systems at the application, service, and infrastructure levels.</span></span> <span data-ttu-id="fcfa6-125">Esses sistemas capturam métricas essenciais, como tempos de resposta, comprimentos de fila, utilização da CPU e uso de memória.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-125">These systems capture key metrics, such as response times, queue lengths, CPU utilization, and memory usage.</span></span>
* <span data-ttu-id="fcfa6-126">A lógica de tomada de decisões avalia essas métricas em relação a limites predefinidos ou agendas e decide se vai dimensionar.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-126">Decision-making logic that evaluates these metrics against predefined thresholds or schedules, and decides whether to scale.</span></span>
* <span data-ttu-id="fcfa6-127">Componentes que dimensionam o sistema.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-127">Components that scale the system.</span></span>
* <span data-ttu-id="fcfa6-128">Teste, monitoramento e ajuste da estratégia de dimensionamento automático para garantir que ela funcione conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-128">Testing, monitoring, and tuning of the autoscaling strategy to ensure that it functions as expected.</span></span>

<span data-ttu-id="fcfa6-129">O Azure fornece mecanismos de dimensionamento automático internos que atendem cenários comuns.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-129">Azure provides built-in autoscaling mechanisms that address common scenarios.</span></span> <span data-ttu-id="fcfa6-130">Se um determinado serviço ou tecnologia não tem a funcionalidade de dimensionamento automático interna, ou se você tiver requisitos de dimensionamento automático específicos além dos seus recursos, é possível considerar uma implementação personalizada.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-130">If a particular service or technology does not have built-in autoscaling functionality, or if you have specific autoscaling requirements beyond its capabilities, you might consider a custom implementation.</span></span> <span data-ttu-id="fcfa6-131">Uma implementação personalizada deve coletar e analisar métricas do sistema e operacionais e, em seguida, dimensionar os recursos de acordo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-131">A custom implementation would collect operational and system metrics, analyze the metrics, and then scale resources accordingly.</span></span>

## <a name="configure-autoscaling-for-an-azure-solution"></a><span data-ttu-id="fcfa6-132">Configurar o dimensionamento automático para uma solução do Azure</span><span class="sxs-lookup"><span data-stu-id="fcfa6-132">Configure autoscaling for an Azure solution</span></span>

<span data-ttu-id="fcfa6-133">O Azure fornece dimensionamento automático interno para a maioria das opções de computação.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-133">Azure provides built-in autoscaling for most compute options.</span></span>

* <span data-ttu-id="fcfa6-134">**Máquinas Virtuais** oferecem suporte ao dimensionamento automático com o uso de [Conjuntos de Dimensionamento de VM][vm-scale-sets], que são uma maneira de gerenciar um conjunto de máquinas virtuais do Azure como um grupo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-134">**Virtual Machines** support autoscaling through the use of [VM Scale Sets][vm-scale-sets], which are a way to manage a set of Azure virtual machines as a group.</span></span> <span data-ttu-id="fcfa6-135">Confira [Como usar o dimensionamento automático e os Conjuntos de Dimensionamento de Máquinas Virtuais][vm-scale-sets-autoscale].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-135">See [How to use automatic scaling and Virtual Machine Scale Sets][vm-scale-sets-autoscale].</span></span>

* <span data-ttu-id="fcfa6-136">**O Service Fabric** também oferece suporte ao dimensionamento automático por meio de Conjuntos de Dimensionamento de VMs.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-136">**Service Fabric** also supports auto-scaling through VM Scale Sets.</span></span> <span data-ttu-id="fcfa6-137">Cada tipo de nó em um cluster do Service Fabric é configurado como um conjunto de dimensionamento de VM separado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-137">Every node type in a Service Fabric cluster is set up as a separate VM scale set.</span></span> <span data-ttu-id="fcfa6-138">Dessa forma, cada tipo de nó pode ser dimensionado independentemente.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-138">That way, each node type can be scaled in or out independently.</span></span> <span data-ttu-id="fcfa6-139">Confira [Como dimensionar um cluster do Service Fabric usando regras de dimensionamento automático][service-fabric-autoscale].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-139">See [Scale a Service Fabric cluster in or out using auto-scale rules][service-fabric-autoscale].</span></span>

* <span data-ttu-id="fcfa6-140">**O Serviço de Aplicativo do Azure** tem o dimensionamento automático interno.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-140">**Azure App Service** has built-in autoscaling.</span></span> <span data-ttu-id="fcfa6-141">As configurações de dimensionamento automático se aplicam a todos os aplicativos dentro de um Serviço de Aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-141">Autoscale settings apply to all of the apps within an App Service.</span></span> <span data-ttu-id="fcfa6-142">Confira [Como dimensionar a contagem de instância manual ou automaticamente][app-service-autoscale].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-142">See [Scale instance count manually or automatically][app-service-autoscale].</span></span>

* <span data-ttu-id="fcfa6-143">**Os Serviços de Nuvem do Azure** têm o dimensionamento automático interno no nível de função.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-143">**Azure Cloud Services** has built-in autoscaling at the role level.</span></span> <span data-ttu-id="fcfa6-144">Confira [Como configurar o dimensionamento automático para um Serviço de Nuvem no portal][cloud-services-autoscale].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-144">See [How to configure auto scaling for a Cloud Service in the portal][cloud-services-autoscale].</span></span>

<span data-ttu-id="fcfa6-145">Todas essas opções de computação usam o [Dimensionamento automático do Azure Monitor][monitoring] para fornecer um conjunto comum de funcionalidade de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-145">These compute options all use [Azure Monitor autoscale][monitoring] to provide a common set of autoscaling functionality.</span></span>

* <span data-ttu-id="fcfa6-146">As **Azure Functions** diferem das opções anteriores de computação porque não é necessário configurar regras de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-146">**Azure Functions** differs from the previous compute options, because you don't need to configure any autoscale rules.</span></span> <span data-ttu-id="fcfa6-147">Em vez disso, as Azure Functions alocam a capacidade de computação automaticamente quando seu código é executado, dimensionando conforme o necessário para lidar com a carga.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-147">Instead, Azure Functions automatically allocates compute power when your code is running, scaling out as necessary to handle load.</span></span> <span data-ttu-id="fcfa6-148">Para obter mais informações, confira [Como escolher o plano de hospedagem correto para as Azure Functions][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-148">For more information, see [Choose the correct hosting plan for Azure Functions][functions-scale].</span></span>

<span data-ttu-id="fcfa6-149">Por fim, uma solução de dimensionamento automático personalizado, às vezes, pode ser útil.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-149">Finally, a custom autoscaling solution can sometimes be useful.</span></span> <span data-ttu-id="fcfa6-150">Por exemplo, você pode usar o diagnóstico do Azure e métricas baseadas no aplicativo, junto com o código personalizado para monitorar e exportar as métricas de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-150">For example, you could use Azure diagnostics and application-based metrics, along with custom code to monitor and export the application metrics.</span></span> <span data-ttu-id="fcfa6-151">Em seguida, você poderia definir regras personalizadas com base nessas métricas e usar APIs REST do Gerenciador de Recursos para acionar o dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-151">Then you could define custom rules based on these metrics, and use Resource Manager REST APIs to trigger autoscaling.</span></span> <span data-ttu-id="fcfa6-152">No entanto, uma solução personalizada não é simples de implementar e deve-se considerar essa possibilidade apenas se nenhuma das abordagens anteriores atendem a seus requisitos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-152">However, a custom solution is not simple to implement, and should be considered only if none of the previous approaches can fulfill your requirements.</span></span>

<span data-ttu-id="fcfa6-153">Use os recursos de dimensionamento automático internos da plataforma, se atenderem aos seus requisitos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-153">Use the built-in autoscaling features of the platform, if they meet your requirements.</span></span> <span data-ttu-id="fcfa6-154">Caso contrário, avalie cuidadosamente se você realmente precisa de recursos de dimensionamento mais complexos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-154">If not, carefully consider whether you really need more complex scaling features.</span></span> <span data-ttu-id="fcfa6-155">Alguns exemplos de requisitos adicionais podem incluir mais granularidade de controle, maneiras diferentes para detectar eventos de gatilho para dimensionamento, dimensionamento entre assinaturas e dimensionamento de outros tipos de recursos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-155">Examples of additional requirements may include more granularity of control, different ways to detect trigger events for scaling, scaling across subscriptions, and scaling other types of resources.</span></span>

## <a name="use-azure-monitor-autoscale"></a><span data-ttu-id="fcfa6-156">Como usar o dimensionamento automático do Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="fcfa6-156">Use Azure Monitor autoscale</span></span>

<span data-ttu-id="fcfa6-157">O [Dimensionamento automático do Azure Monitor][monitoring] fornece um conjunto comum de funcionalidade de dimensionamento automático para Conjuntos de Dimensionamento de VMs, Serviço de Aplicativo do Azure e Serviço de Nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-157">[Azure Monitor autoscale][monitoring] provide a common set of autoscaling functionality for VM Scale Sets, Azure App Service, and Azure Cloud Service.</span></span> <span data-ttu-id="fcfa6-158">O dimensionamento pode ser executado em um cronograma, ou com base em uma métrica de tempo de execução, como o uso de CPU ou memória.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-158">Scaling can be performed on a schedule, or based on a runtime metric, such as CPU or memory usage.</span></span> <span data-ttu-id="fcfa6-159">Exemplos:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-159">Examples:</span></span>

- <span data-ttu-id="fcfa6-160">Expandir 10 instâncias em dias da semana e reduzir 4 instâncias no sábado e domingo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-160">Scale out to 10 instances on weekdays, and scale in to 4 instances on Saturday and Sunday.</span></span> 
- <span data-ttu-id="fcfa6-161">Expandir uma instância se o uso médio da CPU está acima de 70%, e reduzir uma instância se o uso de CPU cai abaixo de 50%.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-161">Scale out by one instance if average CPU usage is above 70%, and scale in by one instance if CPU usage falls below 50%.</span></span>
- <span data-ttu-id="fcfa6-162">Expandir uma instância se o número de mensagens em uma fila exceder um determinado limite.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-162">Scale out by one instance if the number of messages in a queue exceeds a certain threshold.</span></span>

<span data-ttu-id="fcfa6-163">Para obter uma lista das métricas internas, confira [Métricas comuns de dimensionamento automático do Azure Monitor][autoscale-metrics].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-163">For a list of built-in metrics, see [Azure Monitor autoscaling common metrics][autoscale-metrics].</span></span> <span data-ttu-id="fcfa6-164">Você também pode implementar métricas personalizadas usando o Application Insights.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-164">You can also implement custom metrics by  using Application Insights.</span></span> 

<span data-ttu-id="fcfa6-165">Você pode configurar o dimensionamento automático usando o PowerShell, a CLI do Azure, um modelo do Azure Resource Manager ou o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-165">You can configure autoscaling by using PowerShell, the Azure CLI, an Azure Resource Manager template, or the Azure portal.</span></span> <span data-ttu-id="fcfa6-166">Para obter mais controle, use a [API REST do Azure Resource Manager](https://msdn.microsoft.com//library/azure/dn790568.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-166">For more detailed control, use the [Azure Resource Manager REST API](https://msdn.microsoft.com//library/azure/dn790568.aspx).</span></span> <span data-ttu-id="fcfa6-167">A [Biblioteca de Gerenciamento dos Serviços de Monitoramento do Azure](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) e a [Biblioteca do Microsoft Insights](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (em visualização) são SDKs que permitem a coleta de métricas de recursos diferentes e realizam o dimensionamento automático usando a API REST.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-167">The [Azure Monitoring Service Management Library](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) and the [Microsoft Insights Library](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (in preview) are SDKs that allow collecting metrics from different resources, and perform autoscaling by making use of the REST APIs.</span></span> <span data-ttu-id="fcfa6-168">Para recursos em que o suporte do Azure Resource Manager não está disponível, ou se você estiver usando os Serviços de Nuvem do Azure, a API REST do Gerenciamento de Serviços pode ser usada para dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-168">For resources where Azure Resource Manager support isn't available, or if you are using Azure Cloud Services, the Service Management REST API can be used for autoscaling.</span></span> <span data-ttu-id="fcfa6-169">Nos outros casos, use o Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-169">In all other cases, use Azure Resource Manager.</span></span>

<span data-ttu-id="fcfa6-170">Considere os seguintes pontos ao usar o dimensionamento automático do Azure:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-170">Consider the following points when using Azure autoscale:</span></span>

* <span data-ttu-id="fcfa6-171">Avalie se é possível prever a carga no aplicativo com precisão suficiente para usar dimensionamento automático agendado, adicionando e removendo instâncias para atender a picos de demanda previstos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-171">Consider whether you can predict the load on the application well enough to use scheduled autoscaling, adding and removing instances to meet anticipated peaks in demand.</span></span> <span data-ttu-id="fcfa6-172">Se isso não for possível, use dimensionamento automático reativo com base nas métricas de tempo de execução para lidar com alterações imprevisíveis na demanda.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-172">If this isn't possible, use reactive autoscaling based on runtime metrics, in order to handle unpredictable changes in demand.</span></span> <span data-ttu-id="fcfa6-173">Normalmente, você pode combinar essas abordagens.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-173">Typically, you can combine these approaches.</span></span> <span data-ttu-id="fcfa6-174">Por exemplo, crie uma estratégia que adiciona recursos com agendamento previsto para os momentos de maior demanda do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-174">For example, create a strategy that adds resources based on a schedule of the times when you know the application is most busy.</span></span> <span data-ttu-id="fcfa6-175">Isso ajuda a garantir que a capacidade esteja disponível quando necessário, sem a demora enfrentada ao iniciar novas instâncias.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-175">This helps to ensure that capacity is available when required, without any delay from starting new instances.</span></span> <span data-ttu-id="fcfa6-176">Além disso, para cada regra agendada, defina métricas que permitam o dimensionamento automático reativo durante esse período para garantir que o aplicativo possa dar suporte a picos de demanda prolongados, mas repentinos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-176">For each scheduled rule, define metrics that allow reactive autoscaling during that period to ensure that the application can handle sustained but unpredictable peaks in demand.</span></span>
* <span data-ttu-id="fcfa6-177">Muitas vezes é difícil entender a relação entre os requisitos de capacidade e métricas, especialmente quando um aplicativo é inicialmente implantado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-177">It's often difficult to understand the relationship between metrics and capacity requirements, especially when an application is initially deployed.</span></span> <span data-ttu-id="fcfa6-178">Prefira provisionar um pouco de capacidade extra no início e, então, monitorar e ajustar as regras de dimensionamento automático para aproximar a capacidade da carga real.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-178">Provision a little extra capacity at the beginning, and then monitor and tune the autoscaling rules to bring the capacity closer to the actual load.</span></span>
* <span data-ttu-id="fcfa6-179">Configure as regras de dimensionamento automático e monitore o desempenho do seu aplicativo ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-179">Configure the autoscaling rules, and then monitor the performance of your application over time.</span></span> <span data-ttu-id="fcfa6-180">Use os resultados desse monitoramento para ajustar a maneira na qual o sistema pode ser dimensionado, se necessário.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-180">Use the results of this monitoring to adjust the way in which the system scales if necessary.</span></span> <span data-ttu-id="fcfa6-181">No entanto, tenha em mente que o dimensionamento automático não é um processo instantâneo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-181">However, keep in mind that autoscaling is not an instantaneous process.</span></span> <span data-ttu-id="fcfa6-182">Leva tempo para reagir a uma métrica como a média de uso da CPU que excede (ou fica abaixo) de um limite especificado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-182">It takes time to react to a metric such as average CPU utilization exceeding (or falling below) a specified threshold.</span></span>
* <span data-ttu-id="fcfa6-183">As regras de dimensionamento automático que usam um mecanismo de detecção com base em um atributo de gatilho de medida (por exemplo, o comprimento da fila ou a utilização de CPU) usam, para disparar uma ação de dimensionamento automático, um valor agregado ao longo do tempo em vez de valores instantâneos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-183">Autoscaling rules that use a detection mechanism based on a measured trigger attribute (such as CPU usage or queue length) use an aggregated value over time, rather than instantaneous values, to trigger an autoscaling action.</span></span> <span data-ttu-id="fcfa6-184">Por padrão, a agregação é uma média dos valores.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-184">By default, the aggregate is an average of the values.</span></span> <span data-ttu-id="fcfa6-185">Isso impede que o sistema reaja rápido demais ou cause oscilação rápida.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-185">This prevents the system from reacting too quickly, or causing rapid oscillation.</span></span> <span data-ttu-id="fcfa6-186">Ela também dá tempo para que novas instâncias iniciadas automaticamente adequem-se ao modo de execução, impedindo que ações de dimensionamento automático adicionais ocorram enquanto as novas instâncias estão inicializando.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-186">It also allows time for new instances that are auto-started to settle into running mode, preventing additional autoscaling actions from occurring while the new instances are starting up.</span></span> <span data-ttu-id="fcfa6-187">Para Serviços de Nuvem e Máquinas Virtuais do Azure, o período padrão para a agregação é 45 minutos, então esse é o período de tempo máximo que poderá levar para a métrica disparar o dimensionamento automático em resposta a picos de demanda.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-187">For Azure Cloud Services and Azure Virtual Machines, the default period for the aggregation is 45 minutes, so it can take up to this period of time for the metric to trigger autoscaling in response to spikes in demand.</span></span> <span data-ttu-id="fcfa6-188">Você pode alterar o período de agregação usando o SDK, mas lembre-se de que os períodos inferiores a 25 minutos podem causar resultados imprevisíveis (para saber mais, confira [Dimensionamento Automático de Serviços de Nuvem segundo o percentual de CPU com a Biblioteca de Gerenciamento de Serviços de Monitoramento do Azure](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-188">You can change the aggregation period by using the SDK, but be aware that periods of fewer than 25 minutes may cause unpredictable results (for more information, see [Auto Scaling Cloud Services on CPU Percentage with the Azure Monitoring Services Management Library](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)).</span></span> <span data-ttu-id="fcfa6-189">Para aplicativos Web, o período de cálculo da média é muito menor, permitindo que novas instâncias estejam disponíveis cerca de cinco minutos após uma alteração à medida de gatilho segundo a média.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-189">For Web Apps, the averaging period is much shorter, allowing new instances to be available in about five minutes after a change to the average trigger measure.</span></span>
* <span data-ttu-id="fcfa6-190">Se configurar o dimensionamento automático usando o SDK em vez do portal, você poderá especificar uma agenda mais detalhada durante a qual as regras estão ativas.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-190">If you configure autoscaling using the SDK rather than the portal, you can specify a more detailed schedule during which the rules are active.</span></span> <span data-ttu-id="fcfa6-191">Você também pode criar suas próprias métricas e usá-las, com ou sem as métricas existentes, em suas regras de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-191">You can also create your own metrics and use them with or without any of the existing ones in your autoscaling rules.</span></span> <span data-ttu-id="fcfa6-192">Por exemplo, você poderá usar contadores alternativos como o número de solicitações por segundo ou a disponibilidade média de memória, ou ainda usar contadores personalizados que medem processos comerciais específicos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-192">For example, you may wish to use alternative counters, such as the number of requests per second or the average memory availability, or use custom counters that measure specific business processes.</span></span>
* <span data-ttu-id="fcfa6-193">Ao realizar um dimensionamento automático no Service Fabric, os tipos de nós no cluster são compostos de conjuntos de dimensionamento de VM no back-end. Então, você precisa configurar as regras de dimensionamento automático para cada tipo de nó.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-193">When autoscaling Service Fabric, the node types in your cluster are made of VM scale sets at the backend, so you need to set up auto-scale rules for each node type.</span></span> <span data-ttu-id="fcfa6-194">Leve em conta o número de nós que você precisa ter antes de configurar o dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-194">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="fcfa6-195">O número mínimo de nós necessários para o tipo de nó primário é controlado pelo nível de confiabilidade escolhido.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-195">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="fcfa6-196">Para obter mais informações, confira [Como dimensionar um cluster do Service Fabric usando regras de dimensionamento automático](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-scale-up-down).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-196">For more info, see [scale a Service Fabric cluster in or out using auto-scale rules](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-scale-up-down).</span></span>
* <span data-ttu-id="fcfa6-197">Você pode usar o portal para vincular recursos como instâncias do Banco de Dados SQL e filas a uma instância do Serviço de Nuvem.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-197">You can use the portal to link resources such as SQL Database instances and queues to a Cloud Service instance.</span></span> <span data-ttu-id="fcfa6-198">Isso permite que você acesse mais facilmente as opções de configuração de dimensionamento manual e automático separadas, para cada um dos recursos vinculados.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-198">This allows you to more easily access the separate manual and automatic scaling configuration options for each of the linked resources.</span></span> <span data-ttu-id="fcfa6-199">Para obter mais informações, confira [Como vincular um recurso a um serviço de nuvem](/azure/cloud-services/cloud-services-how-to-manage).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-199">For more information, see [How to: Link a resource to a cloud service](/azure/cloud-services/cloud-services-how-to-manage).</span></span>
* <span data-ttu-id="fcfa6-200">Ao configurar várias políticas e regras, elas poderão entrar em conflito entre si.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-200">When you configure multiple policies and rules, they could conflict with each other.</span></span> <span data-ttu-id="fcfa6-201">O Dimensionamento Automático usa as regras de resolução de conflitos a seguir para garantir que haja sempre um número suficiente de instâncias em execução:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-201">Autoscale uses the following conflict resolution rules to ensure that there is always a sufficient number of instances running:</span></span>
  * <span data-ttu-id="fcfa6-202">As operações de escalamento horizontal sempre têm precedência sobre operações de redução horizontal.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-202">Scale out operations always take precedence over scale in operations.</span></span>
  * <span data-ttu-id="fcfa6-203">Quando há conflito entre operações de escalamento horizontal, a regra que inicia o maior aumento no número de instâncias tem precedência.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-203">When scale out operations conflict, the rule that initiates the largest increase in the number of instances takes precedence.</span></span>
  * <span data-ttu-id="fcfa6-204">Quando há conflito entre operações de redução horizontal, a regra que inicia a menor redução no número de instâncias tem precedência.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-204">When scale in operations conflict, the rule that initiates the smallest decrease in the number of instances takes precedence.</span></span>
* <span data-ttu-id="fcfa6-205">Em um Ambiente do Serviço de Aplicativo, qualquer métrica de pool de trabalho ou de front-end pode ser usada para definir regras de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-205">In an App Service Environment any worker pool or front-end metrics can be used to define autoscale rules.</span></span> <span data-ttu-id="fcfa6-206">Para obter mais informações, confira [Dimensionamento automático e Ambiente do Serviço de Aplicativo](/azure/app-service/app-service-environment-auto-scale).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-206">For more information, see [Autoscaling and App Service Environment](/azure/app-service/app-service-environment-auto-scale).</span></span>

## <a name="application-design-considerations"></a><span data-ttu-id="fcfa6-207">Considerações sobre o design de aplicativo</span><span class="sxs-lookup"><span data-stu-id="fcfa6-207">Application design considerations</span></span>
<span data-ttu-id="fcfa6-208">O dimensionamento automático não é uma solução imediata.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-208">Autoscaling isn't an instant solution.</span></span> <span data-ttu-id="fcfa6-209">Apenas adicionar recursos a um sistema ou executar mais instâncias de um processo não garante que o desempenho do sistema vai melhorar.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-209">Simply adding resources to a system or running more instances of a process doesn't guarantee that the performance of the system will improve.</span></span> <span data-ttu-id="fcfa6-210">Considere os seguintes pontos ao criar uma estratégia de dimensionamento automático:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-210">Consider the following points when designing an autoscaling strategy:</span></span>

* <span data-ttu-id="fcfa6-211">O sistema deve ser projetado para ser escalonável horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-211">The system must be designed to be horizontally scalable.</span></span> <span data-ttu-id="fcfa6-212">Evite fazer suposições sobre afinidade de instância; não crie soluções que exijam que o código esteja sempre sendo executado em uma instância específica de um processo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-212">Avoid making assumptions about instance affinity; do not design solutions that require that the code is always running in a specific instance of a process.</span></span> <span data-ttu-id="fcfa6-213">Ao dimensionar um site ou serviço de nuvem horizontalmente, não presuma que uma série de solicitações da mesma fonte será sempre roteada para a mesma instância.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-213">When scaling a cloud service or web site horizontally, don't assume that a series of requests from the same source will always be routed to the same instance.</span></span> <span data-ttu-id="fcfa6-214">Projete os serviços, por essa mesma razão, como sem monitoração de estado, evitando assim a exigência de que uma série de solicitações de um aplicativo sejam sempre roteadas para a mesma instância de um serviço.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-214">For the same reason, design services to be stateless to avoid requiring a series of requests from an application to always be routed to the same instance of a service.</span></span> <span data-ttu-id="fcfa6-215">Ao criar um serviço que lê as mensagens de uma fila e as processa, não faça suposições sobre qual instância do serviço lidará com qual mensagem.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-215">When designing a service that reads messages from a queue and processes them, don't make any assumptions about which instance of the service handles a specific message.</span></span> <span data-ttu-id="fcfa6-216">O Dimensionamento Automático pode iniciar instâncias adicionais de um serviço conforme o comprimento da fila cresce.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-216">Autoscaling could start additional instances of a service as the queue length grows.</span></span> <span data-ttu-id="fcfa6-217">O [Padrão de Consumidores Concorrentes][competing-consumers] descreve como administrar esse cenário.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-217">The [Competing Consumers Pattern][competing-consumers] describes how to handle this scenario.</span></span>
* <span data-ttu-id="fcfa6-218">Se a solução implementa uma tarefa de execução longa, projete-a para oferecer suporte tanto a escalar quanto a reduzir horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-218">If the solution implements a long-running task, design this task to support both scaling out and scaling in.</span></span> <span data-ttu-id="fcfa6-219">Sem o devido cuidado, essa tarefa pode impedir que uma instância de um processo seja desligada corretamente quando o sistema é reduzido horizontalmente, ou ela poderá perder dados se o processo for encerrado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-219">Without due care, such a task could prevent an instance of a process from being shut down cleanly when the system scales in, or it could lose data if the process is forcibly terminated.</span></span> <span data-ttu-id="fcfa6-220">Idealmente, refatore uma tarefa de execução longa e divida o processamento que ela executa em blocos menores e distintos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-220">Ideally, refactor a long-running task and break up the processing that it performs into smaller, discrete chunks.</span></span> <span data-ttu-id="fcfa6-221">O [Padrão de Filtros e Tubos][pipes-and-filters] fornece um exemplo de como atingir esse resultado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-221">The [Pipes and Filters Pattern][pipes-and-filters] provides an example of how you can achieve this.</span></span>
* <span data-ttu-id="fcfa6-222">Como alternativa, você pode implementar um mecanismo de ponto de verificação que registre informações de estado da tarefa em intervalos regulares, e salve esse estado em armazenamento durável que possa ser acessado por qualquer instância do processo executando a tarefa.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-222">Alternatively, you can implement a checkpoint mechanism that records state information about the task at regular intervals, and save this state in durable storage that can be accessed by any instance of the process running the task.</span></span> <span data-ttu-id="fcfa6-223">Desse modo, se o processo é encerrado, o trabalho que ele estava executando poderá ser retomado do último ponto de verificação, por meio do uso de outra instância.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-223">In this way, if the process is shutdown, the work that it was performing can be resumed from the last checkpoint by using another instance.</span></span>
* <span data-ttu-id="fcfa6-224">Quando tarefas em segundo plano são executadas em instâncias de computação separadas, como em funções de trabalho de um aplicativo hospedado em Serviços de Nuvem, talvez seja necessário dimensionar diferentes partes do aplicativo usando diferentes políticas de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-224">When background tasks run on separate compute instances, such as in worker roles of a cloud services hosted application, you may need to scale different parts of the application using different scaling policies.</span></span> <span data-ttu-id="fcfa6-225">Por exemplo, talvez seja necessário implantar instâncias de computação de IU (interface do usuário) adicionais sem aumentar o número de instâncias de computação em segundo plano, ou fazer o oposto disso.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-225">For example, you may need to deploy additional user interface (UI) compute instances without increasing the number of background compute instances, or the opposite of this.</span></span> <span data-ttu-id="fcfa6-226">Se você oferecer níveis diferentes de serviço (como pacotes de serviço básicos e premium), talvez seja necessário escalar horizontalmente os recursos de computação para pacotes de serviço premium de modo mais agressivo do que aqueles para pacotes de serviço básico, para assim atender aos SLAs.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-226">If you offer different levels of service (such as basic and premium service packages), you may need to scale out the compute resources for premium service packages more aggressively than those for basic service packages in order to meet SLAs.</span></span>
* <span data-ttu-id="fcfa6-227">Considere usar o comprimento da fila, pela qual a interface do usuário e as instâncias de computação em segundo plano se comunicam, como um critério da sua estratégia de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-227">Consider using the length of the queue over which UI and background compute instances communicate as a criterion for your autoscaling strategy.</span></span> <span data-ttu-id="fcfa6-228">Esse é o melhor indicador de um desequilíbrio ou a diferença entre a carga atual e a capacidade de processamento da tarefa em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-228">This is the best indicator of an imbalance or difference between the current load and the processing capacity of the background task.</span></span>
* <span data-ttu-id="fcfa6-229">Se sua estratégia de dimensionamento automático em contadores que medem processos de negócios, como o número de pedidos feitos por hora ou o tempo médio de execução de uma transação complexa, certifique-se de entender completamente a relação entre os resultados desses tipos de contadores e os reais requisitos de capacidade de computação.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-229">If you base your autoscaling strategy on counters that measure business processes, such as the number of orders placed per hour or the average execution time of a complex transaction, ensure that you fully understand the relationship between the results from these types of counters and the actual compute capacity requirements.</span></span> <span data-ttu-id="fcfa6-230">Pode ser necessário dimensionar mais de um componente ou unidade de computação em resposta a alterações nos contadores de processo empresarial.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-230">It may be necessary to scale more than one component or compute unit in response to changes in business process counters.</span></span>  
* <span data-ttu-id="fcfa6-231">Para evitar que o sistema tente escalar horizontalmente de modo excessivo e para evitar os custos associados à execução de vários milhares de instâncias, considere a possibilidade de limitar o número máximo de instâncias que podem ser adicionadas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-231">To prevent a system from attempting to scale out excessively, and to avoid the costs associated with running many thousands of instances, consider limiting the maximum number of instances that can be automatically added.</span></span> <span data-ttu-id="fcfa6-232">A maioria dos mecanismos de dimensionamento automático permitem que você especifique os números mínimo e máximo de instâncias para uma regra.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-232">Most autoscaling mechanisms allow you to specify the minimum and maximum number of instances for a rule.</span></span> <span data-ttu-id="fcfa6-233">Além disso, considere degradar normalmente a funcionalidade que o sistema oferece se o número máximo de instâncias tiverem sido implantadas e, ainda assim, o sistema estiver sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-233">In addition, consider gracefully degrading the functionality that the system provides if the maximum number of instances have been deployed, and the system is still overloaded.</span></span>
* <span data-ttu-id="fcfa6-234">Mantenha em mente que dimensionamento automático pode não ser o mecanismo mais apropriado para lidar com um aumento repentino na carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-234">Keep in mind that autoscaling might not be the most appropriate mechanism to handle a sudden burst in workload.</span></span> <span data-ttu-id="fcfa6-235">Leva tempo para provisionar e iniciar novas instâncias de um serviço ou adicionar recursos a um sistema, e o pico da demanda pode já ter passado quando esses recursos adicionais forem disponibilizados.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-235">It takes time to provision and start new instances of a service or add resources to a system, and the peak demand may have passed by the time these additional resources have been made available.</span></span> <span data-ttu-id="fcfa6-236">Nesse cenário, talvez seja melhor limitar o serviço.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-236">In this scenario, it may be better to throttle the service.</span></span> <span data-ttu-id="fcfa6-237">Para obter mais informações, confira [Padrão de Limitação][throttling].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-237">For more information, see the [Throttling Pattern][throttling].</span></span>
* <span data-ttu-id="fcfa6-238">Por outro lado, se você precisa da capacidade de processar todas as solicitações quando o volume flutua rapidamente e o custo não é um fator principal, considere usar uma estratégia de dimensionamento automático agressiva que inicia as instâncias adicionais mais rapidamente.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-238">Conversely, if you do need the capacity to process all requests when the volume fluctuates rapidly, and cost isn't a major contributing factor, consider using an aggressive autoscaling strategy that starts additional instances more quickly.</span></span> <span data-ttu-id="fcfa6-239">Você também pode usar uma política programada que inicie um número suficiente de instâncias para atender à carga máxima antes que ela seja esperada.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-239">You can also use a scheduled policy that starts a sufficient number of instances to meet the maximum load before that load is expected.</span></span>
* <span data-ttu-id="fcfa6-240">O mecanismo de dimensionamento automático deve monitorar o processo de dimensionamento automático e registrar os detalhes de cada evento desse dimensionamento (o que o disparou, quais recursos foram adicionados ou removidos e quando isso ocorreu).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-240">The autoscaling mechanism should monitor the autoscaling process, and log the details of each autoscaling event (what triggered it, what resources were added or removed, and when).</span></span> <span data-ttu-id="fcfa6-241">Se você criar um mecanismo de dimensionamento automático personalizado, certifique-se de que ele incorpora essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-241">If you create a custom autoscaling mechanism, ensure that it incorporates this capability.</span></span> <span data-ttu-id="fcfa6-242">Analise as informações para ajudar a medir a eficiência da estratégia de dimensionamento automático e ajustá-la se necessário.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-242">Analyze the information to help measure the effectiveness of the autoscaling strategy, and tune it if necessary.</span></span> <span data-ttu-id="fcfa6-243">Você pode ajustar tanto a curto prazo, conforme os padrões de uso tornam-se mais óbvios, quanto a longo prazo, conforme os negócios se expandem ou os requisitos do aplicativo evoluem.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-243">You can tune both in the short term, as the usage patterns become more obvious, and over the long term, as the business expands or the requirements of the application evolve.</span></span> <span data-ttu-id="fcfa6-244">Se um aplicativo atinge o limite superior definido para o dimensionamento automático, o mecanismo também pode alertar um operador, que pode iniciar recursos adicionais manualmente se necessário.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-244">If an application reaches the upper limit defined for autoscaling, the mechanism might also alert an operator who could manually start additional resources if necessary.</span></span> <span data-ttu-id="fcfa6-245">Observe que, sob essas circunstâncias, o operador também pode ser responsável por remover manualmente esses recursos após redução na carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-245">Note that, under these circumstances, the operator may also be responsible for manually removing these resources after the workload eases.</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="fcfa6-246">Diretrizes e padrões relacionados</span><span class="sxs-lookup"><span data-stu-id="fcfa6-246">Related patterns and guidance</span></span>
<span data-ttu-id="fcfa6-247">Os padrões e diretrizes a seguir também podem ser relevantes a esse cenário ao implementar o dimensionamento automático:</span><span class="sxs-lookup"><span data-stu-id="fcfa6-247">The following patterns and guidance may also be relevant to your scenario when implementing autoscaling:</span></span>

* <span data-ttu-id="fcfa6-248">[Padrão de Limitação][throttling].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-248">[Throttling Pattern][throttling].</span></span> <span data-ttu-id="fcfa6-249">Esse padrão descreve como um aplicativo pode continuar a funcionar e cumprir os contratos de nível de serviço quando um aumento na demanda coloca uma carga extrema sobre os recursos.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-249">This pattern describes how an application can continue to function and meet SLAs when an increase in demand places an extreme load on resources.</span></span> <span data-ttu-id="fcfa6-250">É possível usar limitação com o dimensionamento automático para evitar que, ao escalar horizontalmente o sistema, este seja sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-250">Throttling can be used with autoscaling to prevent a system from being overwhelmed while the system scales out.</span></span>
* <span data-ttu-id="fcfa6-251">[Padrão de Consumidores Concorrentes][competing-consumers].</span><span class="sxs-lookup"><span data-stu-id="fcfa6-251">[Competing Consumers Pattern][competing-consumers].</span></span> <span data-ttu-id="fcfa6-252">Esse padrão descreve como implementar um conjunto de instâncias de serviço que pode lidar com mensagens de qualquer instância do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-252">This pattern describes how to implement a pool of service instances that can handle messages from any application instance.</span></span> <span data-ttu-id="fcfa6-253">O dimensionamento automático pode ser usado para iniciar e parar as instâncias de serviço de acordo com a carga de trabalho prevista.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-253">Autoscaling can be used to start and stop service instances to match the anticipated workload.</span></span> <span data-ttu-id="fcfa6-254">Essa abordagem permite que um sistema processe várias mensagens simultaneamente para otimizar o resultado, melhorar a escalabilidade e disponibilidade e equilibrar a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-254">This approach enables a system to process multiple messages concurrently to optimize throughput, improve scalability and availability, and balance the workload.</span></span>
* <span data-ttu-id="fcfa6-255">[Monitoramento e diagnósticos](./monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="fcfa6-255">[Monitoring and diagnostics](./monitoring.md).</span></span> <span data-ttu-id="fcfa6-256">Instrumentação e telemetria são essenciais para reunir as informações que podem orientar o processo de dimensionamento automático.</span><span class="sxs-lookup"><span data-stu-id="fcfa6-256">Instrumentation and telemetry are vital for gathering the information that can drive the autoscaling process.</span></span>


<!-- links -->

[monitoring]: /azure/monitoring-and-diagnostics/monitoring-overview-autoscale
[app-service-autoscale]: /azure/monitoring-and-diagnostics/insights-how-to-scale?toc=%2fazure%2fapp-service-web%2ftoc.json#scaling-based-on-a-pre-set-metric
[app-service-plan]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[autoscale-metrics]: /azure/monitoring-and-diagnostics/insights-autoscale-common-metrics
[cloud-services-autoscale]: /azure/cloud-services/cloud-services-how-to-scale-portal
[competing-consumers]: ../patterns/competing-consumers.md
[data-partitioning]: ./data-partitioning.md
[functions-scale]: /azure/azure-functions/functions-scale
[link-resource-to-cloud-service]: /azure/cloud-services/cloud-services-how-to-manage#how-to-link-a-resource-to-a-cloud-service
[pipes-and-filters]: ../patterns/pipes-and-filters.md
[service-fabric-autoscale]: /azure/service-fabric/service-fabric-cluster-scale-up-down
[throttling]: ../patterns/throttling.md
[vm-scale-sets]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview
[vm-scale-sets-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview

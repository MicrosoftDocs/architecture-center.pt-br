---
title: Arquiteturas de Big Data
description: 
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: 6ee44c6d94ae7ac5cb67cb5f16337deb1ffd4b70
ms.sourcegitcommit: 90cf2de795e50571d597cfcb9b302e48933e7f18
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/14/2018
---
# <a name="big-data-architectures"></a><span data-ttu-id="757de-102">Arquiteturas de Big Data</span><span class="sxs-lookup"><span data-stu-id="757de-102">Big data architectures</span></span>

<span data-ttu-id="757de-103">Uma arquitetura de Big Data foi projetada para lidar com ingestão, processamento e análise de dados grandes ou complexos demais para sistemas de banco de dados tradicionais.</span><span class="sxs-lookup"><span data-stu-id="757de-103">A big data architecture is designed to handle the ingestion, processing, and analysis of data that is too large or complex for traditional database systems.</span></span> <span data-ttu-id="757de-104">O limite no qual as organizações ingressam no campo do Big Data é diferente, dependendo das capacidades dos usuários e de suas ferramentas.</span><span class="sxs-lookup"><span data-stu-id="757de-104">The threshold at which organizations enter into the big data realm differs, depending on the capabilities of the users and their tools.</span></span> <span data-ttu-id="757de-105">Para alguns, isso pode significar centenas de gigabytes de dados, enquanto para outros, centenas de terabytes.</span><span class="sxs-lookup"><span data-stu-id="757de-105">For some, it can mean hundreds of gigabytes of data, while for others it means hundreds of terabytes.</span></span> <span data-ttu-id="757de-106">À medida que as ferramentas para o trabalho com conjuntos de Big Data evoluem, na mesma proporção evolui o significado de Big Data.</span><span class="sxs-lookup"><span data-stu-id="757de-106">As tools for working with big data sets advance, so does the meaning of big data.</span></span> <span data-ttu-id="757de-107">Cada vez mais, esse termo se relaciona ao valor que é possível extrair dos conjuntos de dados por meio de análise avançada, em vez de estritamente o tamanho dos dados, embora nesses casos, eles tendam a ser muito grandes.</span><span class="sxs-lookup"><span data-stu-id="757de-107">More and more, this term relates to the value you can extract from your data sets through advanced analytics, rather than strictly the size of the data, although in these cases they tend to be quite large.</span></span>

<span data-ttu-id="757de-108">Ao longo dos anos, o cenário dos dados vem mudando.</span><span class="sxs-lookup"><span data-stu-id="757de-108">Over the years, the data landscape has changed.</span></span> <span data-ttu-id="757de-109">Houve uma mudança no que você pode fazer ou o que deve fazer, com os dados.</span><span class="sxs-lookup"><span data-stu-id="757de-109">What you can do, or are expected to do, with data has changed.</span></span> <span data-ttu-id="757de-110">O custo de armazenamento caiu drasticamente, enquanto os meios pelos quais os dados são coletados continuam aumentando.</span><span class="sxs-lookup"><span data-stu-id="757de-110">The cost of storage has fallen dramatically, while the means by which data is collected keeps growing.</span></span> <span data-ttu-id="757de-111">Alguns dados são recebidos a um ritmo rápido, constantemente exigindo sua coleta e observação.</span><span class="sxs-lookup"><span data-stu-id="757de-111">Some data arrives at a rapid pace, constantly demanding to be collected and observed.</span></span> <span data-ttu-id="757de-112">Outros dados são recebidos mais lentamente, mas em partes muito grandes, geralmente na forma de décadas de dados históricos.</span><span class="sxs-lookup"><span data-stu-id="757de-112">Other data arrives more slowly, but in very large chunks, often in the form of decades of historical data.</span></span> <span data-ttu-id="757de-113">Talvez você esteja enfrentando um problema de análise avançada ou um problema que exija o aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="757de-113">You might be facing an advanced analytics problem, or one that requires machine learning.</span></span> <span data-ttu-id="757de-114">Esses são desafios que as arquiteturas de Big Data buscam resolver.</span><span class="sxs-lookup"><span data-stu-id="757de-114">These are challenges that big data architectures seek to solve.</span></span>

<span data-ttu-id="757de-115">Soluções de Big Data normalmente envolvem um ou mais dos seguintes tipos de carga de trabalho:</span><span class="sxs-lookup"><span data-stu-id="757de-115">Big data solutions typically involve one or more of the following types of workload:</span></span>

* <span data-ttu-id="757de-116">Processamento em lote de fontes Big Data em repouso.</span><span class="sxs-lookup"><span data-stu-id="757de-116">Batch processing of big data sources at rest.</span></span>
* <span data-ttu-id="757de-117">Processamento em tempo real de Big Data em movimento.</span><span class="sxs-lookup"><span data-stu-id="757de-117">Real-time processing of big data in motion.</span></span>
* <span data-ttu-id="757de-118">Exploração interativa de Big Data.</span><span class="sxs-lookup"><span data-stu-id="757de-118">Interactive exploration of big data.</span></span>
* <span data-ttu-id="757de-119">Análise preditiva e machine learning.</span><span class="sxs-lookup"><span data-stu-id="757de-119">Predictive analytics and machine learning.</span></span>

<span data-ttu-id="757de-120">Considere o uso das arquiteturas de Big Data quando precisar:</span><span class="sxs-lookup"><span data-stu-id="757de-120">Consider big data architectures when you need to:</span></span>

* <span data-ttu-id="757de-121">Armazenar e processar dados em volumes muito grandes para um banco de dados tradicional.</span><span class="sxs-lookup"><span data-stu-id="757de-121">Store and process data in volumes too large for a traditional database.</span></span>
* <span data-ttu-id="757de-122">Transformar dados não estruturados para análise e relatório.</span><span class="sxs-lookup"><span data-stu-id="757de-122">Transform unstructured data for analysis and reporting.</span></span>
* <span data-ttu-id="757de-123">Capturar, processar e analisar fluxos não associados de dados em tempo real ou com baixa latência.</span><span class="sxs-lookup"><span data-stu-id="757de-123">Capture, process, and analyze unbounded streams of data in real time, or with low latency.</span></span>

## <a name="components-of-a-big-data-architecture"></a><span data-ttu-id="757de-124">Componentes de uma arquitetura de Big Data</span><span class="sxs-lookup"><span data-stu-id="757de-124">Components of a big data architecture</span></span>

<span data-ttu-id="757de-125">O diagrama a seguir mostra os componentes lógicos que se inserem em uma arquitetura de Big Data.</span><span class="sxs-lookup"><span data-stu-id="757de-125">The following diagram shows the logical components that fit into a big data architecture.</span></span> <span data-ttu-id="757de-126">As soluções individuais podem não conter todos os itens neste diagrama.</span><span class="sxs-lookup"><span data-stu-id="757de-126">Individual solutions may not contain every item in this diagram.</span></span>

![Diagrama geral do pipeline de dados](./images/big-data-pipeline.png) 

<span data-ttu-id="757de-128">A maioria das arquiteturas de Big Data inclui alguns ou todos os seguintes componentes:</span><span class="sxs-lookup"><span data-stu-id="757de-128">Most big data architectures include some or all of the following components:</span></span>

* <span data-ttu-id="757de-129">**Fontes de dados**.</span><span class="sxs-lookup"><span data-stu-id="757de-129">**Data sources**.</span></span> <span data-ttu-id="757de-130">Todas as soluções de Big Data começam com uma ou mais fontes de dados.</span><span class="sxs-lookup"><span data-stu-id="757de-130">All big data solutions start with one or more data sources.</span></span> <span data-ttu-id="757de-131">Os exemplos incluem:</span><span class="sxs-lookup"><span data-stu-id="757de-131">Examples include:</span></span>

    * <span data-ttu-id="757de-132">Armazenamentos de dados de aplicativo, como bancos de dados relacionais.</span><span class="sxs-lookup"><span data-stu-id="757de-132">Application data stores, such as relational databases.</span></span>
    * <span data-ttu-id="757de-133">Arquivos estáticos produzidos por aplicativos, como arquivos de log do servidor Web.</span><span class="sxs-lookup"><span data-stu-id="757de-133">Static files produced by applications, such as web server log files.</span></span>
    * <span data-ttu-id="757de-134">Fontes de dados em tempo real, como dispositivos IoT.</span><span class="sxs-lookup"><span data-stu-id="757de-134">Real-time data sources, such as IoT devices.</span></span>

* <span data-ttu-id="757de-135">**Armazenamento de dados**.</span><span class="sxs-lookup"><span data-stu-id="757de-135">**Data storage**.</span></span> <span data-ttu-id="757de-136">Os dados de operações de processamento em lotes normalmente são armazenados em um repositório de arquivos distribuído que pode conter amplos volumes de arquivos grandes em vários formatos.</span><span class="sxs-lookup"><span data-stu-id="757de-136">Data for batch processing operations is typically stored in a distributed file store that can hold high volumes of large files in various formats.</span></span> <span data-ttu-id="757de-137">Esse tipo de repositório geralmente é chamado *data lake*.</span><span class="sxs-lookup"><span data-stu-id="757de-137">This kind of store is often called a *data lake*.</span></span> <span data-ttu-id="757de-138">As opções para implementar esse armazenamento incluem contêineres de blobs ou Azure Data Lake Store no Armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="757de-138">Options for implementing this storage include Azure Data Lake Store or blob containers in Azure Storage.</span></span>

* <span data-ttu-id="757de-139">**Processamento em lotes**.</span><span class="sxs-lookup"><span data-stu-id="757de-139">**Batch processing**.</span></span> <span data-ttu-id="757de-140">Como os conjuntos de dados são muito grandes, geralmente, uma solução de Big Data precisa processar arquivos de dados usando trabalhos em lotes de execução longa para filtrar, agregar e, de outro modo, preparar os dados para análise.</span><span class="sxs-lookup"><span data-stu-id="757de-140">Because the data sets are so large, often a big data solution must process data files using long-running batch jobs to filter, aggregate, and otherwise prepare the data for analysis.</span></span> <span data-ttu-id="757de-141">Normalmente, esses trabalhos envolvem ler arquivos de origem, processá-los e gravar a saída para novos arquivos.</span><span class="sxs-lookup"><span data-stu-id="757de-141">Usually these jobs involve reading source files, processing them, and writing the output to new files.</span></span> <span data-ttu-id="757de-142">Opções incluem executar trabalhos de U-SQL no Azure Data Lake Analytics, usar trabalhos Hive, Pig ou de Mapear/Reduzir personalizados em um cluster HDInsight Hadoop ou usar programas de Java, Scala ou Python em um cluster HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="757de-142">Options include running U-SQL jobs in Azure Data Lake Analytics, using Hive, Pig, or custom Map/Reduce jobs in an HDInsight Hadoop cluster, or using Java, Scala, or Python programs in an HDInsight Spark cluster.</span></span>

* <span data-ttu-id="757de-143">**Ingestão de mensagens em tempo real**.</span><span class="sxs-lookup"><span data-stu-id="757de-143">**Real-time message ingestion**.</span></span> <span data-ttu-id="757de-144">Se a solução inclui fontes em tempo real, a arquitetura precisa incluir uma maneira de capturar e armazenar mensagens em tempo real para processamento de fluxo.</span><span class="sxs-lookup"><span data-stu-id="757de-144">If the solution includes real-time sources, the architecture must include a way to capture and store real-time messages for stream processing.</span></span> <span data-ttu-id="757de-145">Isso pode ser um armazenamento de dados simples, em que as mensagens de entrada são removidas para uma pasta para processamento.</span><span class="sxs-lookup"><span data-stu-id="757de-145">This might be a simple data store, where incoming messages are dropped into a folder for processing.</span></span> <span data-ttu-id="757de-146">No entanto, muitas soluções precisam de um repositório de ingestão de mensagens para atuar como buffer de mensagens e dar suporte a processamento de expansão, entrega confiável e outras semânticas de enfileiramento de mensagem.</span><span class="sxs-lookup"><span data-stu-id="757de-146">However, many solutions need a message ingestion store to act as a buffer for messages, and to support scale-out processing, reliable delivery, and other message queuing semantics.</span></span> <span data-ttu-id="757de-147">Essa parte de uma arquitetura de streaming geralmente é conhecida como buffer de fluxo.</span><span class="sxs-lookup"><span data-stu-id="757de-147">This portion of a streaming architecture is often referred to as stream buffering.</span></span> <span data-ttu-id="757de-148">Entre as opções estão os Hubs de Eventos do Azure, o Hub IoT do Azure e o Kafka.</span><span class="sxs-lookup"><span data-stu-id="757de-148">Options include Azure Event Hubs, Azure IoT Hub, and Kafka.</span></span>

* <span data-ttu-id="757de-149">**Processamento de fluxo**.</span><span class="sxs-lookup"><span data-stu-id="757de-149">**Stream processing**.</span></span> <span data-ttu-id="757de-150">Depois de capturar mensagens em tempo real, a solução precisa processá-las filtrando, agregando e preparando os dados para análise.</span><span class="sxs-lookup"><span data-stu-id="757de-150">After capturing real-time messages, the solution must process them by filtering, aggregating, and otherwise preparing the data for analysis.</span></span> <span data-ttu-id="757de-151">Os dados de fluxo processados são gravados em um coletor de saída.</span><span class="sxs-lookup"><span data-stu-id="757de-151">The processed stream data is then written to an output sink.</span></span> <span data-ttu-id="757de-152">O Azure Stream Analytics oferece um serviço de processamento de fluxo gerenciado baseado em consultas SQL em execução perpétua que operam em fluxos não associados.</span><span class="sxs-lookup"><span data-stu-id="757de-152">Azure Stream Analytics provides a managed stream processing service based on perpetually running SQL queries that operate on unbounded streams.</span></span> <span data-ttu-id="757de-153">Você também pode usar tecnologias de streaming Apache de software livre, como Storm e Spark Streaming em um cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="757de-153">You can also use open source Apache streaming technologies like Storm and Spark Streaming in an HDInsight cluster.</span></span>

* <span data-ttu-id="757de-154">**Armazenamento de dados analíticos**.</span><span class="sxs-lookup"><span data-stu-id="757de-154">**Analytical data store**.</span></span> <span data-ttu-id="757de-155">Muitas soluções de Big Data preparam dados para análise e então fornecem os dados processados em um formato estruturado que pode ser consultado com ferramentas analíticas.</span><span class="sxs-lookup"><span data-stu-id="757de-155">Many big data solutions prepare data for analysis and then serve the processed data in a structured format that can be queried using analytical tools.</span></span> <span data-ttu-id="757de-156">O armazenamento de dados analíticos usado para atender a essas consultas pode ser um data warehouse relacional estilo Kimball, como visto na maioria das soluções de BI (business intelligence) tradicionais.</span><span class="sxs-lookup"><span data-stu-id="757de-156">The analytical data store used to serve these queries can be a Kimball-style relational data warehouse, as seen in most traditional business intelligence (BI) solutions.</span></span> <span data-ttu-id="757de-157">Como alternativa, os dados podem ser apresentados por meio de uma tecnologia NoSQL de baixa latência, como HBase ou um banco de dados Hive interativo que oferece uma abstração de metadados sobre arquivos de dados no armazenamento de dados distribuído.</span><span class="sxs-lookup"><span data-stu-id="757de-157">Alternatively, the data could be presented through a low-latency NoSQL technology such as HBase, or an interactive Hive database that provides a metadata abstraction over data files in the distributed data store.</span></span> <span data-ttu-id="757de-158">O SQL Data Warehouse do Azure fornece um serviço gerenciado para armazenamento de dados em larga escala baseado em nuvem.</span><span class="sxs-lookup"><span data-stu-id="757de-158">Azure SQL Data Warehouse provides a managed service for large-scale, cloud-based data warehousing.</span></span> <span data-ttu-id="757de-159">O HDInsight dá suporte a Hive interativo, HBase e Spark SQL, que também pode ser usado para veicular dados para análise.</span><span class="sxs-lookup"><span data-stu-id="757de-159">HDInsight supports Interactive Hive, HBase, and Spark SQL, which can also be used to serve data for analysis.</span></span>

* <span data-ttu-id="757de-160">**Análise e relatórios**.</span><span class="sxs-lookup"><span data-stu-id="757de-160">**Analysis and reporting**.</span></span> <span data-ttu-id="757de-161">A meta da maioria das soluções de Big Data é gerar insights sobre os dados por meio de análise e relatórios.</span><span class="sxs-lookup"><span data-stu-id="757de-161">The goal of most big data solutions is to provide insights into the data through analysis and reporting.</span></span> <span data-ttu-id="757de-162">Para capacitar os usuários a analisar os dados, a arquitetura pode incluir uma camada de modelagem de dados, como um cubo OLAP multidimensional ou um modelo de dados tabular no Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="757de-162">To empower users to analyze the data, the architecture may include a data modeling layer, such as a multidimensional OLAP cube or tabular data model in Azure Analysis Services.</span></span> <span data-ttu-id="757de-163">Também pode dar suporte a business intelligence de autoatendimento, usando as tecnologias de modelagem e visualização do Microsoft Power BI ou do Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="757de-163">It might also support self-service BI, using the modeling and visualization technologies in Microsoft Power BI or Microsoft Excel.</span></span> <span data-ttu-id="757de-164">Análise e relatórios também podem assumir a forma de exploração de dados interativos por cientistas de dados ou analistas de dados.</span><span class="sxs-lookup"><span data-stu-id="757de-164">Analysis and reporting can also take the form of interactive data exploration by data scientists or data analysts.</span></span> <span data-ttu-id="757de-165">Para esses cenários, muitos serviços do Azure dão suporte a blocos de anotações analíticos, como Jupyter, permitindo que esses usuários aproveitem suas habilidades existentes com Python ou R. Para exploração de dados em larga escala, você pode usar o Microsoft R Server, seja no modo autônomo ou com Spark.</span><span class="sxs-lookup"><span data-stu-id="757de-165">For these scenarios, many Azure services support analytical notebooks, such as Jupyter, enabling these users to leverage their existing skills with Python or R. For large-scale data exploration, you can use Microsoft R Server, either standalone or with Spark.</span></span>

* <span data-ttu-id="757de-166">**Orquestração**.</span><span class="sxs-lookup"><span data-stu-id="757de-166">**Orchestration**.</span></span> <span data-ttu-id="757de-167">A maioria das soluções de Big Data consiste em operações de processamento de dados repetidas, encapsuladas em fluxos de trabalho, que transformam dados de origem, movem dados entre várias origens e coletores, carregam os dados processados em um armazenamento de dados analíticos ou enviam os resultados por push diretamente para um relatório ou painel.</span><span class="sxs-lookup"><span data-stu-id="757de-167">Most big data solutions consist of repeated data processing operations, encapsulated in workflows, that transform source data, move data between multiple sources and sinks, load the processed data into an analytical data store, or push the results straight to a report or dashboard.</span></span> <span data-ttu-id="757de-168">Para automatizar esses fluxos de trabalho, você pode usar uma tecnologia de orquestração, como Azure Data Factory ou Apache Oozie e Sqoop.</span><span class="sxs-lookup"><span data-stu-id="757de-168">To automate these workflows, you can use an orchestration technology such Azure Data Factory or Apache Oozie and Sqoop.</span></span>

## <a name="data-lake"></a><span data-ttu-id="757de-169">Data lake</span><span class="sxs-lookup"><span data-stu-id="757de-169">Data lake</span></span>

<span data-ttu-id="757de-170">Se você leu algo sobre Big Data, é provável que tenha visto o termo _data lake_.</span><span class="sxs-lookup"><span data-stu-id="757de-170">If you have read anything about big data, it's likely you've seen the term _data lake_.</span></span> <span data-ttu-id="757de-171">Você pode ter visto a palavra usada para o nome de um produto ou talvez como um conceito sobre como armazenar grandes quantidades de dados.</span><span class="sxs-lookup"><span data-stu-id="757de-171">You may have seen the word used for the name of a product, or perhaps a concept about storing large quantities of data.</span></span> 

<span data-ttu-id="757de-172">Um data lake consiste no processamento e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="757de-172">A data lake consists of both storage and processing.</span></span> <span data-ttu-id="757de-173">O armazenamento do data lake é criado com várias metas em mente: tolerância a falhas, escalabilidade infinita e ingestão de alta taxa de transferência de dados com vários formatos e tamanhos.</span><span class="sxs-lookup"><span data-stu-id="757de-173">Data lake storage is built with several goals in mind: fault-tolerance, infinite scalability, and high-throughput ingestion of data with varying shapes and sizes.</span></span> <span data-ttu-id="757de-174">O processamento do data lake envolve um ou mais mecanismos de processamento criados com essas metas em mente e pode operar em dados armazenados em um data lake em escala.</span><span class="sxs-lookup"><span data-stu-id="757de-174">Data lake processing involves one or more processing engines built with these goals in mind, and can operate on data stored in a data lake at scale.</span></span>

<span data-ttu-id="757de-175">Os data lake stores costumam ser usados em cenários de streaming de eventos ou de IoT, porque eles persistir grandes quantidades de dados relacionais e não relacionais sem transformação nem definição de esquema.</span><span class="sxs-lookup"><span data-stu-id="757de-175">Data lake stores are often used in event streaming or IoT scenarios, because they can persist large amounts of relational and nonrelational data without transformation or schema definition.</span></span> <span data-ttu-id="757de-176">Eles foram criados para lidar com grandes volumes de pequenas gravações em baixa latência e são otimizados para alta taxa de transferência.</span><span class="sxs-lookup"><span data-stu-id="757de-176">They are built to handle high volumes of small writes at low latency, and are optimized for massive throughput.</span></span>

<span data-ttu-id="757de-177">Outro termo geralmente usado em cenários de dados é _data mart_.</span><span class="sxs-lookup"><span data-stu-id="757de-177">Another term commonly used in data scenarios is _data mart_.</span></span> <span data-ttu-id="757de-178">Normalmente, um data mart é um repositório de dados que são limpos, empacotados e estruturados para fácil consumo.</span><span class="sxs-lookup"><span data-stu-id="757de-178">Typically, a data mart is a store of data that is cleansed, packaged, and structured for easy consumption.</span></span> <span data-ttu-id="757de-179">Ao contrário de um data mart, um data lake é projetado para ingerir dados brutos, deixando-os em sua forma original ou menos processada para permitir que perguntas sejam feitas de várias maneiras e em vários momentos.</span><span class="sxs-lookup"><span data-stu-id="757de-179">Unlike a data mart, a data lake is designed to ingest raw data, leaving it in its original or least-processed form to allow questions to be asked in various ways and at various times.</span></span> <span data-ttu-id="757de-180">Se os dados são limpos e estruturados de uma forma específica, como em um data mart, é difícil adaptar como os dados são processados e analisados quando novas perguntas ou ferramentas surgem no futuro.</span><span class="sxs-lookup"><span data-stu-id="757de-180">If the data is cleansed and structured in a specific way, like in a data mart, then it is difficult to adapt how the data is processed and analyzed when new questions or tools come about in the future.</span></span> <span data-ttu-id="757de-181">É por isso que um data lake é composto por armazenamento e processamento como entidades separadas.</span><span class="sxs-lookup"><span data-stu-id="757de-181">This is why a data lake is composed of both storage and processing as separate entities.</span></span>

<span data-ttu-id="757de-182">Serviço do Azure relevante:</span><span class="sxs-lookup"><span data-stu-id="757de-182">Relevant Azure service:</span></span>
- [<span data-ttu-id="757de-183">Azure Data Lake</span><span class="sxs-lookup"><span data-stu-id="757de-183">Azure Data Lake</span></span>](https://azure.microsoft.com/scenarios/data-lake/)

## <a name="lambda-architecture"></a><span data-ttu-id="757de-184">Arquitetura lambda</span><span class="sxs-lookup"><span data-stu-id="757de-184">Lambda architecture</span></span>

<span data-ttu-id="757de-185">Ao trabalhar com conjuntos de dados muito grandes, pode levar muito tempo para executar a classificação de consultas de que os clientes precisam.</span><span class="sxs-lookup"><span data-stu-id="757de-185">When working with very large data sets, it can take a long time to run the sort of queries that clients need.</span></span> <span data-ttu-id="757de-186">Essas consultas não podem ser executadas em tempo real e geralmente exigem algoritmos como [MapReduce](https://en.wikipedia.org/wiki/MapReduce), que operam em paralelo em todo o conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="757de-186">These queries can't be performed in real time, and often require algorithms such as [MapReduce](https://en.wikipedia.org/wiki/MapReduce) that operate in parallel across the entire data set.</span></span> <span data-ttu-id="757de-187">Os resultados são então armazenados separadamente dos dados brutos e usados para consulta.</span><span class="sxs-lookup"><span data-stu-id="757de-187">The results are then stored separately from the raw data and used for querying.</span></span>

<span data-ttu-id="757de-188">Uma desvantagem dessa abordagem é que ela introduz latência &mdash; se o processamento levar algumas horas, uma consulta poderá retornar resultados de várias horas atrás.</span><span class="sxs-lookup"><span data-stu-id="757de-188">One drawback to this approach is that it introduces latency &mdash; if processing takes a few hours, a query may return results that are several hours old.</span></span> <span data-ttu-id="757de-189">O ideal é que você obtenha alguns resultados em tempo real (talvez com alguma perda de precisão) e combine esses resultados com os resultados da análise de lote.</span><span class="sxs-lookup"><span data-stu-id="757de-189">Ideally, you would like to get some results in real time (perhaps with some loss of accuracy), and combine these results with the results from the batch analytics.</span></span>

<span data-ttu-id="757de-190">A **arquitetura lambda**, primeiramente proposta por Nathan Marz, resolve esse problema criando dois caminhos para o fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="757de-190">The **lambda architecture**, first proposed by Nathan Marz, addresses this problem by creating two paths for data flow.</span></span> <span data-ttu-id="757de-191">Todos os dados recebidos pelo sistema passam por esses dois caminhos:</span><span class="sxs-lookup"><span data-stu-id="757de-191">All data coming into the system goes through these two paths:</span></span>

* <span data-ttu-id="757de-192">Uma **camada de lote** (caminho frio) armazena todos os dados de entrada em sua forma bruta e executa o processamento em lotes nos dados.</span><span class="sxs-lookup"><span data-stu-id="757de-192">A **batch layer** (cold path) stores all of the incoming data in its raw form and performs batch processing on the data.</span></span> <span data-ttu-id="757de-193">O resultado desse processamento é armazenado como uma **exibição de lote**.</span><span class="sxs-lookup"><span data-stu-id="757de-193">The result of this processing is stored as a **batch view**.</span></span>

* <span data-ttu-id="757de-194">Uma **camada de velocidade** (caminho quente) analisa os dados em tempo real.</span><span class="sxs-lookup"><span data-stu-id="757de-194">A **speed layer** (hot path) analyzes data in real time.</span></span> <span data-ttu-id="757de-195">Essa camada foi projetada para baixa latência, em detrimento da precisão.</span><span class="sxs-lookup"><span data-stu-id="757de-195">This layer is designed for low latency, at the expense of accuracy.</span></span>

<span data-ttu-id="757de-196">A camada de lote alimenta uma **camada de serviço** que indexa a exibição de lote para uma consulta eficiente.</span><span class="sxs-lookup"><span data-stu-id="757de-196">The batch layer feeds into a **serving layer** that indexes the batch view for efficient querying.</span></span> <span data-ttu-id="757de-197">A camada de velocidade atualiza a camada de serviço com atualizações incrementais de acordo com os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="757de-197">The speed layer updates the serving layer with incremental updates based on the most recent data.</span></span>

![Diagrama da arquitetura lambda](./images/lambda.png)

<span data-ttu-id="757de-199">Os dados que fluem para o caminho quente são restritos por requisitos de latência impostos pela camada de velocidade, de modo que ela possa ser processada o mais rapidamente possível.</span><span class="sxs-lookup"><span data-stu-id="757de-199">Data that flows into the hot path is constrained by latency requirements imposed by the speed layer, so that it can be processed as quickly as possible.</span></span> <span data-ttu-id="757de-200">Geralmente, isso exige uma desvantagem de algum nível de precisão em favor dos dados que estão prontos o mais rapidamente possível.</span><span class="sxs-lookup"><span data-stu-id="757de-200">Often, this requires a tradeoff of some level of accuracy in favor of data that is ready as quickly as possible.</span></span> <span data-ttu-id="757de-201">Por exemplo, considere um cenário de IoT em que um grande número de sensores de temperatura envia dados telemétricos.</span><span class="sxs-lookup"><span data-stu-id="757de-201">For example, consider an IoT scenario where a large number of temperature sensors are sending telemetry data.</span></span> <span data-ttu-id="757de-202">A camada de velocidade pode ser usada para processar uma janela de tempo deslizante dos dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="757de-202">The speed layer may be used to process a sliding time window of the incoming data.</span></span> 

<span data-ttu-id="757de-203">Os dados que fluem para o caminho frio, por outro lado, não estão sujeitos aos mesmos requisitos de baixa latência.</span><span class="sxs-lookup"><span data-stu-id="757de-203">Data flowing into the cold path, on the other hand, is not subject to the same low latency requirements.</span></span> <span data-ttu-id="757de-204">Isso permite uma computação de alta precisão em conjuntos de dados grandes, o que pode ser muito demorado.</span><span class="sxs-lookup"><span data-stu-id="757de-204">This allows for high accuracy computation across large data sets, which can be very time intensive.</span></span> 

<span data-ttu-id="757de-205">Em última análise, os caminhos quente e frio convergem no aplicativo cliente de análise.</span><span class="sxs-lookup"><span data-stu-id="757de-205">Eventually, the hot and cold paths converge at the analytics client application.</span></span> <span data-ttu-id="757de-206">Se o cliente precisar exibir dados em tempo hábil, mas potencialmente menos precisos em tempo real, ele adquirirá seu resultado do caminho quente.</span><span class="sxs-lookup"><span data-stu-id="757de-206">If the client needs to display timely, yet potentially less accurate data in real time, it will acquire its result from the hot path.</span></span> <span data-ttu-id="757de-207">Caso contrário, ele selecionará resultados do caminho frio para exibir dados em menos tempo hábil, mas mais precisos.</span><span class="sxs-lookup"><span data-stu-id="757de-207">Otherwise, it will select results from the cold path to display less timely but more accurate data.</span></span> <span data-ttu-id="757de-208">Em outras palavras, o caminho quente contém dados para uma janela relativamente pequena de tempo, após o qual os resultados podem ser atualizados com os dados mais precisos do caminho frio.</span><span class="sxs-lookup"><span data-stu-id="757de-208">In other words, the hot path has data for a relatively small window of time, after which the results can be updated with more accurate data from the cold path.</span></span>

<span data-ttu-id="757de-209">Os dados brutos armazenados na camada de lote são imutáveis.</span><span class="sxs-lookup"><span data-stu-id="757de-209">The raw data stored at the batch layer is immutable.</span></span> <span data-ttu-id="757de-210">Os dados de entrada sempre são acrescentados aos dados existentes e os dados anteriores nunca são substituídos.</span><span class="sxs-lookup"><span data-stu-id="757de-210">Incoming data is always appended to the existing data, and the previous data is never overwritten.</span></span> <span data-ttu-id="757de-211">As alterações no valor de um dado específico são armazenadas como um novo registro de evento com carimbo de data/hora.</span><span class="sxs-lookup"><span data-stu-id="757de-211">Any changes to the value of a particular datum are stored as a new timestamped event record.</span></span> <span data-ttu-id="757de-212">Isso permite o recálculo em qualquer ponto no tempo no histórico dos dados coletados.</span><span class="sxs-lookup"><span data-stu-id="757de-212">This allows for recomputation at any point in time across the history of the data collected.</span></span> <span data-ttu-id="757de-213">A capacidade de recalcular a exibição de lote dos dados brutos originais é importante, pois permite que novas exibições sejam criadas conforme o sistema evolui.</span><span class="sxs-lookup"><span data-stu-id="757de-213">The ability to recompute the batch view from the original raw data is important, because it allows for new views to be created as the system evolves.</span></span> 

## <a name="kappa-architecture"></a><span data-ttu-id="757de-214">Arquitetura de kappa</span><span class="sxs-lookup"><span data-stu-id="757de-214">Kappa architecture</span></span>

<span data-ttu-id="757de-215">Uma desvantagem da arquitetura de lambda é sua complexidade.</span><span class="sxs-lookup"><span data-stu-id="757de-215">A drawback to the lambda architecture is its complexity.</span></span> <span data-ttu-id="757de-216">A lógica de processamento aparece em dois lugares diferentes &mdash; os caminhos frio e quente &mdash; usando estruturas diferentes.</span><span class="sxs-lookup"><span data-stu-id="757de-216">Processing logic appears in two different places &mdash; the cold and hot paths &mdash; using different frameworks.</span></span> <span data-ttu-id="757de-217">Isso leva a uma lógica de cálculo duplicada e a complexidade de gerenciar a arquitetura para os dois caminhos.</span><span class="sxs-lookup"><span data-stu-id="757de-217">This leads to duplicate computation logic and the complexity of managing the architecture for both paths.</span></span>

<span data-ttu-id="757de-218">A **arquitetura de kappa** foi proposta por Jay Kreps como uma alternativa à arquitetura de lambda.</span><span class="sxs-lookup"><span data-stu-id="757de-218">The **kappa architecture** was proposed by Jay Kreps as an alternative to the lambda architecture.</span></span> <span data-ttu-id="757de-219">Ela tem as mesmas metas básicas da arquitetura de lambda, mas com uma diferença importante: todos os dados fluem por um único caminho, usando um sistema de processamento de fluxo.</span><span class="sxs-lookup"><span data-stu-id="757de-219">It has the same basic goals as the lambda architecture, but with an important distinction: All data flows through a single path, using a stream processing system.</span></span> 

![Diagrama da arquitetura de kappa](./images/kappa.png)

<span data-ttu-id="757de-221">Há algumas semelhanças na camada de lote da arquitetura de lambda, em que os dados do evento são imutáveis e todos eles são coletados, em vez de um subconjunto.</span><span class="sxs-lookup"><span data-stu-id="757de-221">There are some similarities to the lambda architecture's batch layer, in that the event data is immutable and all of it is collected, instead of a subset.</span></span> <span data-ttu-id="757de-222">Os dados são ingeridos como um fluxo de eventos em um log unificado distribuído e tolerante a falhas.</span><span class="sxs-lookup"><span data-stu-id="757de-222">The data is ingested as a stream of events into a distributed and fault tolerant unified log.</span></span> <span data-ttu-id="757de-223">Esses eventos são ordenados e o estado atual de um evento é alterado somente por um novo evento que está sendo acrescentado.</span><span class="sxs-lookup"><span data-stu-id="757de-223">These events are ordered, and the current state of an event is changed only by a new event being appended.</span></span> <span data-ttu-id="757de-224">Semelhante à camada de velocidade da arquitetura de uma lambda, todo o processamento de eventos é feito no fluxo de entrada e persistido como uma exibição em tempo real.</span><span class="sxs-lookup"><span data-stu-id="757de-224">Similar to a lambda architecture's speed layer, all event processing is performed on the input stream and persisted as a real-time view.</span></span> 

<span data-ttu-id="757de-225">Se você precisar recalcular todo o conjunto de dados (equivalente ao que a camada de lote faz no lambda), basta reproduzir o fluxo, normalmente usando o paralelismo para concluir o cálculo em tempo hábil.</span><span class="sxs-lookup"><span data-stu-id="757de-225">If you need to recompute the entire data set (equivalent to what the batch layer does in lambda), you simply replay the stream, typically using parallelism to complete the computation in a timely fashion.</span></span>

## <a name="internet-of-things-iot"></a><span data-ttu-id="757de-226">Internet das coisas (IoT)</span><span class="sxs-lookup"><span data-stu-id="757de-226">Internet of Things (IoT)</span></span>

<span data-ttu-id="757de-227">Do ponto de vista prático, a IoT (Internet das Coisas) representa qualquer dispositivo conectado à Internet.</span><span class="sxs-lookup"><span data-stu-id="757de-227">From a practical viewpoint, Internet of Things (IoT) represents any device that is connected to the Internet.</span></span> <span data-ttu-id="757de-228">Isso inclui seu computador, telefone celular, relógio inteligente, termostato inteligente, refrigerador inteligente, automóvel conectado, implantes de monitoramento cardíaco e qualquer outra coisa que se conecta à Internet e envia ou recebe dados.</span><span class="sxs-lookup"><span data-stu-id="757de-228">This includes your PC, mobile phone, smart watch, smart thermostat, smart refrigerator, connected automobile, heart monitoring implants, and anything else that connects to the Internet and sends or receives data.</span></span> <span data-ttu-id="757de-229">O número de dispositivos conectados cresce diariamente, assim como a quantidade de dados coletados deles.</span><span class="sxs-lookup"><span data-stu-id="757de-229">The number of connected devices grows every day, as does the amount of data collected from them.</span></span> <span data-ttu-id="757de-230">Em geral, esses dados são coletados em ambientes altamente restritos, às vezes, de alta latência.</span><span class="sxs-lookup"><span data-stu-id="757de-230">Often this data is being collected in highly constrained, sometimes high-latency environments.</span></span> <span data-ttu-id="757de-231">Em outros casos, os dados são enviados de ambientes de baixa latência por milhares ou milhões de dispositivos, que necessitam da capacidade de ingerir os dados rapidamente e processá-lo de forma adequada.</span><span class="sxs-lookup"><span data-stu-id="757de-231">In other cases, data is sent from low-latency environments by thousands or millions of devices, requiring the ability to rapidly ingest the data and process accordingly.</span></span> <span data-ttu-id="757de-232">Portanto, um planejamento adequado é necessário para lidar com essas restrições e esses requisitos exclusivos.</span><span class="sxs-lookup"><span data-stu-id="757de-232">Therefore, proper planning is required to handle these constraints and unique requirements.</span></span>

<span data-ttu-id="757de-233">Arquiteturas orientadas por eventos são essenciais para soluções de IoT.</span><span class="sxs-lookup"><span data-stu-id="757de-233">Event-driven architectures are central to IoT solutions.</span></span> <span data-ttu-id="757de-234">O diagrama a seguir mostra uma possível arquitetura lógica de IoT.</span><span class="sxs-lookup"><span data-stu-id="757de-234">The following diagram shows a possible logical architecture for IoT.</span></span> <span data-ttu-id="757de-235">O diagrama enfatiza os componentes da arquitetura do streaming de eventos.</span><span class="sxs-lookup"><span data-stu-id="757de-235">The diagram emphasizes the event-streaming components of the architecture.</span></span>

![Arquitetura do IoT](../../guide/architecture-styles/images/iot.png)

<span data-ttu-id="757de-237">O **gateway de nuvem** consome eventos de dispositivo no limite da nuvem, usando um sistema de mensagens de latência baixa e confiável.</span><span class="sxs-lookup"><span data-stu-id="757de-237">The **cloud gateway** ingests device events at the cloud boundary, using a reliable, low latency messaging system.</span></span>

<span data-ttu-id="757de-238">Os dispositivos podem enviar eventos diretamente para o gateway de nuvem, ou por meio de um **gateway de campo**.</span><span class="sxs-lookup"><span data-stu-id="757de-238">Devices might send events directly to the cloud gateway, or through a **field gateway**.</span></span> <span data-ttu-id="757de-239">Um gateway de campo é um software ou dispositivo especializado, geralmente colocado com os dispositivos, que recebe eventos e os encaminha para o gateway de nuvem.</span><span class="sxs-lookup"><span data-stu-id="757de-239">A field gateway is a specialized device or software, usually collocated with the devices, that receives events and forwards them to the cloud gateway.</span></span> <span data-ttu-id="757de-240">O gateway de campo também pode pré-processar os eventos de dispositivo brutos executando funções, como filtragem, agregação ou transformação de protocolo.</span><span class="sxs-lookup"><span data-stu-id="757de-240">The field gateway might also preprocess the raw device events, performing functions such as filtering, aggregation, or protocol transformation.</span></span>

<span data-ttu-id="757de-241">Após a ingestão, os eventos passam por um ou mais **processadores de fluxo** que podem encaminhar os dados (por exemplo, para armazenamento) ou executar análise e outros tipos de processamento.</span><span class="sxs-lookup"><span data-stu-id="757de-241">After ingestion, events go through one or more **stream processors** that can route the data (for example, to storage) or perform analytics and other processing.</span></span>

<span data-ttu-id="757de-242">A seguir estão alguns tipos comuns de processamento.</span><span class="sxs-lookup"><span data-stu-id="757de-242">The following are some common types of processing.</span></span> <span data-ttu-id="757de-243">(Esta lista certamente não é exaustiva.)</span><span class="sxs-lookup"><span data-stu-id="757de-243">(This list is certainly not exhaustive.)</span></span>

- <span data-ttu-id="757de-244">Gravando os dados de evento para armazenamento menos acessado, para arquivamento ou análise de processo em lote.</span><span class="sxs-lookup"><span data-stu-id="757de-244">Writing event data to cold storage, for archiving or batch analytics.</span></span>

- <span data-ttu-id="757de-245">Análise de caminho mais acessado, analisando o fluxo de eventos (quase) em tempo real, para detectar anomalias, reconhecer padrões em janelas de tempo ou disparar alertas quando ocorre uma condição específica no fluxo.</span><span class="sxs-lookup"><span data-stu-id="757de-245">Hot path analytics, analyzing the event stream in (near) real time, to detect anomalies, recognize patterns over rolling time windows, or trigger alerts when a specific condition occurs in the stream.</span></span> 

- <span data-ttu-id="757de-246">Tratamento de tipos especiais de mensagens que não são de telemetria de dispositivos, como notificações e alarmes.</span><span class="sxs-lookup"><span data-stu-id="757de-246">Handling special types of nontelemetry messages from devices, such as notifications and alarms.</span></span> 

- <span data-ttu-id="757de-247">Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="757de-247">Machine learning.</span></span>

<span data-ttu-id="757de-248">As caixas destacadas em cinza mostram os componentes de um sistema de IoT que não estão diretamente relacionadas ao streaming de evento, mas são incluídos aqui para fins de integridade.</span><span class="sxs-lookup"><span data-stu-id="757de-248">The boxes that are shaded gray show components of an IoT system that are not directly related to event streaming, but are included here for completeness.</span></span>

- <span data-ttu-id="757de-249">O **registro do dispositivo** é um banco de dados dos dispositivos provisionados, incluindo os IDs de dispositivo e metadados do dispositivo, como localização.</span><span class="sxs-lookup"><span data-stu-id="757de-249">The **device registry** is a database of the provisioned devices, including the device IDs and usually device metadata, such as location.</span></span>

- <span data-ttu-id="757de-250">A **API de provisionamento** é uma interface externa comum para provisionar e registrar dispositivos novos.</span><span class="sxs-lookup"><span data-stu-id="757de-250">The **provisioning API** is a common external interface for provisioning and registering new devices.</span></span>

- <span data-ttu-id="757de-251">Algumas soluções IoT permitem que **mensagens de comando e controle** sejam enviadas aos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="757de-251">Some IoT solutions allow **command and control messages** to be sent to devices.</span></span>

<span data-ttu-id="757de-252">Serviços do Azure relevantes:</span><span class="sxs-lookup"><span data-stu-id="757de-252">Relevant Azure services:</span></span>

- [<span data-ttu-id="757de-253">Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="757de-253">Azure IoT Hub</span></span>](https://azure.microsoft.com/services/iot-hub/)
- [<span data-ttu-id="757de-254">Hubs de eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="757de-254">Azure Event Hubs</span></span>](https://azure.microsoft.com/services/event-hubs/)
- [<span data-ttu-id="757de-255">Stream Analytics do Azure</span><span class="sxs-lookup"><span data-stu-id="757de-255">Azure Stream Analytics</span></span>](https://azure.microsoft.com/services/stream-analytics/)  

<span data-ttu-id="757de-256">Saiba mais sobre o IoT no Azure lendo a [arquitetura de referência do IoT do Azure](https://azure.microsoft.com/updates/microsoft-azure-iot-reference-architecture-available/).</span><span class="sxs-lookup"><span data-stu-id="757de-256">Learn more about IoT on Azure by reading the [Azure IoT reference architecture](https://azure.microsoft.com/updates/microsoft-azure-iot-reference-architecture-available/).</span></span>



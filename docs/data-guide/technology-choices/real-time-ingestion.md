---
title: "Escolhendo uma tecnologia de ingestão de mensagens em tempo real"
description: 
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: 2e6578b779950b5ef11bda7b8ba1fb2e45e09f4e
ms.sourcegitcommit: 3d9ee03e2dda23753661a80c7106d1789f5223bb
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/23/2018
---
# <a name="choosing-a-real-time-message-ingestion-technology-in-azure"></a><span data-ttu-id="f2fa0-102">Escolhendo uma tecnologia de ingestão de mensagens em tempo real no Azure</span><span class="sxs-lookup"><span data-stu-id="f2fa0-102">Choosing a real-time message ingestion technology in Azure</span></span>

<span data-ttu-id="f2fa0-103">O processamento em tempo real lida com fluxos de dados que são capturados em tempo real e processados com latência mínima.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-103">Real time processing deals with streams of data that are captured in real-time and processed with minimal latency.</span></span> <span data-ttu-id="f2fa0-104">Muitas soluções de processamento em tempo real precisam de um repositório de ingestão de mensagens para atuar como buffer de mensagens e dar suporte a processamento de expansão, entrega confiável e outras semânticas de enfileiramento de mensagem.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-104">Many real-time processing solutions need a message ingestion store to act as a buffer for messages, and to support scale-out processing, reliable delivery, and other message queuing semantics.</span></span> 

## <a name="what-are-your-options-for-real-time-message-ingestion"></a><span data-ttu-id="f2fa0-105">Quais são as opções disponíveis para ingestão de mensagens em tempo real?</span><span class="sxs-lookup"><span data-stu-id="f2fa0-105">What are your options for real-time message ingestion?</span></span>

- [<span data-ttu-id="f2fa0-106">Hubs de eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="f2fa0-106">Azure Event Hubs</span></span>](/azure/event-hubs/)
- [<span data-ttu-id="f2fa0-107">Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="f2fa0-107">Azure IoT Hub</span></span>](/azure/iot-hub/)
- [<span data-ttu-id="f2fa0-108">Kafka no HDInsight</span><span class="sxs-lookup"><span data-stu-id="f2fa0-108">Kafka on HDInsight</span></span>](/azure/hdinsight/kafka/apache-kafka-get-started)

## <a name="azure-event-hubs"></a><span data-ttu-id="f2fa0-109">Hubs de eventos do Azure</span><span class="sxs-lookup"><span data-stu-id="f2fa0-109">Azure Event Hubs</span></span>

<span data-ttu-id="f2fa0-110">Os [Hubs de Eventos do Azure](/azure/event-hubs/) são um plataforma de streaming de dados altamente escalonável e um serviço de ingestão de dados capaz de receber e processar milhões de eventos por segundo.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-110">[Azure Event Hubs](/azure/event-hubs/) is a highly scalable data streaming platform and event ingestion service, capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="f2fa0-111">Os Hubs de Eventos podem processar e armazenar eventos, dados ou telemetria produzidos pelos dispositivos e software distribuídos.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-111">Event Hubs can process and store events, data, or telemetry produced by distributed software and devices.</span></span> <span data-ttu-id="f2fa0-112">Os dados enviados para um Hub de Eventos podem ser transformados e armazenados usando qualquer provedor de análise em tempo real ou adaptadores de envio em lote/armazenamento.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-112">Data sent to an event hub can be transformed and stored using any real-time analytics provider or batching/storage adapters.</span></span> <span data-ttu-id="f2fa0-113">Os Hubs de Eventos oferecem funcionalidades de publicação/assinatura com baixa latência em grande escala, o que é apropriado para cenários de Big Data.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-113">Event Hubs provides publish-subscribe capabilities with low latency at massive scale, which makes it appropriate for big data scenarios.</span></span>

## <a name="azure-iot-hub"></a><span data-ttu-id="f2fa0-114">Hub IoT do Azure</span><span class="sxs-lookup"><span data-stu-id="f2fa0-114">Azure IoT Hub</span></span>

<span data-ttu-id="f2fa0-115">O [Hub IoT do Azure](/azure/iot-hub/) é um serviço gerenciado que permite uma comunicação bidirecional confiável e segura entre milhões de dispositivos IoT e um back-end baseado em nuvem.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-115">[Azure IoT Hub](/azure/iot-hub/) is a managed service that enables reliable and secure bidirectional communications between millions of IoT devices and a cloud-based back end.</span></span>

<span data-ttu-id="f2fa0-116">O recurso de Hub IoT inclui:</span><span class="sxs-lookup"><span data-stu-id="f2fa0-116">Feature of IoT Hub include:</span></span>

* <span data-ttu-id="f2fa0-117">Várias opções de comunicação do dispositivo para a nuvem e da nuvem para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-117">Multiple options for device-to-cloud and cloud-to-device communication.</span></span> <span data-ttu-id="f2fa0-118">Essas opções incluem mensagens unidirecionais, transferência de arquivos e métodos de solicitação-resposta.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-118">These options include one-way messaging, file transfer, and request-reply methods.</span></span>
* <span data-ttu-id="f2fa0-119">Roteamento de mensagens para outros serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-119">Message routing to other Azure services.</span></span>
* <span data-ttu-id="f2fa0-120">Repositório consultável de metadados de dispositivo e informações de estado sincronizado.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-120">Queryable store for device metadata and synchronized state information.</span></span>
* <span data-ttu-id="f2fa0-121">Comunicação segura e controle de acesso usando chaves de segurança por dispositivo ou certificados X.509.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-121">Scure communications and access control using per-device security keys or X.509 certificates.</span></span>
* <span data-ttu-id="f2fa0-122">Monitoramento de conectividade do dispositivo e eventos de gerenciamento de identidade do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-122">Monitoring of device connectivity and device identity management events.</span></span>

<span data-ttu-id="f2fa0-123">Em termos de ingestão de mensagens, o Hub IoT é semelhante aos Hubs de Eventos.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-123">In terms of message ingestion, IoT Hub is similar to Event Hubs.</span></span> <span data-ttu-id="f2fa0-124">No entanto, ele foi especificamente projetado para o gerenciamento de conectividade do dispositivo IoT, não apenas para a ingestão de mensagens.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-124">However, it was specifically designed for managing IoT device connectivity, not just message ingestion.</span></span> <span data-ttu-id="f2fa0-125">Para obter mais informações, consulte [Comparação entre o Hub IoT do Azure e os Hubs de Eventos do Azure](/azure/iot-hub/iot-hub-compare-event-hubs).</span><span class="sxs-lookup"><span data-stu-id="f2fa0-125">For more information, see [Comparison of Azure IoT Hub and Azure Event Hubs](/azure/iot-hub/iot-hub-compare-event-hubs).</span></span> 

## <a name="kafka-on-hdinsight"></a><span data-ttu-id="f2fa0-126">Kafka no HDInsight</span><span class="sxs-lookup"><span data-stu-id="f2fa0-126">Kafka on HDInsight</span></span>

<span data-ttu-id="f2fa0-127">O [Apache Kafka](https://kafka.apache.org/) é uma plataforma de streaming distribuída de software livre que pode ser usada para criar pipelines de dados e aplicativos de streaming em tempo real.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-127">[Apache Kafka](https://kafka.apache.org/) is an open-source distributed streaming platform that can be used to build real-time data pipelines and streaming applications.</span></span> <span data-ttu-id="f2fa0-128">O Kafka também fornece funcionalidade de agente de mensagem semelhante a uma fila de mensagens, onde você pode publicar e assinar os fluxos de dados nomeados.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-128">Kafka also provides message broker functionality similar to a message queue, where you can publish and subscribe to named data streams.</span></span> <span data-ttu-id="f2fa0-129">É horizontalmente escalonável, tolerante a falhas e extremamente rápido.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-129">It is horizontally scalable, fault-tolerant, and extremely fast.</span></span> <span data-ttu-id="f2fa0-130">O [Kafka no HDInsight](/azure/hdinsight/kafka/apache-kafka-get-started) fornece um Kafka como um serviço gerenciado, altamente escalonável e altamente disponível no Azure.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-130">[Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-get-started) provides a Kafka as a managed, highly scalable, and highly available service in Azure.</span></span> 

<span data-ttu-id="f2fa0-131">Alguns casos de uso comuns do Kafka são:</span><span class="sxs-lookup"><span data-stu-id="f2fa0-131">Some common use cases for Kafka are:</span></span>

* <span data-ttu-id="f2fa0-132">**Mensagens**.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-132">**Messaging**.</span></span> <span data-ttu-id="f2fa0-133">Como ele dá suporte ao padrão de mensagem de publicação/assinatura, o Kafka geralmente é usado como um agente de mensagem.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-133">Because it supports the publish-subscribe message pattern, Kafka is often used as a message broker.</span></span>
* <span data-ttu-id="f2fa0-134">**Acompanhamento de atividade**.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-134">**Activity tracking**.</span></span> <span data-ttu-id="f2fa0-135">Como o Kafka fornece log na ordem de registros, ele pode ser usado para acompanhar e recriar atividades, como ações de usuário em um site da Web.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-135">Because Kafka provides in-order logging of records, it can be used to track and re-create activities, such as user actions on a web site.</span></span>
* <span data-ttu-id="f2fa0-136">**Agregação**.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-136">**Aggregation**.</span></span> <span data-ttu-id="f2fa0-137">Usando o processamento de fluxo, você pode agregar informações de fluxos diferentes para combinar e centralizar as informações em dados operacionais.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-137">Using stream processing, you can aggregate information from different streams to combine and centralize the information into operational data.</span></span>
* <span data-ttu-id="f2fa0-138">**Transformação**.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-138">**Transformation**.</span></span> <span data-ttu-id="f2fa0-139">Usando o processamento de fluxo, você pode combinar e enriquecer dados de vários tópicos de entrada em um ou mais tópicos de saída.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-139">Using stream processing, you can combine and enrich data from multiple input topics into one or more output topics.</span></span>

## <a name="key-selection-criteria"></a><span data-ttu-id="f2fa0-140">Principais critérios de seleção</span><span class="sxs-lookup"><span data-stu-id="f2fa0-140">Key selection criteria</span></span>

<span data-ttu-id="f2fa0-141">Para restringir as opções, comece respondendo a estas perguntas:</span><span class="sxs-lookup"><span data-stu-id="f2fa0-141">To narrow the choices, start by answering these questions:</span></span>

- <span data-ttu-id="f2fa0-142">Você precisa de uma comunicação bidirecional entre seus dispositivos IoT e o Azure?</span><span class="sxs-lookup"><span data-stu-id="f2fa0-142">Do you need two-way communication between your IoT devices and Azure?</span></span> <span data-ttu-id="f2fa0-143">Nesse caso, escolha o Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-143">If so, choose IoT Hub.</span></span>

- <span data-ttu-id="f2fa0-144">Você precisa gerenciar o acesso de dispositivos individuais e ter a capacidade de revogar o acesso a um dispositivo específico?</span><span class="sxs-lookup"><span data-stu-id="f2fa0-144">Do you need to manage access for individual devices and be able to revoke access to a specific device?</span></span> <span data-ttu-id="f2fa0-145">Nesse caso, escolha o Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-145">If yes, choose IoT Hub.</span></span>

## <a name="capability-matrix"></a><span data-ttu-id="f2fa0-146">Matriz de funcionalidades</span><span class="sxs-lookup"><span data-stu-id="f2fa0-146">Capability matrix</span></span>

<span data-ttu-id="f2fa0-147">As tabelas a seguir resumem as principais diferenças em funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-147">The following tables summarize the key differences in capabilities.</span></span> 

| | <span data-ttu-id="f2fa0-148">Hub IoT</span><span class="sxs-lookup"><span data-stu-id="f2fa0-148">IoT Hub</span></span> | <span data-ttu-id="f2fa0-149">Hubs de evento</span><span class="sxs-lookup"><span data-stu-id="f2fa0-149">Event Hubs</span></span> | <span data-ttu-id="f2fa0-150">Kafka no HDInsight</span><span class="sxs-lookup"><span data-stu-id="f2fa0-150">Kafka on HDInsight</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f2fa0-151">Comunicações da nuvem para o dispositivo</span><span class="sxs-lookup"><span data-stu-id="f2fa0-151">Cloud-to-device communications</span></span> | <span data-ttu-id="f2fa0-152">sim</span><span class="sxs-lookup"><span data-stu-id="f2fa0-152">Yes</span></span> | <span data-ttu-id="f2fa0-153">Não</span><span class="sxs-lookup"><span data-stu-id="f2fa0-153">No</span></span> | <span data-ttu-id="f2fa0-154">Não </span><span class="sxs-lookup"><span data-stu-id="f2fa0-154">No</span></span> |
| <span data-ttu-id="f2fa0-155">Upload de arquivo iniciado pelo dispositivo</span><span class="sxs-lookup"><span data-stu-id="f2fa0-155">Device-initiated file upload</span></span> | <span data-ttu-id="f2fa0-156">sim</span><span class="sxs-lookup"><span data-stu-id="f2fa0-156">Yes</span></span> | <span data-ttu-id="f2fa0-157">Não</span><span class="sxs-lookup"><span data-stu-id="f2fa0-157">No</span></span> | <span data-ttu-id="f2fa0-158">Não </span><span class="sxs-lookup"><span data-stu-id="f2fa0-158">No</span></span> |
| <span data-ttu-id="f2fa0-159">Informações de estado do dispositivo</span><span class="sxs-lookup"><span data-stu-id="f2fa0-159">Device state information</span></span> | [<span data-ttu-id="f2fa0-160">Dispositivos gêmeos</span><span class="sxs-lookup"><span data-stu-id="f2fa0-160">Device twins</span></span>](/azure/iot-hub/iot-hub-devguide-device-twins) | <span data-ttu-id="f2fa0-161">Não </span><span class="sxs-lookup"><span data-stu-id="f2fa0-161">No</span></span> | <span data-ttu-id="f2fa0-162">Não </span><span class="sxs-lookup"><span data-stu-id="f2fa0-162">No</span></span> |
| <span data-ttu-id="f2fa0-163">Suporte a protocolo</span><span class="sxs-lookup"><span data-stu-id="f2fa0-163">Protocol support</span></span> | <span data-ttu-id="f2fa0-164">MQTT, AMQP, HTTPS <sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f2fa0-164">MQTT, AMQP, HTTPS <sup>1</sup></span></span> | <span data-ttu-id="f2fa0-165">AMQP, HTTPS</span><span class="sxs-lookup"><span data-stu-id="f2fa0-165">AMQP, HTTPS</span></span> | [<span data-ttu-id="f2fa0-166">Protocolo do Kafka</span><span class="sxs-lookup"><span data-stu-id="f2fa0-166">Kafka Protocol</span></span>](https://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol) |
| <span data-ttu-id="f2fa0-167">Segurança</span><span class="sxs-lookup"><span data-stu-id="f2fa0-167">Security</span></span> | <span data-ttu-id="f2fa0-168">Identidade por dispositivo; controle de acesso revogável.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-168">Per-device identity; revocable access control.</span></span> | <span data-ttu-id="f2fa0-169">Políticas de acesso compartilhado; revogação limitada por meio de políticas do publicador.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-169">Shared access policies; limited revocation through publisher policies.</span></span> | <span data-ttu-id="f2fa0-170">Autenticação com SASL; autorização conectável; integração com serviços de autenticação externa compatíveis.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-170">Authentication using SASL; pluggable authorization; integration with external authentication services supported.</span></span> |

<span data-ttu-id="f2fa0-171">[1] Também use o [gateway de protocolo IoT do Azure](/azure/iot-hub/iot-hub-protocol-gateway) como um gateway personalizado para habilitar a adaptação de protocolo para o Hub IoT.</span><span class="sxs-lookup"><span data-stu-id="f2fa0-171">[1] You can also use [Azure IoT protocol gateway](/azure/iot-hub/iot-hub-protocol-gateway) as a custom gateway to enable protocol adaptation for IoT Hub.</span></span>

<span data-ttu-id="f2fa0-172">Para obter mais informações, consulte [Comparação entre o Hub IoT do Azure e os Hubs de Eventos do Azure](/azure/iot-hub/iot-hub-compare-event-hubs).</span><span class="sxs-lookup"><span data-stu-id="f2fa0-172">For more information, see [Comparison of Azure IoT Hub and Azure Event Hubs](/azure/iot-hub/iot-hub-compare-event-hubs).</span></span>

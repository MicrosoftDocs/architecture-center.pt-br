---
title: Processando arquivos CSV e JSON
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.openlocfilehash: 52de5207a5169d2f2a7f701fbc078fb422e61e13
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54486532"
---
# <a name="working-with-csv-and-json-files-for-data-solutions"></a><span data-ttu-id="adb44-102">Trabalhando com arquivos CSV e JSON para soluções de dados</span><span class="sxs-lookup"><span data-stu-id="adb44-102">Working with CSV and JSON files for data solutions</span></span>

<span data-ttu-id="adb44-103">Provavelmente, CSV e JSON são os formatos mais comuns usados para ingestão, troca e armazenamento de dados não estruturados ou semiestruturados.</span><span class="sxs-lookup"><span data-stu-id="adb44-103">CSV and JSON are likely the most common formats used for ingesting, exchanging, and storing unstructured or semi-structured data.</span></span>

## <a name="about-csv-format"></a><span data-ttu-id="adb44-104">Sobre o formato CSV</span><span class="sxs-lookup"><span data-stu-id="adb44-104">About CSV format</span></span>

<span data-ttu-id="adb44-105">Os arquivos CSV (valores separados por vírgula) são geralmente usados para troca de dados de tabela entre sistemas em texto sem formatação.</span><span class="sxs-lookup"><span data-stu-id="adb44-105">CSV (comma-separated values) files are commonly used to exchange tabular data between systems in plain text.</span></span> <span data-ttu-id="adb44-106">Eles normalmente contêm uma linha de cabeçalho que fornece nomes de coluna para os dados, mas de outra forma, são considerados semiestruturados.</span><span class="sxs-lookup"><span data-stu-id="adb44-106">They typically contain a header row that provides column names for the data, but are otherwise considered semi-structured.</span></span> <span data-ttu-id="adb44-107">Isso é devido ao fato de que os CSVs não podem representar dados hierárquicos ou relacionais naturalmente.</span><span class="sxs-lookup"><span data-stu-id="adb44-107">This is due to the fact that CSVs cannot naturally represent hierarchical or relational data.</span></span> <span data-ttu-id="adb44-108">As relações de dados costumam ser manipuladas com vários arquivos CSV, em que as chaves estrangeiras são armazenadas em colunas de um ou mais arquivos, mas as relações entre esses arquivos não são expressas no próprio formato.</span><span class="sxs-lookup"><span data-stu-id="adb44-108">Data relationships are typically handled with multiple CSV files, where foreign keys are stored in columns of one or more files, but the relationships between those files are not expressed by the format itself.</span></span> <span data-ttu-id="adb44-109">Arquivos no formato CSV podem usar outros delimitadores além de vírgulas, como tabulações ou espaços.</span><span class="sxs-lookup"><span data-stu-id="adb44-109">Files in CSV format may use other delimiters besides commas, such as tabs or spaces.</span></span>

<span data-ttu-id="adb44-110">Apesar de suas limitações, os arquivos CSV são uma opção popular para a troca de dados, pois são compatíveis com uma ampla gama de aplicativos de negócios, de consumidor e científicos.</span><span class="sxs-lookup"><span data-stu-id="adb44-110">Despite their limitations, CSV files are a popular choice for data exchange, because they are supported by a wide range of business, consumer, and scientific applications.</span></span> <span data-ttu-id="adb44-111">Por exemplo, os programas de banco de dados e planilha podem importar e exportar arquivos CSV.</span><span class="sxs-lookup"><span data-stu-id="adb44-111">For example, database and spreadsheet programs can import and export CSV files.</span></span> <span data-ttu-id="adb44-112">Da mesma forma, a maioria dos mecanismos de processamento de dados em lote e de fluxo, como o Spark e o Hadoop, dá suporte nativo à serialização e à desserialização de arquivos formatados em CSV e oferece maneiras de aplicar um esquema no momento da leitura.</span><span class="sxs-lookup"><span data-stu-id="adb44-112">Similarly, most batch and stream data processing engines, such as Spark and Hadoop, natively support serializing and deserializing CSV-formatted files and offer ways to apply a schema on read.</span></span> <span data-ttu-id="adb44-113">Isso facilita o trabalho com os dados, oferecendo opções de consulta neles e repositório das informações em um formato de dados mais eficiente para um processamento mais rápido.</span><span class="sxs-lookup"><span data-stu-id="adb44-113">This makes it easier to work with the data, by offering options to query against it and store the information in a more efficient data format for faster processing.</span></span>

## <a name="about-json-format"></a><span data-ttu-id="adb44-114">Sobre o formato JSON</span><span class="sxs-lookup"><span data-stu-id="adb44-114">About JSON format</span></span>

<span data-ttu-id="adb44-115">Os dados JSON (JavaScript Object Notation) são representados como pares chave-valor em um formato semiestruturado.</span><span class="sxs-lookup"><span data-stu-id="adb44-115">JSON (JavaScript Object Notation) data is represented as key-value pairs in a semi-structured format.</span></span> <span data-ttu-id="adb44-116">O JSON costuma ser comparado com o XML, pois ambos podem armazenar dados em formato hierárquico, com os dados filho representados embutidos com seu pai.</span><span class="sxs-lookup"><span data-stu-id="adb44-116">JSON is often compared to XML, as both are capable of storing data in hierarchical format, with child data represented inline with its parent.</span></span> <span data-ttu-id="adb44-117">Ambos são autodescritivos e legíveis por humanos, mas os documentos JSON tendem a ser muito menores, resultando em seu uso popular na troca de dados online, especialmente com o advento de serviços Web baseados em REST.</span><span class="sxs-lookup"><span data-stu-id="adb44-117">Both are self-describing and human readable, but JSON documents tend to be much smaller, leading to their popular use in online data exchange, especially with the advent of REST-based web services.</span></span>

<span data-ttu-id="adb44-118">Os arquivos formatados em JSON apresentam várias vantagens em relação ao CSV:</span><span class="sxs-lookup"><span data-stu-id="adb44-118">JSON-formatted files have several benefits over CSV:</span></span>

- <span data-ttu-id="adb44-119">O JSON mantém estruturas hierárquicas, facilitando a retenção de dados relacionados em um único documento e a representação de relações complexas.</span><span class="sxs-lookup"><span data-stu-id="adb44-119">JSON maintains hierarchical structures, making it easier to hold related data in a single document and represent complex relationships.</span></span>
- <span data-ttu-id="adb44-120">A maioria das linguagens de programação fornece suporte nativo para desserialização de JSON em objetos ou fornece bibliotecas de serialização JSON leves.</span><span class="sxs-lookup"><span data-stu-id="adb44-120">Most programming languages provide native support for deserializing JSON into objects, or provide lightweight JSON serialization libraries.</span></span>
- <span data-ttu-id="adb44-121">O JSON dá suporte a listas de objetos, ajudando a prevenir conversões confusas de listas em um modelo de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="adb44-121">JSON supports lists of objects, helping to avoid messy translations of lists into a relational data model.</span></span>
- <span data-ttu-id="adb44-122">O JSON é um formato de arquivo geralmente usado para bancos de dados NoSQL, como o MongoDB, Couchbase e Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="adb44-122">JSON is a commonly used file format for NoSQL databases, such as MongoDB, Couchbase, and Azure Cosmos DB.</span></span>

<span data-ttu-id="adb44-123">Como muitos dados recebidos pela conexão já estão no formato JSON, a maioria das linguagens de programação baseadas na Web dá suporte ao trabalho nativo com o JSON ou por meio do uso de bibliotecas externas para serializar e desserializar dados JSON.</span><span class="sxs-lookup"><span data-stu-id="adb44-123">Since a lot of data coming across the wire is already in JSON format, most web-based programming languages support working with JSON natively, or through the use of external libraries to serialize and deserialize JSON data.</span></span> <span data-ttu-id="adb44-124">Esse suporte universal para o JSON levou a seu uso em formatos lógicos por meio de representação da estrutura de dados, formatos de troca para dados quentes e armazenamento de dados para dados frios.</span><span class="sxs-lookup"><span data-stu-id="adb44-124">This universal support for JSON has led to its use in logical formats through data structure representation, exchange formats for hot data, and data storage for cold data.</span></span>

<span data-ttu-id="adb44-125">Muitos mecanismos de processamento de dados em lote e de fluxo dão suporte nativo à serialização e à desserialização de JSON.</span><span class="sxs-lookup"><span data-stu-id="adb44-125">Many batch and stream data processing engines natively support JSON serialization and deserialization.</span></span> <span data-ttu-id="adb44-126">Embora os dados contidos em documentos JSON possam, em última análise, ser armazenados em formatos mais otimizados para o desempenho, como o Parquet ou o Avro, eles servem como os dados brutos para a fonte de verdade, o que é crítico para o reprocessamento dos dados, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="adb44-126">Though the data contained within JSON documents may ultimately be stored in a more performance-optimized formats, such as Parquet or Avro, it serves as the raw data for source of truth, which is critical for reprocessing the data as needed.</span></span>

## <a name="when-to-use-csv-or-json-formats"></a><span data-ttu-id="adb44-127">Quando usar formatos CSV ou JSON</span><span class="sxs-lookup"><span data-stu-id="adb44-127">When to use CSV or JSON formats</span></span>

<span data-ttu-id="adb44-128">CSVs costumam ser mais usados para exportação e importação de dados ou processamento de dados para análise e aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="adb44-128">CSVs are more commonly used for exporting and importing data, or processing it for analytics and machine learning.</span></span> <span data-ttu-id="adb44-129">Os arquivos formatados em JSON trazem os mesmos benefícios, mas são mais comuns em soluções de troca de dados quentes.</span><span class="sxs-lookup"><span data-stu-id="adb44-129">JSON-formatted files have the same benefits, but are more common in hot data exchange solutions.</span></span> <span data-ttu-id="adb44-130">Os documentos JSON costumam ser enviados por dispositivos da Web e móveis que executam transações online, por dispositivos de IoT (Internet das Coisas) para e comunicação unidirecional ou bidirecional ou por aplicativos cliente que se comunicam com serviços de SaaS e PaaS ou arquiteturas sem servidor.</span><span class="sxs-lookup"><span data-stu-id="adb44-130">JSON documents are often sent by web and mobile devices performing online transactions, by IoT (internet of things) devices for one-way or bidirectional communication, or by client applications communicating with SaaS and PaaS services or serverless architectures.</span></span>

<span data-ttu-id="adb44-131">Os formatos de arquivo CSV e JSON facilitam a troca de dados entre sistemas ou dispositivos diferentes.</span><span class="sxs-lookup"><span data-stu-id="adb44-131">CSV and JSON file formats both make it easy to exchange data between dissimilar systems or devices.</span></span> <span data-ttu-id="adb44-132">Os formatos semiestruturados permitem flexibilidade durante a transferência de praticamente qualquer tipo de dados e o suporte universal para esses formatos simplifica seu trabalho com eles.</span><span class="sxs-lookup"><span data-stu-id="adb44-132">Their semi-structured formats allow flexibility in transferring almost any type of data, and universal support for these formats make them simple to work with.</span></span> <span data-ttu-id="adb44-133">Ambos podem ser usados como a origem bruta de verdade nos casos em que os dados processados são armazenados em formatos binários para uma consulta mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="adb44-133">Both can be used as the raw source of truth in cases where the processed data is stored in binary formats for more efficient querying.</span></span>

## <a name="working-with-csv-and-json-data-in-azure"></a><span data-ttu-id="adb44-134">Trabalhando com os dados CSV e JSON no Azure</span><span class="sxs-lookup"><span data-stu-id="adb44-134">Working with CSV and JSON data in Azure</span></span>

<span data-ttu-id="adb44-135">O Azure fornece várias soluções para trabalhar com arquivos CSV e JSON, dependendo de suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="adb44-135">Azure provides several solutions for working with CSV and JSON files, depending on your needs.</span></span> <span data-ttu-id="adb44-136">O local principal de aterrissagem desses arquivos é o Armazenamento do Azure ou o Azure Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="adb44-136">The primary landing place for these files is either Azure Storage or Azure Data Lake Store.</span></span> <span data-ttu-id="adb44-137">A maioria dos serviços do Azure que trabalha com esses e outros arquivos baseados em texto é integrada a um desses serviços de armazenamento de objetos.</span><span class="sxs-lookup"><span data-stu-id="adb44-137">Most Azure services that work with these and other text-based files integrate with either object storage service.</span></span> <span data-ttu-id="adb44-138">No entanto, em algumas situações, você pode optar por importar os dados diretamente para o SQL do Azure ou outro armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="adb44-138">In some situations, however, you may opt to directly import the data into Azure SQL or some other data store.</span></span> <span data-ttu-id="adb44-139">O SQL Server tem suporte nativo para armazenar e trabalhar com documentos JSON, o que facilita [a importação e o processo desses tipos de arquivos](/sql/relational-databases/json/import-json-documents-into-sql-server).</span><span class="sxs-lookup"><span data-stu-id="adb44-139">SQL Server has native support for storing and working with JSON documents, which makes it easy to [import and process those types of files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span> <span data-ttu-id="adb44-140">Você pode usar um utilitário como a Importação em Massa do SQL para [importar arquivos CSV](/sql/relational-databases/json/import-json-documents-into-sql-server) com facilidade.</span><span class="sxs-lookup"><span data-stu-id="adb44-140">You can use a utility like SQL Bulk Import to easily [import CSV files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span>

<span data-ttu-id="adb44-141">Você também pode consultar os arquivos JSON diretamente do Armazenamento de Blobs do Azure sem importá-los para o SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="adb44-141">You can also query JSON files directly from Azure Blob Storage without importing them into Azure SQL.</span></span> <span data-ttu-id="adb44-142">Para obter um exemplo completo dessa abordagem, confira [Trabalhar com arquivos JSON com o SQL do Azure](https://medium.com/@mauridb/work-with-json-files-with-azure-sql-8946f066ddd4).</span><span class="sxs-lookup"><span data-stu-id="adb44-142">For a complete example of this approach, see [Work with JSON files with Azure SQL](https://medium.com/@mauridb/work-with-json-files-with-azure-sql-8946f066ddd4).</span></span> <span data-ttu-id="adb44-143">No momento, essa opção não está disponível para arquivos CSV.</span><span class="sxs-lookup"><span data-stu-id="adb44-143">Currently this option isn't available for CSV files.</span></span>

<span data-ttu-id="adb44-144">Dependendo do cenário, você pode executar o [processamento em lotes](../big-data/batch-processing.md) ou o [processamento em tempo real](../big-data/real-time-processing.md) dos dados.</span><span class="sxs-lookup"><span data-stu-id="adb44-144">Depending on the scenario, you may perform [batch processing](../big-data/batch-processing.md) or [real-time processing](../big-data/real-time-processing.md) of the data.</span></span>

## <a name="challenges"></a><span data-ttu-id="adb44-145">Desafios</span><span class="sxs-lookup"><span data-stu-id="adb44-145">Challenges</span></span>

<span data-ttu-id="adb44-146">Há alguns desafios a serem considerados ao trabalhar com esses formatos:</span><span class="sxs-lookup"><span data-stu-id="adb44-146">There are some challenges to consider when working with these formats:</span></span>

- <span data-ttu-id="adb44-147">Sem nenhuma restrição no modelo de dados, os arquivos CSV e JSON são propensos a dados corrompidos ("entrada e saída de lixo").</span><span class="sxs-lookup"><span data-stu-id="adb44-147">Without any restraints on the data model, CSV and JSON files are prone to data corruption ("garbage in, garbage out").</span></span> <span data-ttu-id="adb44-148">Por exemplo, não há nenhuma noção de um objeto de data/hora em nenhum desses arquivos, de modo que o formato de arquivo não impede que você insira "ABC123" em um campo de data, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="adb44-148">For instance, there's no notion of a date/time object in either file, so the file format does not prevent you from inserting "ABC123" in a date field, for example.</span></span>

- <span data-ttu-id="adb44-149">O uso de arquivos CSV e JSON como a solução de armazenamento frio não se adapta bem ao trabalhar com Big Data.</span><span class="sxs-lookup"><span data-stu-id="adb44-149">Using CSV and JSON files as your cold storage solution does not scale well when working with big data.</span></span> <span data-ttu-id="adb44-150">Na maioria dos casos, eles não podem ser divididos em partições para processamento paralelo e não podem ser compactados tão bem quanto formatos binários.</span><span class="sxs-lookup"><span data-stu-id="adb44-150">In most cases, they cannot be split into partitions for parallel processing, and cannot be compressed as well as binary formats.</span></span> <span data-ttu-id="adb44-151">Isso geralmente leva ao processamento e armazenamento desses dados em formatos otimizados para leitura, como o Parquet e ORC (colunar de linha otimizado), que também fornece índices e estatísticas embutidas sobre os dados contidos.</span><span class="sxs-lookup"><span data-stu-id="adb44-151">This often leads to processing and storing this data into read-optimized formats such as Parquet and ORC (optimized row columnar), which also provide indexes and inline statistics about the data contained.</span></span>

- <span data-ttu-id="adb44-152">Talvez seja necessário aplicar um esquema nos dados semiestruturados para facilitar a consulta e análise.</span><span class="sxs-lookup"><span data-stu-id="adb44-152">You may need to apply a schema on the semi-structured data to make it easier to query and analyze.</span></span> <span data-ttu-id="adb44-153">Normalmente, isso exige o armazenamento dos dados em outro formato que atende às necessidades do armazenamento de dados do ambiente, como em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="adb44-153">Typically, this requires storing the data in another form that complies with your environment's data storage needs, such as within a database.</span></span>
